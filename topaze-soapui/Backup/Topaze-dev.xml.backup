<?xml version="1.0" encoding="UTF-8"?>
<con:soapui-project activeEnvironment="Default" name="Topaze - DEV" soapui-version="4.6.4" abortOnError="false" runType="SEQUENTIAL" resourceRoot="" xmlns:con="http://eviware.com/soapui/config">
  <con:settings>
    <con:setting id="com.eviware.soapui.impl.wsdl.actions.iface.tools.soapui.TestRunnerAction@values-local"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Environment" value="Default"/>
  <con:entry key="Global Properties" value=""/>
  <con:entry key="TestSuite" value="Processus - Jet"/>
  <con:entry key="Password" value=""/>
  <con:entry key="soapui-setings.xml Password" value=""/>
  <con:entry key="TestRunner Path" value=""/>
  <con:entry key="Tool Args" value=""/>
  <con:entry key="Ignore Errors" value="false"/>
  <con:entry key="Host:Port" value=""/>
  <con:entry key="WSS Password Type" value=""/>
  <con:entry key="Save Project" value="false"/>
  <con:entry key="Enable UI" value="false"/>
  <con:entry key="System Properties" value=""/>
  <con:entry key="Domain" value=""/>
  <con:entry key="Coverage Report" value="false"/>
  <con:entry key="Export JUnit Results" value="false"/>
  <con:entry key="Open Report" value="false"/>
  <con:entry key="Project Properties" value=""/>
  <con:entry key="Export All" value="false"/>
  <con:entry key="Project Password" value=""/>
  <con:entry key="Report Format(s)" value=""/>
  <con:entry key="TestCase" value="Resiliation Antivirus"/>
  <con:entry key="Print Report" value="false"/>
  <con:entry key="Username" value=""/>
  <con:entry key="Root Folder" value=""/>
  <con:entry key="Save After" value="false"/>
  <con:entry key="Add Settings" value="false"/>
  <con:entry key="Endpoint" value=""/>
  <con:entry key="Select Report Type" value=""/>
</xml-fragment>]]></con:setting>
  <con:setting id="ProjectSettings@hermesConfig">C:\Users\gmassy.ext\.hermes</con:setting></con:settings>
  <con:interface xsi:type="con:RestService" wadlVersion="http://wadl.dev.java.net/2009/02" name="http://10.10.2.52:8080" type="rest" id="5c95b445-9f3c-4bd3-b057-555e75fb5972" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <con:settings/>
    
    <con:definitionCache type="TEXT" rootPart=""/><con:endpoints>
      <con:endpoint>http://10.10.2.52:8080</con:endpoint>
    </con:endpoints>
    <con:resource name="Preparation" path="/contrat-core/contrat/preparer" id="92004666-886d-4622-9cf1-61fb5025cbb5">
      <con:settings/>
      <con:parameters/>
      <con:method name="" method="POST" id="5f02faca-cf2b-455a-b4f7-8d7f7b19f008">
        <con:settings/>
        <con:parameters/>
        <con:representation type="REQUEST">
          <con:mediaType>application/json</con:mediaType>
          <con:params/>
        </con:representation>
        <con:representation type="FAULT">
          <con:mediaType>text/html;charset=utf-8</con:mediaType>
          <con:status>404 400 500</con:status>
          <con:params/>
          <con:element>html</con:element>
        </con:representation>
        <con:representation type="RESPONSE">
          <con:mediaType>application/json</con:mediaType>
          <con:status>200</con:status>
          <con:params/>
          <con:element xmlns:prep="http://10.10.2.52/topaze-contrat/contrat/preparer">prep:Response</con:element>
        </con:representation>
        <con:representation type="FAULT">
          <con:mediaType xsi:nil="true"/>
          <con:status>404</con:status>
          <con:params/>
          <con:element>data</con:element>
        </con:representation>
        <con:representation type="FAULT">
          <con:mediaType xsi:nil="true"/>
          <con:status>404</con:status>
          <con:params/>
          <con:element>data</con:element>
        </con:representation>
        <con:representation type="FAULT">
          <con:mediaType xsi:nil="true"/>
          <con:status>404</con:status>
          <con:params/>
          <con:element>data</con:element>
        </con:representation>
        
        <con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="FAULT"><con:mediaType>application/json</con:mediaType><con:status>500</con:status><con:params/><con:element xmlns:prep="http://10.10.2.52/contrat-core/contrat/preparer">prep:Fault</con:element></con:representation><con:request name="Jet + Option+50 + kit Sat" mediaType="application/json" postQueryString="false" id="7e8cfe53-72a4-4424-beea-8afb9dc13250">
          <con:settings>
            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
          </con:settings>
          <con:endpoint>http://10.10.2.52:8080</con:endpoint>
          <con:request>{
 "user": "test",
 "produits": [
{
      "reference": "jet",
      "numEC" : "1",
      "numeroCommande": "45679",
      "label": "Abonnement jet 10Go",
      "typeProduit": "SERVICE",
      "prix": {
        "periodicite": "1",
        "typeTVA": "R",
        "montant": "30",
        "frais": [
          {
            "montant": "30",
			"titre" : "frais de dossier",
            "typeFrais": "creation"
          }
        ],
        "modePaiement": "SEPA",
        "modeFacturation": "PREMIER_MOIS"
      }
    },
    {
      "reference": "option.plus.50g",
      "numEC" : "2",
      "numECParent": "1",
	  "delaisPreparation": 0,
      "numeroCommande": "45679",
      "label": "Option+ 50Go",
      "typeProduit": "SERVICE",
      "prix": {
        "periodicite": "1",
        "typeTVA": "R",
        "montant": "50",
        "frais": [
          {
            "montant": "50",
            "typeFrais": "resiliation",
			"titre" : "frais de dossier",
            "nombreMois": "12",
            "ordre": "1"
          },
          {
            "montant": "30",
            "typeFrais": "resiliation",
			"titre" : "frais de dossier",
            "ordre": "2"
          }
        ],
        "modePaiement": "CB",
        "modeFacturation": "PREMIER_MOIS"
      }
    },
    {
      "reference": "kit-sat",
      "numEC" : "3",
      "numECParent": "1",
	  "delaisPreparation": 0,
      "numeroCommande": "45679",
      "label": "Kit Satellite Jet",
      "typeProduit": "BIEN",
      "prix": {
        "engagement" : "24",
        "duree" : "48",
        "periodicite" : "3",
        "typeTVA": "R",
        "montant": "30",
        "modePaiement": "SEPA",
        "modeFacturation": "PREMIER_MOIS"
      }
    }
  ]
}</con:request>
          <con:credentials>
            <con:authType>Global HTTP Settings</con:authType>
          </con:credentials>
          <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
          <con:jmsPropertyConfig/>
          <con:parameters/>
        </con:request>
        <con:request name="Antivirus" mediaType="application/json" postQueryString="false" id="7e8cfe53-72a4-4424-beea-8afb9dc13250">
          <con:settings>
            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
          </con:settings>
          <con:endpoint>http://10.10.2.52:8080</con:endpoint>
          <con:request>{
  "user": "test",
  "produits": [
    {
      "reference": "avfw.prestige.s",
      "numEC": "1",
      "numeroCommande": "12345",
      "label": "Jet facture a debut de mois",
      "typeProduit": "SERVICE",
      "prix": {
        "engagement": "24",
        "periodicite": "1",
        "typeTVA": "S",
        "montant": "30",
        "frais": [
          {
            "montant": "30",
            "typeFrais": "creation"
          },
          {
            "montant": "50",
            "typeFrais": "resiliation"
          }
        ],
        "modePaiement": "SEPA",
        "modeFacturation": "DATE_ANNIVERSAIRE"
      }
    }
  ]
}</con:request>
          <con:credentials>
            <con:authType>Global HTTP Settings</con:authType>
          </con:credentials>
          <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
          <con:jmsPropertyConfig/>
          <con:parameters/>
        </con:request>
      </con:method>
    </con:resource>
    <con:resource name="Validation" path="/contrat-core/contrat/{refContrat}/valider" id="2c463ba8-c720-4fb9-94c8-f731d20f05c8">
      <con:settings/>
      <con:parameters>
        <con:parameter>
          <con:name>refContrat</con:name>
          <con:value/>
          <con:style>TEMPLATE</con:style>
          <con:default/>
        </con:parameter>
      </con:parameters>
      <con:method name="" method="POST" id="f0bd7e8d-6638-43ed-95a3-9b1cea53c0ea">
        <con:settings/>
        <con:parameters/>
        <con:representation type="FAULT">
          <con:mediaType>text/html;charset=utf-8</con:mediaType>
          <con:status>404 500 400 405</con:status>
          <con:params/>
          <con:element>html</con:element>
        </con:representation>
        <con:representation type="REQUEST">
          <con:mediaType>application/json</con:mediaType>
          <con:params/>
        </con:representation>
        <con:representation type="RESPONSE">
          <con:mediaType>application/json</con:mediaType>
          <con:status>200</con:status>
          <con:params/>
          <con:element xmlns:val="http://10.10.2.52/topaze-contrat/contrat/eaaec4b5/valider">val:Response</con:element>
        </con:representation>
        <con:representation type="RESPONSE">
          <con:mediaType xsi:nil="true"/>
          <con:status>200</con:status>
          <con:params/>
          <con:element>data</con:element>
        </con:representation>
        <con:representation type="RESPONSE">
          <con:mediaType xsi:nil="true"/>
          <con:status>200</con:status>
          <con:params/>
          <con:element>data</con:element>
        </con:representation>
        <con:representation type="RESPONSE">
          <con:mediaType xsi:nil="true"/>
          <con:status>200</con:status>
          <con:params/>
          <con:element>data</con:element>
        </con:representation>
        <con:representation type="RESPONSE">
          <con:mediaType xsi:nil="true"/>
          <con:status>200</con:status>
          <con:params/>
          <con:element>data</con:element>
        </con:representation>
        <con:representation type="RESPONSE">
          <con:mediaType xsi:nil="true"/>
          <con:status>200</con:status>
          <con:params/>
          <con:element>data</con:element>
        </con:representation>
        <con:representation type="RESPONSE">
          <con:mediaType xsi:nil="true"/>
          <con:status>200</con:status>
          <con:params/>
          <con:element>data</con:element>
        </con:representation>
        <con:representation type="RESPONSE">
          <con:mediaType xsi:nil="true"/>
          <con:status>200</con:status>
          <con:params/>
          <con:element>data</con:element>
        </con:representation>
        <con:representation type="RESPONSE">
          <con:mediaType xsi:nil="true"/>
          <con:status>200</con:status>
          <con:params/>
          <con:element>data</con:element>
        </con:representation>
        <con:representation type="RESPONSE">
          <con:mediaType xsi:nil="true"/>
          <con:status>200</con:status>
          <con:params/>
          <con:element>data</con:element>
        </con:representation>
        <con:representation type="RESPONSE">
          <con:mediaType xsi:nil="true"/>
          <con:status>200</con:status>
          <con:params/>
          <con:element>data</con:element>
        </con:representation>
        <con:representation type="RESPONSE">
          <con:mediaType xsi:nil="true"/>
          <con:status>200</con:status>
          <con:params/>
          <con:element>data</con:element>
        </con:representation>
        <con:representation type="RESPONSE">
          <con:mediaType xsi:nil="true"/>
          <con:status>200</con:status>
          <con:params/>
          <con:element>data</con:element>
        </con:representation>
        <con:representation type="RESPONSE">
          <con:mediaType xsi:nil="true"/>
          <con:status>200</con:status>
          <con:params/>
          <con:element>data</con:element>
        </con:representation>
        <con:representation type="RESPONSE">
          <con:mediaType xsi:nil="true"/>
          <con:status>200</con:status>
          <con:params/>
          <con:element>data</con:element>
        </con:representation>
        <con:representation type="RESPONSE">
          <con:mediaType xsi:nil="true"/>
          <con:status>200</con:status>
          <con:params/>
          <con:element>data</con:element>
        </con:representation>
        <con:representation type="RESPONSE">
          <con:mediaType xsi:nil="true"/>
          <con:status>200</con:status>
          <con:params/>
          <con:element>data</con:element>
        </con:representation>
        <con:representation type="RESPONSE">
          <con:mediaType xsi:nil="true"/>
          <con:status>200</con:status>
          <con:params/>
          <con:element>data</con:element>
        </con:representation>
        <con:representation type="RESPONSE">
          <con:mediaType xsi:nil="true"/>
          <con:status>200</con:status>
          <con:params/>
          <con:element>data</con:element>
        </con:representation>
        <con:representation type="RESPONSE">
          <con:mediaType xsi:nil="true"/>
          <con:status>200</con:status>
          <con:params/>
          <con:element>data</con:element>
        </con:representation>
        <con:representation type="RESPONSE">
          <con:mediaType xsi:nil="true"/>
          <con:status>200</con:status>
          <con:params/>
          <con:element>data</con:element>
        </con:representation>
        <con:representation type="RESPONSE">
          <con:mediaType xsi:nil="true"/>
          <con:status>200</con:status>
          <con:params/>
          <con:element>data</con:element>
        </con:representation>
        <con:representation type="RESPONSE">
          <con:mediaType xsi:nil="true"/>
          <con:status>200</con:status>
          <con:params/>
          <con:element>data</con:element>
        </con:representation>
        <con:representation type="RESPONSE">
          <con:mediaType xsi:nil="true"/>
          <con:status>200</con:status>
          <con:params/>
          <con:element>data</con:element>
        </con:representation>
        <con:representation type="RESPONSE">
          <con:mediaType xsi:nil="true"/>
          <con:status>200</con:status>
          <con:params/>
          <con:element>data</con:element>
        </con:representation>
        <con:representation type="RESPONSE">
          <con:mediaType xsi:nil="true"/>
          <con:status>200</con:status>
          <con:params/>
          <con:element>data</con:element>
        </con:representation>
        <con:representation type="RESPONSE">
          <con:mediaType xsi:nil="true"/>
          <con:status>200</con:status>
          <con:params/>
          <con:element>data</con:element>
        </con:representation>
        <con:representation type="RESPONSE">
          <con:mediaType xsi:nil="true"/>
          <con:status>200</con:status>
          <con:params/>
          <con:element>data</con:element>
        </con:representation>
        <con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="FAULT"><con:mediaType xsi:nil="true"/><con:status>404</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="FAULT"><con:mediaType>application/json</con:mediaType><con:status>500</con:status><con:params/><con:element xmlns:val="http://10.10.2.52/contrat-core/contrat/26a9a044/valider">val:Fault</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:request name="Jet + Option+50 + kit Sat" mediaType="application/json" postQueryString="false" id="45acbbc6-0e68-4a28-9c86-c45d0e31ccb6">
          <con:settings>
            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
          </con:settings>
          <con:endpoint>http://10.10.2.52:8080</con:endpoint>
          <con:request>{
  "user" : "test",
  "idClient": "00003870",
  "idAdrFacturation": "685",
  "paiementInfos": [
    {
      "referenceProduit": "jet",
      "numEC": "1",
      "referenceModePaiement": "R0000012",
      "idAdrLivraison": "adrliv1"
    },
    {
      "referenceProduit": "option.plus.50g",
      "numEC": "2",
      "referenceModePaiement": "R0000012",
      "idAdrLivraison": "adrliv1"
    },
    {
      "referenceProduit": "kit-sat",
      "numEC": "3",
      "referenceModePaiement": "R0000012",
      "idAdrLivraison": "adrliv1"
    }
  ],
  "politiqueValidation": {
    "fraisCreation": "true"
  }
}</con:request>
          <con:credentials>
            <con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType>
          </con:credentials>
          <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
          <con:jmsPropertyConfig/>
          <con:parameters><entry key="refContrat" value="a1b11062" xmlns="http://eviware.com/soapui/config"/></con:parameters>
          <con:parameterOrder>
            <con:entry>refContrat</con:entry>
          </con:parameterOrder>
        </con:request>
        
        <con:request name="Antivirus" mediaType="application/json" postQueryString="false" id="61e5a8b8-9e0b-49d7-a9ba-078986cdcc50">
          <con:settings>
            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
          </con:settings>
          <con:endpoint>http://10.10.2.52:8080</con:endpoint>
          <con:request>{
  "user": "test",
  "idClient": "00003870",
  "idAdrFacturation": "685",
  "paiementInfos": [
    {
      "referenceProduit": "avfw.prestige.s",
      "numEC": "1",
      "referenceModePaiement": "R0000012",
      "idAdrLivraison": "adrliv1"
    }
  ],
  "politiqueValidation": {
    "fraisCreation": "true",
    "checkIsPackagerCreationPossible": "true"
  }
}</con:request>
          <con:credentials>
            <con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType>
          </con:credentials>
          <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
          <con:jmsPropertyConfig/>
          <con:parameters/>
        </con:request>
      </con:method>
    </con:resource>
    <con:resource name="Resiliation" path="/contrat-core/contrat/{refContrat}/resilier" id="331ac544-5d17-41a5-94b3-9af80199bd0e">
      <con:settings/>
      <con:parameters>
        <con:parameter>
          <con:name>refContrat</con:name>
          <con:value>refContrat</con:value>
          <con:style>TEMPLATE</con:style>
          <con:default>refContrat</con:default>
        </con:parameter>
      </con:parameters>
      <con:method name="" method="POST" id="685848e7-80b2-43a9-85ca-4d089a254815">
        <con:settings><con:setting id="RecordResponseRepresentations">true</con:setting></con:settings>
        <con:parameters/>
        <con:representation type="RESPONSE">
          <con:mediaType xsi:nil="true"/>
          <con:status>200</con:status>
          <con:params/>
          <con:element>data</con:element>
        </con:representation>
        <con:representation type="REQUEST">
          <con:mediaType>application/json</con:mediaType>
          <con:params/>
        </con:representation>
        <con:representation type="RESPONSE">
          <con:mediaType>application/json</con:mediaType>
          <con:status>200</con:status>
          <con:params/>
          <con:element xmlns:res="http://10.10.2.52/topaze-contrat/contrat/eaaec4b5/resilier">res:Response</con:element>
        </con:representation>
        <con:representation type="RESPONSE">
          <con:mediaType xsi:nil="true"/>
          <con:status>200</con:status>
          <con:params/>
          <con:element>data</con:element>
        </con:representation>
        <con:representation type="FAULT">
          <con:mediaType>text/html;charset=utf-8</con:mediaType>
          <con:status>400 404</con:status>
          <con:params/>
          <con:element>html</con:element>
        </con:representation>
        <con:representation type="RESPONSE">
          <con:mediaType xsi:nil="true"/>
          <con:status>200</con:status>
          <con:params/>
          <con:element>data</con:element>
        </con:representation>
        <con:representation type="RESPONSE">
          <con:mediaType xsi:nil="true"/>
          <con:status>200</con:status>
          <con:params/>
          <con:element>data</con:element>
        </con:representation>
        <con:representation type="RESPONSE">
          <con:mediaType xsi:nil="true"/>
          <con:status>200</con:status>
          <con:params/>
          <con:element>data</con:element>
        </con:representation>
        <con:representation type="RESPONSE">
          <con:mediaType xsi:nil="true"/>
          <con:status>200</con:status>
          <con:params/>
          <con:element>data</con:element>
        </con:representation>
        <con:representation type="RESPONSE">
          <con:mediaType xsi:nil="true"/>
          <con:status>200</con:status>
          <con:params/>
          <con:element>data</con:element>
        </con:representation>
        <con:representation type="RESPONSE">
          <con:mediaType xsi:nil="true"/>
          <con:status>200</con:status>
          <con:params/>
          <con:element>data</con:element>
        </con:representation>
        <con:representation type="RESPONSE">
          <con:mediaType xsi:nil="true"/>
          <con:status>200</con:status>
          <con:params/>
          <con:element>data</con:element>
        </con:representation>
        <con:representation type="RESPONSE">
          <con:mediaType xsi:nil="true"/>
          <con:status>200</con:status>
          <con:params/>
          <con:element>data</con:element>
        </con:representation>
        <con:representation type="RESPONSE">
          <con:mediaType xsi:nil="true"/>
          <con:status>200</con:status>
          <con:params/>
          <con:element>data</con:element>
        </con:representation>
        <con:representation type="RESPONSE">
          <con:mediaType xsi:nil="true"/>
          <con:status>200</con:status>
          <con:params/>
          <con:element>data</con:element>
        </con:representation>
        <con:representation type="RESPONSE">
          <con:mediaType xsi:nil="true"/>
          <con:status>200</con:status>
          <con:params/>
          <con:element>data</con:element>
        </con:representation>
        <con:representation type="RESPONSE">
          <con:mediaType xsi:nil="true"/>
          <con:status>200</con:status>
          <con:params/>
          <con:element>data</con:element>
        </con:representation>
        <con:representation type="RESPONSE">
          <con:mediaType xsi:nil="true"/>
          <con:status>200</con:status>
          <con:params/>
          <con:element>data</con:element>
        </con:representation>
        <con:representation type="RESPONSE">
          <con:mediaType xsi:nil="true"/>
          <con:status>200</con:status>
          <con:params/>
          <con:element>data</con:element>
        </con:representation>
        <con:representation type="RESPONSE">
          <con:mediaType xsi:nil="true"/>
          <con:status>200</con:status>
          <con:params/>
          <con:element>data</con:element>
        </con:representation>
        <con:representation type="RESPONSE">
          <con:mediaType xsi:nil="true"/>
          <con:status>200</con:status>
          <con:params/>
          <con:element>data</con:element>
        </con:representation>
        <con:representation type="RESPONSE">
          <con:mediaType xsi:nil="true"/>
          <con:status>200</con:status>
          <con:params/>
          <con:element>data</con:element>
        </con:representation>
        <con:representation type="RESPONSE">
          <con:mediaType xsi:nil="true"/>
          <con:status>200</con:status>
          <con:params/>
          <con:element>data</con:element>
        </con:representation>
        <con:representation type="RESPONSE">
          <con:mediaType xsi:nil="true"/>
          <con:status>200</con:status>
          <con:params/>
          <con:element>data</con:element>
        </con:representation>
        <con:representation type="RESPONSE">
          <con:mediaType xsi:nil="true"/>
          <con:status>200</con:status>
          <con:params/>
          <con:element>data</con:element>
        </con:representation>
        <con:representation type="RESPONSE">
          <con:mediaType xsi:nil="true"/>
          <con:status>200</con:status>
          <con:params/>
          <con:element>data</con:element>
        </con:representation>
        <con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="FAULT"><con:mediaType>application/json</con:mediaType><con:status>500</con:status><con:params/><con:element xmlns:res="http://10.10.2.52/contrat-core/contrat/e0b01ce5/resilier">res:Fault</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:request name="Resiliation Totale" mediaType="application/json" postQueryString="false" id="39c3f79f-e72c-4bd5-acfe-614a9d4e5b15">
          <con:settings>
            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
          </con:settings>
          <con:endpoint>http://10.10.2.52:8080</con:endpoint>
          <con:request>{
  "user": "test",
  "politiqueResiliation": {
    "fraisResiliation": "true",
    "montantResiliation": "50",
    "typeResiliation": "RIC",
    "remboursement": "true",
    "penalite": "true"
  }
}</con:request>
          <con:credentials>
            <con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType>
          </con:credentials>
          <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
          <con:jmsPropertyConfig/>
          <con:parameters/>
        </con:request>
        <con:request name="Demo - Resilier" mediaType="application/json" postQueryString="false" id="d0f5d2ba-afa1-4666-b4f3-d1c5935d6902">
          <con:settings>
            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
          </con:settings>
          <con:endpoint>http://10.10.2.52:8080</con:endpoint>
          <con:request>{
  "user": "test",
  "politiqueResiliation": {
    "fraisResiliation": "true",
    "montantResiliation": "50",
    "typeResiliation": "RIC",
    "remboursement": "true",
    "penalite": "true"
  }
}</con:request>
          <con:credentials>
            <con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType>
          </con:credentials>
          <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
          <con:jmsPropertyConfig/>
          <con:parameters/>
        </con:request>
      </con:method>
    </con:resource>
    <con:resource name="Resiliation Partielle" path="/contrat-core/contrat/{refContrat}/{numEC}/resilier" id="22ca295f-aa22-4b68-8da6-492506d65cfe">
      <con:settings/>
      <con:parameters>
        <con:parameter>
          <con:name>refContrat</con:name>
          <con:value>refContrat</con:value>
          <con:style>TEMPLATE</con:style>
          <con:default>refContrat</con:default>
        </con:parameter>
        <con:parameter>
          <con:name>numEC</con:name>
          <con:value>numEC</con:value>
          <con:style>TEMPLATE</con:style>
          <con:default>numEC</con:default>
        </con:parameter>
      </con:parameters>
      <con:method name="" method="POST" id="fd3b6a16-dc52-4c78-8d23-8a338c498105">
        <con:settings/>
        <con:parameters/>
        <con:representation type="FAULT">
          <con:mediaType>text/html;charset=utf-8</con:mediaType>
          <con:status>404</con:status>
          <con:params/>
          <con:element>html</con:element>
        </con:representation>
        <con:representation type="REQUEST">
          <con:mediaType>application/json</con:mediaType>
          <con:params/>
        </con:representation>
        <con:representation type="RESPONSE">
          <con:mediaType>application/json</con:mediaType>
          <con:status>200</con:status>
          <con:params/>
          <con:element xmlns:res="http://10.10.2.52/topaze-contrat/contrat/d73dfefb/partiel/kit-sat/resilier">
          res:Response</con:element>
        </con:representation>
        <con:representation type="RESPONSE">
          <con:mediaType xsi:nil="true"/>
          <con:status>200</con:status>
          <con:params/>
          <con:element>data</con:element>
        </con:representation>
        <con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="FAULT"><con:mediaType>application/json</con:mediaType><con:status>500</con:status><con:params/><con:element xmlns:res="http://10.10.2.52/contrat-core/contrat/00000206/2/resilier">res:Fault</con:element></con:representation><con:request name="Resiliation Partielle" mediaType="application/json" postQueryString="false" id="8eceb09f-8db3-49fc-93fc-3b0998c3f17f">
          <con:settings>
            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
          </con:settings>
          <con:endpoint>http://10.10.2.52:8080</con:endpoint>
          <con:request>{
  "user": "test",
  "politiqueResiliation": {
    "fraisResiliation": "true",
    "montantResiliation": "50",
    "typeResiliation": "RIC",
    "remboursement": "true",
    "penalite": "true"
  }
}</con:request>
          <con:credentials>
            <con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType>
          </con:credentials>
          <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
          <con:jmsPropertyConfig/>
          <con:parameters>
  <con:entry key="refContrat" value="d73dfefb"/>
  <con:entry key="numEC" value="kit-sat"/>
</con:parameters>
        <con:parameterOrder><con:entry>refContrat</con:entry><con:entry>numEC</con:entry></con:parameterOrder></con:request>
      </con:method>
    </con:resource>
    <con:resource name="Reduction" path="/contrat-core/contrat/{refContrat}/reduction/ajouter" id="3212138a-794e-4580-af33-7d9237ae2ec7">
      <con:settings/>
      <con:parameters>
        <con:parameter>
          <con:name>refContrat</con:name>
          <con:value>refContrat</con:value>
          <con:style>TEMPLATE</con:style>
          <con:default>refContrat</con:default>
        </con:parameter>
      </con:parameters>
      <con:method name="Ajouter Sur Contrat" method="POST" id="792d3f96-5a3e-4792-8693-4ef8f6bbba0a">
        <con:settings/>
        <con:parameters/>
        <con:representation type="REQUEST">
          <con:mediaType>application/json</con:mediaType>
          <con:params/>
        </con:representation>
        <con:representation type="FAULT">
          <con:mediaType>text/html;charset=utf-8</con:mediaType>
          <con:status>400 500 404</con:status>
          <con:params/>
          <con:element>html</con:element>
        </con:representation>
        <con:representation type="RESPONSE">
          <con:mediaType>application/json</con:mediaType>
          <con:status>200</con:status>
          <con:params/>
          <con:element xmlns:ajo="http://10.10.2.52/contrat-core/contrat/66b3d739/reduction/ajouter">ajo:Response</con:element>
        </con:representation>
        <con:representation type="RESPONSE">
          <con:mediaType xsi:nil="true"/>
          <con:status>200</con:status>
          <con:params/>
          <con:element>data</con:element>
        </con:representation>
        <con:representation type="RESPONSE">
          <con:mediaType xsi:nil="true"/>
          <con:status>200</con:status>
          <con:params/>
          <con:element>data</con:element>
        </con:representation>
        <con:representation type="RESPONSE">
          <con:mediaType xsi:nil="true"/>
          <con:status>200</con:status>
          <con:params/>
          <con:element>data</con:element>
        </con:representation>
        <con:representation type="RESPONSE">
          <con:mediaType xsi:nil="true"/>
          <con:status>200</con:status>
          <con:params/>
          <con:element>data</con:element>
        </con:representation>
        <con:representation type="RESPONSE">
          <con:mediaType xsi:nil="true"/>
          <con:status>200</con:status>
          <con:params/>
          <con:element>data</con:element>
        </con:representation>
        <con:representation type="RESPONSE">
          <con:mediaType xsi:nil="true"/>
          <con:status>200</con:status>
          <con:params/>
          <con:element>data</con:element>
        </con:representation>
        <con:representation type="RESPONSE">
          <con:mediaType xsi:nil="true"/>
          <con:status>200</con:status>
          <con:params/>
          <con:element>data</con:element>
        </con:representation>
        <con:representation type="RESPONSE">
          <con:mediaType xsi:nil="true"/>
          <con:status>200</con:status>
          <con:params/>
          <con:element>data</con:element>
        </con:representation>
        <con:representation type="RESPONSE">
          <con:mediaType xsi:nil="true"/>
          <con:status>200</con:status>
          <con:params/>
          <con:element>data</con:element>
        </con:representation>
        <con:representation type="RESPONSE">
          <con:mediaType xsi:nil="true"/>
          <con:status>200</con:status>
          <con:params/>
          <con:element>data</con:element>
        </con:representation>
        <con:representation type="RESPONSE">
          <con:mediaType xsi:nil="true"/>
          <con:status>200</con:status>
          <con:params/>
          <con:element>data</con:element>
        </con:representation>
        <con:representation type="RESPONSE">
          <con:mediaType xsi:nil="true"/>
          <con:status>200</con:status>
          <con:params/>
          <con:element>data</con:element>
        </con:representation>
        <con:representation type="RESPONSE">
          <con:mediaType xsi:nil="true"/>
          <con:status>200</con:status>
          <con:params/>
          <con:element>data</con:element>
        </con:representation>
        <con:representation type="RESPONSE">
          <con:mediaType xsi:nil="true"/>
          <con:status>200</con:status>
          <con:params/>
          <con:element>data</con:element>
        </con:representation>
        <con:representation type="RESPONSE">
          <con:mediaType xsi:nil="true"/>
          <con:status>200</con:status>
          <con:params/>
          <con:element>data</con:element>
        </con:representation>
        <con:representation type="RESPONSE">
          <con:mediaType xsi:nil="true"/>
          <con:status>200</con:status>
          <con:params/>
          <con:element>data</con:element>
        </con:representation>
        <con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="FAULT"><con:mediaType>application/json</con:mediaType><con:status>500</con:status><con:params/><con:element xmlns:ajo="http://10.10.2.52/contrat-core/contrat/00000059/reduction/ajouter">ajo:Fault</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:request name="Creer Reduction 5€ sur contrat" mediaType="application/json" postQueryString="false" id="5a84cfa0-6f4d-4d77-869b-55bdf18fe011">
          <con:settings>
            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
          </con:settings>
          <con:endpoint>http://10.10.2.52:8080</con:endpoint>
          <con:request>{ "typeReduction" : "CONTRAT", "valeur" : "5",
          "typeValeur" : "EURO" }</con:request>
          <con:credentials>
            <con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType>
          </con:credentials>
          <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
          <con:jmsPropertyConfig/>
          <con:parameters>
            <entry key="refContrat" value="66b3d739" xmlns="http://eviware.com/soapui/config"/>
          </con:parameters>
        </con:request>
        <con:request name="Creer Reduction 5€ sur contrat utilisable 3 fois" mediaType="application/json" postQueryString="false" id="5307c583-409c-450d-9a9c-3edfaaef0e30">
          <con:settings>
            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
          </con:settings>
          <con:endpoint>http://10.10.2.52:8080</con:endpoint>
          <con:request>{ "typeReduction" : "CONTRAT", "valeur" : "5",
          "typeValeur" : "EURO", "nbUtilisationMax" : "3" }</con:request>
          <con:credentials>
            <con:authType>Global HTTP Settings</con:authType>
          </con:credentials>
          <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
          <con:jmsPropertyConfig/>
          <con:parameters>
            <entry key="refContrat" value="66b3d739" xmlns="http://eviware.com/soapui/config"/>
          </con:parameters>
        </con:request>
        <con:request name="Creer Reduction 5€ sur contrat utilisable pendant une période" mediaType="application/json" postQueryString="false" id="ae2ef9bb-b9dd-450c-92f1-78593147b82f">
          <con:settings>
            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
          </con:settings>
          <con:endpoint>http://10.10.2.52:8080</con:endpoint>
          <con:request>{ "typeReduction" : "CONTRAT", "valeur" : "5",
          "typeValeur" : "EURO", "dateDebut" : "2014-08-01", "dateFin" :
          "2014-09-01" }</con:request>
          <con:credentials>
            <con:authType>Global HTTP Settings</con:authType>
          </con:credentials>
          <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
          <con:jmsPropertyConfig/>
          <con:parameters>
            <entry key="refContrat" value="3447eaa5" xmlns="http://eviware.com/soapui/config"/>
          </con:parameters>
        </con:request>
        <con:request name="Creer Reduction 5% sur contrat pendant une période" mediaType="application/json" postQueryString="false" id="894d2edf-a858-4c40-9ec2-cae46fb7346b">
          <con:settings>
            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
          </con:settings>
          <con:endpoint>http://10.10.2.52:8080</con:endpoint>
          <con:request>{ "typeReduction" : "CONTRAT", "valeur" : "5",
          "typeValeur" : "POURCENTAGE", "dateDebut" : "2014-08-01", "dateFin" :
          "2014-09-01" }</con:request>
          <con:credentials>
            <con:authType>Global HTTP Settings</con:authType>
          </con:credentials>
          <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
          <con:jmsPropertyConfig/>
          <con:parameters>
            <entry key="refContrat" value="2f1cf686" xmlns="http://eviware.com/soapui/config"/>
          </con:parameters>
        </con:request>
        <con:request name="Creer Reduction 5% sur contrat utilisable 2 fois" mediaType="application/json" postQueryString="false" id="a4321c13-49f7-4627-bc6f-74c006dd2678">
          <con:settings>
            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
          </con:settings>
          <con:endpoint>http://10.10.2.52:8080</con:endpoint>
          <con:request>{ "typeReduction" : "CONTRAT", "valeur" : "5",
          "typeValeur" : "POURCENTAGE", "nbUtilisationMax" : "3" }</con:request>
          <con:credentials>
            <con:authType>Global HTTP Settings</con:authType>
          </con:credentials>
          <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
          <con:jmsPropertyConfig/>
          <con:parameters>
            <entry key="refContrat" value="2f1cf686" xmlns="http://eviware.com/soapui/config"/>
          </con:parameters>
        </con:request>
        <con:request name="Creer Reduction 5% sur contrat" mediaType="application/json" postQueryString="false" id="fc77e092-8ebb-42e0-87c8-865abd497b56">
          <con:settings>
            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
          </con:settings>
          <con:endpoint>http://10.10.2.52:8080</con:endpoint>
          <con:request>{ "typeReduction" : "CONTRAT", "valeur" : "5",
          "typeValeur" : "POURCENTAGE" }</con:request>
          <con:credentials>
            <con:authType>Global HTTP Settings</con:authType>
          </con:credentials>
          <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
          <con:jmsPropertyConfig/>
          <con:parameters>
            <entry key="refContrat" value="2f1cf686" xmlns="http://eviware.com/soapui/config"/>
          </con:parameters>
        </con:request>
        
        
        
        <con:request name="Creer Reduction 1 mois gratuit sur contrat" mediaType="application/json" postQueryString="false" id="5a84cfa0-6f4d-4d77-869b-55bdf18fe011">
          <con:settings>
            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
          </con:settings>
          <con:endpoint>http://10.10.2.52:8080</con:endpoint>
          <con:request>{ "typeReduction" : "CONTRAT", "typeValeur" : "MOIS",
          "nbUtilisationMax" : "1", "valeur" : "1" }</con:request>
          <con:credentials>
            <con:authType>Global HTTP Settings</con:authType>
          </con:credentials>
          <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
          <con:jmsPropertyConfig/>
          <con:parameters>
            <entry key="refContrat" value="053728b9" xmlns="http://eviware.com/soapui/config"/>
          </con:parameters>
        </con:request>
        <con:request name="Creer Reduction 3 factures gratuites pour une période de 1 mois" mediaType="application/json" postQueryString="false" id="5a84cfa0-6f4d-4d77-869b-55bdf18fe011">
          <con:settings>
            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
          </con:settings>
          <con:endpoint>http://10.10.2.52:8080</con:endpoint>
          <con:request>{ "typeReduction" : "CONTRAT", "typeValeur" : "MOIS",
          "nbUtilisationMax" : "3", "valeur" : "1" }</con:request>
          <con:credentials>
            <con:authType>Global HTTP Settings</con:authType>
          </con:credentials>
          <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
          <con:jmsPropertyConfig/>
          <con:parameters>
            <entry key="refContrat" value="053728b9" xmlns="http://eviware.com/soapui/config"/>
          </con:parameters>
        </con:request>
        <con:request name="Creer Reduction 1 facture gratuite pour une période de 3 mois" mediaType="application/json" postQueryString="false" id="5a84cfa0-6f4d-4d77-869b-55bdf18fe011">
          <con:settings>
            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
          </con:settings>
          <con:endpoint>http://10.10.2.52:8080</con:endpoint>
          <con:request>{ "typeReduction" : "CONTRAT", "typeValeur" : "MOIS",
          "nbUtilisationMax" : "1", "valeur" : "3" }</con:request>
          <con:credentials>
            <con:authType>Global HTTP Settings</con:authType>
          </con:credentials>
          <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
          <con:jmsPropertyConfig/>
          <con:parameters>
            <entry key="refContrat" value="053728b9" xmlns="http://eviware.com/soapui/config"/>
          </con:parameters>
        </con:request>
      </con:method>
    <con:method name="Ajouter Sur Frais" method="POST" id="792d3f96-5a3e-4792-8693-4ef8f6bbba0a">
        <con:settings/>
        <con:parameters/>
        <con:representation type="REQUEST">
          <con:mediaType>application/json</con:mediaType>
          <con:params/>
        </con:representation>
        <con:representation type="FAULT">
          <con:mediaType>text/html;charset=utf-8</con:mediaType>
          <con:status>400 500 404</con:status>
          <con:params/>
          <con:element>html</con:element>
        </con:representation>
        <con:representation type="RESPONSE">
          <con:mediaType>application/json</con:mediaType>
          <con:status>200</con:status>
          <con:params/>
          <con:element xmlns:ajo="http://10.10.2.52/contrat-core/contrat/66b3d739/reduction/ajouter">ajo:Response</con:element>
        </con:representation>
        <con:representation type="RESPONSE">
          <con:mediaType xsi:nil="true"/>
          <con:status>200</con:status>
          <con:params/>
          <con:element>data</con:element>
        </con:representation>
        <con:representation type="RESPONSE">
          <con:mediaType xsi:nil="true"/>
          <con:status>200</con:status>
          <con:params/>
          <con:element>data</con:element>
        </con:representation>
        <con:representation type="RESPONSE">
          <con:mediaType xsi:nil="true"/>
          <con:status>200</con:status>
          <con:params/>
          <con:element>data</con:element>
        </con:representation>
        <con:representation type="RESPONSE">
          <con:mediaType xsi:nil="true"/>
          <con:status>200</con:status>
          <con:params/>
          <con:element>data</con:element>
        </con:representation>
        <con:representation type="RESPONSE">
          <con:mediaType xsi:nil="true"/>
          <con:status>200</con:status>
          <con:params/>
          <con:element>data</con:element>
        </con:representation>
        <con:representation type="RESPONSE">
          <con:mediaType xsi:nil="true"/>
          <con:status>200</con:status>
          <con:params/>
          <con:element>data</con:element>
        </con:representation>
        <con:representation type="RESPONSE">
          <con:mediaType xsi:nil="true"/>
          <con:status>200</con:status>
          <con:params/>
          <con:element>data</con:element>
        </con:representation>
        <con:representation type="RESPONSE">
          <con:mediaType xsi:nil="true"/>
          <con:status>200</con:status>
          <con:params/>
          <con:element>data</con:element>
        </con:representation>
        <con:representation type="RESPONSE">
          <con:mediaType xsi:nil="true"/>
          <con:status>200</con:status>
          <con:params/>
          <con:element>data</con:element>
        </con:representation>
        <con:representation type="RESPONSE">
          <con:mediaType xsi:nil="true"/>
          <con:status>200</con:status>
          <con:params/>
          <con:element>data</con:element>
        </con:representation>
        <con:representation type="RESPONSE">
          <con:mediaType xsi:nil="true"/>
          <con:status>200</con:status>
          <con:params/>
          <con:element>data</con:element>
        </con:representation>
        <con:representation type="RESPONSE">
          <con:mediaType xsi:nil="true"/>
          <con:status>200</con:status>
          <con:params/>
          <con:element>data</con:element>
        </con:representation>
        <con:representation type="RESPONSE">
          <con:mediaType xsi:nil="true"/>
          <con:status>200</con:status>
          <con:params/>
          <con:element>data</con:element>
        </con:representation>
        <con:representation type="RESPONSE">
          <con:mediaType xsi:nil="true"/>
          <con:status>200</con:status>
          <con:params/>
          <con:element>data</con:element>
        </con:representation>
        <con:representation type="RESPONSE">
          <con:mediaType xsi:nil="true"/>
          <con:status>200</con:status>
          <con:params/>
          <con:element>data</con:element>
        </con:representation>
        <con:representation type="RESPONSE">
          <con:mediaType xsi:nil="true"/>
          <con:status>200</con:status>
          <con:params/>
          <con:element>data</con:element>
        </con:representation>
        
        
        
        
        
        
        <con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:request name="Creer Réduction Frais de création" mediaType="application/json" postQueryString="false" id="94da1623-685a-48f6-8aaf-4b3a4e9be482">
          <con:settings>
            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
          </con:settings>
          <con:endpoint>http://10.10.2.52:8080</con:endpoint>
          <con:request>{
  "user" : "test",
  "reduction": {
    "typeReduction": "FRAIS",
    "valeur": "100",
    "typeValeur": "POURCENTAGE",
    "typeFrais": "CREATION"
  }
}</con:request>
          <con:credentials>
            <con:authType>Global HTTP Settings</con:authType>
          </con:credentials>
          <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
          <con:jmsPropertyConfig/>
          <con:parameters><entry key="refContrat" value="f5795759" xmlns="http://eviware.com/soapui/config"/></con:parameters>
        </con:request>
        <con:request name="Creer Réduction Frais de résiliation" mediaType="application/json" postQueryString="false" id="94da1623-685a-48f6-8aaf-4b3a4e9be482">
          <con:settings>
            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
          </con:settings>
          <con:endpoint>http://10.10.2.52:8080</con:endpoint>
          <con:request>{
  "user": "test",
  "reduction" : {
    "typeReduction": "FRAIS",
    "typeFrais": "RESILIATION",
    "valeur": "100",
    "typeValeur": "POURCENTAGE"
  }
}</con:request>
          <con:credentials>
            <con:authType>Global HTTP Settings</con:authType>
          </con:credentials>
          <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
          <con:jmsPropertyConfig/>
          <con:parameters><entry key="refContrat" value="f5795759" xmlns="http://eviware.com/soapui/config"/></con:parameters>
        </con:request>
        <con:request name="Creer Réduction Frais de migration" mediaType="application/json" postQueryString="false" id="94da1623-685a-48f6-8aaf-4b3a4e9be482">
          <con:settings>
            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
          </con:settings>
          <con:endpoint>http://10.10.2.52:8080</con:endpoint>
          <con:request>{
  "user": "test",
  "reduction" : {
    "typeReduction": "FRAIS",
    "typeFrais": "MIGRATION",
    "valeur": "100",
    "typeValeur": "POURCENTAGE"
  }
}</con:request>
          <con:credentials>
            <con:authType>Global HTTP Settings</con:authType>
          </con:credentials>
          <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
          <con:jmsPropertyConfig/>
          <con:parameters><entry key="refContrat" value="f5795759" xmlns="http://eviware.com/soapui/config"/></con:parameters>
        </con:request>
        
        
        
      </con:method></con:resource>
  <con:resource name="Migrer" path="/contrat-core/contrat/{refContrat}/migrer" id="af6dfac1-bb5c-4091-a3bd-80c9e69f41e0"><con:settings/><con:parameters><con:parameter><con:name>refContrat</con:name><con:value>1ad93070</con:value><con:style>TEMPLATE</con:style><con:default>1ad93070</con:default></con:parameter></con:parameters><con:method name="" method="POST" id="3e1f876f-a540-401c-ab68-fa5a50b5240f"><con:settings/><con:parameters/><con:representation type="REQUEST"><con:mediaType>application/json</con:mediaType><con:params/></con:representation><con:representation type="FAULT"><con:mediaType>text/html;charset=utf-8</con:mediaType><con:status>400 500</con:status><con:params/><con:element>html</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:mig="http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer">mig:Response</con:element></con:representation><con:representation type="FAULT"><con:mediaType xsi:nil="true"/><con:status>404</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="FAULT"><con:mediaType>application/json</con:mediaType><con:status>500</con:status><con:params/><con:element xmlns:mig="http://10.10.2.52/contrat-core/contrat/7e1975b8/migrer">mig:Fault</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:request name="Jet 10 vers Jet 20" mediaType="application/json" postQueryString="false" id="cc69663c-317c-41fa-b787-a6ae098da10d"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.10.2.52:8080</con:endpoint><con:request>{
  "user": "test",
  "politiqueMigration": {
    "fraisMigration": "30",
    "fraisResiliation": true,
	"montantResiliation": "50",
    "remboursement": true,
	"montantRemboursement": "50",
    "fraisCreation": true,
    "penalite": false,
	
    
  },
  "produitsMigration": [
    {
	  "numEC": 1,
	  "referenceGammeSource": "jet",
      "referenceProduitSource": "sat.jet.10",
      "referenceGammeDestination": "jet",
	  "referenceProduitDestination": "sat.jet.20",
	  "label": "Abonnement Jet 10Go",
	  "numeroCommande": "Order_migration_1",
      "typeProduit": "SERVICE",
      "prix": {
        "periodicite": 1,
        "montant": "30",
		"typeTVA": "R",
        "frais": [
          {
            "montant": "30",
            "nombreMois": 0,
            "ordre": 0,
            "titre": "Frais d'ouverture de dossier",
            "typeFrais": "CREATION"
          }
        ],
        "modeFacturation": "PREMIER_MOIS"
      },
	  "referenceDePaiement": "R0000012",
	  "modePaiement": "SEPA"
    },
	{
	  "numEC": 2,
      "numECParent": 1,
	  "referenceGammeSource": "jet",
      "referenceProduitSource": "option.plus.50g",
      "referenceGammeDestination": "jet",
	  "referenceProduitDestination": "option.plus.50g",
	  "label": "Option+ 50Go",
	  "numeroCommande": "Order_migration_1",
      "typeProduit": "SERVICE",
      "prix": {
        "periodicite": 1,
        "montant": "5",
		"typeTVA": "R",
        "modeFacturation": "PREMIER_MOIS"
      },
	  "referenceDePaiement": "R0000012",
	  "modePaiement": "SEPA"
    }
  ] 
}</con:request><con:credentials><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="refContrat" value="5df612fd" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refContrat</con:entry></con:parameterOrder></con:request><con:request name="Option+.50 vers Option+.20" mediaType="application/json" postQueryString="false" id="ac530e2a-c468-4724-a971-394b6952f45d"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.10.2.52:8080</con:endpoint><con:request>{
  "user": "test",
  "politiqueMigration": {
    "fraisMigration": "30",
    "fraisResiliation": true,
    "montantResiliation": "50",
    "remboursement": true,
    "montantRemboursement": "50",
    "fraisCreation": true,
    "penalite": false,
    
    
  },
  "produitsMigration": [
    {
      "numEC": 1,
      "referenceGammeSource": "jet",
      "referenceProduitSource": "sat.jet.10",
      "referenceGammeDestination": "jet",
      "referenceProduitDestination": "sat.jet.10",
      "label": "Abonnement Jet 10Go",
      "numeroCommande": "Order_migration_1",
      "typeProduit": "SERVICE",
      "prix": {
        "periodicite": 1,
        "montant": "30",
        "typeTVA": "R",
        "frais": [
          {
            "montant": "30",
            "titre": "Frais d'ouverture de dossier",
            "typeFrais": "CREATION"
          }
        ],
        "modeFacturation": "PREMIER_MOIS"
      },
	  "referenceDePaiement": "R0000012",
	  "modePaiement": "SEPA"
    },
    {
      "numEC": 2,
      "numECParent": 1,
      "referenceGammeSource": "jet",
      "referenceProduitSource": "option.plus.50g",
      "referenceGammeDestination": "jet",
      "referenceProduitDestination": "option.plus.20g",
      "label": "Option+ 20Go",
      "numeroCommande": "Order_migration_1",
      "typeProduit": "SERVICE",
      "prix": {
        "periodicite": 1,
        "montant": "5",
        "typeTVA": "R",
        "modeFacturation": "PREMIER_MOIS"
      },
	  "referenceDePaiement": "R0000012",
	  "modePaiement": "SEPA"
    }
  ]
}</con:request><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="refContrat" value="a1b11062" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refContrat</con:entry></con:parameterOrder></con:request><con:request name="Jet 10 vers Max 20" mediaType="application/json" postQueryString="false" id="d9281de5-edcc-48c6-8439-dee7c3e3d44a"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.10.2.52:8080</con:endpoint><con:request>{
  "user": "test",
  "politiqueMigration": {
    "fraisMigration": "30",
    "fraisResiliation": true,
	"montantResiliation": "50",
    "remboursement": true,
	"montantRemboursement": "50",
    "fraisCreation": true,
    "penalite": false,
	
    
  },
  "produitsMigration": [
    {
	  "numEC": 1,
	  "referenceGammeSource": "jet",
      "referenceProduitSource": "sat.jet.10",
      "referenceGammeDestination": "max",
	  "referenceProduitDestination": "sat.max.20",
	  "label": "Abonnement Max 20Go",
	  "numeroCommande": "Order_migration_1",
      "typeProduit": "SERVICE",
      "prix": {
        "periodicite": 1,
        "montant": "30",
		"typeTVA": "R",
        "frais": [
          {
            "montant": "30",
            "nombreMois": 0,
            "ordre": 0,
            "titre": "Frais d'ouverture de dossier",
            "typeFrais": "CREATION"
          }
        ],
        "modeFacturation": "PREMIER_MOIS"
      },
	  "referenceDePaiement": "R0000012",
	  "modePaiement": "SEPA"
    },
	{
	  "numEC": 2,
      "numECParent": 1,
	  "referenceGammeSource": "jet",
      "referenceProduitSource": "option.plus.50g",
      "referenceGammeDestination": "jet",
	  "referenceProduitDestination": "option.plus.50g",
	  "label": "Option+ 50Go",
	  "numeroCommande": "Order_migration_1",
      "typeProduit": "SERVICE",
      "prix": {
        "periodicite": 1,
        "montant": "5",
		"typeTVA": "R",
        "modeFacturation": "PREMIER_MOIS"
      },
	  "referenceDePaiement": "R0000012",
	  "modePaiement": "SEPA"
    }
  ] 
}</con:request><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="refContrat" value="5df612fd" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refContrat</con:entry></con:parameterOrder></con:request><con:request name="Jet 10 vers Jet 20 dans le futur" mediaType="application/json" postQueryString="false" id="d1c95e3d-92b2-4b37-a122-a9e87f235b3b"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.10.2.52:8080</con:endpoint><con:request>{
  "user": "test",
  "politiqueMigration": {
	"dateAction" : "2015-01-01",
    "fraisMigration": "30",
    "fraisResiliation": true,
    "remboursement": true,
    "fraisCreation": true,
    "penalite": true,
    "reductionAncienne": true
  },
  "produitsMigration": [
    {
      "numEC": 1,
      "referenceGammeSource": "jet",
      "referenceProduitSource": "sat.jet.10",
      "referenceGammeDestination": "jet",
	  "referenceProduitDestination": "sat.jet.20",
	  "label": "Abonnement Jet 20Go",
      "numeroCommande": "Order_migration_1",
      "typeProduit": "SERVICE",
      "prix": {
        "periodicite": 1,
        "montant": "30",
        "typeTVA": "R",
        "frais": [
          {
            "montant": "30",
            "titre": "Frais d'ouverture de dossier",
            "typeFrais": "CREATION"
          }
        ],
        "modeFacturation": "PREMIER_MOIS"
      },
	  "referenceDePaiement": "R0000012",
	  "modePaiement": "SEPA"
    },
    {
      "numEC": 2,
      "numECParent": 1,
      "referenceGammeSource": "jet",
      "referenceProduitSource": "option.plus.50g",
      "referenceGammeDestination": "jet",
      "referenceProduitDestination": "option.plus.50g",
      "label": "Option+ 50Go",
      "numeroCommande": "Order_migration_1",
      "typeProduit": "SERVICE",
      "prix": {
        "periodicite": 1,
        "montant": "50",
        "typeTVA": "R",
        "modeFacturation": "PREMIER_MOIS"
      },
	  "referenceDePaiement": "R0000012",
	  "modePaiement": "SEPA"
    },
    {
      "numEC": 3,
      "numECParent": 1,
      "referenceGammeSource": "jet",
      "referenceProduitSource": "kit-sat",
      "referenceGammeDestination": "jet",
      "referenceProduitDestination": "kit-sat",
      "label": "Kit Satellite",
      "numeroCommande": "Order_migration_1",
      "typeProduit": "BIEN",
      "prix": {
        "engagement": "24",
        "duree": "48",
        "periodicite": "1",
        "typeTVA": "R",
        "montant": "10",
        "modeFacturation": "PREMIER_MOIS"
      },
	  "modePaiement": "SEPA",
      "referenceDePaiement": "R0000012"
    }
  ]
}</con:request><con:originalUri>http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer</con:originalUri><con:credentials><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="refContrat" value="5df612fd" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refContrat</con:entry></con:parameterOrder></con:request><con:request name="Jet 10 vers Jet 10" mediaType="application/json" postQueryString="false" id="cc69663c-317c-41fa-b787-a6ae098da10d"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.10.2.52:8080</con:endpoint><con:request>{
  "user": "test",
  "politiqueMigration": {
    "fraisMigration": "0",
    "fraisResiliation": true,
    "remboursement": true,
    "fraisCreation": true,
    "penalite": true,
    "reductionAncienne": true
  },
  "produitsMigration": [
    {
      "numEC": 1,
      "referenceGammeSource": "jet",
      "referenceProduitSource": "sat.jet.10",
      "referenceGammeDestination": "jet",
	  "referenceProduitDestination": "sat.jet.10",
	  "label": "Abonnement Jet 10Go",
      "numeroCommande": "Order_migration_1",
      "typeProduit": "SERVICE",
      "prix": {
        "periodicite": 1,
        "montant": "30",
        "typeTVA": "R",
        "frais": [
          {
            "montant": "30",
            "titre": "Frais d'ouverture de dossier",
            "typeFrais": "CREATION"
          }
        ],
        "modeFacturation": "PREMIER_MOIS"
      },
	  "referenceDePaiement": "R0000012",
	  "modePaiement": "SEPA"
    },
    {
      "numEC": 2,
      "numECParent": 1,
      "referenceGammeSource": "jet",
      "referenceProduitSource": "option.plus.50g",
      "referenceGammeDestination": "jet",
      "referenceProduitDestination": "option.plus.50g",
      "label": "Option+ 50Go",
      "numeroCommande": "Order_migration_1",
      "typeProduit": "SERVICE",
      "prix": {
        "periodicite": 1,
        "montant": "50",
        "typeTVA": "R",
        "modeFacturation": "PREMIER_MOIS"
      },
	  "referenceDePaiement": "R0000012",
	  "modePaiement": "SEPA"
    },
    {
      "numEC": 3,
      "numECParent": 1,
      "referenceGammeSource": "jet",
      "referenceProduitSource": "kit-sat",
      "referenceGammeDestination": "jet",
      "referenceProduitDestination": "kit-sat",
      "label": "Kit Satellite",
      "numeroCommande": "Order_migration_1",
      "typeProduit": "BIEN",
      "prix": {
        "engagement": "24",
        "duree": "48",
        "periodicite": "1",
        "typeTVA": "R",
        "montant": "10",
        "modeFacturation": "PREMIER_MOIS"
      },
	  "modePaiement": "SEPA",
      "referenceDePaiement": "R0000012",
    }
  ]
}</con:request><con:originalUri>http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer</con:originalUri><con:credentials><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="refContrat" value="5df612fd" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refContrat</con:entry></con:parameterOrder></con:request></con:method></con:resource></con:interface>
  <con:testSuite name="Usefull Methods" id="a6a4b7cf-0f4a-4c72-9c2b-5e382e73120c">
    <con:settings/>
    <con:runType>SEQUENTIAL</con:runType>
    <con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Preparation Jet - Option+ - Kit" searchProperties="true" id="e7072e2a-0fb9-4743-a447-c332f0ca0e94">
      <con:description>TestCase generated for REST Resource [Validation] located at
      [/contrat-core/contrat/{refContrat}/valider]</con:description>
      <con:settings/>
      <con:testStep type="groovy" name="SetRefCommande" id="637ecc43-587a-413e-b8e3-249b647f987a">
        <con:settings/>
        <con:config><script>import static java.util.UUID.randomUUID 
def tc = context.testCase 
uuid = randomUUID().toString()
testRunner.testCase.setPropertyValue( "RefCommande", uuid ) 
log.info testRunner.testCase.getPropertyValue("RefCommande")</script></con:config>
      </con:testStep>
      <con:testStep type="restrequest" name="Préparer Contrat" id="0c2881ad-9d93-4002-9ed6-aad649e2bc70">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/preparer" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="Préparer Contrat" mediaType="application/json" postQueryString="false" id="7e8cfe53-72a4-4424-beea-8afb9dc13250">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{
 "user": "test",
 "produits": [
{
      "reference": "jet",
      "numEC" : "1",
      "numeroCommande": "${#TestCase#RefCommande}",
      "label": "Abonnement jet 10Go",
      "remboursable": true,
      "typeProduit": "SERVICE",
      "prix": {
        "engagement" : "24",
        "periodicite": "1",
        "typeTVA": "R",
        "montant": "30",
        "frais": [
          {
            "montant": "30",
            "typeFrais": "creation"
          }
        ],
        "modePaiement": "SEPA",
        "modeFacturation": "PREMIER_MOIS"
      }
    },
    {
      "reference": "option.plus.50g",
      "numEC" : "2",
      "numECParent": "1",
      "numeroCommande": "${#TestCase#RefCommande}",
      "remboursable": false,
      "label": "Option+ 50Go",
      "typeProduit": "SERVICE",
      "prix": {
        "periodicite": "1",
        "typeTVA": "R",
        "montant": "50",
        "frais": [
          {
            "montant": "50",
            "typeFrais": "resiliation",
            "nombreMois": "12",
            "ordre": "1"
          },
          {
            "montant": "30",
            "typeFrais": "resiliation",
            "ordre": "2"
          }
        ],
        "modePaiement": "CB",
        "modeFacturation": "PREMIER_MOIS"
      }
    },
    {
      "reference": "kit-sat",
      "numEC" : "3",
      "numECParent": "1",
      "numeroCommande": "${#TestCase#RefCommande}",
      "remboursable": true,
      "label": "Kit Satellite Jet",
      "typeProduit": "BIEN",
      "prix": {
        "duree" : "48",
        "periodicite" : "3",
        "typeTVA": "R",
        "montant": "30",
        "modePaiement": "SEPA",
        "modeFacturation": "PREMIER_MOIS"
      }
    }
  ]
}</con:request>
            <con:originalUri>http://10.10.2.52/contrat-core/contrat/preparer</con:originalUri><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="5f6049db-b8e1-40c2-8507-44fb099c7992">
              <con:configuration>
                <codes>200</codes>
              </con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="Reference Exists" id="8f1c10e2-7b07-4fc7-9111-c6d0cc8fac0d">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/preparer';
                exists(//ns1:referenceContrat)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="Ref Commande" id="b33448e2-3a1a-4068-9bd1-0bb2bafb6abc" disabled="true">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/preparer';
                //ns1:e[1]/ns1:numeroCommande</path><content>${#TestCase#RefCommande}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
            <con:credentials>
              <con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters/>
          </con:restRequest>
        </con:config>
      </con:testStep>
      <con:testStep type="transfer" name="Move Infos Contrat" id="9fd9ea35-0114-441b-bc0f-f6729d5a113a">
        <con:settings/>
        <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false">
            <con:name>Ref Contrat Test Case</con:name>
            <con:sourceType>ResponseAsXml</con:sourceType>
            <con:sourceStep>Préparer Contrat</con:sourceStep>
            <con:sourcePath>declare namespace nsa='http://10.10.2.52/contrat-core/contrat/preparer';
            //nsa:referenceContrat</con:sourcePath>
            <con:targetType>RefContrat</con:targetType>
            <con:targetStep>#TestCase#</con:targetStep>
          </con:transfers>
        </con:config>
      </con:testStep>
      <con:properties>
        <con:property>
          <con:name>RefCommande</con:name>
          <con:value>7b96b854-921a-4111-a99e-a289a9873996</con:value>
        </con:property>
        <con:property>
          <con:name>RefContrat</con:name>
          <con:value>00000095</con:value>
        </con:property>
      </con:properties>
    </con:testCase>
    <con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Preparation - Validation Jet" searchProperties="true" id="3d1406c1-6558-4539-a011-8394a232a260" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="">
      <con:description>TestCase generated for REST Resource [Validation] located at
      [/contrat-core/contrat/{refContrat}/valider]</con:description>
      <con:settings/>
      <con:testStep type="calltestcase" name="Preparation" id="af1b5aa6-7aca-491b-82ac-00fc31c53296">
        <con:settings/>
        <con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:targetTestCase>e7072e2a-0fb9-4743-a447-c332f0ca0e94</con:targetTestCase>
          <con:properties>
            <con:property>
              <con:name>RefCommande</con:name>
              <con:value>ff8459c9-34d0-426c-9e24-1ac212ba5945</con:value>
            </con:property>
            <con:property>
              <con:name>RefContrat</con:name>
              <con:value>00000400</con:value>
            </con:property>
          </con:properties>
          <con:returnProperties>
            <con:entry>RefCommande</con:entry>
            <con:entry>RefContrat</con:entry>
          </con:returnProperties>
          <con:runMode>SINGLETON_AND_WAIT</con:runMode>
        </con:config>
      </con:testStep>
      <con:testStep type="restrequest" name="Validation" id="bcc62676-48fe-4e0a-b8b2-06036e24e5ef">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/{refContrat}/valider" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="Validation" mediaType="application/json" postQueryString="false" id="61e5a8b8-9e0b-49d7-a9ba-078986cdcc50">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{
  "user" : "test",
  "idClient": "00003870",
  "idAdrFacturation": "685",
  "paiementInfos": [
    {
      "referenceProduit": "jet",
      "numEC": "1",
      "referenceModePaiement": "R0000012",
      "idAdrLivraison": "adrliv1"
    },
    {
      "referenceProduit": "option.plus.50g",
      "numEC": "2",
      "referenceModePaiement": "R0000012",
      "idAdrLivraison": "adrliv1"
    },
    {
      "referenceProduit": "kit-sat",
      "numEC": "3",
      "referenceModePaiement": "R0000012",
      "idAdrLivraison": "adrliv1"
    }
  ],
  "politiqueValidation": {
    "fraisCreation": "true",
    "checkIsPackagerCreationPossible": "true"
  }
}</con:request>
            <con:originalUri>http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/valider</con:originalUri><con:assertion type="GroovyScriptAssertion" name="No Msg Return" id="8e9e56fa-f99c-497c-bf55-3f31075c8d0f">
              <con:configuration>
                <scriptText>assert messageExchange.hasResponse() == false</scriptText>
              </con:configuration>
            </con:assertion>
            <con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="9d28f5f8-d462-4b7c-990e-54e7027c1b66"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials>
              <con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters>
              <entry key="refContrat" value="${Preparation#RefContrat}" xmlns="http://eviware.com/soapui/config"/>
            </con:parameters>
          </con:restRequest>
        </con:config>
      </con:testStep>
      <con:testStep type="transfer" name="Move Ref Contrat" id="0bb303f0-9a24-4491-a95b-8a3df995bc70">
        <con:settings/>
        <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false">
            <con:name>RefContrat</con:name>
            <con:sourceType>RefContrat</con:sourceType>
            <con:sourceStep>Preparation</con:sourceStep>
            <con:targetType>RefContrat</con:targetType>
            <con:targetStep>#TestCase#</con:targetStep>
          </con:transfers>
        <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>RefCommande</con:name><con:sourceType>RefCommande</con:sourceType><con:sourceStep>Preparation</con:sourceStep><con:targetType>RefCommande</con:targetType><con:targetStep>#TestCase#</con:targetStep></con:transfers></con:config>
      </con:testStep>
      <con:properties>
        <con:property>
          <con:name>RefCommande</con:name>
          <con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">ff8459c9-34d0-426c-9e24-1ac212ba5945</con:value>
        </con:property>
        <con:property>
          <con:name>RefContrat</con:name>
          <con:value>00000400</con:value>
        </con:property>
      </con:properties>
    </con:testCase>
    <con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Preparation - Validation Antivirus" searchProperties="true" id="30b39c40-cc8d-4e36-89bb-39614d35968e">
      <con:description>TestCase generated for REST Resource [Validation] located at
      [/contrat-core/contrat/{refContrat}/valider]</con:description>
      <con:settings/>
      <con:testStep type="groovy" name="SetRefCommande" id="93cba4a2-65f7-46d7-b281-c86d72697391">
        <con:settings/>
        <con:config><script>import static java.util.UUID.randomUUID 
def tc = context.testCase 
uuid = randomUUID().toString()
testRunner.testCase.setPropertyValue( "RefCommande", uuid ) 
log.info testRunner.testCase.getPropertyValue("RefCommande")</script></con:config>
      </con:testStep>
      <con:testStep type="restrequest" name="Préparer Contrat" id="f8999df5-660e-4876-97cb-698df5fad97b">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/preparer" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="Préparer Contrat" mediaType="application/json" postQueryString="false" id="7e8cfe53-72a4-4424-beea-8afb9dc13250">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{
  "user": "test",
  "produits": [
    {
      "reference": "avfwpro-confort-s",
      "numEC": "1",
      "numeroCommande": "${#TestCase#RefCommande}",
      "label": "Abonnement Antivirus Securitoo",
      "remboursable": "true",
      "typeProduit": "SERVICE",
      "prix": {
        "duree": "3",
        "periodicite": "1",
        "typeTVA": "R",
        "montant": "5",
        "modePaiement": "SEPA",
        "modeFacturation": "DATE_ANNIVERSAIRE"
      }
    }
  ]
}</con:request>
            <con:originalUri>http://10.10.2.52/contrat-core/contrat/preparer</con:originalUri><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="5f6049db-b8e1-40c2-8507-44fb099c7992">
              <con:configuration>
                <codes>200</codes>
              </con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="Reference Exists" id="8f1c10e2-7b07-4fc7-9111-c6d0cc8fac0d">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/preparer';
                exists(//ns1:referenceContrat)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="Ref Commande" id="b33448e2-3a1a-4068-9bd1-0bb2bafb6abc" disabled="true">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/preparer';
                //ns1:e[1]/ns1:numeroCommande</path><content>${#TestCase#RefCommande}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
            <con:credentials>
              <con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters/>
          </con:restRequest>
        </con:config>
      </con:testStep>
      <con:testStep type="transfer" name="Move Infos Contrat" id="83f8d82c-971c-4b26-a2d7-c7f0ffe9b279">
        <con:settings/>
        <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false">
            <con:name>Ref Contrat Test Case</con:name>
            <con:sourceType>ResponseAsXml</con:sourceType>
            <con:sourceStep>Préparer Contrat</con:sourceStep>
            <con:sourcePath>declare namespace nsa='http://10.10.2.52/contrat-core/contrat/preparer';
//nsa:referenceContrat</con:sourcePath>
            <con:targetType>RefContrat</con:targetType>
            <con:targetStep>#TestCase#</con:targetStep>
          </con:transfers>
        <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>idContrat</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Préparer Contrat</con:sourceStep><con:sourcePath/><con:targetType>idContrat</con:targetType><con:targetStep>#TestCase#</con:targetStep></con:transfers></con:config>
      </con:testStep>
      <con:testStep type="restrequest" name="Validation" id="2700bf25-8922-4e23-8326-7ed120d4fd9f">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/{refContrat}/valider" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="Validation" mediaType="application/json" postQueryString="false" id="61e5a8b8-9e0b-49d7-a9ba-078986cdcc50">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{
  "user": "test",
  "idClient": "00003870",
  "idAdrFacturation": "685",
  "paiementInfos": [
    {
      "referenceProduit": "avfwpro-confort-s",
      "numEC": "1",
      "referenceModePaiement": "R0000012",
      "idAdrLivraison": "adrliv1"
    }
  ],
  "politiqueValidation": {
    "fraisCreation": "true",
    "checkIsPackagerCreationPossible": "true"
  }
}</con:request>
            <con:originalUri>http://10.10.2.52/contrat-core/contrat/05948f49/valider</con:originalUri><con:assertion type="GroovyScriptAssertion" name="No Msg Return" id="8e9e56fa-f99c-497c-bf55-3f31075c8d0f">
              <con:configuration>
                <scriptText>assert messageExchange.hasResponse() == false</scriptText>
              </con:configuration>
            </con:assertion>
            <con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="9d28f5f8-d462-4b7c-990e-54e7027c1b66"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials>
              <con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters><entry key="refContrat" value="${#TestCase#RefContrat}" xmlns="http://eviware.com/soapui/config"/></con:parameters>
          </con:restRequest>
        </con:config>
      </con:testStep><con:properties>
        <con:property>
          <con:name>RefCommande</con:name>
          <con:value>9b89fa9c-3237-49f7-8769-3c726e746390</con:value>
        </con:property>
        <con:property>
          <con:name>RefContrat</con:name>
          <con:value>00000399</con:value>
        </con:property>
      <con:property><con:name>idContrat</con:name><con:value>&lt;Response xmlns="http://10.10.2.52/contrat-core/contrat/preparer">
   &lt;referenceContrat>00000399&lt;/referenceContrat>
&lt;/Response></con:value></con:property></con:properties>
    </con:testCase><con:properties/>
  </con:testSuite>
  <con:testSuite name="Processus - Jet" id="84e7773b-27a7-4f2c-a4f9-a2773a3a66fa">
    <con:settings/>
    <con:runType>SEQUENTIAL</con:runType>
    <con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Creer Jet - Option+ - Kit" searchProperties="true" id="c3134394-ecff-433e-9aed-7a7b112617c3">
      <con:settings/>
      <con:testStep type="groovy" name="SetRefCommande" id="d69f47bd-9b0f-4a8c-8746-20cc2d3c385f">
        <con:settings/>
        <con:config><script>import static java.util.UUID.randomUUID 
def tc = context.testCase 
uuid = randomUUID().toString()
testRunner.testCase.setPropertyValue( "RefCommande", uuid ) 
log.info testRunner.testCase.getPropertyValue("RefCommande")</script></con:config>
      </con:testStep>
      <con:testStep type="properties" name="InfosContrat" id="14a97eb8-e35f-4019-bc10-69e9b9f12d34">
        <con:settings/>
        <con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:properties>
            <con:property>
              <con:name>refContrat</con:name>
              <con:value>00000396</con:value>
            </con:property>
          <con:property><con:name>idContrat</con:name><con:value>147</con:value></con:property></con:properties>
        </con:config>
      </con:testStep>
      <con:testStep type="restrequest" name="Preparer" id="1875f180-4586-423b-8fb0-65eb259691dd">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/preparer" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="Preparer" mediaType="application/json" postQueryString="false">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{
 "user": "test",
 "produits": [
{
      "reference": "jet",
      "numEC" : "1",
      "numeroCommande": "${#TestCase#RefCommande}",
      "label": "Abonnement jet 10Go",
      "typeProduit": "SERVICE",
      "prix": {
        "periodicite": "1",
        "typeTVA": "R",
        "montant": "30",
        "frais": [
          {
            "montant": "30",
		  "titre" : "frais de dossier",
            "typeFrais": "creation"
          }
        ],
        "modePaiement": "SEPA",
        "modeFacturation": "PREMIER_MOIS"
      }
    },
    {
      "reference": "option.plus.50g",
      "numEC" : "2",
      "numECParent": "1",
      "numeroCommande": "${#TestCase#RefCommande}",
      "label": "Option+ 50Go",
      "typeProduit": "SERVICE",
      "prix": {
        "periodicite": "1",
        "typeTVA": "R",
        "montant": "50",
        "frais": [
          {
            "montant": "50",
            "typeFrais": "resiliation",
		  "titre" : "frais de cloture de dossier",
            "nombreMois": "12",
            "ordre": "1"
          },
          {
            "montant": "30",
            "typeFrais": "resiliation",
		  "titre" : "frais de cloture de dossier",
            "ordre": "2"
          }
        ],
        "modePaiement": "CB",
        "modeFacturation": "PREMIER_MOIS"
      }
    },
    {
      "reference": "kit-sat",
      "numEC" : "3",
      "numECParent": "1",
      "numeroCommande": "${#TestCase#RefCommande}",
      "label": "Kit Satellite Jet",
      "typeProduit": "BIEN",
      "prix": {
        "engagement" : "24",
        "duree" : "48",
        "periodicite" : "1",
        "typeTVA": "R",
        "montant": "10",
        "modePaiement": "SEPA",
        "modeFacturation": "PREMIER_MOIS"
      }
    }
  ]
}</con:request>
            <con:originalUri>http://10.10.2.52/contrat-core/contrat/preparer</con:originalUri><con:assertion type="XQuery Match" name="Check Abonnement - Location - Vente" id="a7be7707-e837-44f7-945e-e70b793fee11" disabled="true">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/preparer'; 
&lt;Results> 
{ 
  for $x in //ns1:sousContrats/ns1:e 
  order by $x/referenceProduit 
  return &lt;t>{$x/ns1:typeContrat/text()}&lt;/t> 
}
&lt;/Results></path><content><![CDATA[<Results>
  <t>LOCATION</t>
  <t>ABONNEMENT</t>
  <t>ABONNEMENT</t>
</Results>
]]></content><allowWildcards>false</allowWildcards></con:configuration>
            </con:assertion>
            <con:assertion type="XQuery Match" name="Statut = PREPARER" id="70a0d4a1-8263-4c9b-bdfd-b2acdf3b3367" disabled="true">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/preparer'; 
&lt;Results> 
{ 
  for $x in //ns1:sousContrats/ns1:e 
  return &lt;result>{$x/ns1:statut/text()}&lt;/result> 
} 
&lt;/Results></path><content><![CDATA[<Results>
  <result>PREPARER</result>
  <result>PREPARER</result>
  <result>PREPARER</result>
</Results>
]]></content><allowWildcards>false</allowWildcards></con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="RefContrat générée" id="44a0aa64-3531-4f25-a45f-79a7b20eb9ba"><con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/preparer';
exists(//ns1:Response/ns1:referenceContrat)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials>
              <con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters/>
          </con:restRequest>
        </con:config>
      </con:testStep>
      <con:testStep type="transfer" name="Transfert Ref Contrat" id="d553a6f4-7f7e-4272-b845-976dc48fe0d9">
        <con:settings/>
        <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false">
            <con:name>Ref Contrat</con:name>
            <con:sourceType>ResponseAsXml</con:sourceType>
            <con:sourceStep>Preparer</con:sourceStep>
            <con:sourcePath>declare namespace nsa='http://10.10.2.52/contrat-core/contrat/preparer';
//nsa:Response/nsa:referenceContrat</con:sourcePath>
            <con:targetType>refContrat</con:targetType>
            <con:targetStep>InfosContrat</con:targetStep>
          </con:transfers>
          <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false">
            <con:name>Ref Contrat Global</con:name>
            <con:sourceType>ResponseAsXml</con:sourceType>
            <con:sourceStep>Preparer</con:sourceStep>
            <con:sourcePath>declare namespace nsa='http://10.10.2.52/contrat-core/contrat/preparer';
            //nsa:referenceContrat</con:sourcePath>
            <con:targetType>RefContrat</con:targetType>
            <con:targetStep>#TestCase#</con:targetStep>
          </con:transfers>
        </con:config>
      </con:testStep>
      <con:testStep type="jdbc" name="Contrat Prepare" id="81201031-b0ac-4aee-93e7-168eb2bebcd6">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString>
          <con:query>select * from contrat 
where reference = "${InfosContrat#refContrat}"</con:query>
          <con:assertion type="Simple Contains" name="DatePreparation is NOT NULL">
            <con:configuration>
              <token>&lt;CONTRAT.DATEPREPARATION></token>
              <ignoreCase>false</ignoreCase>
              <useRegEx>false</useRegEx>
            </con:configuration>
          </con:assertion>
          <con:assertion type="XQuery Match" name="Reference Contrat">
            <con:configuration>
              <path>&lt;Result> { for $i in //Row return $i/CONTRAT.REFERENCE/string() } &lt;/Result></path>
              <content>&lt;Result>${InfosContrat#RefContrat}&lt;/Result></content>
              <allowWildcards>true</allowWildcards>
            </con:configuration>
          </con:assertion>
          <con:properties/>
        </con:config>
      </con:testStep>
      <con:testStep type="restrequest" name="Valider" id="ac49a50a-ed9d-4039-afa3-4ecc97712327">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/{refContrat}/valider" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="Valider" mediaType="application/json" postQueryString="false">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{
  "idClient": "00003870",
  "idAdrFacturation": "685",
  "paiementInfos": [
    {
      "referenceProduit": "jet",
      "numEC": "1",
      "referenceModePaiement": "R0000012",
      "idAdrLivraison": "adrliv1"
    },
    {
      "referenceProduit": "option.plus.50g",
      "numEC": "2",
      "referenceModePaiement": "R0000012",
      "idAdrLivraison": "adrliv1"
    },
    {
      "referenceProduit": "kit-sat",
      "numEC": "3",
      "referenceModePaiement": "R0000012",
      "idAdrLivraison": "adrliv1"
    }
  ],
  "politiqueValidation": {
    "fraisCreation": true,
    "checkIsPackagerCreationPossible" : true
  },
  "user": "test"
}</con:request>
            <con:originalUri>http://10.10.2.52/contrat-core/contrat/94309e60/valider</con:originalUri><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="0f6e79cf-8018-4a81-85f1-bbff3ac5c7ed">
              <con:configuration>
                <codes>200</codes>
              </con:configuration>
            </con:assertion>
            <con:assertion type="GroovyScriptAssertion" name="Response must be empty" id="a3a7df0f-94f6-4f97-a1e8-611066164e23">
              <con:configuration>
                <scriptText>assert messageExchange.hasResponse() == false</scriptText>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters>
              <entry key="refContrat" value="${InfosContrat#RefContrat}" xmlns="http://eviware.com/soapui/config"/>
            </con:parameters>
            <con:parameterOrder>
              <con:entry>refContrat</con:entry>
            </con:parameterOrder>
          </con:restRequest>
        </con:config>
      </con:testStep>
      <con:testStep type="jdbc" name="Politique Validation" id="9afd1903-d36b-4d85-bd5f-bc3cf046d351">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString>
          <con:query>select * from politiquevalidation 
where id  = 
(select politiqueValidationId from contrat where reference = "${InfosContrat#refContrat}")</con:query>
          <con:assertion type="Simple Contains" name="Frais Création = True">
            <con:configuration><token>&lt;POLITIQUEVALIDATION.FRAISCREATION>1&lt;/POLITIQUEVALIDATION.FRAISCREATION></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration>
          </con:assertion>
          <con:assertion type="Simple Contains" name="CheckIsPackagerCreationPossible = False">
            <con:configuration><token>&lt;POLITIQUEVALIDATION.CHECKISPACKAGERCREATIONPOSSIBLE>1&lt;/POLITIQUEVALIDATION.CHECKISPACKAGERCREATIONPOSSIBLE></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration>
          </con:assertion><con:properties/>
        </con:config>
      </con:testStep>
      <con:testStep type="jdbc" name="Contrat Valide" id="4c4edd8f-f467-4936-9287-3274139f0d3a">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString>
          <con:query>select * from contrat 
where reference = "${InfosContrat#refContrat}"</con:query>
          
          <con:assertion type="XPath Match" name="Date Validation is not null"><con:configuration><path>exists(//ResultSet/Row/CONTRAT.DATEVALIDATION/text())</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="Id Client = 00003870"><con:configuration><path>//ResultSet/Row/CONTRAT.IDCLIENT/text()</path><content>00003870</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="Politique Validation is not null"><con:configuration><path>exists(//ResultSet/Row/CONTRAT.POLITIQUEVALIDATIONID/text())</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/>
        </con:config>
      </con:testStep>
      <con:testStep type="transfer" name="transfer id contrat" id="a3a37cc1-13c1-465e-bf6a-229bbbd83010"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>idContrat</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Contrat Valide</con:sourceStep><con:sourcePath>//ResultSet/Row[1]/CONTRAT.ID</con:sourcePath><con:targetType>idContrat</con:targetType><con:targetStep>InfosContrat</con:targetStep></con:transfers></con:config></con:testStep><con:testStep type="jdbc" name="EC Valide" id="2ebd4f29-5df4-4295-85be-b9e1b6f26015">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString>
          <con:query>select * from elementcontractuel
where contratParent LIKE "${InfosContrat#idContrat}%"</con:query>
          
          <con:assertion type="XQuery Match" name="Date Validation is not null"><con:configuration><path>&lt;Results> 
{ 
for $x in //Row 
order by $x/ELEMENTCONTRACTUEL.NUMEC
return &lt;result>{exists($x/ELEMENTCONTRACTUEL.DATEVALIDATION/text())}&lt;/result> 
}
&lt;/Results></path><content><![CDATA[<Results>
  <result>true</result>
  <result>true</result>
  <result>true</result>
</Results>]]></content><allowWildcards>false</allowWildcards></con:configuration></con:assertion><con:assertion type="XQuery Match" name="Id Adr Livraison"><con:configuration><path>&lt;Results> 
{ 
for $x in //Row 
order by $x/ELEMENTCONTRACTUEL.NUMEC
return &lt;result>{$x/ELEMENTCONTRACTUEL.IDADRLIVRAISON/text()}&lt;/result> 
}
&lt;/Results></path><content><![CDATA[<Results>
  <result>adrliv1</result>
  <result>adrliv1</result>
  <result>adrliv1</result>
</Results>]]></content><allowWildcards>false</allowWildcards></con:configuration></con:assertion><con:assertion type="XQuery Match" name="Id Adr Facturation"><con:configuration><path>&lt;Results> 
{ 
for $x in //Row 
order by $x/ELEMENTCONTRACTUEL.NUMEC
return &lt;result>{$x/ELEMENTCONTRACTUEL.IDADRFACTURATION/text()}&lt;/result> 
}
&lt;/Results></path><content><![CDATA[<Results>
  <result>685</result>
  <result>685</result>
  <result>685</result>
</Results>]]></content><allowWildcards>false</allowWildcards></con:configuration></con:assertion><con:properties/>
        </con:config>
      </con:testStep>
      <con:testStep type="delay" name="Wait for beginning Livraison" id="52ff2ba7-4dd6-4a6d-b90c-c4f2b762a2a6">
        <con:settings/>
        <con:config>
          <delay>500</delay>
        </con:config>
      </con:testStep>
      <con:testStep type="jdbc" name="Bon de Livraison - exists" id="34b9fb1c-8fa5-496e-a343-5fc70ae48f64">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString>
          <con:query>select * from bonpreparation 
where reference = "${InfosContrat#refContrat}"</con:query>
          <con:properties/>
        </con:config>
      </con:testStep>
      <con:testStep type="jdbc" name="Bon de Livraison - Initié" id="0f7dd039-6b8c-462b-af72-1c1f16b209df">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString>
          <con:query>select * from bonpreparation 
where reference = "${InfosContrat#refContrat}"
  and typeBonPreparation = 'LIVRAISON'</con:query>
          <con:assertion type="XPath Match" name="IdClient"><con:configuration><path>//ResultSet/Row/BONPREPARATION.IDCLIENT/text()</path><content>00003870</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="DateInitiation Not Null"><con:configuration><path>exists(//ResultSet/Row/BONPREPARATION.DATEINITIATION/text())</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/>
        </con:config>
      </con:testStep>
      <con:testStep type="goto" name="Go Beginning Livraison" id="3040754b-f95f-4680-8e38-6e8cf27d8bf6">
        <con:settings/>
        <con:config xsi:type="con:GotoStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:condition>
            <con:name>Wait Facturation</con:name>
            <con:type>XPATH</con:type>
            <con:expression>not(//Results/ResultSet/Row/BONPREPARATION.DATEINITIATION/text())</con:expression>
            <con:targetStep>Wait for beginning Livraison</con:targetStep>
          </con:condition>
        </con:config>
      </con:testStep>
      <con:testStep type="jdbc" name="Elements de Livraison - Initié" id="eb61f215-1646-44de-a994-1f2af4c4b3ae">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString>
          <con:query>select * from elementlivraison 
where bonPreparationParent = 
(select id from bonpreparation 
  where reference = "${InfosContrat#refContrat}"
    and typeBonPreparation = 'LIVRAISON')</con:query>
          <con:assertion type="XQuery Match" name="Acteurs=NetDelivery ou Packager">
            <con:configuration>
              <path>&lt;Results> { for $x in //Row order by $x/ELEMENTLIVRAISON.TYPECONTRAT return
              &lt;result>{$x/ELEMENTLIVRAISON.ACTEUR/text()}&lt;/result> } &lt;/Results></path>
              <content><![CDATA[
                <Results>
  <result>PACKAGER</result>
  <result>PACKAGER</result>
  <result>NETDELIVERY</result>
</Results>
]]></content>
              <allowWildcards>false</allowWildcards>
            </con:configuration>
          </con:assertion>
          <con:assertion type="XQuery Match" name="Reference">
            <con:configuration><path>&lt;Results> 
{ 
  for $x in //Row 
  order by $x/ELEMENTLIVRAISON.NUMEC
  return &lt;result>{$x/ELEMENTLIVRAISON.REFERENCE/text()}&lt;/result> 
} 
&lt;/Results></path><content><![CDATA[<Results>
  <result>${InfosContrat#refContrat}-1</result>
  <result>${InfosContrat#refContrat}-2</result>
  <result>${InfosContrat#refContrat}-3</result>
</Results>]]></content><allowWildcards>false</allowWildcards></con:configuration>
          </con:assertion>
          <con:assertion type="XQuery Match" name="TypeEL=Livraison">
            <con:configuration><path>&lt;Results> 
{ 
  for $x in //Row 
  return &lt;Result>{$x/ELEMENTLIVRAISON.TYPEBONPREPARATION/text()}&lt;/Result> 
} 
&lt;/Results></path><content><![CDATA[<Results>
  <Result>LIVRAISON</Result>
  <Result>LIVRAISON</Result>
  <Result>LIVRAISON</Result>
</Results>]]></content><allowWildcards>false</allowWildcards></con:configuration>
          </con:assertion>
          <con:assertion type="XQuery Match" name="DateInitiation Not Null">
            <con:configuration><path>&lt;Results> 
{ 
  for $x in //Row 
  return &lt;Result>{exists($x/ELEMENTLIVRAISON.DATEINITIATION/text())}&lt;/Result> 
} 
&lt;/Results></path><content><![CDATA[<Results>
  <Result>true</Result>
  <Result>true</Result>
  <Result>true</Result>
</Results>]]></content><allowWildcards>false</allowWildcards></con:configuration>
          </con:assertion><con:assertion type="XQuery Match" name="Anciens codes Null">
            <con:configuration><path><![CDATA[<Results> 
{ 
  for $x in //Row 
  return <r>
    <ancienCodeColis>{not($x/ELEMENTLIVRAISON.ANCIENCODECOLIS/text())}</ancienCodeColis>
    <ancienCodeProduit>{not($x/ELEMENTLIVRAISON.ANCIENCODEPRODUIT/text())}</ancienCodeProduit>
    <referenceAncienProduit>{not($x/ELEMENTLIVRAISON.REFERENCEANCIENPRODUIT/text())}</referenceAncienProduit>
  </r> 
} 
</Results>]]></path><content><![CDATA[<Results>
  <r>
    <ancienCodeColis>true</ancienCodeColis>
    <ancienCodeProduit>true</ancienCodeProduit>
    <referenceAncienProduit>true</referenceAncienProduit>
  </r>
  <r>
    <ancienCodeColis>true</ancienCodeColis>
    <ancienCodeProduit>true</ancienCodeProduit>
    <referenceAncienProduit>true</referenceAncienProduit>
  </r>
  <r>
    <ancienCodeColis>true</ancienCodeColis>
    <ancienCodeProduit>true</ancienCodeProduit>
    <referenceAncienProduit>true</referenceAncienProduit>
  </r>
</Results>]]></content><allowWildcards>false</allowWildcards></con:configuration>
          </con:assertion><con:assertion type="XQuery Match" name="ReferenceProduit">
            <con:configuration><path>&lt;Results> 
{ 
  for $x in //Row 
  order by $x/ELEMENTLIVRAISON.NUMEC
  return &lt;Result>{$x/ELEMENTLIVRAISON.REFERENCEPRODUIT/text()}&lt;/Result> 
} 
&lt;/Results></path><content><![CDATA[<Results>
  <Result>jet</Result>
  <Result>option.plus.50g</Result>
  <Result>kit-sat</Result>
</Results>]]></content><allowWildcards>false</allowWildcards></con:configuration>
          </con:assertion><con:properties/>
        </con:config>
      </con:testStep>
      <con:testStep type="delay" name="Wait for end Livraison" id="fa5d126f-3223-4e2f-875e-a2f7d3cae8a5">
        <con:settings/>
        <con:config>
          <delay>500</delay>
        </con:config>
      </con:testStep>
      <con:testStep type="jdbc" name="Bon de Livraison - Témoin" id="9de4e52c-f4cc-486e-a491-3140b770c7dc">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString>
          <con:query>select * from bonpreparation 
where reference = "${InfosContrat#refContrat}"
  and typeBonPreparation = 'LIVRAISON'</con:query>
          <con:assertion type="XPath Match" name="Date Initiation">
            <con:configuration>
              <path>exists(//Row/BONPREPARATION.DATEINITIATION)</path>
              <content>true</content>
              <allowWildcards>false</allowWildcards>
              <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
              <ignoreComments>false</ignoreComments>
            </con:configuration>
          </con:assertion>
          <con:assertion type="XPath Match" name="TypeBonPreparation=Livraison">
            <con:configuration>
              <path>//Row/BONPREPARATION.TYPEBONPREPARATION</path>
              <content>LIVRAISON</content>
              <allowWildcards>false</allowWildcards>
              <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
              <ignoreComments>false</ignoreComments>
            </con:configuration>
          </con:assertion>
          <con:assertion type="XPath Match" name="Aucune Erreur de Livraison">
            <con:configuration><path>not(//ResultSet/Row/BONPREPARATION.CAUSENONLIVRAISON/text())</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
          </con:assertion>
          <con:properties/>
        </con:config>
      </con:testStep>
      <con:testStep type="goto" name="Go End Livraison" id="33360129-ec39-4ab3-a79b-1e384446b993">
        <con:settings/>
        <con:config xsi:type="con:GotoStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:condition>
            <con:name>Wait Facturation</con:name>
            <con:type>XPATH</con:type>
            <con:expression>not(//ResultSet/Row/BONPREPARATION.DATELIVRAISONTERMINE/text()) 
and
not(//ResultSet/Row/BONPREPARATION.CAUSENONLIVRAISON/text())</con:expression>
            <con:targetStep>Wait for end Livraison</con:targetStep>
          </con:condition>
        </con:config>
      </con:testStep>
      
      <con:testStep type="jdbc" name="Elements de Livraison - Livré" id="27fe364e-d835-43ab-bae2-c8b5d25f363a">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString>
          <con:query>select * from elementlivraison 
where bonPreparationParent = 
(select id from bonpreparation 
  where reference = "${InfosContrat#refContrat}"
    and typeBonPreparation = 'LIVRAISON')</con:query>
          <con:assertion type="XQuery Match" name="Acteurs=NetDelivery ou Packager">
            <con:configuration>
              <path>&lt;Results> { for $x in //Row order by $x/ELEMENTLIVRAISON.TYPECONTRAT return
              &lt;result>{$x/ELEMENTLIVRAISON.ACTEUR/text()}&lt;/result> } &lt;/Results></path>
              <content><![CDATA[
                <Results>
  <result>PACKAGER</result>
  <result>PACKAGER</result>
  <result>NETDELIVERY</result>
</Results>
]]></content>
              <allowWildcards>false</allowWildcards>
            </con:configuration>
          </con:assertion>
          <con:assertion type="XQuery Match" name="Reference">
            <con:configuration><path>&lt;Results> 
{ 
  for $x in //Row 
  order by $x/ELEMENTLIVRAISON.NUMEC
  return &lt;result>{$x/ELEMENTLIVRAISON.REFERENCE/text()}&lt;/result> 
} 
&lt;/Results></path><content><![CDATA[<Results>
  <result>${InfosContrat#refContrat}-1</result>
  <result>${InfosContrat#refContrat}-2</result>
  <result>${InfosContrat#refContrat}-3</result>
</Results>]]></content><allowWildcards>false</allowWildcards></con:configuration>
          </con:assertion>
          <con:assertion type="XQuery Match" name="TypeEL=Livraison">
            <con:configuration><path>&lt;Results> 
{ 
  for $x in //Row 
  return &lt;Result>{$x/ELEMENTLIVRAISON.TYPEBONPREPARATION/text()}&lt;/Result> 
} 
&lt;/Results></path><content><![CDATA[<Results>
  <Result>LIVRAISON</Result>
  <Result>LIVRAISON</Result>
  <Result>LIVRAISON</Result>
</Results>]]></content><allowWildcards>false</allowWildcards></con:configuration>
          </con:assertion>
          <con:assertion type="XQuery Match" name="DateInitiation Not Null">
            <con:configuration><path>&lt;Results> 
{ 
  for $x in //Row 
  return &lt;Result>{exists($x/ELEMENTLIVRAISON.DATEINITIATION/text())}&lt;/Result> 
} 
&lt;/Results></path><content><![CDATA[<Results>
  <Result>true</Result>
  <Result>true</Result>
  <Result>true</Result>
</Results>]]></content><allowWildcards>false</allowWildcards></con:configuration>
          </con:assertion><con:assertion type="XQuery Match" name="Anciens codes Null">
            <con:configuration><path><![CDATA[<Results> 
{ 
  for $x in //Row 
  return <r>
    <ancienCodeColis>{not($x/ELEMENTLIVRAISON.ANCIENCODECOLIS/text())}</ancienCodeColis>
    <ancienCodeProduit>{not($x/ELEMENTLIVRAISON.ANCIENCODEPRODUIT/text())}</ancienCodeProduit>
    <referenceAncienProduit>{not($x/ELEMENTLIVRAISON.REFERENCEANCIENPRODUIT/text())}</referenceAncienProduit>
  </r> 
} 
</Results>]]></path><content><![CDATA[<Results>
  <r>
    <ancienCodeColis>true</ancienCodeColis>
    <ancienCodeProduit>true</ancienCodeProduit>
    <referenceAncienProduit>true</referenceAncienProduit>
  </r>
  <r>
    <ancienCodeColis>true</ancienCodeColis>
    <ancienCodeProduit>true</ancienCodeProduit>
    <referenceAncienProduit>true</referenceAncienProduit>
  </r>
  <r>
    <ancienCodeColis>true</ancienCodeColis>
    <ancienCodeProduit>true</ancienCodeProduit>
    <referenceAncienProduit>true</referenceAncienProduit>
  </r>
</Results>]]></content><allowWildcards>false</allowWildcards></con:configuration>
          </con:assertion><con:assertion type="XQuery Match" name="ReferenceProduit">
            <con:configuration><path>&lt;Results> 
{ 
  for $x in //Row 
  order by $x/ELEMENTLIVRAISON.NUMEC
  return &lt;Result>{$x/ELEMENTLIVRAISON.REFERENCEPRODUIT/text()}&lt;/Result> 
} 
&lt;/Results></path><content><![CDATA[<Results>
  <Result>jet</Result>
  <Result>option.plus.50g</Result>
  <Result>kit-sat</Result>
</Results>]]></content><allowWildcards>false</allowWildcards></con:configuration>
          </con:assertion><con:assertion type="XPath Match" name="1 seul Code Produit"><con:configuration><path>count(//Row[ELEMENTLIVRAISON.TYPECONTRAT="ABONNEMENT"]/ELEMENTLIVRAISON.RETAILERPACKAGERID/text())</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="1 seul Code Colis"><con:configuration><path>count(//Row[ELEMENTLIVRAISON.TYPECONTRAT="LOCATION"]/ELEMENTLIVRAISON.CODECOLIS)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/>
        </con:config>
      </con:testStep>
      <con:testStep type="jdbc" name="Bon de Livraison - Livré" id="bd543993-b50a-420c-b48f-7b3e232a52f5">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString>
          <con:query>select * from bonpreparation 
where reference = "${InfosContrat#refContrat}"
  and typeBonPreparation = 'LIVRAISON'</con:query>
          <con:assertion type="XPath Match" name="Dates Workflow">
            <con:configuration><path>exists(//ResultSet/Row/BONPREPARATION.DATEINITIATION/text())
and
exists(//ResultSet/Row/BONPREPARATION.DATEDEBUTPREPARATION/text())
and
exists(//ResultSet/Row/BONPREPARATION.DATEPREPARATION/text())
and
exists(//ResultSet/Row/BONPREPARATION.DATELIVRAISONTERMINE/text())</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
          </con:assertion>
          
          <con:assertion type="XPath Match" name="Aucune Erreur de Livraison">
            <con:configuration><path>not(//ResultSet/Row/BONPREPARATION.CAUSENONLIVRAISON/text())</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
          </con:assertion>
          <con:assertion type="XPath Match" name="IdClient"><con:configuration><path>//ResultSet/Row/BONPREPARATION.IDCLIENT/text()</path><content>00003870</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="DateRetourTermine Null"><con:configuration><path>not(//ResultSet/Row/BONPREPARATION.DATERETOURTERMINE/text())</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/>
        </con:config>
      </con:testStep>
      <con:testStep type="properties" name="InfosFacture" id="cef7ae30-d91f-42a9-ade2-bd0c460458e5">
        <con:settings/>
        <con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:properties>
            <con:property>
              <con:name>DateLivraison</con:name>
              <con:value>2014-09-10 11:29:30.0</con:value>
            </con:property>
          </con:properties>
        </con:config>
      </con:testStep>
      <con:testStep type="transfer" name="Transfert Date Livraison" id="4d092823-03ed-47c8-b45c-2a820651d0b1" disabled="true">
        <con:settings/>
        <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false">
            <con:name>DateLivraison</con:name>
            <con:sourceType>ResponseAsXml</con:sourceType>
            <con:sourceStep>Bon de Livraison - Témoin</con:sourceStep>
            <con:sourcePath>//Results/ResultSet/Row/BONPREPARATION.DATELIVRAISONTERMINE/text()</con:sourcePath>
            <con:targetType>DateLivraison</con:targetType>
            <con:targetStep>InfosFacture</con:targetStep>
          </con:transfers>
        </con:config>
      </con:testStep><con:testStep type="delay" name="Wait for end Facturation" id="6fb19312-60ff-420e-b7cb-459b1330a992" disabled="true">
        <con:settings/>
        <con:config>
          <delay>500</delay>
        </con:config>
      </con:testStep><con:testStep type="jdbc" name="Facturation - exists" id="e9e9be87-b784-481c-ab73-059dd5acb1b5" disabled="true">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.100.105.41:3306/test_saphir?user=test&amp;password=test</con:connectionString>
          <con:query>select * from movement 
where accountId = '00003870' 
and billinggroup ="${#TestCase#RefCommande}" ;</con:query>
          <con:properties/>
        </con:config>
      </con:testStep><con:testStep type="goto" name="Go Facturation" id="35313b63-309a-4fba-84b8-c30cd73ef3e2" disabled="true">
        <con:settings/>
        <con:config xsi:type="con:GotoStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:condition>
            <con:name>Wait Facturation</con:name>
            <con:type>XPATH</con:type>
            <con:expression>not(//Results/ResultSet/Row/MOVEMENT.ID/text())</con:expression>
            <con:targetStep>Wait for end Facturation</con:targetStep>
          </con:condition>
        </con:config>
      </con:testStep><con:testStep type="jdbc" name="Facturation - valid" id="13bee938-5b74-40aa-b44f-658c8beed2a9" disabled="true">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.100.105.41:3306/test_saphir?user=test&amp;password=test</con:connectionString>
          <con:query>select * from movement 
 where accountId = '00003870' 
   and billinggroup ="${#TestCase#RefCommande}"</con:query>
          <con:assertion type="XQuery Match" name="Frais de Création - amount">
            <con:configuration><path><![CDATA[<Results>
{
for $x in //Row[contains(MOVEMENT.PRODUCTID/text(), 'Frais/Creation')]
return <result><label>{$x/MOVEMENT.PRODUCTLABEL/text()}</label><productId>{$x/MOVEMENT.PRODUCTID/text()}</productId><amount>{$x/MOVEMENT.AMOUNT/text()}</amount></result>
}
</Results>]]></path><content><![CDATA[<Results>
  <result>
    <label>frais de dossier</label>
    <productId>jet/Frais/Creation</productId>
    <amount>30.000000</amount>
  </result>
</Results>]]></content><allowWildcards>false</allowWildcards></con:configuration>
          </con:assertion>
          <con:assertion type="XQuery Match" name="Frais de Création - tva">
            <con:configuration>
              <path>&lt;Results> { for $x in //Row[contains(MOVEMENT.PRODUCTID/text(), 'Frais/Creation')] return
              &lt;result>{$x/MOVEMENT.VAT_TYPE/text()}&lt;/result> } &lt;/Results></path>
              <content>&lt;Results> &lt;result>R&lt;/result> &lt;/Results></content>
              <allowWildcards>false</allowWildcards>
            </con:configuration>
          </con:assertion>
          <con:assertion type="XQuery Match" name="Frais de Création - RUM + PaymentType">
            <con:configuration>
              <path><![CDATA[
                <Results>
{
for $x in //Row[contains(MOVEMENT.PRODUCTID/text(), 'Frais/Creation')]
return <result><rum>{$x/MOVEMENT.RUM/text()}</rum><payementType>{$x/MOVEMENT.PAYMENT_TYPE/text()}</payementType></result>
}
</Results>
]]></path>
              <content><![CDATA[
                <Results>
  <result>
    <rum>R0000012</rum>
    <payementType>SEPA</payementType>
  </result>
</Results>
]]></content>
              <allowWildcards>false</allowWildcards>
            </con:configuration>
          </con:assertion>
          <con:assertion type="XQuery Match" name="Frais de Création - TransactionType">
            <con:configuration>
              <path>&lt;Results> { for $x in //Row[contains(MOVEMENT.PRODUCTID/text(), 'Frais/Creation')] return
              &lt;result>{$x/MOVEMENT.TRANSACTIONTYPE/text()}&lt;/result> } &lt;/Results></path>
              <content>&lt;Results> &lt;result>DEBIT&lt;/result> &lt;/Results></content>
              <allowWildcards>false</allowWildcards>
            </con:configuration>
          </con:assertion>
          <con:assertion type="XQuery Match" name="Frais de Création - Period">
            <con:configuration><path>&lt;Results> 
{ 
for $x in //Row[contains(MOVEMENT.PRODUCTID/text(), 'Frais/Creation')] 
return &lt;result>{$x/MOVEMENT.STARTFROM} {$x/MOVEMENT.ENDTO}&lt;/result> 
} 
&lt;/Results></path><content><![CDATA[<Results>
  <result>
    <MOVEMENT.STARTFROM>${=new java.text.SimpleDateFormat("yyyy-MM-dd HH:mm:ss.S").parse('${InfosFacture#DateLivraison}').format('yyyy-MM-dd')}</MOVEMENT.STARTFROM>
    <MOVEMENT.ENDTO>${=new java.text.SimpleDateFormat("yyyy-MM-dd HH:mm:ss.S").parse('${InfosFacture#DateLivraison}').format('yyyy-MM-dd')}</MOVEMENT.ENDTO>
  </result>
</Results>
]]></content><allowWildcards>false</allowWildcards></con:configuration>
          </con:assertion>
          <con:properties/>
        </con:config>
      </con:testStep><con:loadTest name="Test Create" id="8daf10df-289f-46c1-ae6e-f627be1dede9">
        <con:settings><con:setting id="HttpSettings@close-connections">false</con:setting></con:settings>
        <con:threadCount>50</con:threadCount>
        <con:startDelay>0</con:startDelay>
        <con:sampleInterval>250</con:sampleInterval>
        <con:calculateTPSOnTimePassed>true</con:calculateTPSOnTimePassed>
        <con:resetStatisticsOnThreadCountChange>true</con:resetStatisticsOnThreadCountChange>
        <con:historyLimit>-1</con:historyLimit>
        <con:testLimit>60</con:testLimit>
        <con:limitType>TIME</con:limitType>
        <con:loadStrategy>
          <con:type>Simple</con:type>
        </con:loadStrategy>
        <con:assertion type="Step Status" name="Step Status"/>
        <con:maxAssertionErrors>100</con:maxAssertionErrors>
        <con:cancelExcessiveThreads>true</con:cancelExcessiveThreads>
        <con:strategyInterval>500</con:strategyInterval>
      </con:loadTest>
      <con:properties>
        <con:property>
          <con:name>RefCommande</con:name>
          <con:value>28e76982-76d7-4b4b-9f13-86c4df6a55a9</con:value>
        </con:property>
        <con:property>
          <con:name>RefContrat</con:name>
          <con:value>00000396</con:value>
        </con:property>
      </con:properties>
    </con:testCase>
    <con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Resilier Jet" searchProperties="true" id="71c774c7-3fe9-416e-aaf6-86ebc76b4d14">
      <con:settings/>
      
      <con:testStep type="calltestcase" name="CreerContrat" id="4e02876a-1392-4fc6-b013-00a2198192c6">
        <con:settings/>
        <con:config xsi:type="con:RunTestCaseStep" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:targetTestCase>c3134394-ecff-433e-9aed-7a7b112617c3</con:targetTestCase>
          <con:properties>
            <con:property>
              <con:name>RefCommande</con:name>
              <con:value>28e76982-76d7-4b4b-9f13-86c4df6a55a9</con:value>
            </con:property>
            <con:property>
              <con:name>RefContrat</con:name>
              <con:value>00000396</con:value>
            </con:property>
          </con:properties>
          <con:returnProperties>
            <con:entry>RefCommande</con:entry>
            <con:entry>RefContrat</con:entry>
          </con:returnProperties>
          <con:runMode>SINGLETON_AND_WAIT</con:runMode>
        </con:config>
      </con:testStep>
      <con:testStep type="restrequest" name="Resilier Contrat" id="6eea6554-9d59-4567-b906-a58155c6b43d">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/{refContrat}/resilier" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="Resilier Contrat" mediaType="application/json" postQueryString="false">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>
{
  "politiqueResiliation": {
    "fraisResiliation": "true",
    "remboursement": "true",
    "typeResiliation": "RIC",
    
    "enCascade": "true",
    "montantRemboursement": "",
    "commentaire": "test",
    "motif": "IMPAYE",
    "penalite": "true",
    "montantResiliation": "",
    "commentaire": "this is a test"
  },
  "user": "testeur"
}</con:request>
            <con:originalUri>http://10.10.2.52/contrat-core/contrat/fcccf99e/resilier</con:originalUri><con:assertion type="Valid HTTP Status Codes" name="Code Retour 200" id="20b95fed-f66f-4685-bce1-6e0a1d92ffad">
              <con:configuration>
                <codes>200</codes>
              </con:configuration>
            </con:assertion>
            <con:assertion type="GroovyScriptAssertion" name="Response must be empty" id="6ca1ddfa-7b0f-48d8-b5fa-1642229ad752">
              <con:configuration><scriptText>assert messageExchange.hasResponse() == false</scriptText></con:configuration>
            </con:assertion>
            <con:credentials>
              <con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters>
              <entry key="refContrat" value="${CreerContrat#RefContrat}" xmlns="http://eviware.com/soapui/config"/>
            </con:parameters>
          </con:restRequest>
        </con:config>
      </con:testStep>
      <con:testStep type="jdbc" name="Politique Resiliation" id="2863d5b9-a4f4-4dca-b281-0c360acc7cea">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString>
          <con:query>select * from politiqueresiliation where id = (select politiqueResiliationId from contrat where reference =
          "${CreerContrat#RefContrat}")</con:query>
          <con:assertion type="Simple Contains" name="Commentaire">
            <con:configuration>
              <token>&lt;POLITIQUERESILIATION.COMMENTAIRE>this is a test&lt;/POLITIQUERESILIATION.COMMENTAIRE></token>
              <ignoreCase>false</ignoreCase>
              <useRegEx>false</useRegEx>
            </con:configuration>
          </con:assertion>
          <con:assertion type="Simple Contains" name="Cascade=True">
            <con:configuration>
              <token>&lt;POLITIQUERESILIATION.ENCASCADE>1&lt;/POLITIQUERESILIATION.ENCASCADE></token>
              <ignoreCase>false</ignoreCase>
              <useRegEx>false</useRegEx>
            </con:configuration>
          </con:assertion>
          <con:properties/>
        </con:config>
      </con:testStep>
      <con:testStep type="jdbc" name="Contrat Resilie" id="eb24ee75-f076-4887-ac15-77d6536fbb42" disabled="true">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString>
          <con:query>select date_format(c.datefincontrat, '%Y-%m-%d') as "datefinContrat" from contrat c where
          c.reference = "${CreerContrat#RefContrat}"</con:query>
          <con:assertion type="XQuery Match" name="Date Fin Contrat = Now()">
            <con:configuration>
              <path>&lt;Results> { for $x in //Row return &lt;result>{$x/DATEFINCONTRAT/text()}&lt;/result> }
              &lt;/Results></path>
              <content>&lt;Results> &lt;result>${=new java.text.SimpleDateFormat("yyyy-MM-dd").format(new
              Date())}&lt;/result> &lt;/Results></content>
              <allowWildcards>false</allowWildcards>
            </con:configuration>
          </con:assertion>
          <con:properties/>
        </con:config>
      </con:testStep>
      <con:testStep type="jdbc" name="EC Resilie" id="089e5108-7060-46eb-b3da-ba6f44c91163" disabled="true">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString>
          <con:query>select date_format(c.datefincontrat, '%Y-%m-%d') as "datefinContrat" from elementcontractuel
          c where c.reference LIKE "${CreerContrat#RefContrat}%"</con:query>
          <con:assertion type="XQuery Match" name="Date Fin Contrat = Now()">
            <con:configuration>
              <path>&lt;Results> { for $x in //Row return &lt;result>{$x/DATEFINCONTRAT/text()}&lt;/result> }
              &lt;/Results></path>
              <content><![CDATA[
                <Results>
  <result>${=new java.text.SimpleDateFormat("yyyy-MM-dd").format(new Date())}</result>
  <result>${=new java.text.SimpleDateFormat("yyyy-MM-dd").format(new Date())}</result>
  <result>${=new java.text.SimpleDateFormat("yyyy-MM-dd").format(new Date())}</result>
</Results>
]]></content>
              <allowWildcards>false</allowWildcards>
            </con:configuration>
          </con:assertion>
          <con:properties/>
        </con:config>
      </con:testStep>
      <con:testStep type="delay" name="Wait for beginning Retour" id="6531dc23-ac74-4bdc-884e-12c749f75379">
        <con:settings/>
        <con:config>
          <delay>500</delay>
        </con:config>
      </con:testStep>
      <con:testStep type="jdbc" name="Bon de Retour - Initié" id="b91d8161-38d2-416c-b44a-db896a141598">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString>
          <con:query>select id, reference,
causenonlivraison,
date_format(dateinitiation, '%Y-%m-%d') as "dateInitiation",
datedebutPreparation,
dateretourtermine,
idClient, typebonpreparation
from bonpreparation 
where reference = "${CreerContrat#RefContrat}"
  and typebonpreparation = "retour"</con:query>
          <con:assertion type="Simple Contains" name="Type BP = retour">
            <con:configuration>
              <token>&lt;BONPREPARATION.TYPEBONPREPARATION>RETOUR&lt;/BONPREPARATION.TYPEBONPREPARATION></token>
              <ignoreCase>false</ignoreCase>
              <useRegEx>false</useRegEx>
            </con:configuration>
          </con:assertion>
          <con:assertion type="Simple Contains" name="Id Client">
            <con:configuration>
              <token>&lt;BONPREPARATION.IDCLIENT>00003870&lt;/BONPREPARATION.IDCLIENT></token>
              <ignoreCase>false</ignoreCase>
              <useRegEx>false</useRegEx>
            </con:configuration>
          </con:assertion>
          
          <con:assertion type="XPath Match" name="Date Initiation" disabled="true"><con:configuration><path>//ResultSet/Row/DATEINITIATION</path><content>${=new java.text.SimpleDateFormat("yyyy-MM-dd").format(new Date())}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/>
        </con:config>
      </con:testStep>
      <con:testStep type="jdbc" name="EL de retour - Initié" id="3ee40f40-faee-4006-8ec3-3d4bd5f81c85">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString>
          <con:query>select * from elementlivraison 
where bonPreparationParent = (select id
from bonpreparation 
where reference = "${CreerContrat#RefContrat}"
  and typebonpreparation = "retour")</con:query>
          <con:assertion type="XQuery Match" name="TypeEL=Retour">
            <con:configuration><path>&lt;Results> 
{ 
 for $x in //Row 
 return &lt;Result>{$x/ELEMENTLIVRAISON.TYPEBONPREPARATION/text()}&lt;/Result> 
} 
&lt;/Results></path><content><![CDATA[<Results>
  <Result>RETOUR</Result>
  <Result>RETOUR</Result>
  <Result>RETOUR</Result>
</Results>
]]></content><allowWildcards>false</allowWildcards></con:configuration>
          </con:assertion>
          <con:assertion type="XQuery Match" name="Acteurs=NetRetour ou Packager">
            <con:configuration><path>&lt;Results> 
{ 
 for $x in //Row 
 order by $x/ELEMENTLIVRAISON.TYPECONTRAT 
 return &lt;result>{$x/ELEMENTLIVRAISON.ACTEUR/text()}&lt;/result> 
} 
&lt;/Results></path><content><![CDATA[<Results>
  <result>PACKAGER</result>
  <result>PACKAGER</result>
  <result>NETRETOUR</result>
</Results>
]]></content><allowWildcards>false</allowWildcards></con:configuration>
          </con:assertion>
          <con:assertion type="XPath Match" name="1 seul code Produit">
            <con:configuration><path>count(//Row[ELEMENTLIVRAISON.TYPECONTRAT="ABONNEMENT"]/ELEMENTLIVRAISON.RETAILERPACKAGERID/text())</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
          </con:assertion>
          <con:assertion type="XQuery Match" name="1 seul code Colis">
            <con:configuration><path>count(//Row[ELEMENTLIVRAISON.TYPECONTRAT="LOCATION"]/ELEMENTLIVRAISON.CODECOLIS/text())</path><content>&lt;xml-fragment>1&lt;/xml-fragment></content><allowWildcards>false</allowWildcards></con:configuration>
          </con:assertion>
          <con:properties/>
        </con:config>
      </con:testStep>
      <con:testStep type="delay" name="Wait for end Retour" id="aaadb5d7-4d3e-4cb4-8210-b344f1519344">
        <con:settings/>
        <con:config><delay>500</delay></con:config>
      </con:testStep>
      <con:testStep type="jdbc" name="Bon de Retour - Témoin" id="4656be9d-8b41-49dc-b2f4-17760a6bda6c">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString>
          <con:query>select id, reference,
causenonlivraison,
date_format(dateinitiation, '%Y-%m-%d') as "datefinContrat",
datedebutPreparation,
dateretourtermine,
idClient, typebonpreparation
from bonpreparation 
where reference = "${CreerContrat#RefContrat}" and TYPEBONPREPARATION='RETOUR'</con:query>
          
          
          
          <con:properties/>
        </con:config>
      </con:testStep><con:testStep type="goto" name="Go End Retour" id="5902bce0-5b9a-41d9-b8fd-14911b357a85">
        <con:settings/>
        <con:config xsi:type="con:GotoStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:condition>
            <con:name>Wait Facturation</con:name>
            <con:type>XPATH</con:type>
            <con:expression>not(//Results/ResultSet/Row/BONPREPARATION.DATERETOURTERMINE/text())
and
not(//Results/ResultSet/Row/BONPREPARATION.CAUSENONLIVRAISON/text())</con:expression>
            <con:targetStep>Wait for end Retour</con:targetStep>
          </con:condition>
        </con:config>
      </con:testStep><con:testStep type="groovy" name="Nb Passes = 0" id="3d282b0c-255e-4970-be11-9914456e772c">
        <con:settings/>
        <con:config><script>int passe = 0 
testRunner.testCase.setPropertyValue("NbPasses", passe.toString())</script></con:config>
      </con:testStep><con:testStep type="jdbc" name="Bon de Retour - Retourné" id="a1a3ad6a-e0a8-435f-86e6-5b16a93c77b5">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString>
          <con:query>select id, reference,
 causenonlivraison,
 date_format(dateretourtermine, '%Y-%m-%d') as "dateRetour",
 datedebutPreparation,
 dateInitiation,
 idClient, typebonpreparation
from bonpreparation 
where reference = "${CreerContrat#RefContrat}" and TYPEBONPREPARATION='RETOUR'</con:query>
          <con:assertion type="Simple Contains" name="Type BP = retour">
            <con:configuration><token>&lt;BONPREPARATION.TYPEBONPREPARATION>RETOUR&lt;/BONPREPARATION.TYPEBONPREPARATION></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration>
          </con:assertion>
          <con:assertion type="Simple Contains" name="Id Client">
            <con:configuration>
              <token>&lt;BONPREPARATION.IDCLIENT>00003870&lt;/BONPREPARATION.IDCLIENT></token>
              <ignoreCase>false</ignoreCase>
              <useRegEx>false</useRegEx>
            </con:configuration>
          </con:assertion>
          
          <con:assertion type="XPath Match" name="Date Initiation"><con:configuration><path>exists(//ResultSet/Row/BONPREPARATION.DATEINITIATION/text())</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="Date Retour" disabled="true"><con:configuration><path>//ResultSet/Row/DATERETOUR/text()</path><content>${=new java.text.SimpleDateFormat("yyyy-MM-dd").format(new Date())}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/>
        </con:config>
      </con:testStep><con:testStep type="jdbc" name="EL de retour - Retourné" id="c96f0310-c0ca-4600-90d7-f9da682598b2">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString>
          <con:query>select * from elementlivraison 
where  bonPreparationParent = (select id
from bonpreparation 
where reference = "${CreerContrat#RefContrat}"
  and typebonpreparation = "retour")
order by reference</con:query>
          
          <con:assertion type="XPath Match" name="1 seul Code Produit">
            <con:configuration><path>count(//Row[ELEMENTLIVRAISON.TYPECONTRAT="ABONNEMENT"]/ELEMENTLIVRAISON.RETAILERPACKAGERID/text())</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
          </con:assertion>
          <con:assertion type="XQuery Match" name="1 seul Code Colis">
            <con:configuration><path>count(//Row[ELEMENTLIVRAISON.TYPECONTRAT="LOCATION"]/ELEMENTLIVRAISON.CODECOLIS/text())</path><content>&lt;xml-fragment>1&lt;/xml-fragment></content><allowWildcards>false</allowWildcards></con:configuration>
          </con:assertion>
          <con:assertion type="XQuery Match" name="Tous les éléments retournés"><con:configuration><path>&lt;Results>
{
  for $x in //Row
  return &lt;result>{exists($x/ELEMENTLIVRAISON.DATERETOURTERMINE/text())}&lt;/result>
}
&lt;/Results></path><content><![CDATA[<Results>
  <result>true</result>
  <result>true</result>
  <result>true</result>
</Results>]]></content><allowWildcards>false</allowWildcards></con:configuration></con:assertion><con:assertion type="XQuery Match" name="NumEC" disabled="true"><con:configuration><path>&lt;Results>
{
  for $x in //Row
  order by reference
  return &lt;result>{$x/ELEMENTLIVRAISON.NUMEC/text()}&lt;/result>
}
&lt;/Results></path><content><![CDATA[<Results>
  <result>1</result>
  <result>2</result>
  <result>3</result>
</Results>]]></content><allowWildcards>false</allowWildcards></con:configuration></con:assertion><con:assertion type="XQuery Match" name="Resiliation Partielle = 0"><con:configuration><path>&lt;Results>
{
  for $x in //Row
  order by reference
  return &lt;result>{$x/ELEMENTLIVRAISON.RESILIATIONPARTIEL/text()}&lt;/result>
}
&lt;/Results></path><content><![CDATA[<Results>
  <result>0</result>
  <result>0</result>
  <result>0</result>
</Results>]]></content><allowWildcards>false</allowWildcards></con:configuration></con:assertion><con:assertion type="XQuery Match" name="Acteurs = NetRetour ou Packager"><con:configuration><path>&lt;Results> 
{ 
 for $x in //Row 
 order by $x/ELEMENTLIVRAISON.TYPECONTRAT 
 return &lt;result>{$x/ELEMENTLIVRAISON.ACTEUR/text()}&lt;/result> 
} 
&lt;/Results></path><content><![CDATA[<Results>
  <result>PACKAGER</result>
  <result>PACKAGER</result>
  <result>NETRETOUR</result>
</Results>]]></content><allowWildcards>false</allowWildcards></con:configuration></con:assertion><con:properties/>
        </con:config>
      </con:testStep><con:testStep type="transfer" name="Transfert Date Retour" id="d2212f17-92ac-457c-8246-4d5f24c41f0d">
        <con:settings/>
        <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false">
            <con:name>DateLivraison</con:name>
            <con:sourceType>ResponseAsXml</con:sourceType>
            <con:sourceStep>EL de retour - Retourné</con:sourceStep>
            <con:sourcePath>//Results/ResultSet/Row/BONPREPARATION.DATETERMINE/text()</con:sourcePath>
            <con:targetType>DateLivraison</con:targetType>
            <con:targetStep>InfosFacture</con:targetStep>
          </con:transfers>
        </con:config>
      </con:testStep><con:testStep type="properties" name="InfosFacture" id="e0808775-a219-4c60-9c93-e5428781b747" disabled="true">
        <con:settings/>
        <con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:properties>
            <con:property>
              <con:name>DateLivraison</con:name>
              <con:value xsi:nil="true"/>
            </con:property>
          </con:properties>
        </con:config>
      </con:testStep><con:testStep type="delay" name="Wait for end Facturation" id="332aa588-2e65-4c64-b594-70b5b20a8883" disabled="true">
        <con:settings/>
        <con:config>
          <delay>500</delay>
        </con:config>
      </con:testStep><con:testStep type="groovy" name="Nb Passes +1" id="37329f3a-802f-4a81-b6b1-aa63491cacb4" disabled="true">
        <con:settings/>
        <con:config><script>int passe = testRunner.testCase.getPropertyValue("NbPasses").toInteger() 
passe = passe + 1
testRunner.testCase.setPropertyValue("NbPasses", passe.toString())</script></con:config>
      </con:testStep><con:testStep type="jdbc" name="Facturation-exists" id="36ecb592-468d-4036-8482-880c69805294" disabled="true">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.100.105.41:3306/test_saphir?user=test&amp;password=test</con:connectionString>
          <con:query>select * from movement 
where accountId = '00003870' 
and billinggroup ="${CreerContrat#RefCommande}" 
and productid NOT LIKE '%/Frais/Creation';</con:query>
          <con:properties/>
        </con:config>
      </con:testStep><con:testStep type="goto" name="Go Facturation" id="57d82772-4924-4f9a-9e2b-eaaecb500917" disabled="true">
        <con:settings/>
        <con:config xsi:type="con:GotoStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:condition>
            <con:name>Wait Facturation</con:name>
            <con:type>XPATH</con:type>
            <con:expression>not(//Results/ResultSet/Row/MOVEMENT.ID/text())
and
${#TestCase#NbPasses} &lt; 6
</con:expression>
            <con:targetStep>Wait for end Facturation</con:targetStep>
          </con:condition>
        </con:config>
      </con:testStep><con:testStep type="jdbc" name="Facturation-valid" id="1f0baeae-aadb-45fc-a14e-053eb71807ff" disabled="true">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.100.105.41:3306/test_saphir?user=test&amp;password=test</con:connectionString>
          <con:query>select * from movement 
where accountId = '00003870' 
and billinggroup ="${CreerContrat#RefCommande}" 
and productid NOT LIKE '%/Frais/Creation';</con:query>
          <con:assertion type="XQuery Match" name="Frais de Résiliation">
            <con:configuration><path><![CDATA[<Results>
{
for $x in //Row[contains(MOVEMENT.PRODUCTID/text(), 'Frais/Resiliation')]
return 
<result>
   <label>{$x/MOVEMENT.PRODUCTLABEL/text()}</label>
   <productId>{$x/MOVEMENT.PRODUCTID/text()}</productId>
   <amount>{$x/MOVEMENT.AMOUNT/text()}</amount>
</result>
}
</Results>]]></path><content><![CDATA[<Results>
<result>
<label></label>
<productId></productId>
<amount></amount>
<result>
</Results>]]></content><allowWildcards>false</allowWildcards></con:configuration>
          </con:assertion>
          
          
          
          <con:assertion type="XQuery Match" name="Frais de Résiliation - Period">
            <con:configuration><path>&lt;Results> { for $x in //Row[contains(MOVEMENT.PRODUCTID/text(), 'Frais/Resiliation')] return
              &lt;result>{$x/MOVEMENT.STARTFROM} {$x/MOVEMENT.ENDTO}&lt;/result> } &lt;/Results></path><content><![CDATA[
                <Results>
  <result>
    <MOVEMENT.STARTFROM>${=new java.text.SimpleDateFormat("yyyy-MM-dd HH:mm:ss.S").parse('${InfosFacture#DateLivraison}').format('yyyy-MM-dd')}</MOVEMENT.STARTFROM>
    <MOVEMENT.ENDTO>${=new java.text.SimpleDateFormat("yyyy-MM-dd HH:mm:ss.S").parse('${InfosFacture#DateLivraison}').format('yyyy-MM-dd')}</MOVEMENT.ENDTO>
  </result>
</Results>
]]></content><allowWildcards>false</allowWildcards></con:configuration>
          </con:assertion>
          <con:properties/>
        </con:config>
      </con:testStep><con:properties><con:property><con:name>NbPasses</con:name><con:value>0</con:value></con:property></con:properties>
    </con:testCase>
    <con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Création Contrat Impossible" searchProperties="true" id="a84bb25a-ff92-4a42-b43e-70bff7c06b01">
      <con:settings/>
      <con:testStep type="groovy" name="SetRefCommande" id="dec95375-73c4-4b89-81b8-df200301ac22">
        <con:settings/>
        <con:config><script>import static java.util.UUID.randomUUID 
def tc = context.testCase 
uuid = randomUUID().toString()
testRunner.testCase.setPropertyValue( "RefCommande", uuid ) 
log.info testRunner.testCase.getPropertyValue("RefCommande")</script></con:config>
      </con:testStep>
      <con:testStep type="properties" name="InfosContrat" id="ee422b9f-2703-4cf2-b114-fd109dd873ca">
        <con:settings/>
        <con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:properties>
            <con:property>
              <con:name>refCommande</con:name>
              <con:value>00000191</con:value>
            </con:property>
          <con:property><con:name>refContrat</con:name><con:value>00000398</con:value></con:property></con:properties>
        </con:config>
      </con:testStep>
      <con:testStep type="restrequest" name="Preparer" id="4b8221e6-5ab5-4658-87f2-d767c96c198e">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/preparer" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="Preparer" mediaType="application/json" postQueryString="false">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{
  "user": "test",
  "produits": [
    {
      "reference": "jet",
      "numEC": "1",
      "numeroCommande": "${#TestCase#RefCommande}",
      "label": "Abonnement jet 10Go",
      "typeProduit": "SERVICE",
      "prix": {
        "engagement": "12",
        "duree": "24",
        "periodicite": "1",
        "typeTVA": "R",
        "montant": "30",
        "frais": [
          {
            "montant": "30",
            "typeFrais": "creation"
          }
        ],
        "modePaiement": "SEPA",
        "modeFacturation": "PREMIER_MOIS"
      }
    },
    {
      "reference": "option.plus.50g",
      "numEC": "2",
      "numECParent": "1",
      "numeroCommande": "${#TestCase#RefCommande}",
      "label": "Option+ 50Go",
      "typeProduit": "SERVICE",
      "prix": {
        "engagement": "12",
        "duree": "24",
        "periodicite": "1",
        "typeTVA": "R",
        "montant": "50",
        "frais": [
          {
            "montant": "50",
            "typeFrais": "resiliation",
            "nombreMois": "12",
            "ordre": "1"
          },
          {
            "montant": "30",
            "typeFrais": "resiliation",
            "ordre": "2"
          }
        ],
        "modePaiement": "CB",
        "modeFacturation": "PREMIER_MOIS"
      }
    },
    {
      "reference": "kit-sat",
      "numEC": "3",
      "numECParent": "1",
      "numeroCommande": "${#TestCase#RefCommande}",
      "label": "Kit Satellite Jet",
      "typeProduit": "BIEN",
      "prix": {
        "engagement": "24",
        "duree": "48",
        "periodicite": "3",
        "typeTVA": "R",
        "montant": "30",
        "modePaiement": "SEPA",
        "modeFacturation": "PREMIER_MOIS"
      }
    }
  ]
}</con:request>
            <con:originalUri>http://10.10.2.52/contrat-core/contrat/preparer</con:originalUri><con:assertion type="XQuery Match" name="Check Abonnement - Location - Vente" id="17bd5f18-997e-48e3-ab56-f6d733cb1aaf" disabled="true">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/preparer'; &lt;Results> 
{ for $x  in //ns1:sousContrats/ns1:e order by $x/referenceProduit return &lt;t>{$x/ns1:typeContrat/text()}&lt;/t> }

                &lt;/Results></path><content><![CDATA[
                  <Results>
  <t>LOCATION</t>
  <t>ABONNEMENT</t>
  <t>ABONNEMENT</t>
</Results>
]]></content><allowWildcards>false</allowWildcards></con:configuration>
            </con:assertion>
            <con:assertion type="XQuery Match" name="Statut = PREPARER" id="1e1f7a6d-1b6b-4f9e-8722-dd4a95446a05" disabled="true">
              <con:configuration>
                <path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/preparer'; &lt;Results> { for $x
                in //ns1:sousContrats/ns1:e return &lt;result>{$x/ns1:statut/text()}&lt;/result> } &lt;/Results></path>
                <content><![CDATA[
                  <Results>
  <result>PREPARER</result>
  <result>PREPARER</result>
  <result>PREPARER</result>
</Results>
]]></content>
                <allowWildcards>false</allowWildcards>
              </con:configuration>
            </con:assertion>
            <con:assertion type="XQuery Match" name="XQuery Match" id="faab2143-e0cf-4912-adce-7a14cf6f9fd6"><con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/preparer';
exists(//ns1:Response/ns1:referenceContrat)</path><content>true</content><allowWildcards>false</allowWildcards></con:configuration></con:assertion><con:credentials>
              <con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters/>
          </con:restRequest>
        </con:config>
      </con:testStep>
      <con:testStep type="transfer" name="Transfert Ref Contrat" id="47140ccf-3769-4c9c-a3ee-306eea5feba5">
        <con:settings/>
        <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false">
            <con:name>Ref Contrat</con:name>
            <con:sourceType>ResponseAsXml</con:sourceType>
            <con:sourceStep>Preparer</con:sourceStep>
            <con:sourcePath>declare namespace nsa='http://10.10.2.52/contrat-core/contrat/preparer';
            //nsa:referenceContrat</con:sourcePath>
            <con:targetType>refContrat</con:targetType>
            <con:targetStep>InfosContrat</con:targetStep>
          </con:transfers>
          <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false">
            <con:name>Ref Contrat Global</con:name>
            <con:sourceType>ResponseAsXml</con:sourceType>
            <con:sourceStep>Preparer</con:sourceStep>
            <con:sourcePath>declare namespace nsa='http://10.10.2.52/contrat-core/contrat/preparer';
            //nsa:referenceContrat</con:sourcePath>
            <con:targetType>RefContrat</con:targetType>
            <con:targetStep>#TestCase#</con:targetStep>
          </con:transfers>
        </con:config>
      </con:testStep>
      <con:testStep type="jdbc" name="Contrat Prepare" id="df5bb315-c536-48e5-a6d6-ae0fd8f7ba57">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString>
          <con:query>select * from contrat where reference = "${InfosContrat#refContrat}"</con:query>
          <con:assertion type="Simple Contains" name="DatePreparation is NOT NULL">
            <con:configuration><token>&lt;CONTRAT.DATEPREPARATION></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration>
          </con:assertion>
          <con:assertion type="XQuery Match" name="Reference Contrat">
            <con:configuration>
              <path>&lt;Result> { for $i in //Row return $i/CONTRAT.REFERENCE/string() } &lt;/Result></path>
              <content>&lt;Result>${InfosContrat#RefContrat}&lt;/Result></content>
              <allowWildcards>true</allowWildcards>
            </con:configuration>
          </con:assertion>
          <con:properties/>
        </con:config>
      </con:testStep>
      <con:testStep type="restrequest" name="Valider" id="e126fdaf-65c1-452b-bff7-c6ffcc5c3d90">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/{refContrat}/valider" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="Valider" mediaType="application/json" postQueryString="false">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{
  "idClient": "00003870",
  "idAdrFacturation": "685",
  "paiementInfos": [
    {
      "referenceProduit": "jet",
      "numEC": "1",
      "referenceModePaiement": "R0000012",
      "idAdrLivraison": "adrliv1"
    },
    {
      "referenceProduit": "option.plus.50g",
      "numEC": "2",
      "referenceModePaiement": "R0000012",
      "idAdrLivraison": "adrliv1"
    },
    {
      "referenceProduit": "kit-sat",
      "numEC": "3",
      "referenceModePaiement": "R0000012",
      "idAdrLivraison": "adrliv1"
    }
  ],
  "politiqueValidation": {
    "fraisCreation": "true",
     "checkIsPackagerCreationPossible": "true"
  },
  "user": "test"
}</con:request>
            <con:originalUri>http://10.10.2.52/contrat-core/contrat/00000192/valider</con:originalUri><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="225bb281-95cc-4b1a-b41f-f58ba0cde373">
              <con:configuration>
                <codes>200</codes>
              </con:configuration>
            </con:assertion>
            <con:assertion type="GroovyScriptAssertion" name="Response must be empty" id="2834c35a-5354-446f-be13-a5767c351412">
              <con:configuration>
                <scriptText>assert messageExchange.hasResponse() == false</scriptText>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters>
              <entry key="refContrat" value="${InfosContrat#RefContrat}" xmlns="http://eviware.com/soapui/config"/>
            </con:parameters>
            <con:parameterOrder>
              <con:entry>refContrat</con:entry>
            </con:parameterOrder>
          </con:restRequest>
        </con:config>
      </con:testStep>
      <con:testStep type="jdbc" name="Politique Validation" id="3511e940-0068-4673-9f05-8016b376993d">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString>
          <con:query>select * from politiquevalidation where id = (select politiqueValidationId from contrat where reference =
          "${InfosContrat#refContrat}")</con:query>
          <con:assertion type="Simple Contains" name="Frais Création = True">
            <con:configuration>
              <token>&lt;POLITIQUEVALIDATION.FRAISCREATION>1&lt;/POLITIQUEVALIDATION.FRAISCREATION></token>
              <ignoreCase>false</ignoreCase>
              <useRegEx>false</useRegEx>
            </con:configuration>
          </con:assertion>
          <con:properties/>
        </con:config>
      </con:testStep>
      <con:testStep type="delay" name="Wait for beginning Livraison" id="8b028781-a36c-4686-97a4-fd9ff2ddffd9">
        <con:settings/>
        <con:config>
          <delay>500</delay>
        </con:config>
      </con:testStep>
      <con:testStep type="jdbc" name="Bon de Livraison - exists" id="19fbf5d4-84c0-4e86-9296-65491b483fa2">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString>
          <con:query>select * from bonpreparation 
where reference = "${InfosContrat#refContrat}"</con:query>
          <con:properties/>
        </con:config>
      </con:testStep>
      <con:testStep type="goto" name="Go Beginning Livraison" id="0a39b981-da3e-4752-b062-1dc8e23c3a0a">
        <con:settings/>
        <con:config xsi:type="con:GotoStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:condition>
            <con:name>Wait Facturation</con:name>
            <con:type>XPATH</con:type>
            <con:expression>not(//Results/ResultSet/Row/BONPREPARATION.DATEINITIATION/text())</con:expression>
            <con:targetStep>Wait for beginning Livraison</con:targetStep>
          </con:condition>
        </con:config>
      </con:testStep>
      <con:testStep type="jdbc" name="Elements de Livraison" id="fdc31b8b-3ccb-4102-9ff2-37e3e8bdb571">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString>
          <con:query>select * from elementlivraison 
where bonPreparationParent =
  (select id 
    from bonpreparation 
    where reference = "${InfosContrat#refContrat}")</con:query>
          <con:assertion type="XQuery Match" name="Acteurs=NetDelivery ou Packager">
            <con:configuration>
              <path>&lt;Results> { for $x in //Row order by $x/ELEMENTLIVRAISON.TYPECONTRAT return
              &lt;result>{$x/ELEMENTLIVRAISON.ACTEUR/text()}&lt;/result> } &lt;/Results></path>
              <content><![CDATA[
                <Results>
  <result>PACKAGER</result>
  <result>PACKAGER</result>
  <result>NETDELIVERY</result>
</Results>
]]></content>
              <allowWildcards>false</allowWildcards>
            </con:configuration>
          </con:assertion>
          <con:assertion type="XQuery Match" name="Reference Contrat">
            <con:configuration>
              <path>&lt;Results> { for $x in //Row order by $x/ELEMENTLIVRAISON.REFERENCEPRODUIT return
              &lt;result>{$x/ELEMENTLIVRAISON.REFERENCE/text()}&lt;/result> } &lt;/Results></path>
              <content><![CDATA[
                <Results>
  <result>${InfosContrat#refContrat}-1</result>
  <result>${InfosContrat#refContrat}-3</result>
  <result>${InfosContrat#refContrat}-2</result>
</Results>
]]></content>
              <allowWildcards>false</allowWildcards>
            </con:configuration>
          </con:assertion>
          <con:assertion type="XQuery Match" name="TypeEL=Livraison">
            <con:configuration>
              <path>&lt;Results> { for $x in //Row return
              &lt;Result>{$x/ELEMENTLIVRAISON.TYPEBONPREPARATION/text()}&lt;/Result> } &lt;/Results></path>
              <content><![CDATA[
                <Results>
  <Result>LIVRAISON</Result>
  <Result>LIVRAISON</Result>
  <Result>LIVRAISON</Result>
</Results>
]]></content>
              <allowWildcards>false</allowWildcards>
            </con:configuration>
          </con:assertion>
          <con:properties/>
        </con:config>
      </con:testStep>
      <con:testStep type="delay" name="Wait for end Livraison" id="4fbed5fd-e339-4766-a70e-348d6bfeb1fb">
        <con:settings/>
        <con:config>
          <delay>500</delay>
        </con:config>
      </con:testStep>
      <con:testStep type="jdbc" name="Bon de Livraison" id="37abff22-258c-4dba-bacc-3fb206e9d2b6">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString>
          <con:query>select * from bonpreparation where reference = "${InfosContrat#refContrat}"</con:query>
          <con:assertion type="XPath Match" name="Date Initiation">
            <con:configuration>
              <path>exists(//Row/BONPREPARATION.DATEINITIATION)</path>
              <content>true</content>
              <allowWildcards>false</allowWildcards>
              <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
              <ignoreComments>false</ignoreComments>
            </con:configuration>
          </con:assertion>
          <con:assertion type="XPath Match" name="TypeBonPreparation=Livraison">
            <con:configuration>
              <path>//Row/BONPREPARATION.TYPEBONPREPARATION</path>
              <content>LIVRAISON</content>
              <allowWildcards>false</allowWildcards>
              <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
              <ignoreComments>false</ignoreComments>
            </con:configuration>
          </con:assertion>
          <con:properties/>
        </con:config>
      </con:testStep>
      <con:testStep type="goto" name="Go Erreur Livraison" id="5f957ba9-8221-4b0a-8b39-339fddfae35b">
        <con:settings/>
        <con:config xsi:type="con:GotoStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:condition>
            <con:name>Wait Livraison</con:name>
            <con:type>XPATH</con:type>
            <con:expression>not(//Results/ResultSet/Row/BONPREPARATION.DATELIVRAISONTERMINE/text()) and
            not(//Results/ResultSet/Row/BONPREPARATION.CAUSENONLIVRAISON/text())</con:expression>
            <con:targetStep>Wait for end Livraison</con:targetStep>
          </con:condition>
        </con:config>
      </con:testStep>
      <con:testStep type="jdbc" name="Bon de Livraison - Erreur Livraison" id="7ee2d0f1-6f99-4a6f-b155-a63adaf597c3" disabled="true">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString>
          <con:query>select * from bonpreparation where reference = "${InfosContrat#refContrat}"</con:query>
          <con:assertion type="XPath Match" name="XPath Match">
            <con:configuration>
              <path>exists(//Results/ResultSet/Row/BONPREPARATION.CAUSENONLIVRAISON/text())</path>
              <content>true</content>
              <allowWildcards>false</allowWildcards>
              <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
              <ignoreComments>false</ignoreComments>
            </con:configuration>
          </con:assertion>
          <con:properties/>
        </con:config>
      </con:testStep>
      <con:loadTest name="Test Create" id="59072f1f-7c6a-4192-b8d8-535be93f4da2">
        <con:settings><con:setting id="HttpSettings@close-connections">false</con:setting></con:settings>
        <con:threadCount>50</con:threadCount>
        <con:startDelay>0</con:startDelay>
        <con:sampleInterval>250</con:sampleInterval>
        <con:calculateTPSOnTimePassed>true</con:calculateTPSOnTimePassed>
        <con:resetStatisticsOnThreadCountChange>true</con:resetStatisticsOnThreadCountChange>
        <con:historyLimit>-1</con:historyLimit>
        <con:testLimit>60</con:testLimit>
        <con:limitType>TIME</con:limitType>
        <con:loadStrategy>
          <con:type>Simple</con:type>
        </con:loadStrategy>
        <con:assertion type="Step Status" name="Step Status"/>
        <con:maxAssertionErrors>100</con:maxAssertionErrors>
        <con:cancelExcessiveThreads>true</con:cancelExcessiveThreads>
        <con:strategyInterval>500</con:strategyInterval>
      </con:loadTest>
      <con:properties>
        <con:property>
          <con:name>RefCommande</con:name>
          <con:value>39c15f6c-1aa1-4d71-b153-29c39ffc8888</con:value>
        </con:property>
        <con:property>
          <con:name>RefContrat</con:name>
          <con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">00000398</con:value>
        </con:property>
      </con:properties>
    </con:testCase>
    <con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Migrer Jet - Rien" searchProperties="true" id="307fd42b-472c-46ec-b84c-0c33495d5f7d">
      <con:settings/>
      
      <con:testStep type="calltestcase" name="CreerContrat" id="d2ce76fc-43d2-4647-ac6d-d8caf6fa3c7c"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>3d1406c1-6558-4539-a011-8394a232a260</con:targetTestCase><con:properties><con:property><con:name>RefCommande</con:name><con:value>ff8459c9-34d0-426c-9e24-1ac212ba5945</con:value></con:property><con:property><con:name>RefContrat</con:name><con:value>00000400</con:value></con:property></con:properties><con:returnProperties><con:entry>RefCommande</con:entry><con:entry>RefContrat</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="delay" name="wait for facturation" id="9fe790c6-5290-49ed-a971-3847830c5b32"><con:settings/><con:config><delay>30000</delay></con:config></con:testStep><con:testStep type="jdbc" name="Contrat Ancien" id="7a80a765-2fed-40cb-87d9-3711ead66d93"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString><con:query>select *
from contrat
where reference = '${CreerContrat#RefContrat}'</con:query><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="EC Anciens" id="36b213fc-8499-46cb-9440-f2267459a1f0"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString><con:query>select 
 
dateDebutFacturation, dateDerniereFacture,
dateFinContrat, datePreparation,
date_format(c.datevalidation, '%Y-%m-%d') as "dateValidation",
duree, engagement,
idAdrFacturation, idAdrLivraison,
modeFacturation, modePaiement,
montant, numEC, numeroCommande,
periodicite, 
referenceModePaiement,referenceProduit,
remboursable, titre,
 typeProduit, typeTVA
from elementcontractuel c 
where c.contratParent=(select id from contrat where
reference LIKE "${CreerContrat#RefContrat}%")
order by numEC</con:query><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Move Anciennes Infos Contrat" id="d1d60492-8644-4080-8dde-aeeb52c79390"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>Move PolitiqueValidationId</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Contrat Ancien</con:sourceStep><con:sourcePath>//ResultSet/Row/CONTRAT.POLITIQUEVALIDATIONID/text()</con:sourcePath><con:targetType>PolitiqueValidationId</con:targetType><con:targetStep>InfosAncienContrat</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" transferToAll="false" entitize="false" ignoreEmpty="false" useXQuery="false" transferChildNodes="false"><con:name>IdClient</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Contrat Ancien</con:sourceStep><con:sourcePath>//ResultSet/Row/CONTRAT.IDCLIENT/text()</con:sourcePath><con:targetType>IdClient</con:targetType><con:targetStep>InfosAncienContrat</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>Titre</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Contrat Ancien</con:sourceStep><con:sourcePath>//ResultSet/Row/CONTRAT.TITRE/text()</con:sourcePath><con:targetType>Titre</con:targetType><con:targetStep>InfosAncienContrat</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>idAdrFacturation</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>EC Anciens</con:sourceStep><con:sourcePath>//ResultSet/Row[1]/ELEMENTCONTRACTUEL.IDADRFACTURATION/text()</con:sourcePath><con:targetType>IdAdrFacturation</con:targetType><con:targetStep>InfosAncienContrat</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>idAdrLivraison</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>EC Anciens</con:sourceStep><con:sourcePath>//ResultSet/Row[1]/ELEMENTCONTRACTUEL.IDADRLIVRAISON/text()</con:sourcePath><con:targetType>IdAdrLivraison</con:targetType><con:targetStep>InfosAncienContrat</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" transferToAll="false" entitize="false" ignoreEmpty="false" useXQuery="false" transferChildNodes="false"><con:name>Engagement Jet</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>EC Anciens</con:sourceStep><con:sourcePath>//ResultSet/Row[1]/ELEMENTCONTRACTUEL.ENGAGEMENT</con:sourcePath><con:targetType>Engagement</con:targetType><con:targetStep>InfosAncienContrat</con:targetStep></con:transfers></con:config></con:testStep><con:testStep type="properties" name="InfosAncienContrat" id="450ca776-5737-4bf8-9497-4e3df665bfbb"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>PolitiqueValidationId</con:name><con:value>109</con:value></con:property><con:property><con:name>IdClient</con:name><con:value>00003870</con:value></con:property><con:property><con:name>Titre</con:name><con:value>Contrat Global: 00000400</con:value></con:property><con:property><con:name>IdAdrFacturation</con:name><con:value>685</con:value></con:property><con:property><con:name>IdAdrLivraison</con:name><con:value>adrliv1</con:value></con:property><con:property><con:name>Engagement</con:name><con:value>24</con:value></con:property><con:property><con:name>Duree</con:name><con:value/></con:property><con:property><con:name>All</con:name><con:value>
            </con:value></con:property></con:properties></con:config></con:testStep>
      <con:testStep type="restrequest" name="Migrer Contrat" id="160d64b1-ae71-41d7-8cb5-b240ae0c4d3a">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/{refContrat}/migrer" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="Migrer Contrat" mediaType="application/json" postQueryString="false">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{
  "user": "test",
  "politiqueMigration": {
    "fraisMigration": "0",
    "fraisResiliation": true,
    "remboursement": true,
    "fraisCreation": true,
    "penalite": true,
    "reductionAncienne": true
  },
  "produitsMigration": [
    {
      "numEC": 1,
      "referenceGammeSource": "jet",
      "referenceProduitSource": "jet",
      "referenceGammeDestination": "jet",
      "referenceProduitDestination": "jet",
      "label": "Abonnement Jet 10Go",
      "numeroCommande": "Order_migration_1",
      "typeProduit": "SERVICE",
      "prix": {
        "periodicite": 1,
        "montant": "30",
        "typeTVA": "R",
         "modeFacturation": "PREMIER_MOIS",
        "frais": [
          {
            "montant": "30",
            "titre": "Frais d'ouverture de dossier",
            "typeFrais": "CREATION"
          
          }
        ]
      },
      "referenceDePaiement": "R0000012",
      
      "modePaiement": "SEPA"
    },
    {
      "numEC": 2,
      "numECParent": 1,
      "referenceGammeSource": "jet",
      "referenceProduitSource": "option.plus.50g",
      "referenceGammeDestination": "jet",
      "referenceProduitDestination": "option.plus.20g",
      "label": "Option+ 50Go",
      "numeroCommande": "Order_migration_1",
      "typeProduit": "SERVICE",
      "prix": {
        "periodicite": 1,
        "montant": "50",
        "typeTVA": "R",
        "modeFacturation": "PREMIER_MOIS"
      },
      "referenceDePaiement": "R0000012",
      "modePaiement": "SEPA"
    },
    {
      "numEC": 3,
      "numECParent": 1,
      "referenceGammeSource": "jet",
      "referenceProduitSource": "kit-sat",
      "referenceGammeDestination": "jet",
      "referenceProduitDestination": "sat-jet-10",
      "label": "Kit Satellite",
      "numeroCommande": "Order_migration_1",
      "typeProduit": "BIEN",
      "prix": {
        "engagement": "24",
        "duree": "48",
        "periodicite": "1",
        "typeTVA": "R",
        "montant": "10",
        "modeFacturation": "PREMIER_MOIS"
      },
      "modePaiement": "SEPA",
      "referenceDePaiement": "R0000012"
    }
  ]
}</con:request>
            <con:originalUri>http://10.10.2.52/contrat-core/contrat/00000022/migrer</con:originalUri><con:assertion type="Valid HTTP Status Codes" name="Code Retour 200" id="20b95fed-f66f-4685-bce1-6e0a1d92ffad">
              <con:configuration>
                <codes>200</codes>
              </con:configuration>
            </con:assertion>
            <con:assertion type="GroovyScriptAssertion" name="Response must be empty" id="6ca1ddfa-7b0f-48d8-b5fa-1642229ad752">
              <con:configuration>
                <scriptText>assert messageExchange.hasResponse() == false</scriptText>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters>
              <entry key="refContrat" value="${CreerContrat#RefContrat}" xmlns="http://eviware.com/soapui/config"/>
            </con:parameters>
          </con:restRequest>
        </con:config>
      </con:testStep>
      <con:testStep type="jdbc" name="Politique Migration" id="a762fb22-4729-4486-8081-9a116808bd75">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString>
          <con:query>select *
from politiquemigration
where id=(select politiqueMigrationId from avenant where
referenceContrat = '${CreerContrat#RefContrat}')
order by id desc
LIMIT 1</con:query>
          
          
          <con:assertion type="XPath Match" name="Date Action" disabled="true"><con:configuration><path>//ResultSet/Row/POLITIQUEMIGRATION.DATEACTION</path><content>${=new java.text.SimpleDateFormat("yyyy-MM-dd").format(new Date())}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="FraisCreation"><con:configuration><path>//ResultSet/Row/POLITIQUEMIGRATION.FRAISCREATION</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="FraisMigration"><con:configuration><path>//ResultSet/Row/POLITIQUEMIGRATION.FRAISMIGRATION</path><content>0</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="FraisResiliation"><con:configuration><path>//ResultSet/Row/POLITIQUEMIGRATION.FRAISRESILIATION</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="MontantFraisResiliation"><con:configuration><path>exists(//ResultSet/Row/POLITIQUEMIGRATION.MONTANTRESILIATION/text())</path><content>false</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="MontantRemboursement"><con:configuration><path>exists(//ResultSet/Row/POLITIQUEMIGRATION.MONTANTREMBOURSEMENT/text())</path><content>false</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="Pénalités"><con:configuration><path>//ResultSet/Row/POLITIQUEMIGRATION.PENALITE</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="Remboursement"><con:configuration><path>//ResultSet/Row/POLITIQUEMIGRATION.REMBOURSEMENT</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="Reduction Ancienne"><con:configuration><path>//ResultSet/Row/POLITIQUEMIGRATION.REDUCTIONANCIENNE/text()</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/>
        </con:config>
      </con:testStep>
      <con:testStep type="jdbc" name="Avenant" id="eca8ae7c-316d-48da-8001-9a7f081a8825">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString>
          <con:query>select * from avenant where referenceContrat='${CreerContrat#RefContrat}'</con:query>
          
          
          <con:assertion type="XQuery Match" name="XQuery Match"><con:configuration><path>//ResultSet/Row/AVENANT.TYPEAVENANT</path><content>MIGRATION</content><allowWildcards>false</allowWildcards></con:configuration></con:assertion><con:properties/>
        </con:config>
      </con:testStep>
      <con:testStep type="jdbc" name="Modifications" id="a122a027-cc52-41ea-9a1b-a9ef39a84ed1">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString>
          <con:query>select * from modification where avenantId=( select id from avenant where 
referenceContrat='${CreerContrat#RefContrat}')</con:query>
          
          
          <con:assertion type="Simple Contains" name="trame json must be present"><con:configuration><token>MODIFICATION.TRAMEJSON</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/>
        </con:config>
      </con:testStep>
      <con:testStep type="jdbc" name="Contrat Migre" id="3f996357-43cc-4198-b051-787edeb8e836">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString>
          <con:query>select *
from contrat
where reference = '${CreerContrat#RefContrat}'</con:query>
          
          <con:assertion type="XPath Match" name="PolitiqueValidationId différent de la précédente"><con:configuration><path>(//ResultSet/Row/CONTRAT.POLITIQUEVALIDATIONID/text())  != ${InfosAncienContrat#PolitiqueValidationId}</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="Même référence"><con:configuration><path>//ResultSet/Row/CONTRAT.REFERENCE/text()</path><content>${CreerContrat#RefContrat}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="Même idClient"><con:configuration><path>//ResultSet/Row/CONTRAT.IDCLIENT/text()</path><content>${InfosAncienContrat#IdClient}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="Même titre"><con:configuration><path>//ResultSet/Row/CONTRAT.TITRE/text()</path><content>${InfosAncienContrat#Titre}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/>
        </con:config>
      </con:testStep>
      <con:testStep type="jdbc" name="EC Migre" id="f7d80e40-bbb2-4a29-8cfd-ed1fff25e5b7">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString>
          <con:query>select 
 
dateDebutFacturation, dateDerniereFacture,
dateFinContrat, datePreparation,
date_format(c.datevalidation, '%Y-%m-%d') as "dateValidation",
duree, engagement,
idAdrFacturation, idAdrLivraison,
modeFacturation, modePaiement,
montant, numEC, numeroCommande,
periodicite, 
referenceModePaiement,referenceProduit,
remboursable, titre,
 typeProduit, typeTVA
from elementcontractuel c 
where c.contratParent=(select id from contrat where reference
LIKE "${CreerContrat#RefContrat}%")</con:query>
          <con:assertion type="XQuery Match" name="Date Validation = Now()" disabled="true">
            <con:configuration><path>&lt;Results> 
{ 
for $x in //Row 
return &lt;result>{$x/DATEVALIDATION/text()}&lt;/result> 
}
&lt;/Results></path><content><![CDATA[<Results>
  <result>${=new java.text.SimpleDateFormat("yyyy-MM-dd").format(new Date())}</result>
  <result>${=new java.text.SimpleDateFormat("yyyy-MM-dd").format(new Date())}</result>
  <result>${=new java.text.SimpleDateFormat("yyyy-MM-dd").format(new Date())}</result>
</Results>]]></content><allowWildcards>false</allowWildcards></con:configuration>
          </con:assertion>
          <con:assertion type="XPath Match" name="3 éléments survivants"><con:configuration><path>count(//ResultSet/Row)</path><content>3</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XQuery Match" name="Même AdrLivraison"><con:configuration><path>&lt;Results> 
{ 
for $x in //Row 
return &lt;result>{$x/ELEMENTCONTRACTUEL.IDADRLIVRAISON/text()}&lt;/result> 
}
&lt;/Results></path><content><![CDATA[<Results>
  <result>${InfosAncienContrat#idAdrLivraison}</result>
  <result>${InfosAncienContrat#idAdrLivraison}</result>
  <result>${InfosAncienContrat#idAdrLivraison}</result>
</Results>]]></content><allowWildcards>false</allowWildcards></con:configuration></con:assertion><con:assertion type="XQuery Match" name="Même AdrFacturation"><con:configuration><path>&lt;Results> 
{ 
for $x in //Row 
return &lt;result>{$x/ELEMENTCONTRACTUEL.IDADRFACTURATION/text()}&lt;/result> 
}
&lt;/Results></path><content><![CDATA[<Results>
  <result>${InfosAncienContrat#IdAdrFacturation}</result>
  <result>${InfosAncienContrat#IdAdrFacturation}</result>
  <result>${InfosAncienContrat#IdAdrFacturation}</result>
</Results>]]></content><allowWildcards>false</allowWildcards></con:configuration></con:assertion><con:assertion type="XQuery Match" name="Même référence"><con:configuration><path><![CDATA[<Results> 
{ 
for $x in //Row 
order by $x/ELEMENTCONTRACTUEL.NUMEC
return <result>
<numEC>{$x/ELEMENTCONTRACTUEL.NUMEC/text()}</numEC>
<refProduit>{$x/ELEMENTCONTRACTUEL.REFERENCEPRODUIT/text()}</refProduit>
</result> 
}
</Results>]]></path><content><![CDATA[<Results>
  <result>
    <numEC>1</numEC>
    <refProduit>jet</refProduit>
  </result>
  <result>
    <numEC>2</numEC>
    <refProduit>option.plus.20g</refProduit>
  </result>
  <result>
    <numEC>3</numEC>
    <refProduit>sat-jet-10</refProduit>
  </result>
</Results>]]></content><allowWildcards>false</allowWildcards></con:configuration></con:assertion><con:assertion type="XQuery Match" name="2 éléments remboursables" disabled="true"><con:configuration><path><![CDATA[<Results> 
{ 
for $x in //Row 
order by $x/ELEMENTCONTRACTUEL.NUMEC
return <result>
<numEC>{$x/ELEMENTCONTRACTUEL.NUMEC/text()}</numEC>
<refProduit>{$x/ELEMENTCONTRACTUEL.REFERENCEPRODUIT/text()}</refProduit>
</result> 
}
</Results>]]></path><content><![CDATA[<Results>
  <result>
    <numEC>1</numEC>
    <refProduit>jet</refProduit>
  </result>
  <result>
    <numEC>3</numEC>
    <refProduit>kit-sat</refProduit>
  </result>
</Results>]]></content><allowWildcards>false</allowWildcards></con:configuration></con:assertion><con:assertion type="Simple Contains" name="Contenu Complet" disabled="true"><con:configuration><token><![CDATA[<Results>
    <ResultSet fetchSize="0">
        <Row rowNumber="1">
            <ELEMENTCONTRACTUEL.DATEDEBUTFACTURATION>2014-11-24 10:03:01.0</ELEMENTCONTRACTUEL.DATEDEBUTFACTURATION>
            <ELEMENTCONTRACTUEL.DATEDERNIEREFACTURE/>
            <ELEMENTCONTRACTUEL.DATEFINCONTRAT/>
            <ELEMENTCONTRACTUEL.DATEPREPARATION>2014-11-24 10:02:47.0</ELEMENTCONTRACTUEL.DATEPREPARATION>
            <DATEVALIDATION>2014-11-24</DATEVALIDATION>
            <ELEMENTCONTRACTUEL.DUREE/>
            <ELEMENTCONTRACTUEL.ENGAGEMENT/>
            <ELEMENTCONTRACTUEL.IDADRFACTURATION>685</ELEMENTCONTRACTUEL.IDADRFACTURATION>
            <ELEMENTCONTRACTUEL.IDADRLIVRAISON>adrliv1</ELEMENTCONTRACTUEL.IDADRLIVRAISON>
            <ELEMENTCONTRACTUEL.MODEFACTURATION>PREMIER_MOIS</ELEMENTCONTRACTUEL.MODEFACTURATION>
            <ELEMENTCONTRACTUEL.MODEPAIEMENT>SEPA</ELEMENTCONTRACTUEL.MODEPAIEMENT>
            <ELEMENTCONTRACTUEL.MONTANT>30</ELEMENTCONTRACTUEL.MONTANT>
            <ELEMENTCONTRACTUEL.NUMEC>1</ELEMENTCONTRACTUEL.NUMEC>
            <ELEMENTCONTRACTUEL.NUMEROCOMMANDE>Order_migration_1</ELEMENTCONTRACTUEL.NUMEROCOMMANDE>
            <ELEMENTCONTRACTUEL.PERIODICITE>1</ELEMENTCONTRACTUEL.PERIODICITE>
            <ELEMENTCONTRACTUEL.REFERENCEMODEPAIEMENT>R0000012</ELEMENTCONTRACTUEL.REFERENCEMODEPAIEMENT>
            <ELEMENTCONTRACTUEL.REFERENCEPRODUIT>jet</ELEMENTCONTRACTUEL.REFERENCEPRODUIT>
            <ELEMENTCONTRACTUEL.REMBOURSABLE>1</ELEMENTCONTRACTUEL.REMBOURSABLE>
            <ELEMENTCONTRACTUEL.TITRE>Contrat ABONNEMENT pour le produit : Abonnement Jet 10Go</ELEMENTCONTRACTUEL.TITRE>
            <ELEMENTCONTRACTUEL.TYPEPRODUIT>SERVICE</ELEMENTCONTRACTUEL.TYPEPRODUIT>
            <ELEMENTCONTRACTUEL.TYPETVA>R</ELEMENTCONTRACTUEL.TYPETVA>
        </Row>
        <Row rowNumber="2">
            <ELEMENTCONTRACTUEL.DATEDEBUTFACTURATION>2014-11-24 10:03:01.0</ELEMENTCONTRACTUEL.DATEDEBUTFACTURATION>
            <ELEMENTCONTRACTUEL.DATEDERNIEREFACTURE/>
            <ELEMENTCONTRACTUEL.DATEFINCONTRAT/>
            <ELEMENTCONTRACTUEL.DATEPREPARATION>2014-11-24 10:02:47.0</ELEMENTCONTRACTUEL.DATEPREPARATION>
            <DATEVALIDATION>2014-11-24</DATEVALIDATION>
            <ELEMENTCONTRACTUEL.DUREE/>
            <ELEMENTCONTRACTUEL.ENGAGEMENT/>
            <ELEMENTCONTRACTUEL.IDADRFACTURATION>685</ELEMENTCONTRACTUEL.IDADRFACTURATION>
            <ELEMENTCONTRACTUEL.IDADRLIVRAISON>adrliv1</ELEMENTCONTRACTUEL.IDADRLIVRAISON>
            <ELEMENTCONTRACTUEL.MODEFACTURATION>PREMIER_MOIS</ELEMENTCONTRACTUEL.MODEFACTURATION>
            <ELEMENTCONTRACTUEL.MODEPAIEMENT>SEPA</ELEMENTCONTRACTUEL.MODEPAIEMENT>
            <ELEMENTCONTRACTUEL.MONTANT>50</ELEMENTCONTRACTUEL.MONTANT>
            <ELEMENTCONTRACTUEL.NUMEC>2</ELEMENTCONTRACTUEL.NUMEC>
            <ELEMENTCONTRACTUEL.NUMEROCOMMANDE>Order_migration_1</ELEMENTCONTRACTUEL.NUMEROCOMMANDE>
            <ELEMENTCONTRACTUEL.PERIODICITE>1</ELEMENTCONTRACTUEL.PERIODICITE>
            <ELEMENTCONTRACTUEL.REFERENCEMODEPAIEMENT>R0000012</ELEMENTCONTRACTUEL.REFERENCEMODEPAIEMENT>
            <ELEMENTCONTRACTUEL.REFERENCEPRODUIT>option.plus.50g</ELEMENTCONTRACTUEL.REFERENCEPRODUIT>
            <ELEMENTCONTRACTUEL.REMBOURSABLE>1</ELEMENTCONTRACTUEL.REMBOURSABLE>
            <ELEMENTCONTRACTUEL.TITRE>Contrat ABONNEMENT pour le produit : Option+ 50Go</ELEMENTCONTRACTUEL.TITRE>
            <ELEMENTCONTRACTUEL.TYPEPRODUIT>SERVICE</ELEMENTCONTRACTUEL.TYPEPRODUIT>
            <ELEMENTCONTRACTUEL.TYPETVA>R</ELEMENTCONTRACTUEL.TYPETVA>
        </Row>
        <Row rowNumber="3">
            <ELEMENTCONTRACTUEL.DATEDEBUTFACTURATION>2014-11-24 10:02:47.0</ELEMENTCONTRACTUEL.DATEDEBUTFACTURATION>
            <ELEMENTCONTRACTUEL.DATEDERNIEREFACTURE/>
            <ELEMENTCONTRACTUEL.DATEFINCONTRAT/>
            <ELEMENTCONTRACTUEL.DATEPREPARATION>2014-11-24 10:02:47.0</ELEMENTCONTRACTUEL.DATEPREPARATION>
            <DATEVALIDATION>2014-11-24</DATEVALIDATION>
            <ELEMENTCONTRACTUEL.DUREE>48</ELEMENTCONTRACTUEL.DUREE>
            <ELEMENTCONTRACTUEL.ENGAGEMENT>24</ELEMENTCONTRACTUEL.ENGAGEMENT>
            <ELEMENTCONTRACTUEL.IDADRFACTURATION>685</ELEMENTCONTRACTUEL.IDADRFACTURATION>
            <ELEMENTCONTRACTUEL.IDADRLIVRAISON>adrliv1</ELEMENTCONTRACTUEL.IDADRLIVRAISON>
            <ELEMENTCONTRACTUEL.MODEFACTURATION>PREMIER_MOIS</ELEMENTCONTRACTUEL.MODEFACTURATION>
            <ELEMENTCONTRACTUEL.MODEPAIEMENT>SEPA</ELEMENTCONTRACTUEL.MODEPAIEMENT>
            <ELEMENTCONTRACTUEL.MONTANT>10</ELEMENTCONTRACTUEL.MONTANT>
            <ELEMENTCONTRACTUEL.NUMEC>3</ELEMENTCONTRACTUEL.NUMEC>
            <ELEMENTCONTRACTUEL.NUMEROCOMMANDE>Order_migration_1</ELEMENTCONTRACTUEL.NUMEROCOMMANDE>
            <ELEMENTCONTRACTUEL.PERIODICITE>1</ELEMENTCONTRACTUEL.PERIODICITE>
            <ELEMENTCONTRACTUEL.REFERENCEMODEPAIEMENT>R0000012</ELEMENTCONTRACTUEL.REFERENCEMODEPAIEMENT>
            <ELEMENTCONTRACTUEL.REFERENCEPRODUIT>kit-sat</ELEMENTCONTRACTUEL.REFERENCEPRODUIT>
            <ELEMENTCONTRACTUEL.REMBOURSABLE>1</ELEMENTCONTRACTUEL.REMBOURSABLE>
            <ELEMENTCONTRACTUEL.TITRE>Contrat LOCATION pour le produit : Kit Satellite</ELEMENTCONTRACTUEL.TITRE>
            <ELEMENTCONTRACTUEL.TYPEPRODUIT>BIEN</ELEMENTCONTRACTUEL.TYPEPRODUIT>
            <ELEMENTCONTRACTUEL.TYPETVA>R</ELEMENTCONTRACTUEL.TYPETVA>
        </Row>
    </ResultSet>
</Results>
]]></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/>
        </con:config>
      </con:testStep>
      <con:testStep type="delay" name="Wait for initiation Livraison" id="36719d41-eb12-4ce3-8a7f-b0f54bac2431">
        <con:settings/>
        <con:config>
          <delay>500</delay>
        </con:config>
      </con:testStep>
      <con:testStep type="jdbc" name="Bon de Migration - Initié" id="c3369b52-6a7c-4e8b-91f9-79c9127159fd">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString>
          <con:query>select id, reference,
causenonlivraison,
date_format(dateinitiation, '%Y-%m-%d') as "dateInitiation",
datedebutPreparation,
dateretourtermine,
idClient, typebonpreparation
from bonpreparation 
where reference LIKE "${CreerContrat#RefContrat}%"
  and typeBonPreparation = 'MIGRATION'</con:query>
          
          
          
          
          <con:assertion type="XPath Match" name="Id Client"><con:configuration><path>//ResultSet/Row/BONPREPARATION.IDCLIENT/text()</path><content>00003870</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="Reference"><con:configuration><path>//ResultSet/Row/BONPREPARATION.REFERENCE</path><content>${CreerContrat#RefContrat}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="Date Initiation"><con:configuration><path>//ResultSet/Row/DATEINITIATION/text()</path><content>${=new java.text.SimpleDateFormat("yyyy-MM-dd").format(new Date())}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/>
        </con:config>
      </con:testStep>
      <con:testStep type="jdbc" name="EL de migration - Initié" id="34f0f35a-f18c-41a8-af44-d277d4581b27">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString>
          <con:query>select * from elementlivraison
where bonPreparationParent = 
(select id
from bonpreparation 
where reference LIKE "${CreerContrat#RefContrat}%"
  and typeBonPreparation = 'MIGRATION')</con:query>
          
          
          
          
          <con:assertion type="XPath Match" name="0 EM"><con:configuration><path>count(//ResultSet/Row)</path><content>3</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/>
        </con:config>
      </con:testStep><con:testStep type="delay" name="Wait for end Migration" id="ca0f59ed-b0ad-4d3c-8db8-8c6acd8271ed">
        <con:settings/>
        <con:config><delay>500</delay></con:config>
      </con:testStep><con:testStep type="jdbc" name="Bon de Migration - Temoin" id="92af218e-7c77-4798-b887-b1f0ce3dd496">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString>
          <con:query>select id, reference,
causenonlivraison,
date_format(dateinitiation, '%Y-%m-%d') as "dateInitiation",
datedebutPreparation,
datelivraisontermine,
dateretourtermine,
idClient, typebonpreparation
from bonpreparation 
where reference LIKE "${CreerContrat#RefContrat}%"
  and typeBonPreparation = 'MIGRATION'</con:query>
          
          
          
          <con:assertion type="XPath Match" name="Id Client"><con:configuration><path>//ResultSet/Row/BONPREPARATION.IDCLIENT/text()</path><content>00003870</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="Date Initiation"><con:configuration><path>//ResultSet/Row/DATEINITIATION/text()</path><content>${=new java.text.SimpleDateFormat("yyyy-MM-dd").format(new Date())}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/>
        </con:config>
      </con:testStep><con:testStep type="goto" name="Go End Migration" id="4a61da80-ef7f-4429-8bab-f06522d22229">
        <con:settings/>
        <con:config xsi:type="con:GotoStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:condition>
            <con:name>Wait Facturation</con:name>
            <con:type>XPATH</con:type>
            <con:expression>(
  not(//Results/ResultSet/Row/BONPREPARATION.DATELIVRAISONTERMINE/text())
  or
  not(//Results/ResultSet/Row/BONPREPARATION.DATERETOURTERMINE/text())
)
and
  not(//Results/ResultSet/Row/BONPREPARATION.CAUSENONLIVRAISON/text())</con:expression>
            <con:targetStep>Wait for end Migration</con:targetStep>
          </con:condition>
        </con:config>
      </con:testStep><con:testStep type="jdbc" name="Bon de Migration - Terminé" id="2d2f2446-b385-4ba4-8b84-8ade01b9cf31">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString>
          <con:query>select id, reference,
causenonlivraison,
date_format(dateinitiation, '%Y-%m-%d') as "dateInitiation",
datedebutPreparation,
datelivraisontermine,
dateretourtermine,
idClient, typebonpreparation
from bonpreparation 
where reference LIKE "${CreerContrat#RefContrat}%"
  and typeBonPreparation = 'MIGRATION'</con:query>
          
          
          
          <con:assertion type="XPath Match" name="Id Client"><con:configuration><path>//ResultSet/Row/BONPREPARATION.IDCLIENT/text()</path><content>00003870</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="Date Initiation"><con:configuration><path>//ResultSet/Row/DATEINITIATION/text()</path><content>${=new java.text.SimpleDateFormat("yyyy-MM-dd").format(new Date())}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="Date Livraison &amp; Date Retour Terminé"><con:configuration><path>exists(//ResultSet/Row/BONPREPARATION.DATELIVRAISONTERMINE/text())
and
exists(//ResultSet/Row/BONPREPARATION.DATERETOURTERMINE/text())</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/>
        </con:config>
      </con:testStep><con:testStep type="transfer" name="Transfert Date Retour" id="e42340db-f0b4-4bd4-b860-0e9b97173dee">
        <con:settings/>
        <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false">
            <con:name>DateLivraison</con:name>
            <con:sourceType>ResponseAsXml</con:sourceType>
            <con:sourceStep>Migrer Contrat</con:sourceStep>
            <con:sourcePath>//Results/ResultSet/Row/BONPREPARATION.DATETERMINE/text()</con:sourcePath>
            <con:targetType>DateLivraison</con:targetType>
            <con:targetStep>InfosFacture</con:targetStep>
          </con:transfers>
        </con:config>
      </con:testStep><con:testStep type="properties" name="InfosFacture" id="352d5fef-5a6e-4e5c-a437-95b4d3338421">
        <con:settings/>
        <con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:properties>
            <con:property>
              <con:name>DateLivraison</con:name>
              <con:value xsi:nil="true"/>
            </con:property>
          </con:properties>
        </con:config>
      </con:testStep><con:testStep type="delay" name="Wait for end Facturation" id="90da81a5-3893-418d-9c99-e073438c4834">
        <con:settings/>
        <con:config>
          <delay>500</delay>
        </con:config>
      </con:testStep><con:testStep type="jdbc" name="Facturation-exists" id="1e7fd88a-0db6-44c7-a60a-82143e4496f3">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.100.105.41:3306/test_saphir?user=test&amp;password=test</con:connectionString>
          <con:query>select * from movement 
where accountId = '00003870' 
  and minute(timediff(now(), create_date)) &lt; 5</con:query>
          <con:properties/>
        </con:config>
      </con:testStep><con:testStep type="goto" name="Go Facturation" id="ddcc55c2-a7b4-438b-8486-9e5a55c79038">
        <con:settings/>
        <con:config xsi:type="con:GotoStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:condition>
            <con:name>Wait Facturation</con:name>
            <con:type>XPATH</con:type>
            <con:expression>not(//Results/ResultSet/Row/MOVEMENT.ID/text())</con:expression>
            <con:targetStep>Wait for end Facturation</con:targetStep>
          </con:condition>
        </con:config>
      </con:testStep><con:testStep type="jdbc" name="Facturation-valid" id="3c11eea8-3a03-4871-8893-a662d9494d8a">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.100.105.41:3306/test_saphir?user=test&amp;password=test</con:connectionString>
          <con:query>select * from movement 
where accountId = '00003870' 
  and minute(timediff(now(), create_date)) &lt; 5</con:query>
          
          
          
          
          
          <con:assertion type="XPath Match" name="Au moins 1 mouvement"><con:configuration><path>count(//Row) > 0</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/>
        </con:config>
      </con:testStep><con:properties/>
    </con:testCase>
    
    
    <con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Resiliation d'un contrat Non Livré" searchProperties="true" id="36045d62-80fd-4a20-b8e6-4c38bd9587c1">
      <con:settings/>
      <con:testStep type="calltestcase" name="CreerContrat" id="b5cc13ea-eef3-4e13-851e-6aa72a1f6142">
        <con:settings/>
        <con:config xsi:type="con:RunTestCaseStep" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:targetTestCase>a84bb25a-ff92-4a42-b43e-70bff7c06b01</con:targetTestCase>
          <con:properties>
            <con:property>
              <con:name>RefCommande</con:name>
              <con:value>39c15f6c-1aa1-4d71-b153-29c39ffc8888</con:value>
            </con:property>
            <con:property>
              <con:name>RefContrat</con:name>
              <con:value>00000398</con:value>
            </con:property>
          </con:properties>
          <con:returnProperties>
            <con:entry>RefCommande</con:entry>
            <con:entry>RefContrat</con:entry>
          </con:returnProperties>
          <con:runMode>SINGLETON_AND_WAIT</con:runMode>
        </con:config>
      </con:testStep>
      <con:testStep type="restrequest" name="Resilier Contrat" id="b8df85d5-a525-41fe-b6a5-872dfe22746d">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/{refContrat}/resilier" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="Resilier Contrat" mediaType="application/json" postQueryString="false">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{
  "user": "test",
  "politiqueResiliation": {
    "fraisResiliation": "true",
    "montantResiliation": "",
    "typeResiliation": "RIC",
    "remboursement": "true",
    "montantRemboursement": "",
    "penalite": "true",
    "commentaire": "this is a test"
  }
}</con:request>
            <con:originalUri>http://10.10.2.52/contrat-core/contrat/00000211/resilier</con:originalUri><con:assertion type="Valid HTTP Status Codes" name="Code Retour 200" id="2801e0a0-c62f-4ed4-b0cb-a1844bef27bc">
              <con:configuration>
                <codes>200</codes>
              </con:configuration>
            </con:assertion>
            <con:assertion type="GroovyScriptAssertion" name="Response must be empty" id="0e37ab3a-bdec-4319-b5eb-0eafedd47b55">
              <con:configuration>
                <scriptText>assert messageExchange.hasResponse() == false</scriptText>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters>
              <entry key="refContrat" value="${CreerContrat#RefContrat}" xmlns="http://eviware.com/soapui/config"/>
            </con:parameters>
          </con:restRequest>
        </con:config>
      </con:testStep>
      <con:testStep type="jdbc" name="Politique Resiliation" id="72c48d16-180a-494c-991c-df7fda9aa9c7">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString>
          <con:query>select * from politiqueresiliation where id = (select politiqueResiliationId from contrat where reference =
          "${CreerContrat#RefContrat}")</con:query>
          <con:assertion type="Simple Contains" name="Commentaire">
            <con:configuration>
              <token>&lt;POLITIQUERESILIATION.COMMENTAIRE>this is a test&lt;/POLITIQUERESILIATION.COMMENTAIRE></token>
              <ignoreCase>false</ignoreCase>
              <useRegEx>false</useRegEx>
            </con:configuration>
          </con:assertion>
          <con:assertion type="Simple Contains" name="Cascade=True">
            <con:configuration>
              <token>&lt;POLITIQUERESILIATION.ENCASCADE>1&lt;/POLITIQUERESILIATION.ENCASCADE></token>
              <ignoreCase>false</ignoreCase>
              <useRegEx>false</useRegEx>
            </con:configuration>
          </con:assertion>
          <con:properties/>
        </con:config>
      </con:testStep>
      <con:testStep type="jdbc" name="Contrat Resilie" id="1d5f5320-d8f1-4619-aead-5785041b7be2">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString>
          <con:query>select date_format(c.datefincontrat, '%Y-%m-%d') as "datefinContrat" from contrat c where
          c.reference = "${CreerContrat#RefContrat}"</con:query>
          <con:assertion type="XQuery Match" name="Date Fin Contrat = Now()">
            <con:configuration>
              <path>&lt;Results> { for $x in //Row return &lt;result>{$x/DATEFINCONTRAT/text()}&lt;/result> }
              &lt;/Results></path>
              <content>&lt;Results> &lt;result>${=new java.text.SimpleDateFormat("yyyy-MM-dd").format(new
              Date())}&lt;/result> &lt;/Results></content>
              <allowWildcards>false</allowWildcards>
            </con:configuration>
          </con:assertion>
          <con:properties/>
        </con:config>
      </con:testStep>
      <con:testStep type="jdbc" name="EC Resilie" id="62be9df7-e051-49bf-94a3-b1084a527141">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString>
          <con:query>select date_format(c.datefincontrat, '%Y-%m-%d') as "datefinContrat" from elementcontractuel
          c where c.contratParent=(select id from contrat cc where cc.reference LIKE "${CreerContrat#RefContrat}%")</con:query>
          <con:assertion type="XQuery Match" name="Date Fin Contrat = Now()">
            <con:configuration>
              <path>&lt;Results> { for $x in //Row return &lt;result>{$x/DATEFINCONTRAT/text()}&lt;/result> }
              &lt;/Results></path>
              <content><![CDATA[
                <Results>
  <result>${=new java.text.SimpleDateFormat("yyyy-MM-dd").format(new Date())}</result>
  <result>${=new java.text.SimpleDateFormat("yyyy-MM-dd").format(new Date())}</result>
  <result>${=new java.text.SimpleDateFormat("yyyy-MM-dd").format(new Date())}</result>
</Results>
]]></content>
              <allowWildcards>false</allowWildcards>
            </con:configuration>
          </con:assertion>
          <con:properties/>
        </con:config>
      </con:testStep>
      <con:testStep type="delay" name="Wait for beginning Retour" id="66cfdfde-d83c-499c-bab2-faa3ec8b0138">
        <con:settings/>
        <con:config>
          <delay>500</delay>
        </con:config>
      </con:testStep>
      <con:testStep type="jdbc" name="EL de retour" id="7d5e16bf-f751-4aa9-9130-f1ae68756da5">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString>
          <con:query>select * from elementlivraison 
where bonPreparationParent = 
(select id
from bonpreparation 
where reference = "${CreerContrat#RefContrat}" and typeBonPreparation= 'RETOUR')</con:query>
          <con:assertion type="Simple Contains" name="No Result" disabled="true">
            <con:configuration>
              <token>&lt;ResultSet fetchSize="0"/></token>
              <ignoreCase>false</ignoreCase>
              <useRegEx>false</useRegEx>
            </con:configuration>
          </con:assertion>
          <con:properties/>
        </con:config>
      </con:testStep>
      <con:testStep type="jdbc" name="Bon de Retour" id="9a975b8b-e2ca-4ba1-a32f-94ee85443013">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString>
          <con:query>select date_format(dateinitiation, '%Y-%m-%d') as "datefinContrat", 
       idClient,
       typebonpreparation, 
       dateretourtermine 
from bonpreparation 
where reference = "${CreerContrat#RefContrat}"</con:query>
          <con:assertion type="Simple Contains" name="No Result" disabled="true">
            <con:configuration>
              <token>&lt;ResultSet fetchSize="0"/></token>
              <ignoreCase>false</ignoreCase>
              <useRegEx>false</useRegEx>
            </con:configuration>
          </con:assertion>
          <con:properties/>
        </con:config>
      </con:testStep>
      <con:testStep type="delay" name="Wait for facturation" id="12253b2e-fed5-47da-a813-24090f0a18c8">
        <con:settings/>
        <con:config>
          <delay>500</delay>
        </con:config>
      </con:testStep>
      <con:testStep type="jdbc" name="Mouvements" id="b6fa6c5b-ae34-4e7d-be94-bd79ea40171a" disabled="true">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.100.105.41:3306/test_saphir?user=test&amp;password=test</con:connectionString>
          <con:query>select * from movement where accountId = '00003870' and billinggroup ="${#TestCase#RefCommande}" ;</con:query>
          <con:properties/>
        </con:config>
      </con:testStep>
      <con:properties/>
    </con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Resiliation Antivirus" searchProperties="true" id="e11a7b48-c708-47b8-9988-c0d3e1adcd7a">
      <con:settings/>
      
      
      <con:testStep type="calltestcase" name="CreerContrat" id="196edbd0-32e6-4526-83a9-abb418a26143"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>6d067cc4-5962-44e6-a695-6865311a2b3e</con:targetTestCase><con:properties><con:property><con:name>RefCommande</con:name><con:value>9b89fa9c-3237-49f7-8769-3c726e746390</con:value></con:property><con:property><con:name>RefContrat</con:name><con:value>00000399</con:value></con:property><con:property><con:name>testDate</con:name></con:property><con:property><con:name>testDates</con:name></con:property><con:property><con:name>dateDebut</con:name></con:property><con:property><con:name>dateFin</con:name></con:property></con:properties><con:returnProperties><con:entry>RefCommande</con:entry><con:entry>RefContrat</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep>
      <con:testStep type="restrequest" name="Resilier Contrat" id="64fe0c61-9367-4c89-80af-2f21260fdddd">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/{refContrat}/resilier" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="Resilier Contrat" mediaType="application/json" postQueryString="false">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{
  "user": "test",
  "politiqueResiliation": {
    "fraisResiliation": "true",
    "montantResiliation": "",
    "typeResiliation": "RIC",
    "remboursement": "true",
    "montantRemboursement": "",
    "penalite": "true",
    "commentaire": "Resiliation de l'antivirus"
  }
}</con:request>
            <con:originalUri>http://10.10.2.52/contrat-core/contrat/00000014/resilier</con:originalUri><con:assertion type="Valid HTTP Status Codes" name="Code Retour 200" id="20b95fed-f66f-4685-bce1-6e0a1d92ffad">
              <con:configuration>
                <codes>200</codes>
              </con:configuration>
            </con:assertion>
            <con:assertion type="GroovyScriptAssertion" name="Response must be empty" id="6ca1ddfa-7b0f-48d8-b5fa-1642229ad752">
              <con:configuration>
                <scriptText>assert messageExchange.hasResponse() == false</scriptText>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters>
              <entry key="refContrat" value="${CreerContrat#RefContrat}" xmlns="http://eviware.com/soapui/config"/>
            </con:parameters>
          </con:restRequest>
        </con:config>
      </con:testStep>
      <con:testStep type="jdbc" name="Politique Resiliation" id="808b18b1-8f79-4c23-a6d9-15d3ac303184">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString>
          <con:query>select * from politiqueresiliation 
where id = 
 (select politiqueResiliationId 
    from contrat 
   where reference = "${CreerContrat#RefContrat}")</con:query>
          
          
          <con:assertion type="XPath Match" name="Cascade=True"><con:configuration><path>//Row/POLITIQUERESILIATION.ENCASCADE/text()</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="Commentaire"><con:configuration><path>//Row/POLITIQUERESILIATION.COMMENTAIRE/text()</path><content>Resiliation de l'antivirus</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="FraisResiliation = True"><con:configuration><path>//Row/POLITIQUERESILIATION.FRAISRESILIATION/text()</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="Penalite = True"><con:configuration><path>//Row/POLITIQUERESILIATION.PENALITE/text()</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="MontantResiliation = null"><con:configuration><path>not(//Row/POLITIQUERESILIATION.MONTANTRESILIATION/text())</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="MontantRemboursement = null"><con:configuration><path>not(//Row/POLITIQUERESILIATION.MONTANTREMBOURSEMENT/text())</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="TypeResiliation = RIC"><con:configuration><path>//Row/POLITIQUERESILIATION.TYPERESILIATION/text()</path><content>RIC</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="Remboursement = True"><con:configuration><path>//Row/POLITIQUERESILIATION.REMBOURSEMENT/text()</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/>
        </con:config>
      </con:testStep>
      <con:testStep type="jdbc" name="Contrat Resilie" id="d860d052-3980-4758-95c9-1ceb739a21c6">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString>
          <con:query>select 
c.dateDebutFacturation,
date_format(c.datefincontrat, '%Y-%m-%d') as "datefinContrat" ,
c.dateDerniereFacture,
c.titre,
c.typeResiliation,
c.politiqueResiliationId
from contrat c 
where c.reference = "${CreerContrat#RefContrat}"</con:query>
          <con:assertion type="XQuery Match" name="Date Fin Contrat = Now()" disabled="true">
            <con:configuration>
              <path>&lt;Results> { for $x in //Row return &lt;result>{$x/DATEFINCONTRAT/text()}&lt;/result> }
              &lt;/Results></path>
              <content>&lt;Results> &lt;result>${=new java.text.SimpleDateFormat("yyyy-MM-dd").format(new
              Date())}&lt;/result> &lt;/Results></content>
              <allowWildcards>false</allowWildcards>
            </con:configuration>
          </con:assertion>
          <con:assertion type="XPath Match" name="Type Resiliation = RIC"><con:configuration><path>//Row/CONTRAT.TYPERESILIATION</path><content>RIC</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="Politique Resiliation Id Exists"><con:configuration><path>exists(//Row/CONTRAT.POLITIQUERESILIATIONID/text())</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/>
        </con:config>
      </con:testStep>
      <con:testStep type="jdbc" name="EC Resilie" id="429fe576-dd81-4ed0-9afd-35d4331af068">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString>
          <con:query>select 
date_format(c.datefincontrat, '%Y-%m-%d') as "datefinContrat",
c.dateDerniereFacture,
c.dateFinEngagement,
c.duree,
c.engagement,
c.idAdrFacturation,
c.idAdrLivraison,
c.isMigre,
c.numeroCommande, 
c.remboursable,
c.typeResiliation,
c.dependDe,
c.politiqueResiliationId
from elementcontractuel c 
where c.contratParent=(select id from
contrat where reference LIKE "${CreerContrat#RefContrat}%"
)</con:query>
          <con:assertion type="XQuery Match" name="Date Fin Contrat = Now()" disabled="true">
            <con:configuration><path>&lt;Results> 
{ 
  for $x in //Row 
  return &lt;result>{$x/DATEFINCONTRAT/text()}&lt;/result> 
}
&lt;/Results></path><content>&lt;Results>
  &lt;result>2014-09-05&lt;/result>
&lt;/Results></content><allowWildcards>false</allowWildcards></con:configuration>
          </con:assertion>
          <con:assertion type="XPath Match" name="Resiliation Totale"><con:configuration><path>not(//Row/ELEMENTCONTRACTUEL.POLITIQUERESILIATIONID/text())</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="Data non modifiées" disabled="true"><con:configuration><path>//Row/ELEMENTCONTRACTUEL.DUREE = '12'
and
not(//Row/ELEMENTCONTRACTUEL.ENGAGEMENT/text())
and
not(//Row/ELEMENTCONTRACTUEL.DEPENDDE/text())
and 
//Row/ELEMENTCONTRACTUEL.ISMIGRE = 0
and
//Row/ELEMENTCONTRACTUEL.IDADRLIVRAISON = 'adrliv1'
and
//Row/ELEMENTCONTRACTUEL.IDADRFACTURATION = 685
and
//Row/ELEMENTCONTRACTUEL.NUMEROCOMMANDE = '${CreerContrat#RefCommande}'
and
//Row/ELEMENTCONTRACTUEL.REMBOURSABLE = 1</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="Date Fin Engagement null" disabled="true"><con:configuration><path>not(//Row/ELEMENTCONTRACTUEL.DATEFINENGAGEMENT/text())</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/>
        </con:config>
      </con:testStep>
      <con:testStep type="delay" name="Wait for beginning Retour" id="c7e8edea-ccb3-4274-9fb1-94b154a4a705">
        <con:settings/>
        <con:config>
          <delay>500</delay>
        </con:config>
      </con:testStep>
      <con:testStep type="jdbc" name="EL de retour - Initié" id="87a4ec9c-cc96-4d80-84eb-105429567c2b">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString>
          <con:query>select * from elementlivraison 
where bonPreparationParent = 
(select id
from bonpreparation 
where reference = "${CreerContrat#RefContrat}"
  and typebonpreparation = "retour")</con:query>
          <con:assertion type="XQuery Match" name="TypeEL=Retour">
            <con:configuration><path>&lt;Results> 
{ 
 for $x in //Row 
 return &lt;Result>{$x/ELEMENTLIVRAISON.TYPEBONPREPARATION/text()}&lt;/Result> 
} 
&lt;/Results></path><content>&lt;Results>
  &lt;Result>RETOUR&lt;/Result>
&lt;/Results></content><allowWildcards>false</allowWildcards></con:configuration>
          </con:assertion>
          <con:assertion type="XQuery Match" name="Acteurs=Packager">
            <con:configuration><path>&lt;Results> 
{ 
 for $x in //Row 
 order by $x/ELEMENTLIVRAISON.TYPECONTRAT 
 return &lt;result>{$x/ELEMENTLIVRAISON.ACTEUR/text()}&lt;/result> 
} 
&lt;/Results></path><content>&lt;Results>
  &lt;result>PACKAGER&lt;/result>
&lt;/Results></content><allowWildcards>false</allowWildcards></con:configuration>
          </con:assertion>
          <con:assertion type="XPath Match" name="1 seul code Produit">
            <con:configuration><path>count(//Row[ELEMENTLIVRAISON.TYPECONTRAT="ABONNEMENT"]/ELEMENTLIVRAISON.RETAILERPACKAGERID/text())</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
          </con:assertion>
          <con:assertion type="XQuery Match" name="0 code Colis">
            <con:configuration><path>count(//Row[ELEMENTLIVRAISON.TYPEELEMENT="BIEN"]/ELEMENTLIVRAISON.CODECOLIS)</path><content>&lt;xml-fragment>0&lt;/xml-fragment></content><allowWildcards>false</allowWildcards></con:configuration>
          </con:assertion>
          <con:assertion type="XPath Match" name="EL Initié"><con:configuration><path>exists(//ResultSet/Row/ELEMENTLIVRAISON.DATEINITIATION/text())</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="NumEC"><con:configuration><path>//ResultSet/Row/ELEMENTLIVRAISON.NUMEC/text()</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="AncienCodes Null"><con:configuration><path>not(//ResultSet/Row/ELEMENTLIVRAISON.ANCIENCODECOLIS/text())
and
not(//ResultSet/Row/ELEMENTLIVRAISON.ANCIENCODEPRODUIT/text())</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="ReferenceProduit = Antivirus"><con:configuration><path>//ResultSet/Row/ELEMENTLIVRAISON.REFERENCEPRODUIT/text()</path><content>avfwpro-confort-s</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/>
        </con:config>
      </con:testStep>
      <con:testStep type="jdbc" name="Bon de Retour - Initié" id="f188bdc9-9a18-474d-9f9a-09a6d2574f0f">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString>
          <con:query>select id, reference,
causenonlivraison,
date_format(dateinitiation, '%Y-%m-%d') as "dateInitiation",
datedebutPreparation,
dateretourtermine,
idClient, typebonpreparation,
dateLivraisonTermine
from bonpreparation 
where reference = "${CreerContrat#RefContrat}"
  and typebonpreparation = "retour"</con:query>
          <con:assertion type="Simple Contains" name="Type BP = retour">
            <con:configuration>
              <token>&lt;BONPREPARATION.TYPEBONPREPARATION>RETOUR&lt;/BONPREPARATION.TYPEBONPREPARATION></token>
              <ignoreCase>false</ignoreCase>
              <useRegEx>false</useRegEx>
            </con:configuration>
          </con:assertion>
          <con:assertion type="Simple Contains" name="Id Client = 00003870">
            <con:configuration>
              <token>&lt;BONPREPARATION.IDCLIENT>00003870&lt;/BONPREPARATION.IDCLIENT></token>
              <ignoreCase>false</ignoreCase>
              <useRegEx>false</useRegEx>
            </con:configuration>
          </con:assertion>
          
          <con:assertion type="XPath Match" name="Date Initiation = Now()" disabled="true"><con:configuration><path>//ResultSet/Row/DATEINITIATION</path><content>${=new java.text.SimpleDateFormat("yyyy-MM-dd").format(new Date())}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="DateCession Null"><con:configuration><path>not(//Row/BONPREPARATION.DATECESSION/text())</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="DateLivraisonTermine Null"><con:configuration><path>not(//Row/BONPREPARATION.DATELIVRAISONTERMINE/text())</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/>
        </con:config>
      </con:testStep>
      <con:testStep type="delay" name="Wait for end Retour" id="c67ec249-7a00-4d1b-8c65-20a35528db16">
        <con:settings/>
        <con:config><delay>500</delay></con:config>
      </con:testStep><con:testStep type="jdbc" name="Bon de Retour - Témoin" id="e04fc134-ff10-422f-a5f4-e8d1aee4316b">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString>
          <con:query>select id, reference,
causenonlivraison,
date_format(dateinitiation, '%Y-%m-%d') as "dateInitiation",
datedebutPreparation,
dateretourtermine,
idClient, typebonpreparation,
dateLivraisonTermine
from bonpreparation 
where reference = "${CreerContrat#RefContrat}"
  and typebonpreparation = "retour"</con:query>
          
          
          
          <con:assertion type="XPath Match" name="Cause NonLivraison Null"><con:configuration><path>not(//Row/BONPREPARATION.CAUSENONLIVRAISON/text())</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/>
        </con:config>
      </con:testStep><con:testStep type="goto" name="Go End Retour" id="cdd5e74b-aafc-4b7b-aace-a07c46038f44">
        <con:settings/>
        <con:config xsi:type="con:GotoStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:condition>
            <con:name>Wait Facturation</con:name>
            <con:type>XPATH</con:type>
            <con:expression>not(//Results/ResultSet/Row/BONPREPARATION.DATERETOURTERMINE/text())
and
not(//Results/ResultSet/Row/BONPREPARATION.CAUSENONLIVRAISON/text())</con:expression>
            <con:targetStep>Wait for end Retour</con:targetStep>
          </con:condition>
        </con:config>
      </con:testStep><con:testStep type="groovy" name="Nb Passes = 0" id="c307d008-a675-4ffe-8872-019daca898cd">
        <con:settings/>
        <con:config><script>int passe = 0 
testRunner.testCase.setPropertyValue("NbPasses", passe.toString())</script></con:config>
      </con:testStep><con:testStep type="jdbc" name="EL de retour - Retourné" id="d4d11bf9-069b-40ae-a6ee-f7483ea9cbb3">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString>
          <con:query>select * from elementlivraison 
where bonpreparationparent = 
(select id
from bonpreparation 
where reference = "${CreerContrat#RefContrat}"
  and typebonpreparation = "retour")</con:query>
          
          <con:assertion type="XPath Match" name="1 seul Code Produit">
            <con:configuration><path>count(//Row[ELEMENTLIVRAISON.TYPECONTRAT="ABONNEMENT"]/ELEMENTLIVRAISON.RETAILERPACKAGERID/text())</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
          </con:assertion>
          <con:assertion type="XQuery Match" name="0 Code Colis">
            <con:configuration><path>count(//Row[ELEMENTLIVRAISON.TYPEELEMENT="BIEN"]/ELEMENTLIVRAISON.CODECOLIS/text())</path><content>&lt;xml-fragment>0&lt;/xml-fragment></content><allowWildcards>false</allowWildcards></con:configuration>
          </con:assertion>
          <con:assertion type="XQuery Match" name="NumEC"><con:configuration><path>//ResultSet/Row/ELEMENTLIVRAISON.NUMEC/text()</path><content>&lt;xml-fragment>1&lt;/xml-fragment></content><allowWildcards>false</allowWildcards></con:configuration></con:assertion><con:assertion type="XQuery Match" name="Resiliation Partielle = 0"><con:configuration><path>&lt;Results>
{
  for $x in //Row
  order by reference
  return &lt;result>{$x/ELEMENTLIVRAISON.RESILIATIONPARTIEL/text()}&lt;/result>
}
&lt;/Results></path><content>&lt;Results>
  &lt;result>0&lt;/result>
&lt;/Results></content><allowWildcards>false</allowWildcards></con:configuration></con:assertion><con:assertion type="XQuery Match" name="Acteurs = Packager"><con:configuration><path>&lt;Results> 
{ 
 for $x in //Row 
 order by $x/ELEMENTLIVRAISON.TYPECONTRAT 
 return &lt;result>{$x/ELEMENTLIVRAISON.ACTEUR/text()}&lt;/result> 
} 
&lt;/Results></path><content>&lt;Results>
  &lt;result>PACKAGER&lt;/result>
&lt;/Results></content><allowWildcards>false</allowWildcards></con:configuration></con:assertion><con:assertion type="XPath Match" name="XPath Match"><con:configuration><path>not(//ResultSet/Row/ELEMENTLIVRAISON.CAUSENONLIVRAISON/text())
and
exists(//ResultSet/Row/ELEMENTLIVRAISON.DATERETOURTERMINE/text())</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="EL Retourné"><con:configuration><path>not(//ResultSet/Row/ELEMENTLIVRAISON.CAUSENONLIVRAISON/text())
and
exists(//ResultSet/Row/ELEMENTLIVRAISON.DATERETOURTERMINE/text())</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="AncienCodes Null"><con:configuration><path>not(//ResultSet/Row/ELEMENTLIVRAISON.ANCIENCODECOLIS/text())
and
not(//ResultSet/Row/ELEMENTLIVRAISON.ANCIENCODEPRODUIT/text())</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="Type BP = Retour"><con:configuration><path>//ResultSet/Row/ELEMENTLIVRAISON.TYPEBONPREPARATION/text()</path><content>RETOUR</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="ReferenceProduit = Antivirus"><con:configuration><path>//ResultSet/Row/ELEMENTLIVRAISON.REFERENCEPRODUIT/text()</path><content>avfwpro-confort-s</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/>
        </con:config>
      </con:testStep><con:testStep type="jdbc" name="Bon de Retour - Retourné" id="754921c7-9b83-4339-a63b-45568c543448">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString>
          <con:query>select id, reference,
causenonlivraison,
dateinitiation,
datedebutPreparation,
datePreparation,
date_format(dateretourtermine, '%Y-%m-%d') as "dateRetour",
idClient, typebonpreparation,
dateLivraisonTermine
from bonpreparation 
where reference = "${CreerContrat#RefContrat}"
  and typebonpreparation = "retour"</con:query>
          
          <con:assertion type="Simple Contains" name="Id Client">
            <con:configuration>
              <token>&lt;BONPREPARATION.IDCLIENT>00003870&lt;/BONPREPARATION.IDCLIENT></token>
              <ignoreCase>false</ignoreCase>
              <useRegEx>false</useRegEx>
            </con:configuration>
          </con:assertion>
          
          <con:assertion type="XPath Match" name="Date Retour = Now()" disabled="true"><con:configuration><path>//ResultSet/Row/DATERETOUR/text()</path><content>${=new java.text.SimpleDateFormat("yyyy-MM-dd").format(new Date())}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="Type BP = Retour"><con:configuration><path>//Row/BONPREPARATION.TYPEBONPREPARATION/text()</path><content>RETOUR</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="Dates Workflow"><con:configuration><path>exists(//ResultSet/Row/BONPREPARATION.DATEINITIATION/text())
and
exists(//ResultSet/Row/BONPREPARATION.DATEPREPARATION/text())</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="Cause NonLivraison Null"><con:configuration><path>not(//Row/BONPREPARATION.CAUSENONLIVRAISON/text())</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="DateLivraisonTermine Null"><con:configuration><path>not(//Row/BONPREPARATION.DATELIVRAISONTERMINE/text())</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/>
        </con:config>
      </con:testStep><con:testStep type="transfer" name="Transfert Date Retour" id="103c1c72-6c55-4662-9742-463fe2b2f9c0">
        <con:settings/>
        <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false">
            <con:name>DateLivraison</con:name>
            <con:sourceType>ResponseAsXml</con:sourceType>
            <con:sourceStep>EL de retour - Retourné</con:sourceStep>
            <con:sourcePath>//Results/ResultSet/Row/BONPREPARATION.DATETERMINE/text()</con:sourcePath>
            <con:targetType>DateLivraison</con:targetType>
            <con:targetStep>InfosFacture</con:targetStep>
          </con:transfers>
        </con:config>
      </con:testStep><con:testStep type="properties" name="InfosFacture" id="18e47b56-91ea-4d90-9ccb-418f091efa2b" disabled="true">
        <con:settings/>
        <con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:properties>
            <con:property>
              <con:name>DateLivraison</con:name>
              <con:value xsi:nil="true"/>
            </con:property>
          </con:properties>
        </con:config>
      </con:testStep><con:testStep type="delay" name="Wait for end Facturation" id="7e8c3537-49e1-4252-b803-ada60af78153" disabled="true">
        <con:settings/>
        <con:config>
          <delay>500</delay>
        </con:config>
      </con:testStep><con:testStep type="groovy" name="Nb Passes +1" id="ccd66a22-49db-4140-9985-4eaddcd87ffa" disabled="true">
        <con:settings/>
        <con:config><script>int passe = testRunner.testCase.getPropertyValue("NbPasses").toInteger() 
passe = passe + 1
testRunner.testCase.setPropertyValue("NbPasses", passe.toString())</script></con:config>
      </con:testStep><con:testStep type="jdbc" name="Facturation-exists" id="fbb158c9-15b9-44b4-82b2-84847a7292a1" disabled="true">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.100.105.41:3306/test_saphir?user=test&amp;password=test</con:connectionString>
          <con:query>select * from movement 
where accountId = '00003870'
  and productId = 'avfwpro-confort-s'
  and minute(timediff(now(), create_date)) &lt;= 1
  and id IN (
  	select movement_idFK 
  	  from movement_appendix_item 
  	 where productReferenceId = '${CreerContrat#RefContrat}'
  )
;</con:query>
          <con:properties/>
        </con:config>
      </con:testStep><con:testStep type="goto" name="Go Facturation" id="d8c64d58-79b4-474c-84fe-5c856870b7f1" disabled="true">
        <con:settings/>
        <con:config xsi:type="con:GotoStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:condition>
            <con:name>Wait Facturation</con:name>
            <con:type>XPATH</con:type>
            <con:expression>not(//Results/ResultSet/Row/MOVEMENT.ID/text())
and
${#TestCase#NbPasses} &lt; 10
</con:expression>
            <con:targetStep>Wait for end Facturation</con:targetStep>
          </con:condition>
        </con:config>
      </con:testStep><con:testStep type="jdbc" name="Facturation-valid" id="7e39ddb3-9ac7-4f94-908e-eca8c0a41fca" disabled="true">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.100.105.41:3306/test_saphir?user=test&amp;password=test</con:connectionString>
          <con:query>select * from movement 
where accountId = '00003870'
  and productId = 'avfwpro-confort-s'
  and minute(timediff(now(), create_date)) &lt;= 1
  and id IN (
  	select movement_idFK 
  	  from movement_appendix_item 
  	 where productReferenceId = '${CreerContrat#RefContrat}'
  )
;</con:query>
          <con:assertion type="XQuery Match" name="Frais de Résiliation">
            <con:configuration><path><![CDATA[<Results>
{
for $x in //Row[contains(MOVEMENT.PRODUCTID/text(), 'Frais/Resiliation')]
return 
<result>
   <label>{$x/MOVEMENT.PRODUCTLABEL/text()}</label>
   <productId>{$x/MOVEMENT.PRODUCTID/text()}</productId>
   <amount>{$x/MOVEMENT.AMOUNT/text()}</amount>
</result>
}
</Results>]]></path><content><![CDATA[<Results>
<result>
<label></label>
<productId></productId>
<amount></amount>
<result>
</Results>]]></content><allowWildcards>false</allowWildcards></con:configuration>
          </con:assertion>
          
          
          
          <con:assertion type="XQuery Match" name="Frais de Résiliation - Period">
            <con:configuration><path>&lt;Results> { for $x in //Row[contains(MOVEMENT.PRODUCTID/text(), 'Frais/Resiliation')] return
              &lt;result>{$x/MOVEMENT.STARTFROM} {$x/MOVEMENT.ENDTO}&lt;/result> } &lt;/Results></path><content><![CDATA[
                <Results>
  <result>
    <MOVEMENT.STARTFROM>${=new java.text.SimpleDateFormat("yyyy-MM-dd HH:mm:ss.S").parse('${InfosFacture#DateLivraison}').format('yyyy-MM-dd')}</MOVEMENT.STARTFROM>
    <MOVEMENT.ENDTO>${=new java.text.SimpleDateFormat("yyyy-MM-dd HH:mm:ss.S").parse('${InfosFacture#DateLivraison}').format('yyyy-MM-dd')}</MOVEMENT.ENDTO>
  </result>
</Results>
]]></content><allowWildcards>false</allowWildcards></con:configuration>
          </con:assertion>
          <con:properties/>
        </con:config>
      </con:testStep><con:properties><con:property><con:name>NbPasses</con:name><con:value>0</con:value></con:property></con:properties>
    </con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Migrer Jet - Option" searchProperties="true" id="5a440469-7cfd-4a8e-9deb-9ff301b20ed6" disabled="true">
      <con:settings/>
      
      <con:testStep type="calltestcase" name="CreerContrat" id="aebac1fb-012d-4a68-bb3a-2d9dfe32ae79"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>3d1406c1-6558-4539-a011-8394a232a260</con:targetTestCase><con:properties><con:property><con:name>RefCommande</con:name><con:value>3fbeb6f8-276f-43b1-9611-55e6565ca3d2</con:value></con:property><con:property><con:name>RefContrat</con:name><con:value>8e684693</con:value></con:property></con:properties><con:returnProperties><con:entry>RefCommande</con:entry><con:entry>RefContrat</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="jdbc" name="Contrat Ancien" id="c3db317b-e6e9-4742-9f97-e74b0487e453"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString><con:query>select *
from contrat
where reference = '${CreerContrat#RefContrat}'</con:query><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="EC Anciens" id="69ef5bca-1a78-45eb-9718-7c359fa8375c"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString><con:query>select numec, referenceProduit,
idadrfacturation, idadrlivraison, 
duree, engagement
from elementcontractuel
where reference like '${CreerContrat#RefContrat}%'
order by numec</con:query><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Move Anciennes Infos Contrat" id="4be1d135-c896-498c-893f-1f6ae47c8eef"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>Move PolitiqueValidationId</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Contrat Ancien</con:sourceStep><con:sourcePath>//ResultSet/Row/CONTRAT.POLITIQUEVALIDATIONID/text()</con:sourcePath><con:targetType>PolitiqueValidationId</con:targetType><con:targetStep>InfosAncienContrat</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" transferToAll="false" entitize="false" ignoreEmpty="false" useXQuery="false" transferChildNodes="false"><con:name>IdClient</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Contrat Ancien</con:sourceStep><con:sourcePath>//ResultSet/Row/CONTRAT.IDCLIENT/text()</con:sourcePath><con:targetType>IdClient</con:targetType><con:targetStep>InfosAncienContrat</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>Titre</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Contrat Ancien</con:sourceStep><con:sourcePath>//ResultSet/Row/CONTRAT.TITRE/text()</con:sourcePath><con:targetType>Titre</con:targetType><con:targetStep>InfosAncienContrat</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>idAdrFacturation</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>EC Anciens</con:sourceStep><con:sourcePath>//ResultSet/Row[1]/ELEMENTCONTRACTUEL.IDADRFACTURATION/text()</con:sourcePath><con:targetType>IdAdrFacturation</con:targetType><con:targetStep>InfosAncienContrat</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>idAdrLivraison</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>EC Anciens</con:sourceStep><con:sourcePath>//ResultSet/Row[1]/ELEMENTCONTRACTUEL.IDADRLIVRAISON/text()</con:sourcePath><con:targetType>IdAdrLivraison</con:targetType><con:targetStep>InfosAncienContrat</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" transferToAll="false" entitize="false"><con:name>Engagement Jet</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>EC Anciens</con:sourceStep><con:sourcePath>//ResultSet/Row[1]/ELEMENTCONTRACTUEL.ENGAGEMENT</con:sourcePath><con:targetType>Engagement</con:targetType><con:targetStep>InfosAncienContrat</con:targetStep></con:transfers></con:config></con:testStep><con:testStep type="properties" name="InfosAncienContrat" id="c1247e1b-89ad-48a3-9745-e6eabff59936"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>PolitiqueValidationId</con:name><con:value>14</con:value></con:property><con:property><con:name>IdClient</con:name><con:value>00003870</con:value></con:property><con:property><con:name>Titre</con:name><con:value>Contrat Global: 8e684693</con:value></con:property><con:property><con:name>IdAdrFacturation</con:name><con:value>685</con:value></con:property><con:property><con:name>IdAdrLivraison</con:name><con:value>adrliv1</con:value></con:property><con:property><con:name>Engagement</con:name><con:value>24</con:value></con:property><con:property><con:name>Duree</con:name><con:value/></con:property></con:properties></con:config></con:testStep>
      <con:testStep type="restrequest" name="Migrer Contrat" id="2dde1824-6d07-429c-83fb-10d33f84a2fc">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/{refContrat}/migrer" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="Migrer Contrat" mediaType="application/json" postQueryString="false">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{
  "user": "test",
  "politiqueMigration": {
    "fraisMigration": "30",
    "fraisResiliation": true,
    "montantResiliation": "50",
    "remboursement": true,
    "montantRemboursement": "50",
    "fraisCreation": true,
    "penalite": true,
	"reductionAncienne": false
  },
  "produitsMigration": [
    {
      "numEC": 1,
      "referenceGammeSource": "jet",
      "referenceProduitSource": "jet",
      "referenceGammeDestination": "jet",
      "referenceProduitDestination": "jet",
      "label": "Abonnement Jet 10Go",
      "numeroCommande": "Order_migration_1",
      "typeProduit": "SERVICE",
      "prix": {
        "periodicite": 1,
        "montant": "30",
        "typeTVA": "R",
        "frais": [
          {
            "montant": "30",
            "titre": "Frais d'ouverture de dossier",
            "typeFrais": "CREATION"
          }
        ],
        "modeFacturation": "PREMIER_MOIS"
      },
	  "referenceDePaiement": "R0000012",
	  "modePaiement": "SEPA"
    },
    {
      "numEC": 2,
      "numECParent": 1,
      "referenceGammeSource": "jet",
      "referenceProduitSource": "option.plus.50g",
      "referenceGammeDestination": "jet",
      "referenceProduitDestination": "option.plus.20g",
      "label": "Option+ 20Go",
      "numeroCommande": "Order_migration_1",
      "typeProduit": "SERVICE",
      "prix": {
        "periodicite": 1,
        "montant": "5",
        "typeTVA": "R",
        "modeFacturation": "PREMIER_MOIS"
      },
	  "referenceDePaiement": "R0000012",
	  "modePaiement": "SEPA"
    }
  ]
}</con:request>
            <con:assertion type="Valid HTTP Status Codes" name="Code Retour 200" id="20b95fed-f66f-4685-bce1-6e0a1d92ffad">
              <con:configuration>
                <codes>200</codes>
              </con:configuration>
            </con:assertion>
            <con:assertion type="GroovyScriptAssertion" name="Response must be empty" id="6ca1ddfa-7b0f-48d8-b5fa-1642229ad752">
              <con:configuration>
                <scriptText>assert messageExchange.hasResponse() == false</scriptText>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters>
              <entry key="refContrat" value="${CreerContrat#RefContrat}" xmlns="http://eviware.com/soapui/config"/>
            </con:parameters>
          </con:restRequest>
        </con:config>
      </con:testStep>
      <con:testStep type="jdbc" name="Politique Migration" id="65b5dc7e-d28b-4fd2-9cfe-1238ffb54550">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString>
          <con:query>select *
from politiquemigration
where referenceContrat = '${CreerContrat#RefContrat}'
order by id desc
LIMIT 1</con:query>
          
          
          <con:assertion type="XPath Match" name="Date Action"><con:configuration><path>//ResultSet/Row/POLITIQUEMIGRATION.DATEACTION</path><content>${=new java.text.SimpleDateFormat("yyyy-MM-dd").format(new Date())}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="FraisCreation"><con:configuration><path>//ResultSet/Row/POLITIQUEMIGRATION.FRAISCREATION</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="FraisMigration"><con:configuration><path>//ResultSet/Row/POLITIQUEMIGRATION.FRAISMIGRATION</path><content>30</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="FraisResiliation"><con:configuration><path>//ResultSet/Row/POLITIQUEMIGRATION.FRAISRESILIATION</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="MontantFraisResiliation"><con:configuration><path>//ResultSet/Row/POLITIQUEMIGRATION.MONTANTRESILIATION</path><content>50</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="MontantRemboursement"><con:configuration><path>//ResultSet/Row/POLITIQUEMIGRATION.MONTANTREMBOURSEMENT</path><content>50</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="Pénalités"><con:configuration><path>//ResultSet/Row/POLITIQUEMIGRATION.PENALITE</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="Remboursement"><con:configuration><path>//ResultSet/Row/POLITIQUEMIGRATION.REMBOURSEMENT</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="Reduction Ancienne"><con:configuration><path>//ResultSet/Row/POLITIQUEMIGRATION.REDUCTIONANCIENNE</path><content>0</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/>
        </con:config>
      </con:testStep>
      <con:testStep type="jdbc" name="Avenant" disabled="true" id="8d77fad4-9db0-4a67-8964-51f40f5096e8">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString>
          <con:query>todo</con:query>
          
          
          <con:properties/>
        </con:config>
      </con:testStep>
      <con:testStep type="jdbc" name="Modifications" disabled="true" id="c85ddaa5-a52f-4107-8a56-c8c7937753a7">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString>
          <con:query>todo</con:query>
          
          
          <con:assertion type="XPath Match" name="Remboursement"><con:configuration><path>//ResultSet/Row/POLITIQUEMIGRATION.REMBOURSEMENT</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/>
        </con:config>
      </con:testStep>
      <con:testStep type="jdbc" name="Contrat Migre" id="03ca354f-3bae-4c9e-8ed9-2d8472062d5e">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString>
          <con:query>select *
from contrat
where reference = '${CreerContrat#RefContrat}'</con:query>
          
          <con:assertion type="XPath Match" name="PolitiqueValidationId différent de la précédente"><con:configuration><path>(//ResultSet/Row/CONTRAT.POLITIQUEVALIDATIONID/text())  != ${InfosAncienContrat#PolitiqueValidationId}</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="Même référence"><con:configuration><path>//ResultSet/Row/CONTRAT.REFERENCE/text()</path><content>${CreerContrat#RefContrat}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="Même idClient"><con:configuration><path>//ResultSet/Row/CONTRAT.IDCLIENT/text()</path><content>${InfosAncienContrat#IdClient}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="Même titre"><con:configuration><path>//ResultSet/Row/CONTRAT.TITRE/text()</path><content>${InfosAncienContrat#Titre}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/>
        </con:config>
      </con:testStep>
      <con:testStep type="jdbc" name="EC Migre" id="ac300d77-a426-4ea7-b860-71f25c0664af">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString>
          <con:query>select 
id, configuration, 
dateDebutFacturation, dateDerniereFacture,
dateFinContrat, datePreparation,
date_format(c.datevalidation, '%Y-%m-%d') as "dateValidation",
duree, engagement,
idAdrFacturation, idAdrLivraison,
modeFacturation, modePaiement,
montant, numEC, numeroCommande,
periodicite, reference,
referenceModePaiement,referenceProduit,
remboursable, titre,
typeContrat, typeProduit, typeResiliation, typeTVA, 
contratParent, dependDe,
politiqueResiliationId, 
reductionId, reductionGlobalId
from elementcontractuel c 
where c.reference LIKE "${CreerContrat#RefContrat}%"</con:query>
          <con:assertion type="XQuery Match" name="Date Validation = Now()">
            <con:configuration><path>&lt;Results> 
{ 
for $x in //Row 
return &lt;result>{$x/DATEVALIDATION/text()}&lt;/result> 
}
&lt;/Results></path><content><![CDATA[<Results>
  <result>${=new java.text.SimpleDateFormat("yyyy-MM-dd").format(new Date())}</result>
  <result>${=new java.text.SimpleDateFormat("yyyy-MM-dd").format(new Date())}</result>
</Results>]]></content><allowWildcards>false</allowWildcards></con:configuration>
          </con:assertion>
          <con:assertion type="XPath Match" name="2 éléments survivants"><con:configuration><path>count(//ResultSet/Row)</path><content>2</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XQuery Match" name="Même AdrLivraison"><con:configuration><path>&lt;Results> 
{ 
for $x in //Row 
return &lt;result>{$x/ELEMENTCONTRACTUEL.IDADRLIVRAISON/text()}&lt;/result> 
}
&lt;/Results></path><content><![CDATA[<Results>
  <result>
${InfosAncienContrat#idAdrLivraison}</result>
  <result>${InfosAncienContrat#idAdrLivraison}</result>
</Results>]]></content><allowWildcards>false</allowWildcards></con:configuration></con:assertion><con:assertion type="XQuery Match" name="Même AdrFacturation"><con:configuration><path>&lt;Results> 
{ 
for $x in //Row 
return &lt;result>{$x/ELEMENTCONTRACTUEL.IDADRFACTURATION/text()}&lt;/result> 
}
&lt;/Results></path><content><![CDATA[<Results>
  <result>${InfosAncienContrat#IdAdrFacturation}</result>
  <result>${InfosAncienContrat#IdAdrFacturation}</result>
</Results>]]></content><allowWildcards>false</allowWildcards></con:configuration></con:assertion><con:assertion type="XPath Match" name="Option+ 50 -> Option+ 20"><con:configuration><path>//ResultSet/Row[contains(ELEMENTCONTRACTUEL.NUMEC, '2')]/ELEMENTCONTRACTUEL.REFERENCEPRODUIT/text()</path><content>option.plus.20g</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XQuery Match" name="Nouveau numéro de commande"><con:configuration><path>&lt;Results>
{
 for $x in //Row
 return &lt;r>{$x/ELEMENTCONTRACTUEL.NUMEROCOMMANDE/text()}&lt;/r>
}
&lt;/Results></path><content><![CDATA[<Results>
  <r>Order_migration_1</r>
  <r>Order_migration_1</r>
</Results>]]></content><allowWildcards>false</allowWildcards></con:configuration></con:assertion><con:properties/>
        </con:config>
      </con:testStep>
      <con:testStep type="delay" name="Wait for beginning Retour" id="2b0f53c4-7f4d-47c5-9fad-362b12f62864">
        <con:settings/>
        <con:config>
          <delay>500</delay>
        </con:config>
      </con:testStep>
      <con:testStep type="jdbc" name="Bon de Migration - Initié" id="684f55f4-27d5-4f6f-8707-c1ce1c8e7dcf">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString>
          <con:query>select id, reference,
causenonlivraison,
date_format(dateinitiation, '%Y-%m-%d') as "dateInitiation",
datedebutPreparation,
dateretourtermine,
idClient, typebonpreparation
from bonpreparation 
where reference LIKE "${CreerContrat#RefContrat}%"
  and typeBonPreparation = 'MIGRATION'</con:query>
          
          
          
          
          <con:assertion type="XPath Match" name="Id Client"><con:configuration><path>//ResultSet/Row/BONPREPARATION.IDCLIENT/text()</path><content>00003870</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="Reference"><con:configuration><path>//ResultSet/Row/BONPREPARATION.REFERENCE</path><content>${CreerContrat#RefContrat}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="Date Initiation"><con:configuration><path>//ResultSet/Row/DATEINITIATION/text()</path><content>${=new java.text.SimpleDateFormat("yyyy-MM-dd").format(new Date())}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/>
        </con:config>
      </con:testStep>
      <con:testStep type="jdbc" name="EL de migration - Initié" id="9e1e0896-ce99-44a7-bdb3-9cce7950dd66">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString>
          <con:query>select * from elementlivraison
where bonPreparationParent = 
(select id
from bonpreparation 
where reference LIKE "${CreerContrat#RefContrat}%"
  and typeBonPreparation = 'MIGRATION')</con:query>
          <con:assertion type="XQuery Match" name="TypeEL=Retour ou Migration">
            <con:configuration><path>&lt;Results> 
{ 
 for $x in //Row 
order by $x/ELEMENTLIVRAISON.NUMEC
 return &lt;result>{$x/ELEMENTLIVRAISON.TYPEBONPREPARATION/text()}&lt;/result> 
}
&lt;/Results></path><content><![CDATA[<Results>
  <result>MIGRATION</result>
  <result>MIGRATION</result>
  <result>RETOUR</result>
</Results>]]></content><allowWildcards>false</allowWildcards></con:configuration>
          </con:assertion>
          <con:assertion type="XQuery Match" name="Acteurs=NetRetour ou Packager">
            <con:configuration><path>&lt;Results> 
{ 
 for $x in //Row 
order by $x/ELEMENTLIVRAISON.NUMEC
 return &lt;result>{$x/ELEMENTLIVRAISON.ACTEUR/text()}&lt;/result> 
}
&lt;/Results></path><content><![CDATA[<Results>
  <result>PACKAGER</result>
  <result>PACKAGER</result>
  <result>NETRETOUR</result>
</Results>]]></content><allowWildcards>false</allowWildcards></con:configuration>
          </con:assertion>
          <con:assertion type="XPath Match" name="1 seul code Produit" disabled="true">
            <con:configuration><path>count(//Row[ELEMENTLIVRAISON.TYPEELEMENT="SERVICE"]/ELEMENTLIVRAISON.CODEPRODUIT/text())</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
          </con:assertion>
          <con:assertion type="XQuery Match" name="1 seul code Colis">
            <con:configuration>
              <path>count(//Row[ELEMENTLIVRAISON.TYPEELEMENT="BIEN"]/ELEMENTLIVRAISON.CODECOLIS/text())</path>
              <content>&lt;xml-fragment>1&lt;/xml-fragment></content>
              <allowWildcards>false</allowWildcards>
            </con:configuration>
          </con:assertion>
          <con:assertion type="XPath Match" name="Aucun EL de livraison"><con:configuration><path>count(//Row[ELEMENTLIVRAISON.TYPEBONPREPARATION = 'LIVRAISON'])</path><content>0</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/>
        </con:config>
      </con:testStep><con:testStep type="delay" name="Wait for end Migration" id="b6b8ebcf-a208-460c-80a7-2cb42f018d3b">
        <con:settings/>
        <con:config><delay>500</delay></con:config>
      </con:testStep><con:testStep type="jdbc" name="Bon de Retour - Temoin" id="38e16733-3302-4e8b-84a9-87545b7f46d9">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString>
          <con:query>select id, reference,
causenonlivraison,
date_format(dateinitiation, '%Y-%m-%d') as "dateInitiation",
datedebutPreparation,
datelivraisontermine,
dateretourtermine,
idClient, typebonpreparation
from bonpreparation 
where reference LIKE "${CreerContrat#RefContrat}%"
  and typeBonPreparation = 'MIGRATION'</con:query>
          
          
          
          <con:assertion type="XPath Match" name="Id Client"><con:configuration><path>//ResultSet/Row/BONPREPARATION.IDCLIENT/text()</path><content>00003870</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="Date Initiation"><con:configuration><path>//ResultSet/Row/DATEINITIATION/text()</path><content>${=new java.text.SimpleDateFormat("yyyy-MM-dd").format(new Date())}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/>
        </con:config>
      </con:testStep><con:testStep type="goto" name="Go End Migration" id="20478b99-cd8b-45f6-b4c2-62565f9e616f">
        <con:settings/>
        <con:config xsi:type="con:GotoStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:condition>
            <con:name>Wait Facturation</con:name>
            <con:type>XPATH</con:type>
            <con:expression>(not(//Results/ResultSet/Row/BONPREPARATION.DATELIVRAISONTERMINE/text())
or
not(//Results/ResultSet/Row/BONPREPARATION.DATERETOURTERMINE/text())
)
and
not(//Results/ResultSet/Row/BONPREPARATION.CAUSENONLIVRAISON/text())</con:expression>
            <con:targetStep>Wait for end Migration</con:targetStep>
          </con:condition>
        </con:config>
      </con:testStep><con:testStep type="jdbc" name="EL de retour - Retourné" id="0bf482f1-badc-4f37-bf46-8c78d656b1b0">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString>
          <con:query>select * from elementlivraison
where bonPreparationParent = 
(select id
from bonpreparation 
where reference LIKE "${CreerContrat#RefContrat}%"
  and typeBonPreparation = 'MIGRATION')</con:query>
          
          
          
          <con:assertion type="XQuery Match" name="Elmts de Migration Livrés"><con:configuration><path>&lt;Results> 
{ 
 for $x in //Row[contains(ELEMENTLIVRAISON.TYPEBONPREPARATION/text(), 'MIGRATION')]
 order by $x/ELEMENTLIVRAISON.NUMEC
 return &lt;result>{exists($x/ELEMENTLIVRAISON.DATELIVRAISONTERMINE/text())}&lt;/result> 
}
&lt;/Results></path><content><![CDATA[<Results>
  <result>true</result>
  <result>true</result>
</Results>]]></content><allowWildcards>false</allowWildcards></con:configuration></con:assertion><con:assertion type="XQuery Match" name="Elmts de Retour Retournés"><con:configuration><path>&lt;Results> 
{ 
 for $x in //Row[contains(ELEMENTLIVRAISON.TYPEBONPREPARATION/text(), 'RETOUR')]
 order by $x/ELEMENTLIVRAISON.NUMEC
 return &lt;result>{exists($x/ELEMENTLIVRAISON.DATERETOURTERMINE/text())}&lt;/result> 
}
&lt;/Results></path><content>&lt;Results>
  &lt;result>true&lt;/result>
&lt;/Results></content><allowWildcards>false</allowWildcards></con:configuration></con:assertion><con:properties/>
        </con:config>
      </con:testStep><con:testStep type="properties" name="InfosFacture" id="f749e428-5350-46cb-958f-7d82b2f6d39c">
        <con:settings/>
        <con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:properties>
            <con:property>
              <con:name>DateLivraison</con:name>
              <con:value xsi:nil="true"/>
            </con:property>
          </con:properties>
        </con:config>
      </con:testStep><con:testStep type="transfer" name="Transfert Date Retour" id="345cfc8e-bc41-40c5-ab12-296a68424a25">
        <con:settings/>
        <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false">
            <con:name>DateLivraison</con:name>
            <con:sourceType>ResponseAsXml</con:sourceType>
            <con:sourceStep>EL de retour - Retourné</con:sourceStep>
            <con:sourcePath>//Results/ResultSet/Row/BONPREPARATION.DATETERMINE/text()</con:sourcePath>
            <con:targetType>DateLivraison</con:targetType>
            <con:targetStep>InfosFacture</con:targetStep>
          </con:transfers>
        </con:config>
      </con:testStep><con:testStep type="delay" name="Wait for end Facturation" id="7cd849e5-c71e-42e0-a210-e2ecf13f2e72">
        <con:settings/>
        <con:config>
          <delay>500</delay>
        </con:config>
      </con:testStep><con:testStep type="jdbc" name="Facturation-exists" id="2b798d99-7f91-42c0-9436-0415a7fc8215">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.100.105.41:3306/test_saphir?user=test&amp;password=test</con:connectionString>
          <con:query>select * from movement where accountId = '00003870' and billinggroup ="${#TestCase#RefCommande}" ;</con:query>
          <con:properties/>
        </con:config>
      </con:testStep><con:testStep type="goto" name="Go Facturation" id="b906ce4a-eb05-441e-b3df-8814531d4c52">
        <con:settings/>
        <con:config xsi:type="con:GotoStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:condition>
            <con:name>Wait Facturation</con:name>
            <con:type>XPATH</con:type>
            <con:expression>not(//Results/ResultSet/Row/MOVEMENT.ID/text())</con:expression>
            <con:targetStep>Wait for end Facturation</con:targetStep>
          </con:condition>
        </con:config>
      </con:testStep><con:testStep type="jdbc" name="Facturation-valid" id="2acbbab8-6276-4d04-8a0e-d36edd05d77f">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.100.105.41:3306/test_saphir?user=test&amp;password=test</con:connectionString>
          <con:query>select * from movement 
where accountId = '00003870'
  and minute(timediff(now(), create_date)) &lt; 5</con:query>
          
          
          
          
          
          <con:assertion type="XPath Match" name="Au moins 1 mouvement"><con:configuration><path>count(//Row) > 0</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/>
        </con:config>
      </con:testStep><con:properties/>
    </con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Migrer Jet - produit de même gamme" searchProperties="true" id="c39f9521-de80-4854-889b-1c925d510489" disabled="true">
      <con:settings/>
      
      <con:testStep type="calltestcase" name="CreerContrat" id="57b1c386-f88c-49bc-8580-69dd32258e4a"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>3d1406c1-6558-4539-a011-8394a232a260</con:targetTestCase><con:properties><con:property><con:name>RefCommande</con:name><con:value>9087bfe2-6e40-40bb-8310-ab5651e8d9ef</con:value></con:property><con:property><con:name>RefContrat</con:name><con:value>10a80ce1</con:value></con:property></con:properties><con:returnProperties><con:entry>RefCommande</con:entry><con:entry>RefContrat</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="jdbc" name="Contrat Ancien" id="939e6131-596d-4c22-8728-58f52a26c38f"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString><con:query>select *
from contrat
where reference = '${CreerContrat#RefContrat}'</con:query><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="EC Anciens" id="2f02fe4e-1535-401a-9a88-97fa6343235d"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString><con:query>select numec, referenceProduit,
idadrfacturation, idadrlivraison, 
duree, engagement
from elementcontractuel
where reference like '${CreerContrat#RefContrat}%'
order by numec</con:query><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Move Anciennes Infos Contrat" id="0b65ad72-bb77-48a4-ab56-5ce4819b0f87"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>Move PolitiqueValidationId</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Contrat Ancien</con:sourceStep><con:sourcePath>//ResultSet/Row/CONTRAT.POLITIQUEVALIDATIONID/text()</con:sourcePath><con:targetType>PolitiqueValidationId</con:targetType><con:targetStep>InfosAncienContrat</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" transferToAll="false" entitize="false" ignoreEmpty="false" useXQuery="false" transferChildNodes="false"><con:name>IdClient</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Contrat Ancien</con:sourceStep><con:sourcePath>//ResultSet/Row/CONTRAT.IDCLIENT/text()</con:sourcePath><con:targetType>IdClient</con:targetType><con:targetStep>InfosAncienContrat</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>Titre</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Contrat Ancien</con:sourceStep><con:sourcePath>//ResultSet/Row/CONTRAT.TITRE/text()</con:sourcePath><con:targetType>Titre</con:targetType><con:targetStep>InfosAncienContrat</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>idAdrFacturation</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>EC Anciens</con:sourceStep><con:sourcePath>//ResultSet/Row[1]/ELEMENTCONTRACTUEL.IDADRFACTURATION/text()</con:sourcePath><con:targetType>IdAdrFacturation</con:targetType><con:targetStep>InfosAncienContrat</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>idAdrLivraison</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>EC Anciens</con:sourceStep><con:sourcePath>//ResultSet/Row[1]/ELEMENTCONTRACTUEL.IDADRLIVRAISON/text()</con:sourcePath><con:targetType>IdAdrLivraison</con:targetType><con:targetStep>InfosAncienContrat</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" transferToAll="false" entitize="false"><con:name>Engagement Jet</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>EC Anciens</con:sourceStep><con:sourcePath>//ResultSet/Row[1]/ELEMENTCONTRACTUEL.ENGAGEMENT</con:sourcePath><con:targetType>Engagement</con:targetType><con:targetStep>InfosAncienContrat</con:targetStep></con:transfers></con:config></con:testStep><con:testStep type="properties" name="InfosAncienContrat" id="208931f1-34f8-42ac-bcdd-d1d938421225"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>PolitiqueValidationId</con:name><con:value>21</con:value></con:property><con:property><con:name>IdClient</con:name><con:value>00003870</con:value></con:property><con:property><con:name>Titre</con:name><con:value>Contrat Global: 10a80ce1</con:value></con:property><con:property><con:name>IdAdrFacturation</con:name><con:value>685</con:value></con:property><con:property><con:name>IdAdrLivraison</con:name><con:value>adrliv1</con:value></con:property><con:property><con:name>Engagement</con:name><con:value>24</con:value></con:property><con:property><con:name>Duree</con:name><con:value/></con:property></con:properties></con:config></con:testStep>
      <con:testStep type="restrequest" name="Migrer Contrat" id="2e341a9b-be45-4217-9d2e-1ecacd645636">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/{refContrat}/migrer" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="Migrer Contrat" mediaType="application/json" postQueryString="false">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{
  "user": "test",
  "politiqueMigration": {
    "fraisMigration": "30",
    "fraisResiliation": true,
    "montantResiliation": "50",
    "remboursement": true,
    "montantRemboursement": "50",
    "fraisCreation": true,
    "penalite": true,
    "reductionAncienne": false
  },
  "produitsMigration": [
    {
      "numEC": 1,
      "referenceGammeSource": "jet",
      "referenceProduitSource": "jet",
      "referenceGammeDestination": "jet",
      "referenceProduitDestination": "jet2",
      "label": "Abonnement Jet 20Go",
      "numeroCommande": "Order_migration_2",
      "typeProduit": "SERVICE",
      "prix": {
        "periodicite": 1,
        "montant": "35",
        "typeTVA": "R",
        "frais": [
          {
            "montant": "30",
            "titre": "Frais d'ouverture de dossier",
            "typeFrais": "CREATION"
          }
        ],
        "modeFacturation": "PREMIER_MOIS"
      },
	  "referenceDePaiement": "R0000012",
	  "modePaiement": "SEPA"
    },
    {
      "numEC": 2,
      "numECParent": 1,
      "referenceGammeSource": "jet",
      "referenceProduitSource": "option.plus.50g",
      "referenceGammeDestination": "jet",
      "referenceProduitDestination": "option.plus.50g",
      "label": "Option+ 20Go",
      "numeroCommande": "Order_migration_2",
      "typeProduit": "SERVICE",
      "prix": {
        "periodicite": 1,
        "montant": "5",
        "typeTVA": "R",
        "modeFacturation": "PREMIER_MOIS"
      },
	  "referenceDePaiement": "R0000012",
	  "modePaiement": "SEPA"
    }
  ]
}</con:request>
            <con:assertion type="Valid HTTP Status Codes" name="Code Retour 200" id="20b95fed-f66f-4685-bce1-6e0a1d92ffad">
              <con:configuration>
                <codes>200</codes>
              </con:configuration>
            </con:assertion>
            <con:assertion type="GroovyScriptAssertion" name="Response must be empty" id="6ca1ddfa-7b0f-48d8-b5fa-1642229ad752">
              <con:configuration>
                <scriptText>assert messageExchange.hasResponse() == false</scriptText>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters>
              <entry key="refContrat" value="${CreerContrat#RefContrat}" xmlns="http://eviware.com/soapui/config"/>
            </con:parameters>
          </con:restRequest>
        </con:config>
      </con:testStep>
      <con:testStep type="jdbc" name="Politique Migration" id="3ad02620-75c0-449c-b358-3a5ac426d4e4">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString>
          <con:query>select *
from politiquemigration
where referenceContrat = '${CreerContrat#RefContrat}'
order by id desc
LIMIT 1</con:query>
          
          
          <con:assertion type="XPath Match" name="Date Action"><con:configuration><path>//ResultSet/Row/POLITIQUEMIGRATION.DATEACTION</path><content>${=new java.text.SimpleDateFormat("yyyy-MM-dd").format(new Date())}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="FraisCreation"><con:configuration><path>//ResultSet/Row/POLITIQUEMIGRATION.FRAISCREATION</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="FraisMigration"><con:configuration><path>//ResultSet/Row/POLITIQUEMIGRATION.FRAISMIGRATION</path><content>30</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="FraisResiliation"><con:configuration><path>//ResultSet/Row/POLITIQUEMIGRATION.FRAISRESILIATION</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="MontantFraisResiliation"><con:configuration><path>//ResultSet/Row/POLITIQUEMIGRATION.MONTANTRESILIATION</path><content>50</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="MontantRemboursement"><con:configuration><path>//ResultSet/Row/POLITIQUEMIGRATION.MONTANTREMBOURSEMENT</path><content>50</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="Pénalités"><con:configuration><path>//ResultSet/Row/POLITIQUEMIGRATION.PENALITE</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="Remboursement"><con:configuration><path>//ResultSet/Row/POLITIQUEMIGRATION.REMBOURSEMENT</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="Reduction Ancienne"><con:configuration><path>//ResultSet/Row/POLITIQUEMIGRATION.REDUCTIONANCIENNE</path><content>0</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/>
        </con:config>
      </con:testStep>
      <con:testStep type="jdbc" name="Avenant" disabled="true" id="71e8b115-e9d4-4669-9011-2e6ad6c1cda8">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString>
          <con:query>todo</con:query>
          
          
          <con:properties/>
        </con:config>
      </con:testStep>
      <con:testStep type="jdbc" name="Modifications" disabled="true" id="3c2bdd18-3eb7-4eb6-b576-9df5bd22cb2f">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString>
          <con:query>todo</con:query>
          
          
          <con:assertion type="XPath Match" name="Remboursement"><con:configuration><path>//ResultSet/Row/POLITIQUEMIGRATION.REMBOURSEMENT</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/>
        </con:config>
      </con:testStep>
      <con:testStep type="jdbc" name="Contrat Migre" id="56f1e7a1-704c-4bc4-8daf-a65c5681ed23">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString>
          <con:query>select *
from contrat
where reference = '${CreerContrat#RefContrat}'</con:query>
          
          <con:assertion type="XPath Match" name="PolitiqueValidationId différent de la précédente"><con:configuration><path>(//ResultSet/Row/CONTRAT.POLITIQUEVALIDATIONID/text())  != ${InfosAncienContrat#PolitiqueValidationId}</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="Même référence"><con:configuration><path>//ResultSet/Row/CONTRAT.REFERENCE/text()</path><content>${CreerContrat#RefContrat}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="Même idClient"><con:configuration><path>//ResultSet/Row/CONTRAT.IDCLIENT/text()</path><content>${InfosAncienContrat#IdClient}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="Même titre"><con:configuration><path>//ResultSet/Row/CONTRAT.TITRE/text()</path><content>${InfosAncienContrat#Titre}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/>
        </con:config>
      </con:testStep>
      <con:testStep type="jdbc" name="EC Migre" id="e5d33543-4bbe-405f-b0c1-8d5f00e03155">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString>
          <con:query>select 
id, configuration, 
dateDebutFacturation, dateDerniereFacture,
dateFinContrat, datePreparation,
date_format(c.datevalidation, '%Y-%m-%d') as "dateValidation",
duree, engagement,
idAdrFacturation, idAdrLivraison,
modeFacturation, modePaiement,
montant, numEC, numeroCommande,
periodicite, reference,
referenceModePaiement,referenceProduit,
remboursable, titre,
typeContrat, typeProduit, typeResiliation, typeTVA, 
contratParent, dependDe,
politiqueResiliationId, 
reductionId, reductionGlobalId
from elementcontractuel c 
where c.reference LIKE "${CreerContrat#RefContrat}%"</con:query>
          <con:assertion type="XQuery Match" name="Date Validation = Now()">
            <con:configuration><path>&lt;Results> 
{ 
for $x in //Row 
return &lt;result>{$x/DATEVALIDATION/text()}&lt;/result> 
}
&lt;/Results></path><content><![CDATA[<Results>
  <result>${=new java.text.SimpleDateFormat("yyyy-MM-dd").format(new Date())}</result>
  <result>${=new java.text.SimpleDateFormat("yyyy-MM-dd").format(new Date())}</result>
</Results>]]></content><allowWildcards>false</allowWildcards></con:configuration>
          </con:assertion>
          <con:assertion type="XPath Match" name="2 éléments survivants"><con:configuration><path>count(//ResultSet/Row)</path><content>2</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XQuery Match" name="Même AdrLivraison"><con:configuration><path>&lt;Results> 
{ 
for $x in //Row 
return &lt;result>{$x/ELEMENTCONTRACTUEL.IDADRLIVRAISON/text()}&lt;/result> 
}
&lt;/Results></path><content><![CDATA[<Results>
  <result>
${InfosAncienContrat#idAdrLivraison}</result>
  <result>${InfosAncienContrat#idAdrLivraison}</result>
</Results>]]></content><allowWildcards>false</allowWildcards></con:configuration></con:assertion><con:assertion type="XQuery Match" name="Même AdrFacturation"><con:configuration><path>&lt;Results> 
{ 
for $x in //Row 
return &lt;result>{$x/ELEMENTCONTRACTUEL.IDADRFACTURATION/text()}&lt;/result> 
}
&lt;/Results></path><content><![CDATA[<Results>
  <result>${InfosAncienContrat#IdAdrFacturation}</result>
  <result>${InfosAncienContrat#IdAdrFacturation}</result>
</Results>]]></content><allowWildcards>false</allowWildcards></con:configuration></con:assertion><con:assertion type="XPath Match" name="Jet -> Jet2"><con:configuration><path>//ResultSet/Row[contains(ELEMENTCONTRACTUEL.NUMEC, '1')]/ELEMENTCONTRACTUEL.REFERENCEPRODUIT/text()</path><content>jet2</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XQuery Match" name="Nouveau numéro de commande"><con:configuration><path>&lt;Results>
{
 for $x in //Row
 return &lt;r>{$x/ELEMENTCONTRACTUEL.NUMEROCOMMANDE/text()}&lt;/r>
}
&lt;/Results></path><content><![CDATA[<Results>
  <r>Order_migration_2</r>
  <r>Order_migration_2</r>
</Results>]]></content><allowWildcards>false</allowWildcards></con:configuration></con:assertion><con:properties/>
        </con:config>
      </con:testStep>
      <con:testStep type="delay" name="Wait for beginning Retour" id="1c28ede0-e56f-4ef3-a097-2f98dca2057d">
        <con:settings/>
        <con:config>
          <delay>500</delay>
        </con:config>
      </con:testStep>
      <con:testStep type="jdbc" name="Bon de Migration - Initié" id="0246252d-216b-4ded-9d51-40cac5c467e7">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString>
          <con:query>select id, reference,
causenonlivraison,
date_format(dateinitiation, '%Y-%m-%d') as "dateInitiation",
datedebutPreparation,
dateretourtermine,
idClient, typebonpreparation
from bonpreparation 
where reference LIKE "${CreerContrat#RefContrat}%"
  and typeBonPreparation = 'MIGRATION'</con:query>
          
          
          
          
          <con:assertion type="XPath Match" name="Id Client"><con:configuration><path>//ResultSet/Row/BONPREPARATION.IDCLIENT/text()</path><content>00003870</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="Reference"><con:configuration><path>//ResultSet/Row/BONPREPARATION.REFERENCE</path><content>${CreerContrat#RefContrat}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="Date Initiation"><con:configuration><path>//ResultSet/Row/DATEINITIATION/text()</path><content>${=new java.text.SimpleDateFormat("yyyy-MM-dd").format(new Date())}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/>
        </con:config>
      </con:testStep>
      <con:testStep type="jdbc" name="EL de migration - Initié" id="ab46a2ca-1c31-49a8-9567-b79e5a4e311e">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString>
          <con:query>select * from elementlivraison
where bonPreparationParent = 
(select id
from bonpreparation 
where reference LIKE "${CreerContrat#RefContrat}%"
  and typeBonPreparation = 'MIGRATION')</con:query>
          <con:assertion type="XQuery Match" name="TypeEL=Retour ou Migration">
            <con:configuration><path>&lt;Results> 
{ 
 for $x in //Row 
order by $x/ELEMENTLIVRAISON.NUMEC
 return &lt;result>{$x/ELEMENTLIVRAISON.TYPEBONPREPARATION/text()}&lt;/result> 
}
&lt;/Results></path><content><![CDATA[<Results>
  <result>MIGRATION</result>
  <result>RETOUR</result>
</Results>]]></content><allowWildcards>false</allowWildcards></con:configuration>
          </con:assertion>
          <con:assertion type="XQuery Match" name="Acteurs=NetRetour ou Packager">
            <con:configuration><path>&lt;Results> 
{ 
 for $x in //Row 
order by $x/ELEMENTLIVRAISON.NUMEC
 return &lt;result>{$x/ELEMENTLIVRAISON.ACTEUR/text()}&lt;/result> 
}
&lt;/Results></path><content><![CDATA[<Results>
  <result>PACKAGER</result>
  <result>NETRETOUR</result>
</Results>]]></content><allowWildcards>false</allowWildcards></con:configuration>
          </con:assertion>
          <con:assertion type="XPath Match" name="1 seul code Produit" disabled="true">
            <con:configuration><path>count(//Row[ELEMENTLIVRAISON.TYPEELEMENT="SERVICE"]/ELEMENTLIVRAISON.CODEPRODUIT/text())</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
          </con:assertion>
          <con:assertion type="XQuery Match" name="1 seul code Colis">
            <con:configuration>
              <path>count(//Row[ELEMENTLIVRAISON.TYPEELEMENT="BIEN"]/ELEMENTLIVRAISON.CODECOLIS/text())</path>
              <content>&lt;xml-fragment>1&lt;/xml-fragment></content>
              <allowWildcards>false</allowWildcards>
            </con:configuration>
          </con:assertion>
          <con:assertion type="XPath Match" name="Aucun EL de livraison"><con:configuration><path>count(//Row[ELEMENTLIVRAISON.TYPEBONPREPARATION = 'LIVRAISON'])</path><content>0</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/>
        </con:config>
      </con:testStep><con:testStep type="delay" name="Wait for end Migration" id="7cb82991-db86-4fb1-8e42-0d6765d1622c">
        <con:settings/>
        <con:config><delay>500</delay></con:config>
      </con:testStep><con:testStep type="jdbc" name="Bon de Retour - Temoin" id="3136ae0a-1ab6-4379-bfa3-f812f0321ca7">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString>
          <con:query>select id, reference,
causenonlivraison,
date_format(dateinitiation, '%Y-%m-%d') as "dateInitiation",
datedebutPreparation,
datelivraisontermine,
dateretourtermine,
idClient, typebonpreparation
from bonpreparation 
where reference LIKE "${CreerContrat#RefContrat}%"
  and typeBonPreparation = 'MIGRATION'</con:query>
          
          
          
          <con:assertion type="XPath Match" name="Id Client"><con:configuration><path>//ResultSet/Row/BONPREPARATION.IDCLIENT/text()</path><content>00003870</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="Date Initiation"><con:configuration><path>//ResultSet/Row/DATEINITIATION/text()</path><content>${=new java.text.SimpleDateFormat("yyyy-MM-dd").format(new Date())}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/>
        </con:config>
      </con:testStep><con:testStep type="goto" name="Go End Migration" id="3a2f87a4-98ea-4bbc-ac90-c96275890f45">
        <con:settings/>
        <con:config xsi:type="con:GotoStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:condition>
            <con:name>Wait Facturation</con:name>
            <con:type>XPATH</con:type>
            <con:expression>(not(//Results/ResultSet/Row/BONPREPARATION.DATELIVRAISONTERMINE/text())
or
not(//Results/ResultSet/Row/BONPREPARATION.DATERETOURTERMINE/text())
)
and
not(//Results/ResultSet/Row/BONPREPARATION.CAUSENONLIVRAISON/text())</con:expression>
            <con:targetStep>Wait for end Migration</con:targetStep>
          </con:condition>
        </con:config>
      </con:testStep><con:testStep type="jdbc" name="EL de retour - Retourné" id="a5370f93-8439-477b-914d-9584397c90b9">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString>
          <con:query>select * from elementlivraison
where bonPreparationParent = 
(select id
from bonpreparation 
where reference LIKE "${CreerContrat#RefContrat}%"
  and typeBonPreparation = 'MIGRATION')</con:query>
          
          
          
          <con:assertion type="XQuery Match" name="Elmts de Migration Livrés"><con:configuration><path>&lt;Results> 
{ 
 for $x in //Row[contains(ELEMENTLIVRAISON.TYPEBONPREPARATION/text(), 'MIGRATION')]
 order by $x/ELEMENTLIVRAISON.NUMEC
 return &lt;result>{exists($x/ELEMENTLIVRAISON.DATELIVRAISONTERMINE/text())}&lt;/result> 
}
&lt;/Results></path><content><![CDATA[<Results>
  <result>true</result>
  <result>true</result>
</Results>]]></content><allowWildcards>false</allowWildcards></con:configuration></con:assertion><con:assertion type="XQuery Match" name="Elmts de Retour Retournés"><con:configuration><path>&lt;Results> 
{ 
 for $x in //Row[contains(ELEMENTLIVRAISON.TYPEBONPREPARATION/text(), 'RETOUR')]
 order by $x/ELEMENTLIVRAISON.NUMEC
 return &lt;result>{exists($x/ELEMENTLIVRAISON.DATERETOURTERMINE/text())}&lt;/result> 
}
&lt;/Results></path><content>&lt;Results>
  &lt;result>true&lt;/result>
&lt;/Results></content><allowWildcards>false</allowWildcards></con:configuration></con:assertion><con:properties/>
        </con:config>
      </con:testStep><con:testStep type="properties" name="InfosFacture" id="107aa9ce-959c-40ec-a334-84f426548344">
        <con:settings/>
        <con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:properties>
            <con:property>
              <con:name>DateLivraison</con:name>
              <con:value xsi:nil="true"/>
            </con:property>
          </con:properties>
        </con:config>
      </con:testStep><con:testStep type="transfer" name="Transfert Date Retour" id="7ba56c18-47e1-4043-aa61-8d1fcb217f40">
        <con:settings/>
        <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false">
            <con:name>DateLivraison</con:name>
            <con:sourceType>ResponseAsXml</con:sourceType>
            <con:sourceStep>EL de retour - Retourné</con:sourceStep>
            <con:sourcePath>//Results/ResultSet/Row/BONPREPARATION.DATETERMINE/text()</con:sourcePath>
            <con:targetType>DateLivraison</con:targetType>
            <con:targetStep>InfosFacture</con:targetStep>
          </con:transfers>
        </con:config>
      </con:testStep><con:testStep type="delay" name="Wait for end Facturation" id="b4b518c9-384d-4d8c-82bc-385d157eb197">
        <con:settings/>
        <con:config>
          <delay>500</delay>
        </con:config>
      </con:testStep><con:testStep type="jdbc" name="Facturation-exists" id="41dc9147-2e31-42f1-813f-c9062a5c4883">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.100.105.41:3306/test_saphir?user=test&amp;password=test</con:connectionString>
          <con:query>select * from movement where accountId = '00003870' and billinggroup ="${#TestCase#RefCommande}" ;</con:query>
          <con:properties/>
        </con:config>
      </con:testStep><con:testStep type="goto" name="Go Facturation" id="98a6056d-9d63-41e5-a295-d65e17af5d6f">
        <con:settings/>
        <con:config xsi:type="con:GotoStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:condition>
            <con:name>Wait Facturation</con:name>
            <con:type>XPATH</con:type>
            <con:expression>not(//Results/ResultSet/Row/MOVEMENT.ID/text())</con:expression>
            <con:targetStep>Wait for end Facturation</con:targetStep>
          </con:condition>
        </con:config>
      </con:testStep><con:testStep type="jdbc" name="Facturation-valid" id="f67c0aca-0d38-4ef2-9019-388e80ed40a7">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.100.105.41:3306/test_saphir?user=test&amp;password=test</con:connectionString>
          <con:query>select * from movement 
where accountId = '00003870'
  and minute(timediff(now(), create_date)) &lt; 5</con:query>
          
          
          
          
          
          <con:assertion type="XPath Match" name="Au moins 1 mouvement"><con:configuration><path>count(//Row) > 0</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/>
        </con:config>
      </con:testStep><con:properties/>
    </con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Migrer Jet - produit d'une autre gamme" searchProperties="true" id="2c61157e-5478-4e14-a3bd-3103c89bbed3" disabled="true">
      <con:settings/>
      
      <con:testStep type="calltestcase" name="CreerContrat" id="a0277943-8603-4f60-93a9-495f111f6673"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>3d1406c1-6558-4539-a011-8394a232a260</con:targetTestCase><con:properties><con:property><con:name>RefCommande</con:name><con:value>3fbeb6f8-276f-43b1-9611-55e6565ca3d2</con:value></con:property><con:property><con:name>RefContrat</con:name><con:value>8e684693</con:value></con:property></con:properties><con:returnProperties><con:entry>RefCommande</con:entry><con:entry>RefContrat</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="jdbc" name="Contrat Ancien" id="0f5f26f6-5ade-4118-b48b-a7cf67741192"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString><con:query>select *
from contrat
where reference = '${CreerContrat#RefContrat}'</con:query><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="EC Anciens" id="22fd77a8-d077-4dc1-a65e-8eaf06364163"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString><con:query>select numec, referenceProduit,
idadrfacturation, idadrlivraison, 
duree, engagement
from elementcontractuel
where reference like '${CreerContrat#RefContrat}%'
order by numec</con:query><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Move Anciennes Infos Contrat" id="f8c9a746-eb84-467c-8ff2-7c3ed58f34b9"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>Move PolitiqueValidationId</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Contrat Ancien</con:sourceStep><con:sourcePath>//ResultSet/Row/CONTRAT.POLITIQUEVALIDATIONID/text()</con:sourcePath><con:targetType>PolitiqueValidationId</con:targetType><con:targetStep>InfosAncienContrat</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" transferToAll="false" entitize="false" ignoreEmpty="false" useXQuery="false" transferChildNodes="false"><con:name>IdClient</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Contrat Ancien</con:sourceStep><con:sourcePath>//ResultSet/Row/CONTRAT.IDCLIENT/text()</con:sourcePath><con:targetType>IdClient</con:targetType><con:targetStep>InfosAncienContrat</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>Titre</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Contrat Ancien</con:sourceStep><con:sourcePath>//ResultSet/Row/CONTRAT.TITRE/text()</con:sourcePath><con:targetType>Titre</con:targetType><con:targetStep>InfosAncienContrat</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>idAdrFacturation</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>EC Anciens</con:sourceStep><con:sourcePath>//ResultSet/Row[1]/ELEMENTCONTRACTUEL.IDADRFACTURATION/text()</con:sourcePath><con:targetType>IdAdrFacturation</con:targetType><con:targetStep>InfosAncienContrat</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>idAdrLivraison</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>EC Anciens</con:sourceStep><con:sourcePath>//ResultSet/Row[1]/ELEMENTCONTRACTUEL.IDADRLIVRAISON/text()</con:sourcePath><con:targetType>IdAdrLivraison</con:targetType><con:targetStep>InfosAncienContrat</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" transferToAll="false" entitize="false"><con:name>Engagement Jet</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>EC Anciens</con:sourceStep><con:sourcePath>//ResultSet/Row[1]/ELEMENTCONTRACTUEL.ENGAGEMENT</con:sourcePath><con:targetType>Engagement</con:targetType><con:targetStep>InfosAncienContrat</con:targetStep></con:transfers></con:config></con:testStep><con:testStep type="properties" name="InfosAncienContrat" id="e8851519-fa3c-45eb-8608-8fe202fc45ca"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>PolitiqueValidationId</con:name><con:value>14</con:value></con:property><con:property><con:name>IdClient</con:name><con:value>00003870</con:value></con:property><con:property><con:name>Titre</con:name><con:value>Contrat Global: 8e684693</con:value></con:property><con:property><con:name>IdAdrFacturation</con:name><con:value>685</con:value></con:property><con:property><con:name>IdAdrLivraison</con:name><con:value>adrliv1</con:value></con:property><con:property><con:name>Engagement</con:name><con:value>24</con:value></con:property><con:property><con:name>Duree</con:name><con:value/></con:property></con:properties></con:config></con:testStep>
      <con:testStep type="restrequest" name="Migrer Contrat" id="d901c0f7-c91b-4fe5-86b6-69faf4b536f8">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/{refContrat}/migrer" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="Migrer Contrat" mediaType="application/json" postQueryString="false">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{
  "user": "test",
  "politiqueMigration": {
    "fraisMigration": "30",
    "fraisResiliation": true,
    "montantResiliation": "50",
    "remboursement": true,
    "montantRemboursement": "50",
    "fraisCreation": true,
    "penalite": true,
	"reductionAncienne": false
  },
  "produitsMigration": [
    {
      "numEC": 1,
      "referenceGammeSource": "jet",
      "referenceProduitSource": "jet",
      "referenceGammeDestination": "max",
      "referenceProduitDestination": "jet2",
      "label": "Abonnement Max 20Go",
      "numeroCommande": "Order_migration_3",
      "typeProduit": "SERVICE",
      "prix": {
        "periodicite": 1,
        "montant": "30",
        "typeTVA": "R",
        "frais": [
          {
            "montant": "30",
            "titre": "Frais d'ouverture de dossier",
            "typeFrais": "CREATION"
          }
        ],
        "modeFacturation": "PREMIER_MOIS"
      },
	  "referenceDePaiement": "R0000012",
	  "modePaiement": "SEPA"
    },
    {
      "numEC": 2,
      "numECParent": 1,
      "referenceGammeSource": "jet",
      "referenceProduitSource": "option.plus.50g",
      "referenceGammeDestination": "jet",
      "referenceProduitDestination": "option.plus.50g",
      "label": "Option+ 20Go",
      "numeroCommande": "Order_migration_3",
      "typeProduit": "SERVICE",
      "prix": {
        "periodicite": 1,
        "montant": "5",
        "typeTVA": "R",
        "modeFacturation": "PREMIER_MOIS"
      },
	  "referenceDePaiement": "R0000012",
	  "modePaiement": "SEPA"
    }
  ]
}</con:request>
            <con:assertion type="Valid HTTP Status Codes" name="Code Retour 200" id="20b95fed-f66f-4685-bce1-6e0a1d92ffad">
              <con:configuration>
                <codes>200</codes>
              </con:configuration>
            </con:assertion>
            <con:assertion type="GroovyScriptAssertion" name="Response must be empty" id="6ca1ddfa-7b0f-48d8-b5fa-1642229ad752">
              <con:configuration>
                <scriptText>assert messageExchange.hasResponse() == false</scriptText>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters>
              <entry key="refContrat" value="${CreerContrat#RefContrat}" xmlns="http://eviware.com/soapui/config"/>
            </con:parameters>
          </con:restRequest>
        </con:config>
      </con:testStep>
      <con:testStep type="jdbc" name="Politique Migration" id="7ce1db06-6192-4541-b142-17b1be354f7b">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString>
          <con:query>select *
from politiquemigration
where referenceContrat = '${CreerContrat#RefContrat}'
order by id desc
LIMIT 1</con:query>
          
          
          <con:assertion type="XPath Match" name="Date Action"><con:configuration><path>//ResultSet/Row/POLITIQUEMIGRATION.DATEACTION</path><content>${=new java.text.SimpleDateFormat("yyyy-MM-dd").format(new Date())}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="FraisCreation"><con:configuration><path>//ResultSet/Row/POLITIQUEMIGRATION.FRAISCREATION</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="FraisMigration"><con:configuration><path>//ResultSet/Row/POLITIQUEMIGRATION.FRAISMIGRATION</path><content>30</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="FraisResiliation"><con:configuration><path>//ResultSet/Row/POLITIQUEMIGRATION.FRAISRESILIATION</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="MontantFraisResiliation"><con:configuration><path>//ResultSet/Row/POLITIQUEMIGRATION.MONTANTRESILIATION</path><content>50</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="MontantRemboursement"><con:configuration><path>//ResultSet/Row/POLITIQUEMIGRATION.MONTANTREMBOURSEMENT</path><content>50</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="Pénalités"><con:configuration><path>//ResultSet/Row/POLITIQUEMIGRATION.PENALITE</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="Remboursement"><con:configuration><path>//ResultSet/Row/POLITIQUEMIGRATION.REMBOURSEMENT</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="Reduction Ancienne"><con:configuration><path>//ResultSet/Row/POLITIQUEMIGRATION.REDUCTIONANCIENNE</path><content>0</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/>
        </con:config>
      </con:testStep>
      <con:testStep type="jdbc" name="Avenant" disabled="true" id="eec707f3-2d4d-4589-9748-8af59e3388eb">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString>
          <con:query>todo</con:query>
          
          
          <con:properties/>
        </con:config>
      </con:testStep>
      <con:testStep type="jdbc" name="Modifications" disabled="true" id="7672b7c6-c012-472a-9a9e-4dc7ee9c2768">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString>
          <con:query>todo</con:query>
          
          
          <con:assertion type="XPath Match" name="Remboursement"><con:configuration><path>//ResultSet/Row/POLITIQUEMIGRATION.REMBOURSEMENT</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/>
        </con:config>
      </con:testStep>
      <con:testStep type="jdbc" name="Contrat Migre" id="922605ed-360c-463c-8187-c7e6a4ac661d">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString>
          <con:query>select *
from contrat
where reference = '${CreerContrat#RefContrat}'</con:query>
          
          <con:assertion type="XPath Match" name="PolitiqueValidationId différent de la précédente"><con:configuration><path>(//ResultSet/Row/CONTRAT.POLITIQUEVALIDATIONID/text())  != ${InfosAncienContrat#PolitiqueValidationId}</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="Même référence"><con:configuration><path>//ResultSet/Row/CONTRAT.REFERENCE/text()</path><content>${CreerContrat#RefContrat}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="Même idClient"><con:configuration><path>//ResultSet/Row/CONTRAT.IDCLIENT/text()</path><content>${InfosAncienContrat#IdClient}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="Même titre"><con:configuration><path>//ResultSet/Row/CONTRAT.TITRE/text()</path><content>${InfosAncienContrat#Titre}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/>
        </con:config>
      </con:testStep>
      <con:testStep type="jdbc" name="EC Migre" id="0e3efa0f-5298-41d1-854d-219811c324ab">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString>
          <con:query>select 
id, configuration, 
dateDebutFacturation, dateDerniereFacture,
dateFinContrat, datePreparation,
date_format(c.datevalidation, '%Y-%m-%d') as "dateValidation",
duree, engagement,
idAdrFacturation, idAdrLivraison,
modeFacturation, modePaiement,
montant, numEC, numeroCommande,
periodicite, reference,
referenceModePaiement,referenceProduit,
remboursable, titre,
typeContrat, typeProduit, typeResiliation, typeTVA, 
contratParent, dependDe,
politiqueResiliationId, 
reductionId, reductionGlobalId
from elementcontractuel c 
where c.reference LIKE "${CreerContrat#RefContrat}%"</con:query>
          <con:assertion type="XQuery Match" name="Date Validation = Now()">
            <con:configuration><path>&lt;Results> 
{ 
for $x in //Row 
return &lt;result>{$x/DATEVALIDATION/text()}&lt;/result> 
}
&lt;/Results></path><content><![CDATA[<Results>
  <result>${=new java.text.SimpleDateFormat("yyyy-MM-dd").format(new Date())}</result>
  <result>${=new java.text.SimpleDateFormat("yyyy-MM-dd").format(new Date())}</result>
</Results>]]></content><allowWildcards>false</allowWildcards></con:configuration>
          </con:assertion>
          <con:assertion type="XPath Match" name="2 éléments survivants"><con:configuration><path>count(//ResultSet/Row)</path><content>2</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XQuery Match" name="Même AdrLivraison"><con:configuration><path>&lt;Results> 
{ 
for $x in //Row 
return &lt;result>{$x/ELEMENTCONTRACTUEL.IDADRLIVRAISON/text()}&lt;/result> 
}
&lt;/Results></path><content><![CDATA[<Results>
  <result>
${InfosAncienContrat#idAdrLivraison}</result>
  <result>${InfosAncienContrat#idAdrLivraison}</result>
</Results>]]></content><allowWildcards>false</allowWildcards></con:configuration></con:assertion><con:assertion type="XQuery Match" name="Même AdrFacturation"><con:configuration><path>&lt;Results> 
{ 
for $x in //Row 
return &lt;result>{$x/ELEMENTCONTRACTUEL.IDADRFACTURATION/text()}&lt;/result> 
}
&lt;/Results></path><content><![CDATA[<Results>
  <result>${InfosAncienContrat#IdAdrFacturation}</result>
  <result>${InfosAncienContrat#IdAdrFacturation}</result>
</Results>]]></content><allowWildcards>false</allowWildcards></con:configuration></con:assertion><con:properties/>
        </con:config>
      </con:testStep>
      <con:testStep type="delay" name="Wait for beginning Retour" id="e22fc2cb-7a7a-46a4-bad9-05ab2fad8ebb">
        <con:settings/>
        <con:config>
          <delay>500</delay>
        </con:config>
      </con:testStep>
      <con:testStep type="jdbc" name="Bon de Migration - Initié" id="ef571566-bc8e-4d48-8918-8c3ed2bb0637">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString>
          <con:query>select id, reference,
causenonlivraison,
date_format(dateinitiation, '%Y-%m-%d') as "dateInitiation",
datedebutPreparation,
dateretourtermine,
idClient, typebonpreparation
from bonpreparation 
where reference LIKE "${CreerContrat#RefContrat}%"
  and typeBonPreparation = 'MIGRATION'</con:query>
          
          
          
          
          <con:assertion type="XPath Match" name="Id Client"><con:configuration><path>//ResultSet/Row/BONPREPARATION.IDCLIENT/text()</path><content>00003870</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="Reference"><con:configuration><path>//ResultSet/Row/BONPREPARATION.REFERENCE</path><content>${CreerContrat#RefContrat}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="Date Initiation"><con:configuration><path>//ResultSet/Row/DATEINITIATION/text()</path><content>${=new java.text.SimpleDateFormat("yyyy-MM-dd").format(new Date())}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/>
        </con:config>
      </con:testStep>
      <con:testStep type="jdbc" name="EL de migration - Initié" id="0aee3526-d002-4d65-a256-88ed29970811">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString>
          <con:query>select * from elementlivraison
where bonPreparationParent = 
(select id
from bonpreparation 
where reference LIKE "${CreerContrat#RefContrat}%"
  and typeBonPreparation = 'MIGRATION')</con:query>
          <con:assertion type="XQuery Match" name="TypeEL=Retour ou Migration">
            <con:configuration><path>&lt;Results> 
{ 
 for $x in //Row 
order by $x/ELEMENTLIVRAISON.NUMEC
 return &lt;result>{$x/ELEMENTLIVRAISON.TYPEBONPREPARATION/text()}&lt;/result> 
}
&lt;/Results></path><content><![CDATA[<Results>
  <result>MIGRATION</result>
  <result>MIGRATION</result>
  <result>RETOUR</result>
</Results>]]></content><allowWildcards>false</allowWildcards></con:configuration>
          </con:assertion>
          <con:assertion type="XQuery Match" name="Acteurs=NetRetour ou Packager">
            <con:configuration><path>&lt;Results> 
{ 
 for $x in //Row 
order by $x/ELEMENTLIVRAISON.NUMEC
 return &lt;result>{$x/ELEMENTLIVRAISON.ACTEUR/text()}&lt;/result> 
}
&lt;/Results></path><content><![CDATA[<Results>
  <result>PACKAGER</result>
  <result>PACKAGER</result>
  <result>NETRETOUR</result>
</Results>]]></content><allowWildcards>false</allowWildcards></con:configuration>
          </con:assertion>
          <con:assertion type="XPath Match" name="1 seul code Produit" disabled="true">
            <con:configuration><path>count(//Row[ELEMENTLIVRAISON.TYPEELEMENT="SERVICE"]/ELEMENTLIVRAISON.CODEPRODUIT/text())</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
          </con:assertion>
          <con:assertion type="XQuery Match" name="1 seul code Colis">
            <con:configuration>
              <path>count(//Row[ELEMENTLIVRAISON.TYPEELEMENT="BIEN"]/ELEMENTLIVRAISON.CODECOLIS/text())</path>
              <content>&lt;xml-fragment>1&lt;/xml-fragment></content>
              <allowWildcards>false</allowWildcards>
            </con:configuration>
          </con:assertion>
          <con:assertion type="XPath Match" name="Aucun EL de livraison"><con:configuration><path>count(//Row[ELEMENTLIVRAISON.TYPEBONPREPARATION = 'LIVRAISON'])</path><content>0</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/>
        </con:config>
      </con:testStep><con:testStep type="delay" name="Wait for end Migration" id="1bec9879-534e-4997-b439-bc6c119eb8e8">
        <con:settings/>
        <con:config><delay>500</delay></con:config>
      </con:testStep><con:testStep type="jdbc" name="Bon de Retour - Temoin" id="fc4087ae-8460-429f-b44d-94378551f534">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString>
          <con:query>select id, reference,
causenonlivraison,
date_format(dateinitiation, '%Y-%m-%d') as "dateInitiation",
datedebutPreparation,
datelivraisontermine,
dateretourtermine,
idClient, typebonpreparation
from bonpreparation 
where reference LIKE "${CreerContrat#RefContrat}%"
  and typeBonPreparation = 'MIGRATION'</con:query>
          
          
          
          <con:assertion type="XPath Match" name="Id Client"><con:configuration><path>//ResultSet/Row/BONPREPARATION.IDCLIENT/text()</path><content>00003870</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="Date Initiation"><con:configuration><path>//ResultSet/Row/DATEINITIATION/text()</path><content>${=new java.text.SimpleDateFormat("yyyy-MM-dd").format(new Date())}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/>
        </con:config>
      </con:testStep><con:testStep type="goto" name="Go End Migration" id="36b519ac-34a5-4608-89dc-696e88d12514">
        <con:settings/>
        <con:config xsi:type="con:GotoStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:condition>
            <con:name>Wait Facturation</con:name>
            <con:type>XPATH</con:type>
            <con:expression>(not(//Results/ResultSet/Row/BONPREPARATION.DATELIVRAISONTERMINE/text())
or
not(//Results/ResultSet/Row/BONPREPARATION.DATERETOURTERMINE/text())
)
and
not(//Results/ResultSet/Row/BONPREPARATION.CAUSENONLIVRAISON/text())</con:expression>
            <con:targetStep>Wait for end Migration</con:targetStep>
          </con:condition>
        </con:config>
      </con:testStep><con:testStep type="jdbc" name="EL de retour - Retourné" id="bb366193-40aa-48f3-847e-a71ae6631dcd">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString>
          <con:query>select * from elementlivraison
where bonPreparationParent = 
(select id
from bonpreparation 
where reference LIKE "${CreerContrat#RefContrat}%"
  and typeBonPreparation = 'MIGRATION')</con:query>
          
          
          
          <con:assertion type="XQuery Match" name="Elmts de Migration Livrés"><con:configuration><path>&lt;Results> 
{ 
 for $x in //Row[contains(ELEMENTLIVRAISON.TYPEBONPREPARATION/text(), 'MIGRATION')]
 order by $x/ELEMENTLIVRAISON.NUMEC
 return &lt;result>{exists($x/ELEMENTLIVRAISON.DATELIVRAISONTERMINE/text())}&lt;/result> 
}
&lt;/Results></path><content><![CDATA[<Results>
  <result>true</result>
  <result>true</result>
</Results>]]></content><allowWildcards>false</allowWildcards></con:configuration></con:assertion><con:assertion type="XQuery Match" name="Elmts de Retour Retournés"><con:configuration><path>&lt;Results> 
{ 
 for $x in //Row[contains(ELEMENTLIVRAISON.TYPEBONPREPARATION/text(), 'RETOUR')]
 order by $x/ELEMENTLIVRAISON.NUMEC
 return &lt;result>{exists($x/ELEMENTLIVRAISON.DATERETOURTERMINE/text())}&lt;/result> 
}
&lt;/Results></path><content>&lt;Results>
  &lt;result>true&lt;/result>
&lt;/Results></content><allowWildcards>false</allowWildcards></con:configuration></con:assertion><con:properties/>
        </con:config>
      </con:testStep><con:testStep type="properties" name="InfosFacture" id="edfa0eee-c5df-4a98-8005-286b1ebffa1f">
        <con:settings/>
        <con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:properties>
            <con:property>
              <con:name>DateLivraison</con:name>
              <con:value xsi:nil="true"/>
            </con:property>
          </con:properties>
        </con:config>
      </con:testStep><con:testStep type="transfer" name="Transfert Date Retour" id="7bee6c54-c6d2-4af9-a062-eccc1c5ab698">
        <con:settings/>
        <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false">
            <con:name>DateLivraison</con:name>
            <con:sourceType>ResponseAsXml</con:sourceType>
            <con:sourceStep>EL de retour - Retourné</con:sourceStep>
            <con:sourcePath>//Results/ResultSet/Row/BONPREPARATION.DATETERMINE/text()</con:sourcePath>
            <con:targetType>DateLivraison</con:targetType>
            <con:targetStep>InfosFacture</con:targetStep>
          </con:transfers>
        </con:config>
      </con:testStep><con:testStep type="delay" name="Wait for end Facturation" id="4497af2c-cfb9-48cb-a4a3-6c9e878efc2c">
        <con:settings/>
        <con:config>
          <delay>500</delay>
        </con:config>
      </con:testStep><con:testStep type="jdbc" name="Facturation-exists" id="7c973cc6-a9e7-4dbd-a567-bb9698480bec">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.100.105.41:3306/test_saphir?user=test&amp;password=test</con:connectionString>
          <con:query>select * from movement where accountId = '00003870' and billinggroup ="${#TestCase#RefCommande}" ;</con:query>
          <con:properties/>
        </con:config>
      </con:testStep><con:testStep type="goto" name="Go Facturation" id="882603ad-ae2d-4b13-a76a-65341d44e936">
        <con:settings/>
        <con:config xsi:type="con:GotoStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:condition>
            <con:name>Wait Facturation</con:name>
            <con:type>XPATH</con:type>
            <con:expression>not(//Results/ResultSet/Row/MOVEMENT.ID/text())</con:expression>
            <con:targetStep>Wait for end Facturation</con:targetStep>
          </con:condition>
        </con:config>
      </con:testStep><con:testStep type="jdbc" name="Facturation-valid" id="031c6cc8-1610-4314-ac1c-398f468c18dc">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.100.105.41:3306/test_saphir?user=test&amp;password=test</con:connectionString>
          <con:query>select * from movement 
where accountId = '00003870'
  and minute(timediff(now(), create_date)) &lt; 5</con:query>
          
          
          
          
          
          <con:assertion type="XPath Match" name="Au moins 1 mouvement"><con:configuration><path>count(//Row) > 0</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/>
        </con:config>
      </con:testStep><con:properties/>
    </con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TODO - Cession" searchProperties="true" disabled="true" id="7dd6b4dd-9438-4789-b432-c42ce8d33533">
      <con:settings/>
      
      <con:testStep type="calltestcase" name="CreerContrat" id="575bc276-2ba8-4c77-8e8d-29048757b95f"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>3d1406c1-6558-4539-a011-8394a232a260</con:targetTestCase><con:properties><con:property><con:name>RefCommande</con:name><con:value>3fbeb6f8-276f-43b1-9611-55e6565ca3d2</con:value></con:property><con:property><con:name>RefContrat</con:name><con:value>8e684693</con:value></con:property></con:properties><con:returnProperties><con:entry>RefCommande</con:entry><con:entry>RefContrat</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="jdbc" name="Contrat Ancien" id="c204b91c-ecd1-4e91-9f73-f0327da24a7e"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString><con:query>select *
from contrat
where reference = '${CreerContrat#RefContrat}'</con:query><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="EC Anciens" id="036d55c6-bc7f-4589-83c9-814abea75e9a"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString><con:query>select numec, referenceProduit,
idadrfacturation, idadrlivraison, 
duree, engagement
from elementcontractuel
where reference like '${CreerContrat#RefContrat}%'
order by numec</con:query><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Move Anciennes Infos Contrat" id="71297807-ef7c-4474-8a6f-e39d0256dea0"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>Move PolitiqueValidationId</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Contrat Ancien</con:sourceStep><con:sourcePath>//ResultSet/Row/CONTRAT.POLITIQUEVALIDATIONID/text()</con:sourcePath><con:targetType>PolitiqueValidationId</con:targetType><con:targetStep>InfosAncienContrat</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" transferToAll="false" entitize="false" ignoreEmpty="false" useXQuery="false" transferChildNodes="false"><con:name>IdClient</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Contrat Ancien</con:sourceStep><con:sourcePath>//ResultSet/Row/CONTRAT.IDCLIENT/text()</con:sourcePath><con:targetType>IdClient</con:targetType><con:targetStep>InfosAncienContrat</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>Titre</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Contrat Ancien</con:sourceStep><con:sourcePath>//ResultSet/Row/CONTRAT.TITRE/text()</con:sourcePath><con:targetType>Titre</con:targetType><con:targetStep>InfosAncienContrat</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>idAdrFacturation</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>EC Anciens</con:sourceStep><con:sourcePath>//ResultSet/Row[1]/ELEMENTCONTRACTUEL.IDADRFACTURATION/text()</con:sourcePath><con:targetType>IdAdrFacturation</con:targetType><con:targetStep>InfosAncienContrat</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>idAdrLivraison</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>EC Anciens</con:sourceStep><con:sourcePath>//ResultSet/Row[1]/ELEMENTCONTRACTUEL.IDADRLIVRAISON/text()</con:sourcePath><con:targetType>IdAdrLivraison</con:targetType><con:targetStep>InfosAncienContrat</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" transferToAll="false" entitize="false"><con:name>Engagement Jet</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>EC Anciens</con:sourceStep><con:sourcePath>//ResultSet/Row[1]/ELEMENTCONTRACTUEL.ENGAGEMENT</con:sourcePath><con:targetType>Engagement</con:targetType><con:targetStep>InfosAncienContrat</con:targetStep></con:transfers></con:config></con:testStep><con:testStep type="properties" name="InfosAncienContrat" id="7c425035-856a-43e2-9e34-49e4f3bb32be"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>PolitiqueValidationId</con:name><con:value>14</con:value></con:property><con:property><con:name>IdClient</con:name><con:value>00003870</con:value></con:property><con:property><con:name>Titre</con:name><con:value>Contrat Global: 8e684693</con:value></con:property><con:property><con:name>IdAdrFacturation</con:name><con:value>685</con:value></con:property><con:property><con:name>IdAdrLivraison</con:name><con:value>adrliv1</con:value></con:property><con:property><con:name>Engagement</con:name><con:value>24</con:value></con:property><con:property><con:name>Duree</con:name><con:value/></con:property></con:properties></con:config></con:testStep>
      <con:testStep type="restrequest" name="Migrer Contrat" id="52c5aa55-d8e4-44c7-b58b-06f2c75ce512">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/{refContrat}/migrer" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="Migrer Contrat" mediaType="application/json" postQueryString="false">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{
  "user": "test",
  "politiqueMigration": {
    "fraisMigration": "30",
    "fraisResiliation": true,
    "montantResiliation": "50",
    "remboursement": true,
    "montantRemboursement": "50",
    "fraisCreation": true,
    "penalite": true,
	"reductionAncienne": false
  },
  "produitsMigration": [
    {
      "numEC": 1,
      "referenceGammeSource": "jet",
      "referenceProduitSource": "jet",
      "referenceGammeDestination": "jet",
      "referenceProduitDestination": "jet",
      "label": "Abonnement Jet 10Go",
      "numeroCommande": "Order_migration_1",
      "typeProduit": "SERVICE",
      "prix": {
        "periodicite": 1,
        "montant": "30",
        "typeTVA": "R",
        "frais": [
          {
            "montant": "30",
            "titre": "Frais d'ouverture de dossier",
            "typeFrais": "CREATION"
          }
        ],
        "modeFacturation": "PREMIER_MOIS"
      },
	  "referenceDePaiement": "R0000012",
	  "modePaiement": "SEPA"
    },
    {
      "numEC": 2,
      "numECParent": 1,
      "referenceGammeSource": "jet",
      "referenceProduitSource": "option.plus.50g",
      "referenceGammeDestination": "jet",
      "referenceProduitDestination": "option.plus.20g",
      "label": "Option+ 20Go",
      "numeroCommande": "Order_migration_1",
      "typeProduit": "SERVICE",
      "prix": {
        "periodicite": 1,
        "montant": "5",
        "typeTVA": "R",
        "modeFacturation": "PREMIER_MOIS"
      },
	  "referenceDePaiement": "R0000012",
	  "modePaiement": "SEPA"
    }
  ]
}</con:request>
            <con:assertion type="Valid HTTP Status Codes" name="Code Retour 200" id="20b95fed-f66f-4685-bce1-6e0a1d92ffad">
              <con:configuration>
                <codes>200</codes>
              </con:configuration>
            </con:assertion>
            <con:assertion type="GroovyScriptAssertion" name="Response must be empty" id="6ca1ddfa-7b0f-48d8-b5fa-1642229ad752">
              <con:configuration>
                <scriptText>assert messageExchange.hasResponse() == false</scriptText>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters>
              <entry key="refContrat" value="${CreerContrat#RefContrat}" xmlns="http://eviware.com/soapui/config"/>
            </con:parameters>
          </con:restRequest>
        </con:config>
      </con:testStep>
      <con:testStep type="jdbc" name="Politique Migration" id="01c070a6-35b9-4e2e-b719-f706c0b45239">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString>
          <con:query>select *
from politiquemigration
where referenceContrat = '${CreerContrat#RefContrat}'
order by id desc
LIMIT 1</con:query>
          
          
          <con:assertion type="XPath Match" name="Date Action"><con:configuration><path>//ResultSet/Row/POLITIQUEMIGRATION.DATEACTION</path><content>${=new java.text.SimpleDateFormat("yyyy-MM-dd").format(new Date())}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="FraisCreation"><con:configuration><path>//ResultSet/Row/POLITIQUEMIGRATION.FRAISCREATION</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="FraisMigration"><con:configuration><path>//ResultSet/Row/POLITIQUEMIGRATION.FRAISMIGRATION</path><content>30</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="FraisResiliation"><con:configuration><path>//ResultSet/Row/POLITIQUEMIGRATION.FRAISRESILIATION</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="MontantFraisResiliation"><con:configuration><path>//ResultSet/Row/POLITIQUEMIGRATION.MONTANTRESILIATION</path><content>50</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="MontantRemboursement"><con:configuration><path>//ResultSet/Row/POLITIQUEMIGRATION.MONTANTREMBOURSEMENT</path><content>50</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="Pénalités"><con:configuration><path>//ResultSet/Row/POLITIQUEMIGRATION.PENALITE</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="Remboursement"><con:configuration><path>//ResultSet/Row/POLITIQUEMIGRATION.REMBOURSEMENT</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="Reduction Ancienne"><con:configuration><path>//ResultSet/Row/POLITIQUEMIGRATION.REDUCTIONANCIENNE</path><content>0</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/>
        </con:config>
      </con:testStep>
      <con:testStep type="jdbc" name="Avenant" disabled="true" id="3d8f947e-aaf4-4dd6-8adb-0f466227392b">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString>
          <con:query>todo</con:query>
          
          
          <con:properties/>
        </con:config>
      </con:testStep>
      <con:testStep type="jdbc" name="Modifications" disabled="true" id="292b2769-201d-4942-ab1f-090fdf14d6d1">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString>
          <con:query>todo</con:query>
          
          
          <con:assertion type="XPath Match" name="Remboursement"><con:configuration><path>//ResultSet/Row/POLITIQUEMIGRATION.REMBOURSEMENT</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/>
        </con:config>
      </con:testStep>
      <con:testStep type="jdbc" name="Contrat Migre" id="87b37d71-e96b-4143-a460-8e88966b7abb">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString>
          <con:query>select *
from contrat
where reference = '${CreerContrat#RefContrat}'</con:query>
          
          <con:assertion type="XPath Match" name="PolitiqueValidationId différent de la précédente"><con:configuration><path>(//ResultSet/Row/CONTRAT.POLITIQUEVALIDATIONID/text())  != ${InfosAncienContrat#PolitiqueValidationId}</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="Même référence"><con:configuration><path>//ResultSet/Row/CONTRAT.REFERENCE/text()</path><content>${CreerContrat#RefContrat}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="Même idClient"><con:configuration><path>//ResultSet/Row/CONTRAT.IDCLIENT/text()</path><content>${InfosAncienContrat#IdClient}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="Même titre"><con:configuration><path>//ResultSet/Row/CONTRAT.TITRE/text()</path><content>${InfosAncienContrat#Titre}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/>
        </con:config>
      </con:testStep>
      <con:testStep type="jdbc" name="EC Migre" id="bada058b-dd90-4da5-b810-effb882d718f">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString>
          <con:query>select 
id, configuration, 
dateDebutFacturation, dateDerniereFacture,
dateFinContrat, datePreparation,
date_format(c.datevalidation, '%Y-%m-%d') as "dateValidation",
duree, engagement,
idAdrFacturation, idAdrLivraison,
modeFacturation, modePaiement,
montant, numEC, numeroCommande,
periodicite, reference,
referenceModePaiement,referenceProduit,
remboursable, titre,
typeContrat, typeProduit, typeResiliation, typeTVA, 
contratParent, dependDe,
politiqueResiliationId, 
reductionId, reductionGlobalId
from elementcontractuel c 
where c.reference LIKE "${CreerContrat#RefContrat}%"</con:query>
          <con:assertion type="XQuery Match" name="Date Validation = Now()">
            <con:configuration><path>&lt;Results> 
{ 
for $x in //Row 
return &lt;result>{$x/DATEVALIDATION/text()}&lt;/result> 
}
&lt;/Results></path><content><![CDATA[<Results>
  <result>${=new java.text.SimpleDateFormat("yyyy-MM-dd").format(new Date())}</result>
  <result>${=new java.text.SimpleDateFormat("yyyy-MM-dd").format(new Date())}</result>
</Results>]]></content><allowWildcards>false</allowWildcards></con:configuration>
          </con:assertion>
          <con:assertion type="XPath Match" name="2 éléments survivants"><con:configuration><path>count(//ResultSet/Row)</path><content>2</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XQuery Match" name="Même AdrLivraison"><con:configuration><path>&lt;Results> 
{ 
for $x in //Row 
return &lt;result>{$x/ELEMENTCONTRACTUEL.IDADRLIVRAISON/text()}&lt;/result> 
}
&lt;/Results></path><content><![CDATA[<Results>
  <result>
${InfosAncienContrat#idAdrLivraison}</result>
  <result>${InfosAncienContrat#idAdrLivraison}</result>
</Results>]]></content><allowWildcards>false</allowWildcards></con:configuration></con:assertion><con:assertion type="XQuery Match" name="Même AdrFacturation"><con:configuration><path>&lt;Results> 
{ 
for $x in //Row 
return &lt;result>{$x/ELEMENTCONTRACTUEL.IDADRFACTURATION/text()}&lt;/result> 
}
&lt;/Results></path><content><![CDATA[<Results>
  <result>${InfosAncienContrat#IdAdrFacturation}</result>
  <result>${InfosAncienContrat#IdAdrFacturation}</result>
</Results>]]></content><allowWildcards>false</allowWildcards></con:configuration></con:assertion><con:properties/>
        </con:config>
      </con:testStep>
      <con:testStep type="delay" name="Wait for beginning Retour" id="8fe49793-dd55-40a8-a54e-4f98140c411d">
        <con:settings/>
        <con:config>
          <delay>500</delay>
        </con:config>
      </con:testStep>
      <con:testStep type="jdbc" name="Bon de Migration - Initié" id="7ad03f19-3677-499f-90a7-93de6b4d1861">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString>
          <con:query>select id, reference,
causenonlivraison,
date_format(dateinitiation, '%Y-%m-%d') as "dateInitiation",
datedebutPreparation,
dateretourtermine,
idClient, typebonpreparation
from bonpreparation 
where reference LIKE "${CreerContrat#RefContrat}%"
  and typeBonPreparation = 'MIGRATION'</con:query>
          
          
          
          
          <con:assertion type="XPath Match" name="Id Client"><con:configuration><path>//ResultSet/Row/BONPREPARATION.IDCLIENT/text()</path><content>00003870</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="Reference"><con:configuration><path>//ResultSet/Row/BONPREPARATION.REFERENCE</path><content>${CreerContrat#RefContrat}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="Date Initiation"><con:configuration><path>//ResultSet/Row/DATEINITIATION/text()</path><content>${=new java.text.SimpleDateFormat("yyyy-MM-dd").format(new Date())}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/>
        </con:config>
      </con:testStep>
      <con:testStep type="jdbc" name="EL de migration - Initié" id="5a2e46d7-f583-496a-8e38-a5b0814e8409">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString>
          <con:query>select * from elementlivraison
where bonPreparationParent = 
(select id
from bonpreparation 
where reference LIKE "${CreerContrat#RefContrat}%"
  and typeBonPreparation = 'MIGRATION')</con:query>
          <con:assertion type="XQuery Match" name="TypeEL=Retour ou Migration">
            <con:configuration><path>&lt;Results> 
{ 
 for $x in //Row 
order by $x/ELEMENTLIVRAISON.NUMEC
 return &lt;result>{$x/ELEMENTLIVRAISON.TYPEBONPREPARATION/text()}&lt;/result> 
}
&lt;/Results></path><content><![CDATA[<Results>
  <result>MIGRATION</result>
  <result>MIGRATION</result>
  <result>RETOUR</result>
</Results>]]></content><allowWildcards>false</allowWildcards></con:configuration>
          </con:assertion>
          <con:assertion type="XQuery Match" name="Acteurs=NetRetour ou Packager">
            <con:configuration><path>&lt;Results> 
{ 
 for $x in //Row 
order by $x/ELEMENTLIVRAISON.NUMEC
 return &lt;result>{$x/ELEMENTLIVRAISON.ACTEUR/text()}&lt;/result> 
}
&lt;/Results></path><content><![CDATA[<Results>
  <result>PACKAGER</result>
  <result>PACKAGER</result>
  <result>NETRETOUR</result>
</Results>]]></content><allowWildcards>false</allowWildcards></con:configuration>
          </con:assertion>
          <con:assertion type="XPath Match" name="1 seul code Produit" disabled="true">
            <con:configuration><path>count(//Row[ELEMENTLIVRAISON.TYPEELEMENT="SERVICE"]/ELEMENTLIVRAISON.CODEPRODUIT/text())</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
          </con:assertion>
          <con:assertion type="XQuery Match" name="1 seul code Colis">
            <con:configuration>
              <path>count(//Row[ELEMENTLIVRAISON.TYPEELEMENT="BIEN"]/ELEMENTLIVRAISON.CODECOLIS/text())</path>
              <content>&lt;xml-fragment>1&lt;/xml-fragment></content>
              <allowWildcards>false</allowWildcards>
            </con:configuration>
          </con:assertion>
          <con:assertion type="XPath Match" name="Aucun EL de livraison"><con:configuration><path>count(//Row[ELEMENTLIVRAISON.TYPEBONPREPARATION = 'LIVRAISON'])</path><content>0</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/>
        </con:config>
      </con:testStep><con:testStep type="delay" name="Wait for end Migration" id="3383dca4-0df6-4103-a2ea-17d7176b9882">
        <con:settings/>
        <con:config><delay>500</delay></con:config>
      </con:testStep><con:testStep type="jdbc" name="Bon de Retour - Temoin" id="322df376-db58-4fb9-9edc-62f52193ddf9">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString>
          <con:query>select id, reference,
causenonlivraison,
date_format(dateinitiation, '%Y-%m-%d') as "dateInitiation",
datedebutPreparation,
datelivraisontermine,
dateretourtermine,
idClient, typebonpreparation
from bonpreparation 
where reference LIKE "${CreerContrat#RefContrat}%"
  and typeBonPreparation = 'MIGRATION'</con:query>
          
          
          
          <con:assertion type="XPath Match" name="Id Client"><con:configuration><path>//ResultSet/Row/BONPREPARATION.IDCLIENT/text()</path><content>00003870</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="Date Initiation"><con:configuration><path>//ResultSet/Row/DATEINITIATION/text()</path><content>${=new java.text.SimpleDateFormat("yyyy-MM-dd").format(new Date())}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/>
        </con:config>
      </con:testStep><con:testStep type="goto" name="Go End Migration" id="4f764bd3-4a35-4407-a49c-1e3cf0ef979c">
        <con:settings/>
        <con:config xsi:type="con:GotoStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:condition>
            <con:name>Wait Facturation</con:name>
            <con:type>XPATH</con:type>
            <con:expression>(not(//Results/ResultSet/Row/BONPREPARATION.DATELIVRAISONTERMINE/text())
or
not(//Results/ResultSet/Row/BONPREPARATION.DATERETOURTERMINE/text())
)
and
not(//Results/ResultSet/Row/BONPREPARATION.CAUSENONLIVRAISON/text())</con:expression>
            <con:targetStep>Wait for end Migration</con:targetStep>
          </con:condition>
        </con:config>
      </con:testStep><con:testStep type="jdbc" name="EL de retour - Retourné" id="b7f2ccd7-0174-4289-b96c-fbd5fbcfe0f5">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString>
          <con:query>select * from elementlivraison
where bonPreparationParent = 
(select id
from bonpreparation 
where reference LIKE "${CreerContrat#RefContrat}%"
  and typeBonPreparation = 'MIGRATION')</con:query>
          
          
          
          <con:assertion type="XQuery Match" name="Elmts de Migration Livrés"><con:configuration><path>&lt;Results> 
{ 
 for $x in //Row[contains(ELEMENTLIVRAISON.TYPEBONPREPARATION/text(), 'MIGRATION')]
 order by $x/ELEMENTLIVRAISON.NUMEC
 return &lt;result>{exists($x/ELEMENTLIVRAISON.DATELIVRAISONTERMINE/text())}&lt;/result> 
}
&lt;/Results></path><content><![CDATA[<Results>
  <result>true</result>
  <result>true</result>
</Results>]]></content><allowWildcards>false</allowWildcards></con:configuration></con:assertion><con:assertion type="XQuery Match" name="Elmts de Retour Retournés"><con:configuration><path>&lt;Results> 
{ 
 for $x in //Row[contains(ELEMENTLIVRAISON.TYPEBONPREPARATION/text(), 'RETOUR')]
 order by $x/ELEMENTLIVRAISON.NUMEC
 return &lt;result>{exists($x/ELEMENTLIVRAISON.DATERETOURTERMINE/text())}&lt;/result> 
}
&lt;/Results></path><content>&lt;Results>
  &lt;result>true&lt;/result>
&lt;/Results></content><allowWildcards>false</allowWildcards></con:configuration></con:assertion><con:properties/>
        </con:config>
      </con:testStep><con:testStep type="properties" name="InfosFacture" id="0b2b8577-a80e-4287-89c7-178b11f1c396">
        <con:settings/>
        <con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:properties>
            <con:property>
              <con:name>DateLivraison</con:name>
              <con:value xsi:nil="true"/>
            </con:property>
          </con:properties>
        </con:config>
      </con:testStep><con:testStep type="transfer" name="Transfert Date Retour" id="9cafe6ef-843c-4996-9bc8-3a12d7ea1b59">
        <con:settings/>
        <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false">
            <con:name>DateLivraison</con:name>
            <con:sourceType>ResponseAsXml</con:sourceType>
            <con:sourceStep>EL de retour - Retourné</con:sourceStep>
            <con:sourcePath>//Results/ResultSet/Row/BONPREPARATION.DATETERMINE/text()</con:sourcePath>
            <con:targetType>DateLivraison</con:targetType>
            <con:targetStep>InfosFacture</con:targetStep>
          </con:transfers>
        </con:config>
      </con:testStep><con:testStep type="delay" name="Wait for end Facturation" id="b5ce2e37-9f6d-40ec-b8b9-1e1c8ec45ec8">
        <con:settings/>
        <con:config>
          <delay>500</delay>
        </con:config>
      </con:testStep><con:testStep type="jdbc" name="Facturation-exists" id="34490cea-ccf3-4b48-b197-cbd70b12f0bc">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.100.105.41:3306/test_saphir?user=test&amp;password=test</con:connectionString>
          <con:query>select * from movement where accountId = '00003870' and billinggroup ="${#TestCase#RefCommande}" ;</con:query>
          <con:properties/>
        </con:config>
      </con:testStep><con:testStep type="goto" name="Go Facturation" id="529cc4c7-e0fd-44c6-a1fb-de92ad26629d">
        <con:settings/>
        <con:config xsi:type="con:GotoStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:condition>
            <con:name>Wait Facturation</con:name>
            <con:type>XPATH</con:type>
            <con:expression>not(//Results/ResultSet/Row/MOVEMENT.ID/text())</con:expression>
            <con:targetStep>Wait for end Facturation</con:targetStep>
          </con:condition>
        </con:config>
      </con:testStep><con:testStep type="jdbc" name="Facturation-valid" id="6da9d58c-182d-4c7e-80c5-af18424192ba">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.100.105.41:3306/test_saphir?user=test&amp;password=test</con:connectionString>
          <con:query>select * from movement 
where accountId = '00003870'
  and minute(timediff(now(), create_date)) &lt; 5</con:query>
          
          
          
          
          
          <con:assertion type="XPath Match" name="Au moins 1 mouvement"><con:configuration><path>count(//Row) > 0</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/>
        </con:config>
      </con:testStep><con:properties/>
    </con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TODO - Renouvellement" searchProperties="true" disabled="true" id="aa529712-c9ad-42eb-9391-bc010ec83780">
      <con:settings/>
      
      <con:testStep type="calltestcase" name="CreerContrat" id="b64b5a81-45f6-4df6-b318-6af31ffd292d"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>3d1406c1-6558-4539-a011-8394a232a260</con:targetTestCase><con:properties><con:property><con:name>RefCommande</con:name><con:value>3fbeb6f8-276f-43b1-9611-55e6565ca3d2</con:value></con:property><con:property><con:name>RefContrat</con:name><con:value>8e684693</con:value></con:property></con:properties><con:returnProperties><con:entry>RefCommande</con:entry><con:entry>RefContrat</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="jdbc" name="Contrat Ancien" id="2062910c-ae4d-4aa2-a137-337a4f0ee950"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString><con:query>select *
from contrat
where reference = '${CreerContrat#RefContrat}'</con:query><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="EC Anciens" id="140a0eeb-9cc7-487b-bac2-91356fd422e2"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString><con:query>select numec, referenceProduit,
idadrfacturation, idadrlivraison, 
duree, engagement
from elementcontractuel
where reference like '${CreerContrat#RefContrat}%'
order by numec</con:query><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Move Anciennes Infos Contrat" id="a80cb933-75e9-44c9-a6e3-c59e837e813c"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>Move PolitiqueValidationId</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Contrat Ancien</con:sourceStep><con:sourcePath>//ResultSet/Row/CONTRAT.POLITIQUEVALIDATIONID/text()</con:sourcePath><con:targetType>PolitiqueValidationId</con:targetType><con:targetStep>InfosAncienContrat</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" transferToAll="false" entitize="false" ignoreEmpty="false" useXQuery="false" transferChildNodes="false"><con:name>IdClient</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Contrat Ancien</con:sourceStep><con:sourcePath>//ResultSet/Row/CONTRAT.IDCLIENT/text()</con:sourcePath><con:targetType>IdClient</con:targetType><con:targetStep>InfosAncienContrat</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>Titre</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Contrat Ancien</con:sourceStep><con:sourcePath>//ResultSet/Row/CONTRAT.TITRE/text()</con:sourcePath><con:targetType>Titre</con:targetType><con:targetStep>InfosAncienContrat</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>idAdrFacturation</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>EC Anciens</con:sourceStep><con:sourcePath>//ResultSet/Row[1]/ELEMENTCONTRACTUEL.IDADRFACTURATION/text()</con:sourcePath><con:targetType>IdAdrFacturation</con:targetType><con:targetStep>InfosAncienContrat</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>idAdrLivraison</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>EC Anciens</con:sourceStep><con:sourcePath>//ResultSet/Row[1]/ELEMENTCONTRACTUEL.IDADRLIVRAISON/text()</con:sourcePath><con:targetType>IdAdrLivraison</con:targetType><con:targetStep>InfosAncienContrat</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" transferToAll="false" entitize="false"><con:name>Engagement Jet</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>EC Anciens</con:sourceStep><con:sourcePath>//ResultSet/Row[1]/ELEMENTCONTRACTUEL.ENGAGEMENT</con:sourcePath><con:targetType>Engagement</con:targetType><con:targetStep>InfosAncienContrat</con:targetStep></con:transfers></con:config></con:testStep><con:testStep type="properties" name="InfosAncienContrat" id="dbf5b5b7-a824-4ff3-b7de-8532b932ada7"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>PolitiqueValidationId</con:name><con:value>14</con:value></con:property><con:property><con:name>IdClient</con:name><con:value>00003870</con:value></con:property><con:property><con:name>Titre</con:name><con:value>Contrat Global: 8e684693</con:value></con:property><con:property><con:name>IdAdrFacturation</con:name><con:value>685</con:value></con:property><con:property><con:name>IdAdrLivraison</con:name><con:value>adrliv1</con:value></con:property><con:property><con:name>Engagement</con:name><con:value>24</con:value></con:property><con:property><con:name>Duree</con:name><con:value/></con:property></con:properties></con:config></con:testStep>
      <con:testStep type="restrequest" name="Migrer Contrat" id="80ffda14-29c5-4d02-a896-6afc67c1dc95">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/{refContrat}/migrer" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="Migrer Contrat" mediaType="application/json" postQueryString="false">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{
  "user": "test",
  "politiqueMigration": {
    "fraisMigration": "30",
    "fraisResiliation": true,
    "montantResiliation": "50",
    "remboursement": true,
    "montantRemboursement": "50",
    "fraisCreation": true,
    "penalite": true,
	"reductionAncienne": false
  },
  "produitsMigration": [
    {
      "numEC": 1,
      "referenceGammeSource": "jet",
      "referenceProduitSource": "jet",
      "referenceGammeDestination": "jet",
      "referenceProduitDestination": "jet",
      "label": "Abonnement Jet 10Go",
      "numeroCommande": "Order_migration_1",
      "typeProduit": "SERVICE",
      "prix": {
        "periodicite": 1,
        "montant": "30",
        "typeTVA": "R",
        "frais": [
          {
            "montant": "30",
            "titre": "Frais d'ouverture de dossier",
            "typeFrais": "CREATION"
          }
        ],
        "modeFacturation": "PREMIER_MOIS"
      },
	  "referenceDePaiement": "R0000012",
	  "modePaiement": "SEPA"
    },
    {
      "numEC": 2,
      "numECParent": 1,
      "referenceGammeSource": "jet",
      "referenceProduitSource": "option.plus.50g",
      "referenceGammeDestination": "jet",
      "referenceProduitDestination": "option.plus.20g",
      "label": "Option+ 20Go",
      "numeroCommande": "Order_migration_1",
      "typeProduit": "SERVICE",
      "prix": {
        "periodicite": 1,
        "montant": "5",
        "typeTVA": "R",
        "modeFacturation": "PREMIER_MOIS"
      },
	  "referenceDePaiement": "R0000012",
	  "modePaiement": "SEPA"
    }
  ]
}</con:request>
            <con:assertion type="Valid HTTP Status Codes" name="Code Retour 200" id="20b95fed-f66f-4685-bce1-6e0a1d92ffad">
              <con:configuration>
                <codes>200</codes>
              </con:configuration>
            </con:assertion>
            <con:assertion type="GroovyScriptAssertion" name="Response must be empty" id="6ca1ddfa-7b0f-48d8-b5fa-1642229ad752">
              <con:configuration>
                <scriptText>assert messageExchange.hasResponse() == false</scriptText>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters>
              <entry key="refContrat" value="${CreerContrat#RefContrat}" xmlns="http://eviware.com/soapui/config"/>
            </con:parameters>
          </con:restRequest>
        </con:config>
      </con:testStep>
      <con:testStep type="jdbc" name="Politique Migration" id="b678b8a1-1d6b-4622-83e6-5aa534bd697c">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString>
          <con:query>select *
from politiquemigration
where referenceContrat = '${CreerContrat#RefContrat}'
order by id desc
LIMIT 1</con:query>
          
          
          <con:assertion type="XPath Match" name="Date Action"><con:configuration><path>//ResultSet/Row/POLITIQUEMIGRATION.DATEACTION</path><content>${=new java.text.SimpleDateFormat("yyyy-MM-dd").format(new Date())}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="FraisCreation"><con:configuration><path>//ResultSet/Row/POLITIQUEMIGRATION.FRAISCREATION</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="FraisMigration"><con:configuration><path>//ResultSet/Row/POLITIQUEMIGRATION.FRAISMIGRATION</path><content>30</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="FraisResiliation"><con:configuration><path>//ResultSet/Row/POLITIQUEMIGRATION.FRAISRESILIATION</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="MontantFraisResiliation"><con:configuration><path>//ResultSet/Row/POLITIQUEMIGRATION.MONTANTRESILIATION</path><content>50</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="MontantRemboursement"><con:configuration><path>//ResultSet/Row/POLITIQUEMIGRATION.MONTANTREMBOURSEMENT</path><content>50</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="Pénalités"><con:configuration><path>//ResultSet/Row/POLITIQUEMIGRATION.PENALITE</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="Remboursement"><con:configuration><path>//ResultSet/Row/POLITIQUEMIGRATION.REMBOURSEMENT</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="Reduction Ancienne"><con:configuration><path>//ResultSet/Row/POLITIQUEMIGRATION.REDUCTIONANCIENNE</path><content>0</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/>
        </con:config>
      </con:testStep>
      <con:testStep type="jdbc" name="Avenant" disabled="true" id="fc11b2e9-60aa-4078-b384-743f66e2c5fc">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString>
          <con:query>todo</con:query>
          
          
          <con:properties/>
        </con:config>
      </con:testStep>
      <con:testStep type="jdbc" name="Modifications" disabled="true" id="f23dad23-e450-4c5e-bfaf-065dc7380ea2">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString>
          <con:query>todo</con:query>
          
          
          <con:assertion type="XPath Match" name="Remboursement"><con:configuration><path>//ResultSet/Row/POLITIQUEMIGRATION.REMBOURSEMENT</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/>
        </con:config>
      </con:testStep>
      <con:testStep type="jdbc" name="Contrat Migre" id="ac01c0d3-1add-4601-b7db-5fd1a2fc8b58">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString>
          <con:query>select *
from contrat
where reference = '${CreerContrat#RefContrat}'</con:query>
          
          <con:assertion type="XPath Match" name="PolitiqueValidationId différent de la précédente"><con:configuration><path>(//ResultSet/Row/CONTRAT.POLITIQUEVALIDATIONID/text())  != ${InfosAncienContrat#PolitiqueValidationId}</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="Même référence"><con:configuration><path>//ResultSet/Row/CONTRAT.REFERENCE/text()</path><content>${CreerContrat#RefContrat}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="Même idClient"><con:configuration><path>//ResultSet/Row/CONTRAT.IDCLIENT/text()</path><content>${InfosAncienContrat#IdClient}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="Même titre"><con:configuration><path>//ResultSet/Row/CONTRAT.TITRE/text()</path><content>${InfosAncienContrat#Titre}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/>
        </con:config>
      </con:testStep>
      <con:testStep type="jdbc" name="EC Migre" id="7b0b9dc3-d633-4848-9698-0ed72230e4b8">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString>
          <con:query>select 
id, configuration, 
dateDebutFacturation, dateDerniereFacture,
dateFinContrat, datePreparation,
date_format(c.datevalidation, '%Y-%m-%d') as "dateValidation",
duree, engagement,
idAdrFacturation, idAdrLivraison,
modeFacturation, modePaiement,
montant, numEC, numeroCommande,
periodicite, reference,
referenceModePaiement,referenceProduit,
remboursable, titre,
typeContrat, typeProduit, typeResiliation, typeTVA, 
contratParent, dependDe,
politiqueResiliationId, 
reductionId, reductionGlobalId
from elementcontractuel c 
where c.reference LIKE "${CreerContrat#RefContrat}%"</con:query>
          <con:assertion type="XQuery Match" name="Date Validation = Now()">
            <con:configuration><path>&lt;Results> 
{ 
for $x in //Row 
return &lt;result>{$x/DATEVALIDATION/text()}&lt;/result> 
}
&lt;/Results></path><content><![CDATA[<Results>
  <result>${=new java.text.SimpleDateFormat("yyyy-MM-dd").format(new Date())}</result>
  <result>${=new java.text.SimpleDateFormat("yyyy-MM-dd").format(new Date())}</result>
</Results>]]></content><allowWildcards>false</allowWildcards></con:configuration>
          </con:assertion>
          <con:assertion type="XPath Match" name="2 éléments survivants"><con:configuration><path>count(//ResultSet/Row)</path><content>2</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XQuery Match" name="Même AdrLivraison"><con:configuration><path>&lt;Results> 
{ 
for $x in //Row 
return &lt;result>{$x/ELEMENTCONTRACTUEL.IDADRLIVRAISON/text()}&lt;/result> 
}
&lt;/Results></path><content><![CDATA[<Results>
  <result>
${InfosAncienContrat#idAdrLivraison}</result>
  <result>${InfosAncienContrat#idAdrLivraison}</result>
</Results>]]></content><allowWildcards>false</allowWildcards></con:configuration></con:assertion><con:assertion type="XQuery Match" name="Même AdrFacturation"><con:configuration><path>&lt;Results> 
{ 
for $x in //Row 
return &lt;result>{$x/ELEMENTCONTRACTUEL.IDADRFACTURATION/text()}&lt;/result> 
}
&lt;/Results></path><content><![CDATA[<Results>
  <result>${InfosAncienContrat#IdAdrFacturation}</result>
  <result>${InfosAncienContrat#IdAdrFacturation}</result>
</Results>]]></content><allowWildcards>false</allowWildcards></con:configuration></con:assertion><con:properties/>
        </con:config>
      </con:testStep>
      <con:testStep type="delay" name="Wait for beginning Retour" id="acd5cd77-05b6-45f7-90f4-b6a931f0a4bb">
        <con:settings/>
        <con:config>
          <delay>500</delay>
        </con:config>
      </con:testStep>
      <con:testStep type="jdbc" name="Bon de Migration - Initié" id="9e86b3fd-28cd-41f0-a264-d0013de33ac9">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString>
          <con:query>select id, reference,
causenonlivraison,
date_format(dateinitiation, '%Y-%m-%d') as "dateInitiation",
datedebutPreparation,
dateretourtermine,
idClient, typebonpreparation
from bonpreparation 
where reference LIKE "${CreerContrat#RefContrat}%"
  and typeBonPreparation = 'MIGRATION'</con:query>
          
          
          
          
          <con:assertion type="XPath Match" name="Id Client"><con:configuration><path>//ResultSet/Row/BONPREPARATION.IDCLIENT/text()</path><content>00003870</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="Reference"><con:configuration><path>//ResultSet/Row/BONPREPARATION.REFERENCE</path><content>${CreerContrat#RefContrat}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="Date Initiation"><con:configuration><path>//ResultSet/Row/DATEINITIATION/text()</path><content>${=new java.text.SimpleDateFormat("yyyy-MM-dd").format(new Date())}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/>
        </con:config>
      </con:testStep>
      <con:testStep type="jdbc" name="EL de migration - Initié" id="d4021be9-ecf1-4c5b-8f63-5ca383770aaa">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString>
          <con:query>select * from elementlivraison
where bonPreparationParent = 
(select id
from bonpreparation 
where reference LIKE "${CreerContrat#RefContrat}%"
  and typeBonPreparation = 'MIGRATION')</con:query>
          <con:assertion type="XQuery Match" name="TypeEL=Retour ou Migration">
            <con:configuration><path>&lt;Results> 
{ 
 for $x in //Row 
order by $x/ELEMENTLIVRAISON.NUMEC
 return &lt;result>{$x/ELEMENTLIVRAISON.TYPEBONPREPARATION/text()}&lt;/result> 
}
&lt;/Results></path><content><![CDATA[<Results>
  <result>MIGRATION</result>
  <result>MIGRATION</result>
  <result>RETOUR</result>
</Results>]]></content><allowWildcards>false</allowWildcards></con:configuration>
          </con:assertion>
          <con:assertion type="XQuery Match" name="Acteurs=NetRetour ou Packager">
            <con:configuration><path>&lt;Results> 
{ 
 for $x in //Row 
order by $x/ELEMENTLIVRAISON.NUMEC
 return &lt;result>{$x/ELEMENTLIVRAISON.ACTEUR/text()}&lt;/result> 
}
&lt;/Results></path><content><![CDATA[<Results>
  <result>PACKAGER</result>
  <result>PACKAGER</result>
  <result>NETRETOUR</result>
</Results>]]></content><allowWildcards>false</allowWildcards></con:configuration>
          </con:assertion>
          <con:assertion type="XPath Match" name="1 seul code Produit" disabled="true">
            <con:configuration><path>count(//Row[ELEMENTLIVRAISON.TYPEELEMENT="SERVICE"]/ELEMENTLIVRAISON.CODEPRODUIT/text())</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
          </con:assertion>
          <con:assertion type="XQuery Match" name="1 seul code Colis">
            <con:configuration>
              <path>count(//Row[ELEMENTLIVRAISON.TYPEELEMENT="BIEN"]/ELEMENTLIVRAISON.CODECOLIS/text())</path>
              <content>&lt;xml-fragment>1&lt;/xml-fragment></content>
              <allowWildcards>false</allowWildcards>
            </con:configuration>
          </con:assertion>
          <con:assertion type="XPath Match" name="Aucun EL de livraison"><con:configuration><path>count(//Row[ELEMENTLIVRAISON.TYPEBONPREPARATION = 'LIVRAISON'])</path><content>0</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/>
        </con:config>
      </con:testStep><con:testStep type="delay" name="Wait for end Migration" id="d07d0da3-abfb-4b35-9a26-124efab1c27c">
        <con:settings/>
        <con:config><delay>500</delay></con:config>
      </con:testStep><con:testStep type="jdbc" name="Bon de Retour - Temoin" id="75a07648-73fe-426a-8e15-664210656cfd">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString>
          <con:query>select id, reference,
causenonlivraison,
date_format(dateinitiation, '%Y-%m-%d') as "dateInitiation",
datedebutPreparation,
datelivraisontermine,
dateretourtermine,
idClient, typebonpreparation
from bonpreparation 
where reference LIKE "${CreerContrat#RefContrat}%"
  and typeBonPreparation = 'MIGRATION'</con:query>
          
          
          
          <con:assertion type="XPath Match" name="Id Client"><con:configuration><path>//ResultSet/Row/BONPREPARATION.IDCLIENT/text()</path><content>00003870</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="Date Initiation"><con:configuration><path>//ResultSet/Row/DATEINITIATION/text()</path><content>${=new java.text.SimpleDateFormat("yyyy-MM-dd").format(new Date())}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/>
        </con:config>
      </con:testStep><con:testStep type="goto" name="Go End Migration" id="fda181b3-d56f-40ec-9636-e33b43d93859">
        <con:settings/>
        <con:config xsi:type="con:GotoStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:condition>
            <con:name>Wait Facturation</con:name>
            <con:type>XPATH</con:type>
            <con:expression>(not(//Results/ResultSet/Row/BONPREPARATION.DATELIVRAISONTERMINE/text())
or
not(//Results/ResultSet/Row/BONPREPARATION.DATERETOURTERMINE/text())
)
and
not(//Results/ResultSet/Row/BONPREPARATION.CAUSENONLIVRAISON/text())</con:expression>
            <con:targetStep>Wait for end Migration</con:targetStep>
          </con:condition>
        </con:config>
      </con:testStep><con:testStep type="jdbc" name="EL de retour - Retourné" id="c4b1eda8-2197-4e0b-a832-54282f4ab414">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString>
          <con:query>select * from elementlivraison
where bonPreparationParent = 
(select id
from bonpreparation 
where reference LIKE "${CreerContrat#RefContrat}%"
  and typeBonPreparation = 'MIGRATION')</con:query>
          
          
          
          <con:assertion type="XQuery Match" name="Elmts de Migration Livrés"><con:configuration><path>&lt;Results> 
{ 
 for $x in //Row[contains(ELEMENTLIVRAISON.TYPEBONPREPARATION/text(), 'MIGRATION')]
 order by $x/ELEMENTLIVRAISON.NUMEC
 return &lt;result>{exists($x/ELEMENTLIVRAISON.DATELIVRAISONTERMINE/text())}&lt;/result> 
}
&lt;/Results></path><content><![CDATA[<Results>
  <result>true</result>
  <result>true</result>
</Results>]]></content><allowWildcards>false</allowWildcards></con:configuration></con:assertion><con:assertion type="XQuery Match" name="Elmts de Retour Retournés"><con:configuration><path>&lt;Results> 
{ 
 for $x in //Row[contains(ELEMENTLIVRAISON.TYPEBONPREPARATION/text(), 'RETOUR')]
 order by $x/ELEMENTLIVRAISON.NUMEC
 return &lt;result>{exists($x/ELEMENTLIVRAISON.DATERETOURTERMINE/text())}&lt;/result> 
}
&lt;/Results></path><content>&lt;Results>
  &lt;result>true&lt;/result>
&lt;/Results></content><allowWildcards>false</allowWildcards></con:configuration></con:assertion><con:properties/>
        </con:config>
      </con:testStep><con:testStep type="properties" name="InfosFacture" id="951ee51d-f79b-4b67-b700-a5112b40cca1">
        <con:settings/>
        <con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:properties>
            <con:property>
              <con:name>DateLivraison</con:name>
              <con:value xsi:nil="true"/>
            </con:property>
          </con:properties>
        </con:config>
      </con:testStep><con:testStep type="transfer" name="Transfert Date Retour" id="1fd3219f-d4ba-4c03-9bf1-f7e2afb4671b">
        <con:settings/>
        <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false">
            <con:name>DateLivraison</con:name>
            <con:sourceType>ResponseAsXml</con:sourceType>
            <con:sourceStep>EL de retour - Retourné</con:sourceStep>
            <con:sourcePath>//Results/ResultSet/Row/BONPREPARATION.DATETERMINE/text()</con:sourcePath>
            <con:targetType>DateLivraison</con:targetType>
            <con:targetStep>InfosFacture</con:targetStep>
          </con:transfers>
        </con:config>
      </con:testStep><con:testStep type="delay" name="Wait for end Facturation" id="376be31f-e563-416f-90b4-671e4485ec12">
        <con:settings/>
        <con:config>
          <delay>500</delay>
        </con:config>
      </con:testStep><con:testStep type="jdbc" name="Facturation-exists" id="209a78a5-f693-46e9-a107-b1d2529fe53a">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.100.105.41:3306/test_saphir?user=test&amp;password=test</con:connectionString>
          <con:query>select * from movement where accountId = '00003870' and billinggroup ="${#TestCase#RefCommande}" ;</con:query>
          <con:properties/>
        </con:config>
      </con:testStep><con:testStep type="goto" name="Go Facturation" id="e9b5919f-e29d-4743-8d35-2a737abf9920">
        <con:settings/>
        <con:config xsi:type="con:GotoStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:condition>
            <con:name>Wait Facturation</con:name>
            <con:type>XPATH</con:type>
            <con:expression>not(//Results/ResultSet/Row/MOVEMENT.ID/text())</con:expression>
            <con:targetStep>Wait for end Facturation</con:targetStep>
          </con:condition>
        </con:config>
      </con:testStep><con:testStep type="jdbc" name="Facturation-valid" id="51d55b4c-af8d-41df-a07d-cc7bff62b9a6">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.100.105.41:3306/test_saphir?user=test&amp;password=test</con:connectionString>
          <con:query>select * from movement 
where accountId = '00003870'
  and minute(timediff(now(), create_date)) &lt; 5</con:query>
          
          
          
          
          
          <con:assertion type="XPath Match" name="Au moins 1 mouvement"><con:configuration><path>count(//Row) > 0</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/>
        </con:config>
      </con:testStep><con:properties/>
    </con:testCase><con:properties/>
  </con:testSuite>
  <con:testSuite name="Processus - Antivirus" id="c6a7d688-092f-4a12-a33c-4a56a5160aa4"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Vente" searchProperties="true" id="6d067cc4-5962-44e6-a695-6865311a2b3e">
      <con:settings/>
      <con:testStep type="calltestcase" name="Contrat Antivirus"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>30b39c40-cc8d-4e36-89bb-39614d35968e</con:targetTestCase><con:properties><con:property><con:name>RefCommande</con:name><con:value>9b89fa9c-3237-49f7-8769-3c726e746390</con:value></con:property><con:property><con:name>RefContrat</con:name><con:value>00000399</con:value></con:property><con:property><con:name>idContrat</con:name></con:property></con:properties><con:returnProperties><con:entry>RefCommande</con:entry><con:entry>RefContrat</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep>
      
      
      
      
      
      
      <con:testStep type="jdbc" name="Politique Validation">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString>
          <con:query>select * from politiquevalidation 
where id  = 
(select politiqueValidationId from contrat 
  where reference = "${Contrat Antivirus#refContrat}")</con:query>
          <con:assertion type="Simple Contains" name="Frais Création = True">
            <con:configuration><token>&lt;POLITIQUEVALIDATION.FRAISCREATION>1&lt;/POLITIQUEVALIDATION.FRAISCREATION></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration>
          </con:assertion>
          <con:assertion type="Simple Contains" name="CheckIsPackagerCreationPossible = False">
            <con:configuration><token>&lt;POLITIQUEVALIDATION.CHECKISPACKAGERCREATIONPOSSIBLE>1&lt;/POLITIQUEVALIDATION.CHECKISPACKAGERCREATIONPOSSIBLE></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration>
          </con:assertion><con:properties/>
        </con:config>
      </con:testStep>
      <con:testStep type="jdbc" name="Contrat">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString>
          <con:query>select * from contrat 
where reference = "${Contrat Antivirus#refContrat}"</con:query>
          
          <con:assertion type="XPath Match" name="Date Validation is not null"><con:configuration><path>exists(//ResultSet/Row/CONTRAT.DATEVALIDATION/text())</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="DatePreparation Is Not Null"><con:configuration><path>exists(//Row/CONTRAT.DATEPREPARATION/text())</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="Id Client = 00003870"><con:configuration><path>//ResultSet/Row/CONTRAT.IDCLIENT/text()</path><content>00003870</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="Politique Validation is not null"><con:configuration><path>exists(//ResultSet/Row/CONTRAT.POLITIQUEVALIDATIONID/text())</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/>
        </con:config>
      </con:testStep>
      <con:testStep type="jdbc" name="EC Valide">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString>
          <con:query>select * from elementcontractuel
where contratParent =( select id from contrat where
reference LIKE "${Contrat Antivirus#refContrat}%")</con:query>
          
          <con:assertion type="XQuery Match" name="Date Validation is not null"><con:configuration><path>&lt;Results> 
{ 
for $x in //Row 
order by $x/ELEMENTCONTRACTUEL.NUMEC
return &lt;result>{exists($x/ELEMENTCONTRACTUEL.DATEVALIDATION/text())}&lt;/result> 
}
&lt;/Results></path><content>&lt;Results>
  &lt;result>true&lt;/result>
&lt;/Results></content><allowWildcards>false</allowWildcards></con:configuration></con:assertion><con:assertion type="XQuery Match" name="Id Adr Livraison"><con:configuration><path>&lt;Results> 
{ 
for $x in //Row 
order by $x/ELEMENTCONTRACTUEL.NUMEC
return &lt;result>{$x/ELEMENTCONTRACTUEL.IDADRLIVRAISON/text()}&lt;/result> 
}
&lt;/Results></path><content>&lt;Results>
  &lt;result>adrliv1&lt;/result>
&lt;/Results></content><allowWildcards>false</allowWildcards></con:configuration></con:assertion><con:assertion type="XQuery Match" name="Id Adr Facturation"><con:configuration><path>&lt;Results> 
{ 
for $x in //Row 
order by $x/ELEMENTCONTRACTUEL.NUMEC
return &lt;result>{$x/ELEMENTCONTRACTUEL.IDADRFACTURATION/text()}&lt;/result> 
}
&lt;/Results></path><content>&lt;Results>
  &lt;result>685&lt;/result>
&lt;/Results></content><allowWildcards>false</allowWildcards></con:configuration></con:assertion><con:assertion type="XQuery Match" name="Remboursable"><con:configuration><path>&lt;Results> 
{ 
for $x in //Row 
order by $x/ELEMENTCONTRACTUEL.NUMEC
return &lt;result>{$x/ELEMENTCONTRACTUEL.REMBOURSABLE/text()}&lt;/result> 
}
&lt;/Results></path><content>&lt;Results>
  &lt;result>1&lt;/result>
&lt;/Results></content><allowWildcards>false</allowWildcards></con:configuration></con:assertion><con:properties/>
        </con:config>
      </con:testStep>
      <con:testStep type="jdbc" name="Tracing - Préparation &amp; Validation" disabled="true">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString>
          <con:query>select * 
from tracage
where referenceContrat = '${Contrat Antivirus#RefContrat}'</con:query>
          
          <con:assertion type="Simple Contains" name="Préparation d’un contrat"><con:configuration><token>Contrat ${Contrat Antivirus#RefContrat}</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" name="Contrat xxx préparé"><con:configuration><token>Contrat ${Contrat Antivirus#RefContrat} préparé</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" name="Validation du contrat"><con:configuration><token>Validation du contrat ${Contrat Antivirus#RefContrat}</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" name="Contrat xxx validé"><con:configuration><token>Contrat ${Contrat Antivirus#RefContrat} validé</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/>
        </con:config>
      </con:testStep>
      <con:testStep type="delay" name="Wait for beginning Livraison">
        <con:settings/>
        <con:config>
          <delay>500</delay>
        </con:config>
      </con:testStep>
      <con:testStep type="jdbc" name="Bon de Livraison - exists">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString>
          <con:query>select * from bonpreparation 
where reference = "${Contrat Antivirus#refContrat}"</con:query>
          <con:properties/>
        </con:config>
      </con:testStep>
      <con:testStep type="goto" name="Go Beginning Livraison">
        <con:settings/>
        <con:config xsi:type="con:GotoStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:condition>
            <con:name>Wait Facturation</con:name>
            <con:type>XPATH</con:type>
            <con:expression>not(//Results/ResultSet/Row/BONPREPARATION.DATEINITIATION/text())</con:expression>
            <con:targetStep>Wait for beginning Livraison</con:targetStep>
          </con:condition>
        </con:config>
      </con:testStep>
      <con:testStep type="jdbc" name="Bon de Livraison - Initié">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString>
          <con:query>select * from bonpreparation 
where reference = "${Contrat Antivirus#refContrat}"</con:query>
          <con:assertion type="XPath Match" name="TypeBonPreparation = Livraison"><con:configuration><path>//ResultSet/Row/BONPREPARATION.TYPEBONPREPARATION/text()</path><content>LIVRAISON</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="IdClient"><con:configuration><path>//ResultSet/Row/BONPREPARATION.IDCLIENT/text()</path><content>00003870</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/>
        </con:config>
      </con:testStep>
      
      <con:testStep type="jdbc" name="Elements de Livraison - Initié">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString>
          <con:query>select * from elementlivraison 
where bonPreparationParent = 
  (select id 
     from bonpreparation 
    where reference = "${Contrat Antivirus#refContrat}")</con:query>
          
          
          
          <con:assertion type="XPath Match" name="EL Initié"><con:configuration><path>exists(//ResultSet/Row/ELEMENTLIVRAISON.DATEINITIATION/text())</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="NumEC"><con:configuration><path>//ResultSet/Row/ELEMENTLIVRAISON.NUMEC/text()</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="Reference"><con:configuration><path>//ResultSet/Row/ELEMENTLIVRAISON.REFERENCE/text()</path><content>${Contrat Antivirus#RefContrat}-1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="AncienCodes Null"><con:configuration><path>not(//ResultSet/Row/ELEMENTLIVRAISON.ANCIENCODECOLIS/text())
and
not(//ResultSet/Row/ELEMENTLIVRAISON.ANCIENCODEPRODUIT/text())</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="TypeBonPreparation = Livraison"><con:configuration><path>//ResultSet/Row/ELEMENTLIVRAISON.TYPEBONPREPARATION/text()</path><content>LIVRAISON</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="Acteur = Pkger"><con:configuration><path>//ResultSet/Row/ELEMENTLIVRAISON.ACTEUR/text()</path><content>PACKAGER</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="TypeElmnt = Service"><con:configuration><path>//ResultSet/Row/ELEMENTLIVRAISON.ACTEUR/text()</path><content>PACKAGER</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="ReferenceProduit = Antivirus"><con:configuration><path>//ResultSet/Row/ELEMENTLIVRAISON.REFERENCEPRODUIT/text()</path><content>avfwpro-confort-s</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/>
        </con:config>
      </con:testStep>
      <con:testStep type="jdbc" name="Tracing - Initiation" disabled="true">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString>
          <con:query>select * 
from tracage
where referenceContrat = '${Contrat Antivirus#RefContrat}'</con:query>
          
          <con:assertion type="Simple Contains" name="Initiation du BP"><con:configuration><token>Livraison du contrat ${Contrat Antivirus#RefContrat} – Préparation de la livraison</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" name="Initiation de l'EL - antivirus"><con:configuration><token>Préparation de la livraison du produit avfwpro-confort-s</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/>
        </con:config>
      </con:testStep>
      <con:testStep type="delay" name="Wait for end Livraison">
        <con:settings/>
        <con:config>
          <delay>500</delay>
        </con:config>
      </con:testStep>
      <con:testStep type="jdbc" name="Bon de Livraison - Témoin">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString>
          <con:query>select * from bonpreparation 
where reference = "${Contrat Antivirus#refContrat}"</con:query>
          <con:assertion type="XPath Match" name="Date Initiation">
            <con:configuration><path>exists(//Row/BONPREPARATION.DATEINITIATION/text())</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
          </con:assertion>
          
          <con:assertion type="XPath Match" name="Aucune Erreur de Livraison">
            <con:configuration><path>not(//ResultSet/Row/BONPREPARATION.CAUSENONLIVRAISON/text())</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
          </con:assertion>
          <con:properties/>
        </con:config>
      </con:testStep>
      <con:testStep type="goto" name="Go End Livraison">
        <con:settings/>
        <con:config xsi:type="con:GotoStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:condition>
            <con:name>Wait Facturation</con:name>
            <con:type>XPATH</con:type>
            <con:expression>not(//ResultSet/Row/BONPREPARATION.DATELIVRAISONTERMINE/text()) 
and
not(//ResultSet/Row/BONPREPARATION.CAUSENONLIVRAISON/text())</con:expression>
            <con:targetStep>Wait for end Livraison</con:targetStep>
          </con:condition>
        </con:config>
      </con:testStep>
      <con:testStep type="jdbc" name="Elements de Livraison - Livré">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString>
          <con:query>select * from elementlivraison 
where bonPreparationParent = 
  (select id 
     from bonpreparation 
    where reference = "${Contrat Antivirus#refContrat}")</con:query>
          
          
          
          <con:assertion type="XPath Match" name="EL Livré"><con:configuration><path>not(//ResultSet/Row/ELEMENTLIVRAISON.CAUSENONLIVRAISON/text())
and
exists(//ResultSet/Row/ELEMENTLIVRAISON.DATELIVRAISONTERMINE/text())</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="NumEC"><con:configuration><path>//ResultSet/Row/ELEMENTLIVRAISON.NUMEC/text()</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="Reference"><con:configuration><path>//ResultSet/Row/ELEMENTLIVRAISON.REFERENCE/text()</path><content>${Contrat Antivirus#RefContrat}-1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="AncienCodes Null"><con:configuration><path>not(//ResultSet/Row/ELEMENTLIVRAISON.ANCIENCODECOLIS/text())
and
not(//ResultSet/Row/ELEMENTLIVRAISON.ANCIENCODEPRODUIT/text())</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="Code Produit Not Null"><con:configuration><path>exists(//ResultSet/Row/ELEMENTLIVRAISON.RETAILERPACKAGERID/text())</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="Code Colis Null"><con:configuration><path>not(//ResultSet/Row/ELEMENTLIVRAISON.CODECOLIS/text())</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="TypeBonPreparation = Livraison"><con:configuration><path>//ResultSet/Row/ELEMENTLIVRAISON.TYPEBONPREPARATION/text()</path><content>LIVRAISON</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="Acteur = Pkger"><con:configuration><path>//ResultSet/Row/ELEMENTLIVRAISON.ACTEUR/text()</path><content>PACKAGER</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="ReferenceProduit = Antivirus"><con:configuration><path>//ResultSet/Row/ELEMENTLIVRAISON.REFERENCEPRODUIT/text()</path><content>avfwpro-confort-s</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/>
        </con:config>
      </con:testStep><con:testStep type="jdbc" name="Bon de Livraison - Livré">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString>
          <con:query>select * from bonpreparation 
where reference = "${Contrat Antivirus#refContrat}"</con:query>
          <con:assertion type="XPath Match" name="DateLivraisonTermine Not Null"><con:configuration><path>exists(//ResultSet/Row/BONPREPARATION.DATELIVRAISONTERMINE/text())</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="CauseNonLivraison Null"><con:configuration><path>not(//ResultSet/Row/BONPREPARATION.CAUSENONLIVRAISON/text())</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="IdClient"><con:configuration><path>//ResultSet/Row/BONPREPARATION.IDCLIENT</path><content>00003870</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="TypeBonPreparation = Livraison"><con:configuration><path>//ResultSet/Row/BONPREPARATION.TYPEBONPREPARATION</path><content>LIVRAISON</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="Dates Workflow"><con:configuration><path>exists(//ResultSet/Row/BONPREPARATION.DATEINITIATION/text())
and
exists(//ResultSet/Row/BONPREPARATION.DATEDEBUTPREPARATION/text())
and
exists(//ResultSet/Row/BONPREPARATION.DATEPREPARATION/text())</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="DateRetourTermine Null"><con:configuration><path>exists(//ResultSet/Row/BONPREPARATION.DATERETOURTERMINE/text())</path><content>false</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/>
        </con:config>
      </con:testStep><con:testStep type="jdbc" name="Tracing - Livraison" disabled="true">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString>
          <con:query>select * 
from tracage
where referenceContrat = '${Contrat Antivirus#RefContrat}'</con:query>
          
          <con:assertion type="Simple Contains" name="Préparation du contrat"><con:configuration><token>Contrat ${Contrat Antivirus#RefContrat} validé</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" name="Préparation de l'EL antivirus"><con:configuration><token>Contrat ${Contrat Antivirus#RefContrat} validé</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" name="Livraison du contrat"><con:configuration><token>Livraison du contrat ${Contrat Antivirus#RefContrat} – Fin de livraison</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" name="Livraison de l'EL antivirus"><con:configuration><token>Livraison du contrat ${Contrat Antivirus#RefContrat} – Fin de livraison du produit avfwpro-confort-s</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/>
        </con:config>
      </con:testStep><con:testStep type="transfer" name="Transfert Date Livraison">
        <con:settings/>
        <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false">
            <con:name>DateLivraison</con:name>
            <con:sourceType>ResponseAsXml</con:sourceType>
            <con:sourceStep>Bon de Livraison - Témoin</con:sourceStep>
            <con:sourcePath>//Results/ResultSet/Row/BONPREPARATION.DATELIVRAISONTERMINE/text()</con:sourcePath>
            <con:targetType>DateLivraison</con:targetType>
            <con:targetStep>InfosFacture</con:targetStep>
          </con:transfers>
        <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>ReferenceContrat</con:name><con:sourceType>RefContrat</con:sourceType><con:sourceStep>Contrat Antivirus</con:sourceStep><con:sourcePath/><con:targetType>RefContrat</con:targetType><con:targetStep>#TestCase#</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>ReferenceCommande</con:name><con:sourceType>RefCommande</con:sourceType><con:sourceStep>Contrat Antivirus</con:sourceStep><con:targetType>RefCommande</con:targetType><con:targetStep>#TestCase#</con:targetStep></con:transfers></con:config>
      </con:testStep><con:testStep type="properties" name="InfosFacture">
        <con:settings/>
        <con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:properties>
            <con:property>
              <con:name>DateLivraison</con:name>
              <con:value>2015-03-10 14:21:00.0</con:value>
            </con:property>
          </con:properties>
        </con:config>
      </con:testStep><con:testStep type="delay" name="Wait for end Facturation" disabled="true">
        <con:settings/>
        <con:config>
          <delay>500</delay>
        </con:config>
      </con:testStep><con:testStep type="jdbc" name="Facturation-exists" disabled="true">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.100.105.41:3306/test_saphir?user=test&amp;password=test</con:connectionString>
          <con:query>select * from movement 
where accountId = '00003870'
  and productId = 'avfwpro-confort-s'
  -- and minute(timediff(now(), create_date)) &lt; 1
  and id = (
  	select movement_idFK 
  	  from movement_appendix_item 
  	 where productReferenceId = '${Contrat Antivirus#RefContrat}'
  )
;</con:query>
          <con:properties/>
        </con:config>
      </con:testStep><con:testStep type="goto" name="Go Facturation" disabled="true">
        <con:settings/>
        <con:config xsi:type="con:GotoStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:condition>
            <con:name>Wait Facturation</con:name>
            <con:type>XPATH</con:type>
            <con:expression>not(//Results/ResultSet/Row/MOVEMENT.ID/text())</con:expression>
            <con:targetStep>Wait for end Facturation</con:targetStep>
          </con:condition>
        </con:config>
      </con:testStep><con:testStep type="groovy" name="Calcul Periodes" disabled="true"><con:settings/><con:config><script>def cal = Calendar.instance

testRunner.testCase.setPropertyValue("dateDebut", String.format('%tF', cal))
log.info testRunner.testCase.getPropertyValue("dateDebut")

cal.roll(Calendar.MONTH, 1)

testRunner.testCase.setPropertyValue("dateFin", String.format('%tF', cal))
log.info testRunner.testCase.getPropertyValue("dateFin")</script></con:config></con:testStep><con:testStep type="jdbc" name="Tracing - Facturation" disabled="true">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString>
          <con:query>select * 
from tracage
where referenceContrat = '${Contrat Antivirus#RefContrat}'</con:query>
          
          <con:assertion type="Simple Contains" name="Facturation des frais de création"><con:configuration><token>Facturation des frais de création du contrat ${Contrat Antivirus#RefContrat}</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" name="Facturation récurrente"><con:configuration><token>Facturation récurrente pour la période du ${#TestCase#DateDebut} au ${#TestCase#DateFin} du contrat ${Contrat Antivirus#RefContrat}</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/>
        </con:config>
      </con:testStep><con:testStep type="jdbc" name="Facturation-valid" disabled="true">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.100.105.41:3306/test_saphir?user=test&amp;password=test</con:connectionString>
          <con:query>select * from movement 
where accountId = '00003870'
  and minute(timediff(now(), create_date)) &lt; 1
  and id IN (
  	select movement_idFK 
  	  from movement_appendix_item 
  	 where productReferenceId = '${Contrat Antivirus#RefContrat}'
  )
;</con:query>
          
          
          
          
          
          <con:assertion type="XPath Match" name="Bill Type = Monthly"><con:configuration><path>//ResultSet/Row/MOVEMENT.BILL_TYPE/text()</path><content>MONTHLY</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="Billing Group Null"><con:configuration><path>not(//ResultSet/Row/MOVEMENT.BILLINGGROUP/text())</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="CanGrouped = True"><con:configuration><path>//ResultSet/Row/MOVEMENT.CANGROUPED/text()</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XQuery Match" name="Payment Infos"><con:configuration><path><![CDATA[<Results>
{
  for $x in //Row
  return <r>
    <payementType>{$x/MOVEMENT.PAYMENT_TYPE/text()}</payementType>
    <payementRef>{$x/MOVEMENT.RUM/text()}</payementRef>
  </r>
}
</Results>]]></path><content><![CDATA[<Results>
  <r>
    <payementType>SEPA</payementType>
    <payementRef>R0000012</payementRef>
  </r>
</Results>]]></content><allowWildcards>false</allowWildcards></con:configuration></con:assertion><con:assertion type="XPath Match" name="TransactionType = Debit"><con:configuration><path>//ResultSet/Row/MOVEMENT.TRANSACTIONTYPE/text()</path><content>DEBIT</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XQuery Match" name="Compta Infos"><con:configuration><path><![CDATA[<Results>
{
  for $x in //Row
  return <r>
    <vat>{$x/MOVEMENT.VAT_TYPE/text()}</vat>
    <curr>{$x/MOVEMENT.CURRENCY/text()}</curr>
  </r>
}
</Results>]]></path><content><![CDATA[<Results>
  <r>
    <vat>R</vat>
    <curr>EUR</curr>
  </r>
</Results>]]></content><allowWildcards>false</allowWildcards></con:configuration></con:assertion><con:assertion type="XPath Match" name="Amount = 5"><con:configuration><path>//ResultSet/Row/MOVEMENT.AMOUNT/text()</path><content>5.000000</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="ProductLabel" disabled="true"><con:configuration><path>//ResultSet/Row/MOVEMENT.PRODUCTLABEL/text()</path><content> Abonnement Antivirus Securitoo du ${=new java.text.SimpleDateFormat("yyyy-MM-dd").format(new Date())} au ${=Calendar.instance.get(Calendar.YEAR)+"-"+(int)(Calendar.instance.get(Calendar.MONTH)+2)+"-"+Calendar.instance.get(Calendar.DATE)} (Dossier Produit : ${Contrat Antivirus#RefContrat})</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="Date Start"><con:configuration><path>//ResultSet/Row/MOVEMENT.STARTFROM/text()</path><content>${#TestCase#DateDebut}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="Periode - Date End"><con:configuration><path>//ResultSet/Row/MOVEMENT.ENDTO/text()</path><content>${#TestCase#DateFin}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="ProductId = avfwpro-confort-s"><con:configuration><path>//ResultSet/Row/MOVEMENT.PRODUCTID/text()</path><content>avfwpro-confort-s</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/>
        </con:config>
      </con:testStep><con:loadTest name="Test Create">
        <con:settings><con:setting id="HttpSettings@close-connections">false</con:setting></con:settings>
        <con:threadCount>50</con:threadCount>
        <con:startDelay>0</con:startDelay>
        <con:sampleInterval>250</con:sampleInterval>
        <con:calculateTPSOnTimePassed>true</con:calculateTPSOnTimePassed>
        <con:resetStatisticsOnThreadCountChange>true</con:resetStatisticsOnThreadCountChange>
        <con:historyLimit>-1</con:historyLimit>
        <con:testLimit>60</con:testLimit>
        <con:limitType>TIME</con:limitType>
        <con:loadStrategy>
          <con:type>Simple</con:type>
        </con:loadStrategy>
        <con:assertion type="Step Status" name="Step Status"/>
        <con:maxAssertionErrors>100</con:maxAssertionErrors>
        <con:cancelExcessiveThreads>true</con:cancelExcessiveThreads>
        <con:strategyInterval>500</con:strategyInterval>
      </con:loadTest>
      <con:properties>
        <con:property>
          <con:name>RefCommande</con:name>
          <con:value>9b89fa9c-3237-49f7-8769-3c726e746390</con:value>
        </con:property>
        <con:property>
          <con:name>RefContrat</con:name>
          <con:value>00000399</con:value>
        </con:property>
      <con:property><con:name>testDate</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>testDates</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>dateDebut</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>dateFin</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property></con:properties>
    </con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Migration - Mig Administrative" searchProperties="true" id="dc69d1a8-8100-408f-8ebe-806774f1e85c" disabled="true"><con:settings/><con:testStep type="calltestcase" name="CreerContrat" id="cc004a2d-27bf-49dc-bc60-fcd4652a4850"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>30b39c40-cc8d-4e36-89bb-39614d35968e</con:targetTestCase><con:properties><con:property><con:name>RefCommande</con:name><con:value>ecbb9eac-91f4-4595-bff6-8ac3fc945d5b</con:value></con:property><con:property><con:name>RefContrat</con:name><con:value>654669c5</con:value></con:property><con:property><con:name>idContrat</con:name></con:property></con:properties><con:returnProperties><con:entry>RefCommande</con:entry><con:entry>RefContrat</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="jdbc" name="Contrat Ancien" id="2382a954-5e33-4c22-b6fd-f06ca274a6f3"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString><con:query>select *
from contrat
where reference = '${CreerContrat#RefContrat}'</con:query><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="EC Anciens" id="11cf1231-f42f-44cf-bc2c-663b5d2dc465"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString><con:query>select 
dateDebutFacturation, dateDerniereFacture,
dateFinContrat, datePreparation,
date_format(c.datevalidation, '%Y-%m-%d') as "dateValidation",
duree, engagement,
idAdrFacturation, idAdrLivraison,
modeFacturation, modePaiement,
montant, numEC, numeroCommande,
periodicite, reference,
referenceModePaiement,referenceProduit,
remboursable, titre,
typeContrat, typeProduit, typeTVA
from elementcontractuel c 
where c.reference LIKE "${CreerContrat#RefContrat}%"</con:query><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Move Anciennes Infos Contrat" id="c6ea24a5-5a17-42ba-8b7b-62dcd1f00e80"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false" disabled="true"><con:name>Move PolitiqueValidationId</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Contrat Ancien</con:sourceStep><con:sourcePath>//ResultSet/Row/CONTRAT.POLITIQUEVALIDATIONID/text()</con:sourcePath><con:targetType>PolitiqueValidationId</con:targetType><con:targetStep>InfosAncienContrat</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" transferToAll="false" entitize="false" ignoreEmpty="false" useXQuery="false" transferChildNodes="false"><con:name>IdClient</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Contrat Ancien</con:sourceStep><con:sourcePath>//ResultSet/Row/CONTRAT.IDCLIENT/text()</con:sourcePath><con:targetType>IdClient</con:targetType><con:targetStep>InfosAncienContrat</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>Titre</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Contrat Ancien</con:sourceStep><con:sourcePath>//ResultSet/Row/CONTRAT.TITRE/text()</con:sourcePath><con:targetType>Titre</con:targetType><con:targetStep>InfosAncienContrat</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>idAdrFacturation</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>EC Anciens</con:sourceStep><con:sourcePath>//ResultSet/Row[1]/ELEMENTCONTRACTUEL.IDADRFACTURATION/text()</con:sourcePath><con:targetType>IdAdrFacturation</con:targetType><con:targetStep>InfosAncienContrat</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>idAdrLivraison</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>EC Anciens</con:sourceStep><con:sourcePath>//ResultSet/Row[1]/ELEMENTCONTRACTUEL.IDADRLIVRAISON/text()</con:sourcePath><con:targetType>IdAdrLivraison</con:targetType><con:targetStep>InfosAncienContrat</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" transferToAll="false" entitize="false" ignoreEmpty="false" useXQuery="false" transferChildNodes="false"><con:name>Engagement Jet</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>EC Anciens</con:sourceStep><con:sourcePath>//ResultSet/Row[1]/ELEMENTCONTRACTUEL.ENGAGEMENT</con:sourcePath><con:targetType>Engagement</con:targetType><con:targetStep>InfosAncienContrat</con:targetStep></con:transfers></con:config></con:testStep><con:testStep type="properties" name="InfosAncienContrat" id="c754853f-7de5-4bc4-a5de-fe1e63fb23cd"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>PolitiqueValidationId</con:name><con:value>6</con:value></con:property><con:property><con:name>IdClient</con:name><con:value>00003870</con:value></con:property><con:property><con:name>Titre</con:name><con:value>Contrat Global: 654669c5</con:value></con:property><con:property><con:name>IdAdrFacturation</con:name><con:value>685</con:value></con:property><con:property><con:name>IdAdrLivraison</con:name><con:value>adrliv1</con:value></con:property><con:property><con:name>Engagement</con:name><con:value>&lt;ELEMENTCONTRACTUEL.ENGAGEMENT/></con:value></con:property><con:property><con:name>Duree</con:name><con:value/></con:property><con:property><con:name>All</con:name><con:value>
            </con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="restrequest" name="Migrer Contrat" id="4649794e-e530-4c0d-92d4-c6b4302d5cfe"><con:settings/><con:config service="http://10.10.2.52:8080" methodName="" resourcePath="/contrat-core/contrat/{refContrat}/migrer" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Migrer Contrat" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.10.2.52:8080</con:endpoint><con:request>{
  "user": "test",
  "politiqueMigration": {
    "fraisMigration": null,
    "fraisResiliation": true,
    "remboursement": true,
    "fraisCreation": true,
    "penalite": true,
    "reductionAncienne": true
  },
  "produitsMigration": [
    {
      "numEC": 1,
      "referenceGammeSource": "securite",
      "referenceProduitSource": "avfwpro-confort-s",
      "referenceGammeDestination": "securite",
      "referenceProduitDestination": "avfwpro-confort-s",
      "label": "Abonnement Antivirus 6postes",
      "numeroCommande": "Order_migration_avfw",
      "typeProduit": "SERVICE",
      "remboursable": true,
      "prix": {
        "duree" : "12",
        "periodicite": 2,
        "montant": "10",
        "typeTVA": "R",
        "modeFacturation": "DATE_ANNIVERSAIRE"
      },
      "referenceDePaiement": "R0000012",
      "modePaiement": "SEPA"
    }
  ]
}</con:request><con:originalUri>http://10.10.2.52/contrat-core/contrat/ac55ffe8/migrer</con:originalUri><con:credentials><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="refContrat" value="${CreerContrat#RefContrat}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Avenant" id="e64a66ac-98ce-4f39-9d91-c516151d8ced">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString>
          <con:query>select id, 
commentaire, commentaireAnnulation,
date_format(dateModification, '%Y-%m-%d') as "dateModification",
referenceContrat,
version,
typeAvenant,
politiqueCessionId,
politiqueMigrationId
  from avenant
 where referenceContrat = '${CreerContrat#RefContrat}'</con:query>
          
          
          <con:assertion type="XPath Match" name="Commentaires Null"><con:configuration><path>not(//Row/AVENANT.COMMENTAIRE/text())
and
not(/Row/AVENANT.COMMENTAIREANNULATION/text())</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="Version = 0"><con:configuration><path>//Row/AVENANT.VERSION/text()</path><content>0</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="PolitiqueCession Null"><con:configuration><path>not(//Row/AVENANT.POLITIQUECESSIONID/text())</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="PolitiqueMigration Not Null"><con:configuration><path>exists(//Row/AVENANT.POLITIQUEMIGRATIONID/text())</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="TypeAvenant = Migration"><con:configuration><path>//Row/AVENANT.TYPEAVENANT/text()</path><content>MIGRATION</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="DateModification = NOW()" disabled="true"><con:configuration><path>//Row/DATEMODIFICATION/text()</path><content>${=new java.text.SimpleDateFormat("yyyy-MM-dd").format(new Date())}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/>
        </con:config>
      </con:testStep><con:testStep type="jdbc" name="Modifications" id="2c95f3a7-30e2-4db1-b11d-af7f93f40bc9">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString>
          <con:query>select *
from modification
where avenantId = 
(select id
   from avenant
  where referenceContrat = '${CreerContrat#RefContrat}'
)</con:query>
          
          
          <con:assertion type="XPath Match" name="NumEC"><con:configuration><path>//Row/MODIFICATION.NUMEC/text()</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="TrameJSON"><con:configuration><path>//Row/MODIFICATION.TRAMEJSON/text()</path><content>{"numEC":1,"referenceProduitDestination":"avfwpro-confort-s","referenceProduitSource":"avfwpro-confort-s","referenceGammeDestination":"securite","referenceGammeSource":"securite","label":"Abonnement Antivirus 6postes","numeroCommande":"Order_migration_avfw","typeProduit":"SERVICE","prix":{"periodicite":2,"typeTVA":"R","montant":10.0,"frais":[],"modeFacturation":"DATE_ANNIVERSAIRE","engagement":null,"duree":12},"reductions":[],"reductionsGlobale":[],"numECParent":null,"remboursable":true,"modePaiement":"SEPA","referenceDePaiement":"R0000012"}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/>
        </con:config>
      </con:testStep><con:testStep type="jdbc" name="Politique Migration" id="ac38e0e3-30ef-485b-83d3-e26b5950b0d6">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString>
          <con:query>select *
from politiquemigration
where id = 
(select politiquemigrationId 
   from avenant
  where referenceContrat = '${CreerContrat#RefContrat}'
)</con:query>
          
          
          <con:assertion type="XPath Match" name="Date Action" disabled="true"><con:configuration><path>//ResultSet/Row/POLITIQUEMIGRATION.DATEACTION</path><content>${=new java.text.SimpleDateFormat("yyyy-MM-dd").format(new Date())}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="FraisCreation"><con:configuration><path>//ResultSet/Row/POLITIQUEMIGRATION.FRAISCREATION</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="FraisMigration"><con:configuration><path>not(//ResultSet/Row/POLITIQUEMIGRATION.FRAISMIGRATION/text())</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="FraisResiliation"><con:configuration><path>//ResultSet/Row/POLITIQUEMIGRATION.FRAISRESILIATION</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="MontantFraisResiliation"><con:configuration><path>exists(//ResultSet/Row/POLITIQUEMIGRATION.MONTANTRESILIATION/text())</path><content>false</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="MontantRemboursement"><con:configuration><path>exists(//ResultSet/Row/POLITIQUEMIGRATION.MONTANTREMBOURSEMENT/text())</path><content>false</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="Pénalités"><con:configuration><path>//ResultSet/Row/POLITIQUEMIGRATION.PENALITE</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="Remboursement"><con:configuration><path>//ResultSet/Row/POLITIQUEMIGRATION.REMBOURSEMENT</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="Reduction Ancienne"><con:configuration><path>//ResultSet/Row/POLITIQUEMIGRATION.REDUCTIONANCIENNE/text()</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="User = Test"><con:configuration><path>//ResultSet/Row/POLITIQUEMIGRATION.USER/text()</path><content>test</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/>
        </con:config>
      </con:testStep><con:testStep type="jdbc" name="Contrat Migre" id="d64689e1-1ba1-4725-b563-6512bb2aaa71">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString>
          <con:query>select *
from contrat
where reference = '${CreerContrat#RefContrat}'</con:query>
          
          <con:assertion type="XPath Match" name="Même titre"><con:configuration><path>//ResultSet/Row/CONTRAT.TITRE/text()</path><content>${InfosAncienContrat#Titre}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="PolitiqueValidationId différent de la précédente"><con:configuration><path>(//ResultSet/Row/CONTRAT.POLITIQUEVALIDATIONID/text())  != ${InfosAncienContrat#PolitiqueValidationId}</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="Même idClient"><con:configuration><path>//ResultSet/Row/CONTRAT.IDCLIENT/text()</path><content>${InfosAncienContrat#IdClient}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="No Resiliation"><con:configuration><path>not(//Row/CONTRAT.POLITIQUERESILIATIONID/text())
and
not(//Row/CONTRAT.TYPERESILIATION/text())
and
not(//Row/CONTRAT.DATEFINCONTRAT/text())</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="DatePreparation = DateValidation = NotNull"><con:configuration><path>//Row/CONTRAT.DATEPREPARATION/text() = //Row/CONTRAT.DATEVALIDATION/text()</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/>
        </con:config>
      </con:testStep><con:testStep type="delay" name="Wait for initiation Livraison" id="8232ffe1-b377-4e3b-9c1f-e9ec87ce89ad">
        <con:settings/>
        <con:config><delay>3000</delay></con:config>
      </con:testStep><con:testStep type="jdbc" name="Bon de Migration - Initié (aucun)" id="326860fb-8d76-441b-b8ad-43c07b8c2335">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString>
          <con:query>select id, reference,
causenonlivraison,
date_format(dateinitiation, '%Y-%m-%d') as "dateInitiation",
datedebutPreparation,
dateLivraisonTermine,
dateretourtermine,
idClient, typebonpreparation
from bonpreparation 
where reference LIKE "${CreerContrat#RefContrat}%"
  and typeBonPreparation = 'MIGRATION'</con:query>
          
          
          
          
          <con:assertion type="XPath Match" name="Aucun résultat"><con:configuration><path>count(//Row)</path><content>0</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/>
        </con:config>
      </con:testStep><con:testStep type="delay" name="Wait for end Facturation" id="b9a3042e-4946-4a98-a43b-9ef4b62f7326">
        <con:settings/>
        <con:config>
          <delay>500</delay>
        </con:config>
      </con:testStep><con:testStep type="jdbc" name="Facturation-exists" id="cb65c65f-9f8f-47ed-9f73-677163c93616" disabled="true">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.100.105.41:3306/test_saphir?user=test&amp;password=test</con:connectionString>
          <con:query>select * from movement 
where accountId = '00003870'
  and productId = 'avfwpro-confort-s'
  and minute(timediff(now(), create_date)) &lt; 1
  and id IN (
  	select movement_idFK 
  	  from movement_appendix_item 
  	 where productReferenceId = '${CreerContrat#RefContrat}'
  )
;</con:query>
          <con:properties/>
        </con:config>
      </con:testStep><con:testStep type="goto" name="Go Facturation" id="e5ba56de-dac3-414e-9b35-f1546f216c34" disabled="true">
        <con:settings/>
        <con:config xsi:type="con:GotoStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:condition>
            <con:name>Wait Facturation</con:name>
            <con:type>XPATH</con:type>
            <con:expression>not(//Results/ResultSet/Row/MOVEMENT.ID/text())</con:expression>
            <con:targetStep>Wait for end Facturation</con:targetStep>
          </con:condition>
        </con:config>
      </con:testStep><con:testStep type="jdbc" name="Facturation-valid" id="58f806e9-728a-4d54-b57d-e24c0bc4a3cb" disabled="true">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.100.105.41:3306/test_saphir?user=test&amp;password=test</con:connectionString>
          <con:query>select * from movement 
where accountId = '00003870'
  and productId = 'avfwpro-confort-s'
  and minute(timediff(now(), create_date)) &lt; 1
  and id IN (
  	select movement_idFK 
  	  from movement_appendix_item 
  	 where productReferenceId = '${CreerContrat#RefContrat}'
  )
;</con:query>
          
          
          
          
          
          <con:assertion type="XPath Match" name="Au moins 1 mouvement"><con:configuration><path>count(//Row) > 0</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/>
        </con:config>
      </con:testStep><con:properties/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Migration - Même gamme" searchProperties="true" id="2b5b9d3e-d6b8-4494-a829-551b13824d09"><con:settings/><con:testStep type="calltestcase" name="CreerContrat" id="68d717bf-4153-463b-961d-1a0389be1e43"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>30b39c40-cc8d-4e36-89bb-39614d35968e</con:targetTestCase><con:properties><con:property><con:name>RefCommande</con:name><con:value>f9335137-164a-4fee-a6cb-242fbefc13a1</con:value></con:property><con:property><con:name>RefContrat</con:name><con:value>00000364</con:value></con:property><con:property><con:name>idContrat</con:name></con:property></con:properties><con:returnProperties><con:entry>RefCommande</con:entry><con:entry>RefContrat</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="delay" name="Wait for Vente">
        <con:settings/>
        <con:config><delay>500</delay></con:config>
      </con:testStep><con:testStep type="jdbc" name="Facturation - Témoin Facturation">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString>
          <con:query>select ec.* from contrat c, elementcontractuel ec 
where  c.reference="${CreerContrat#RefContrat}" 
and ec.contratParent=c.id</con:query>
          <con:assertion type="XPath Match" name="Date Derniere Facture" disabled="true">
            <con:configuration><path>exists(//Row/ELEMENTCONTRACTUEL.DATEDERNIEREFACTURE/text())</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
          </con:assertion>
          
          
          <con:properties/>
        </con:config>
      </con:testStep><con:testStep type="goto" name="Goto Wait for vente"><con:settings/><con:config xsi:type="con:GotoStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:condition><con:name>Wait for Vente</con:name><con:type>XPATH</con:type><con:expression>not(//Row/ELEMENTCONTRACTUEL.DATEDERNIEREFACTURE/text())</con:expression><con:targetStep>Wait for Vente</con:targetStep></con:condition></con:config></con:testStep><con:testStep type="jdbc" name="Contrat Ancien" id="7588103b-fd37-4476-be77-62a2874c48b9"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString><con:query>select *
from contrat
where reference = '${CreerContrat#RefContrat}'</con:query><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="EC Anciens" id="a6b0e05a-1019-4120-affd-dcca41bed737"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString><con:query>select 
dateDebutFacturation, dateDerniereFacture,
dateFinContrat, datePreparation,
date_format(c.datevalidation, '%Y-%m-%d') as "dateValidation",
duree, engagement,
idAdrFacturation, idAdrLivraison,
modeFacturation, modePaiement,
montant, numEC, numeroCommande,
periodicite, 
referenceModePaiement,referenceProduit,
remboursable, titre,
 typeProduit, typeTVA
from elementcontractuel c 
where c.contratParent=(select id from contrat where
reference LIKE "${CreerContrat#RefContrat}")</con:query><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Move Anciennes Infos Contrat" id="6842f327-dfa9-415b-8587-dbf0de078c6f"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false" disabled="true"><con:name>Move PolitiqueValidationId</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Contrat Ancien</con:sourceStep><con:sourcePath>//ResultSet/Row/CONTRAT.POLITIQUEVALIDATIONID/text()</con:sourcePath><con:targetType>PolitiqueValidationId</con:targetType><con:targetStep>InfosAncienContrat</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" transferToAll="false" entitize="false" ignoreEmpty="false" useXQuery="false" transferChildNodes="false"><con:name>IdClient</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Contrat Ancien</con:sourceStep><con:sourcePath>//ResultSet/Row/CONTRAT.IDCLIENT/text()</con:sourcePath><con:targetType>IdClient</con:targetType><con:targetStep>InfosAncienContrat</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>Titre</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Contrat Ancien</con:sourceStep><con:sourcePath>//ResultSet/Row/CONTRAT.TITRE/text()</con:sourcePath><con:targetType>Titre</con:targetType><con:targetStep>InfosAncienContrat</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>idAdrFacturation</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>EC Anciens</con:sourceStep><con:sourcePath>//ResultSet/Row[1]/ELEMENTCONTRACTUEL.IDADRFACTURATION/text()</con:sourcePath><con:targetType>IdAdrFacturation</con:targetType><con:targetStep>InfosAncienContrat</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true"><con:name>idAdrLivraison</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>EC Anciens</con:sourceStep><con:sourcePath>//ResultSet/Row[1]/ELEMENTCONTRACTUEL.IDADRLIVRAISON/text()</con:sourcePath><con:targetType>IdAdrLivraison</con:targetType><con:targetStep>InfosAncienContrat</con:targetStep></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" transferToAll="false" entitize="false" ignoreEmpty="false" useXQuery="false" transferChildNodes="false"><con:name>Engagement Jet</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>EC Anciens</con:sourceStep><con:sourcePath>//ResultSet/Row[1]/ELEMENTCONTRACTUEL.ENGAGEMENT</con:sourcePath><con:targetType>Engagement</con:targetType><con:targetStep>InfosAncienContrat</con:targetStep></con:transfers></con:config></con:testStep><con:testStep type="properties" name="InfosAncienContrat" id="7c9862bd-fd77-48e4-b33e-b7cc237df4b3"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>PolitiqueValidationId</con:name><con:value>6</con:value></con:property><con:property><con:name>IdClient</con:name><con:value>00003870</con:value></con:property><con:property><con:name>Titre</con:name><con:value>Contrat Global: 00000364</con:value></con:property><con:property><con:name>IdAdrFacturation</con:name><con:value>685</con:value></con:property><con:property><con:name>IdAdrLivraison</con:name><con:value>adrliv1</con:value></con:property><con:property><con:name>Engagement</con:name><con:value>&lt;ELEMENTCONTRACTUEL.ENGAGEMENT/></con:value></con:property><con:property><con:name>Duree</con:name><con:value/></con:property><con:property><con:name>All</con:name><con:value>
            </con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="restrequest" name="Migrer Contrat" id="770b436b-ac04-4b5f-9c4d-42769c7aa3b2"><con:settings/><con:config service="http://10.10.2.52:8080" methodName="" resourcePath="/contrat-core/contrat/{refContrat}/migrer" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Migrer Contrat" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.10.2.52:8080</con:endpoint><con:request>{
  "user": "test",
  "politiqueMigration": {
    "fraisMigration": null,
    "fraisResiliation": true,
    "remboursement": true,
    "fraisCreation": true,
    "penalite": true,
    "reductionAncienne": true
  },
  "produitsMigration": [
    {
      "numEC": 1,
      "referenceGammeSource": "securite",
      "referenceProduitSource": "avfwpro-confort-s",
      "referenceGammeDestination": "securite",
      "referenceProduitDestination": "avfw.confort.xl",
      "label": "Abonnement Antivirus 6postes",
      "numeroCommande": "Order_migration_avfw_xl",
      "typeProduit": "SERVICE",
      "remboursable": true,
      "prix": {
        "duree" : "12",
        "periodicite": 2,
        "montant": "10",
        "typeTVA": "R",
        "modeFacturation": "DATE_ANNIVERSAIRE"
      },
      "referenceDePaiement": "R0000012",
      "modePaiement": "SEPA"
    }
  ]
}</con:request><con:originalUri>http://10.10.2.52/contrat-core/contrat/ac55ffe8/migrer</con:originalUri><con:credentials><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="refContrat" value="${CreerContrat#RefContrat}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Avenant" id="0d610962-d869-4068-b39c-25671f03f2a7">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString>
          <con:query>select id, 
commentaire, commentaireAnnulation,
date_format(dateModification, '%Y-%m-%d') as "dateModification",
referenceContrat,
version,
typeAvenant,
politiqueCessionId,
politiqueMigrationId
  from avenant
 where referenceContrat = '${CreerContrat#RefContrat}'</con:query>
          
          
          <con:assertion type="XPath Match" name="Commentaires Null"><con:configuration><path>not(//Row/AVENANT.COMMENTAIRE/text())
and
not(/Row/AVENANT.COMMENTAIREANNULATION/text())</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="Version = 0"><con:configuration><path>//Row/AVENANT.VERSION/text()</path><content>0</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="PolitiqueCession Null"><con:configuration><path>not(//Row/AVENANT.POLITIQUECESSIONID/text())</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="PolitiqueMigration Not Null"><con:configuration><path>exists(//Row/AVENANT.POLITIQUEMIGRATIONID/text())</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="TypeAvenant = Migration"><con:configuration><path>//Row/AVENANT.TYPEAVENANT/text()</path><content>MIGRATION</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="DateModification = NOW()" disabled="true"><con:configuration><path>//Row/DATEMODIFICATION/text()</path><content>${=new java.text.SimpleDateFormat("yyyy-MM-dd").format(new Date())}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/>
        </con:config>
      </con:testStep><con:testStep type="jdbc" name="Modifications" id="233f5e96-1d1a-4cbf-8a8b-6d91dec25ab8">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString>
          <con:query>select *
from modification
where avenantId = 
(select id
   from avenant
  where referenceContrat = '${CreerContrat#RefContrat}'
)</con:query>
          
          
          <con:assertion type="XPath Match" name="NumEC"><con:configuration><path>//Row/MODIFICATION.NUMEC/text()</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="TrameJSON Not Null"><con:configuration><path>exists(//Row/MODIFICATION.TRAMEJSON/text())</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/>
        </con:config>
      </con:testStep><con:testStep type="jdbc" name="Politique Migration" id="652502ea-4a75-4c7b-96c0-ff5159979865">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString>
          <con:query>select *
from politiquemigration
where id = 
(select politiquemigrationId 
   from avenant
  where referenceContrat = '${CreerContrat#RefContrat}'
)</con:query>
          
          
          <con:assertion type="XPath Match" name="Date Action" disabled="true"><con:configuration><path>//ResultSet/Row/POLITIQUEMIGRATION.DATEACTION</path><content>${=new java.text.SimpleDateFormat("yyyy-MM-dd").format(new Date())}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="FraisCreation"><con:configuration><path>//ResultSet/Row/POLITIQUEMIGRATION.FRAISCREATION</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="FraisMigration"><con:configuration><path>not(//ResultSet/Row/POLITIQUEMIGRATION.FRAISMIGRATION/text())</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="FraisResiliation"><con:configuration><path>//ResultSet/Row/POLITIQUEMIGRATION.FRAISRESILIATION</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="MontantFraisResiliation"><con:configuration><path>exists(//ResultSet/Row/POLITIQUEMIGRATION.MONTANTRESILIATION/text())</path><content>false</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="MontantRemboursement"><con:configuration><path>exists(//ResultSet/Row/POLITIQUEMIGRATION.MONTANTREMBOURSEMENT/text())</path><content>false</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="Pénalités"><con:configuration><path>//ResultSet/Row/POLITIQUEMIGRATION.PENALITE</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="Remboursement"><con:configuration><path>//ResultSet/Row/POLITIQUEMIGRATION.REMBOURSEMENT</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="Reduction Ancienne"><con:configuration><path>//ResultSet/Row/POLITIQUEMIGRATION.REDUCTIONANCIENNE/text()</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="User = Test"><con:configuration><path>//ResultSet/Row/POLITIQUEMIGRATION.USER/text()</path><content>test</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/>
        </con:config>
      </con:testStep><con:testStep type="jdbc" name="Contrat Migre" id="4ca25ba5-bb87-4b26-b627-8394b6df2d83">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString>
          <con:query>select *
from contrat
where reference = '${CreerContrat#RefContrat}'</con:query>
          
          <con:assertion type="XPath Match" name="Même titre"><con:configuration><path>//ResultSet/Row/CONTRAT.TITRE/text()</path><content>${InfosAncienContrat#Titre}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="PolitiqueValidationId différent de la précédente"><con:configuration><path>(//ResultSet/Row/CONTRAT.POLITIQUEVALIDATIONID/text())  != ${InfosAncienContrat#PolitiqueValidationId}</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="Même idClient"><con:configuration><path>//ResultSet/Row/CONTRAT.IDCLIENT/text()</path><content>${InfosAncienContrat#IdClient}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="No Resiliation"><con:configuration><path>not(//Row/CONTRAT.POLITIQUERESILIATIONID/text())
and
not(//Row/CONTRAT.TYPERESILIATION/text())
and
not(//Row/CONTRAT.DATEFINCONTRAT/text())</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="DatePreparation = DateValidation = NotNull" disabled="true"><con:configuration><path>//Row/CONTRAT.DATEPREPARATION/text() = //Row/CONTRAT.DATEVALIDATION/text()</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/>
        </con:config>
      </con:testStep><con:testStep type="delay" name="Wait for initiation Livraison" id="47e4e7c0-adfd-4c74-acd5-e3f106db01fd">
        <con:settings/>
        <con:config><delay>500</delay></con:config>
      </con:testStep><con:testStep type="jdbc" name="Bon de Migration - Initié" id="d9222308-9768-404f-9f31-c1de3993fbaf">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString>
          <con:query>select id, reference,
causenonlivraison,
date_format(dateinitiation, '%Y-%m-%d') as "dateInitiation",
datedebutPreparation,
dateLivraisonTermine,
dateretourtermine,
idClient, typebonpreparation
from bonpreparation 
where reference LIKE "${CreerContrat#RefContrat}%"
  and typeBonPreparation = 'MIGRATION'</con:query>
          
          
          
          
          <con:assertion type="XPath Match" name="1 seul résultat"><con:configuration><path>count(//Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="Date Initation = Now()" disabled="true"><con:configuration><path>//Row/DATEINITIATION/text()</path><content>${=new java.text.SimpleDateFormat("yyyy-MM-dd").format(new Date())}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="IdClient = 00003870"><con:configuration><path>//Row/BONPREPARATION.IDCLIENT/text()</path><content>00003870</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/>
        </con:config>
      </con:testStep><con:testStep type="jdbc" name="Elements de Migration - Initié" id="3c41e6d2-499f-4609-82b5-74850b9dd7fa">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString>
          <con:query>select * 
from elementlivraison 
where bonpreparationparent = 
  (select id
     from bonpreparation 
    where reference LIKE "${CreerContrat#RefContrat}%"
      and typeBonPreparation = 'MIGRATION')</con:query>
          
          
          
          <con:assertion type="XPath Match" name="EL Initié"><con:configuration><path>exists(//ResultSet/Row/ELEMENTLIVRAISON.DATEINITIATION/text())</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="NumEC"><con:configuration><path>//ResultSet/Row/ELEMENTLIVRAISON.NUMEC/text()</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="Reference"><con:configuration><path>//Row/ELEMENTLIVRAISON.REFERENCE/text()</path><content>${CreerContrat#RefContrat}-1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="AncienCodes Null"><con:configuration><path>not(//ResultSet/Row/ELEMENTLIVRAISON.ANCIENCODECOLIS/text())
or
not(//ResultSet/Row/ELEMENTLIVRAISON.ANCIENCODEPRODUIT/text())</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="Acteur = Pkger"><con:configuration><path>//ResultSet/Row/ELEMENTLIVRAISON.ACTEUR/text()</path><content>PACKAGER</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="TypeElmnt = Service"><con:configuration><path>//ResultSet/Row/ELEMENTLIVRAISON.ACTEUR/text()</path><content>PACKAGER</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="Reference Nouveau Produit = Antivirus.xl"><con:configuration><path>//ResultSet/Row/ELEMENTLIVRAISON.REFERENCEPRODUIT/text()</path><content>avfw.confort.xl</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="1 Element de Livraison"><con:configuration><path>count(//Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="Reference Ancien Produit = Antivirus.xl"><con:configuration><path>//ResultSet/Row/ELEMENTLIVRAISON.REFERENCEANCIENPRODUIT/text()</path><content>avfwpro-confort-s</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/>
        </con:config>
      </con:testStep><con:testStep type="delay" name="Wait for end Livraison" id="096586fb-0e3e-4ed9-859d-f5ae3bbb0a0d">
        <con:settings/>
        <con:config>
          <delay>500</delay>
        </con:config>
      </con:testStep><con:testStep type="jdbc" name="Bon de Migration - Témoin Livraison" id="12b02b78-8608-4bab-8e6a-b119de481f12">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString>
          <con:query>select * from bonpreparation 
where reference = "${CreerContrat#RefContrat}"
  and typeBonPreparation = 'MIGRATION'</con:query>
          <con:assertion type="XPath Match" name="Date Initiation" disabled="true">
            <con:configuration><path>exists(//Row/BONPREPARATION.DATEINITIATION/text())</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
          </con:assertion>
          
          <con:assertion type="XPath Match" name="Aucune Erreur de Livraison">
            <con:configuration><path>not(//ResultSet/Row/BONPREPARATION.CAUSENONLIVRAISON/text())</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
          </con:assertion>
          <con:properties/>
        </con:config>
      </con:testStep><con:testStep type="goto" name="Go End Livraison" id="8e82b7f4-1617-438a-a5d1-a4b5ade684e3">
        <con:settings/>
        <con:config xsi:type="con:GotoStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:condition>
            <con:name>Wait Facturation</con:name>
            <con:type>XPATH</con:type>
            <con:expression>not(//ResultSet/Row/BONPREPARATION.DATELIVRAISONTERMINE/text()) 
and
not(//ResultSet/Row/BONPREPARATION.CAUSENONLIVRAISON/text())</con:expression>
            <con:targetStep>Wait for end Livraison</con:targetStep>
          </con:condition>
        </con:config>
      </con:testStep><con:testStep type="jdbc" name="Elements de Migration - Livré" id="e45d3b2c-4c53-4d8b-a752-258a958c228e">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString>
          <con:query>select * 
from elementlivraison 
where bonpreparationparent = 
  (select id
     from bonpreparation 
    where reference LIKE "${CreerContrat#RefContrat}%"
      and typeBonPreparation = 'MIGRATION')</con:query>
          
          
          
          <con:assertion type="XPath Match" name="EM Livré"><con:configuration><path>not(//ResultSet/Row/ELEMENTLIVRAISON.CAUSENONLIVRAISON/text())
and
exists(//ResultSet/Row/ELEMENTLIVRAISON.DATELIVRAISONTERMINE/text())</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="NumEC"><con:configuration><path>//ResultSet/Row/ELEMENTLIVRAISON.NUMEC/text()</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="Reference"><con:configuration><path>//ResultSet/Row/ELEMENTLIVRAISON.REFERENCE/text()</path><content>${CreerContrat#RefContrat}-1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="AncienCodes Null"><con:configuration><path>not(//ResultSet/Row/ELEMENTLIVRAISON.ANCIENCODECOLIS/text())
or
not(//ResultSet/Row/ELEMENTLIVRAISON.ANCIENCODEPRODUIT/text())</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="Code Produit Not Null"><con:configuration><path>exists(//ResultSet/Row/ELEMENTLIVRAISON.RETAILERPACKAGERID/text())</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="Code Colis Null"><con:configuration><path>not(//ResultSet/Row/ELEMENTLIVRAISON.CODECOLIS/text())</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="TypeBonPreparation = Livraison"><con:configuration><path>//ResultSet/Row/ELEMENTLIVRAISON.TYPEBONPREPARATION/text()</path><content>MIGRATION</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="Acteur = Pkger"><con:configuration><path>//ResultSet/Row/ELEMENTLIVRAISON.ACTEUR/text()</path><content>PACKAGER</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="Reference Nouveau Produit = Antivirus.xl"><con:configuration><path>//ResultSet/Row/ELEMENTLIVRAISON.REFERENCEPRODUIT/text()</path><content>avfw.confort.xl</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="1 seul EM"><con:configuration><path>count(//Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="Reference Ancien Produit = Antivirus.l"><con:configuration><path>//ResultSet/Row/ELEMENTLIVRAISON.REFERENCEANCIENPRODUIT/text()</path><content>avfwpro-confort-s</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/>
        </con:config>
      </con:testStep><con:testStep type="jdbc" name="Bon de Migration - Livré" id="fb1e57f2-67e3-4d8e-b2ef-7b54730367a7">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString>
          <con:query>select *
 from bonpreparation 
 where reference LIKE "${CreerContrat#RefContrat}%"
   and typeBonPreparation = 'Livraison'</con:query>
          <con:assertion type="XPath Match" name="DateLivraisonTermine Not Null"><con:configuration><path>exists(//ResultSet/Row/BONPREPARATION.DATELIVRAISONTERMINE/text())</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="CauseNonLivraison Null"><con:configuration><path>not(//ResultSet/Row/BONPREPARATION.CAUSENONLIVRAISON/text())</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="IdClient"><con:configuration><path>//ResultSet/Row/BONPREPARATION.IDCLIENT</path><content>00003870</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="TypeBonPreparation = Livraison"><con:configuration><path>//ResultSet/Row/BONPREPARATION.TYPEBONPREPARATION</path><content>LIVRAISON</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="Dates Workflow"><con:configuration><path>exists(//ResultSet/Row/BONPREPARATION.DATEINITIATION/text())
and
exists(//ResultSet/Row/BONPREPARATION.DATEDEBUTPREPARATION/text())
and
exists(//ResultSet/Row/BONPREPARATION.DATEPREPARATION/text())</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="DateRetourTermine Null"><con:configuration><path>exists(//ResultSet/Row/BONPREPARATION.DATERETOURTERMINE/text())</path><content>false</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/>
        </con:config>
      </con:testStep><con:testStep type="delay" name="Wait for end Retour" id="32f8320d-3836-431a-9674-fb749800e8ed">
        <con:settings/>
        <con:config>
          <delay>500</delay>
        </con:config>
      </con:testStep><con:testStep type="jdbc" name="Bon de Migration - Témoin Retour" id="ab8b3ad0-ae3d-4987-8fbb-63ae2e941e5c">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString>
          <con:query>select * from bonpreparation 
where reference = "${CreerContrat#RefContrat}"
  and typeBonPreparation = 'MIGRATION'</con:query>
          <con:assertion type="XPath Match" name="Date Initiation">
            <con:configuration><path>exists(//Row/BONPREPARATION.DATEINITIATION/text())</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
          </con:assertion>
          
          <con:assertion type="XPath Match" name="Aucune Erreur de Livraison">
            <con:configuration><path>not(//ResultSet/Row/BONPREPARATION.CAUSENONLIVRAISON/text())</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
          </con:assertion>
          <con:properties/>
        </con:config>
      </con:testStep><con:testStep type="goto" name="Go End Retour" id="30011546-a02b-4836-bd0d-8e44ae700323">
        <con:settings/>
        <con:config xsi:type="con:GotoStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:condition>
            <con:name>Wait Facturation</con:name>
            <con:type>XPATH</con:type>
            <con:expression>not(//ResultSet/Row/BONPREPARATION.DATERETOURTERMINE/text()) 
and
not(//ResultSet/Row/BONPREPARATION.CAUSENONLIVRAISON/text())</con:expression>
            <con:targetStep>Wait for end Livraison</con:targetStep>
          </con:condition>
        </con:config>
      </con:testStep><con:testStep type="jdbc" name="Elements de Migration - Retourné" id="14aab6ff-a505-42de-b110-8326bf1c9ecb">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString>
          <con:query>select * 
from elementlivraison 
where bonpreparationparent = 
  (select id
     from bonpreparation 
    where reference LIKE "${CreerContrat#RefContrat}%"
      and typeBonPreparation = 'MIGRATION')</con:query>
          
          
          
          <con:assertion type="XPath Match" name="EM Retourné"><con:configuration><path>not(//ResultSet/Row/ELEMENTLIVRAISON.CAUSENONLIVRAISON/text())
and
exists(//ResultSet/Row/ELEMENTLIVRAISON.DATERETOURTERMINE/text())</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="NumEC"><con:configuration><path>//ResultSet/Row/ELEMENTLIVRAISON.NUMEC/text()</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="Reference"><con:configuration><path>//ResultSet/Row/ELEMENTLIVRAISON.REFERENCE/text()</path><content>${CreerContrat#RefContrat}-1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="AncienCodes Null"><con:configuration><path>not(//ResultSet/Row/ELEMENTLIVRAISON.ANCIENCODECOLIS/text())
or
not(//ResultSet/Row/ELEMENTLIVRAISON.ANCIENCODEPRODUIT/text())</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="Code Produit Not Null"><con:configuration><path>exists(//ResultSet/Row/ELEMENTLIVRAISON.RETAILERPACKAGERID/text())</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="Code Colis Null"><con:configuration><path>not(//ResultSet/Row/ELEMENTLIVRAISON.CODECOLIS/text())</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="TypeBonPreparation = Livraison"><con:configuration><path>//ResultSet/Row/ELEMENTLIVRAISON.TYPEBONPREPARATION/text()</path><content>MIGRATION</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="Acteur = Pkger"><con:configuration><path>//ResultSet/Row/ELEMENTLIVRAISON.ACTEUR/text()</path><content>PACKAGER</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="Reference Nouveau Produit = Antivirus.xl"><con:configuration><path>//ResultSet/Row/ELEMENTLIVRAISON.REFERENCEPRODUIT/text()</path><content>avfw.confort.xl</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="1 seul EM"><con:configuration><path>count(//Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="Reference Ancien Produit = Antivirus.l"><con:configuration><path>//ResultSet/Row/ELEMENTLIVRAISON.REFERENCEANCIENPRODUIT/text()</path><content>avfwpro-confort-s</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/>
        </con:config>
      </con:testStep><con:testStep type="jdbc" name="Bon de Migration - Retourné" id="a96a1729-1f1e-42eb-aa01-44a5a256da77">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString>
          <con:query>select *
 from bonpreparation 
 where reference LIKE "${CreerContrat#RefContrat}%"
   and typeBonPreparation = 'LIVRAISON'</con:query>
          <con:assertion type="XPath Match" name="DateLivraisonTermine Not Null"><con:configuration><path>exists(//ResultSet/Row/BONPREPARATION.DATELIVRAISONTERMINE/text())</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="CauseNonLivraison Null"><con:configuration><path>not(//ResultSet/Row/BONPREPARATION.CAUSENONLIVRAISON/text())</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="IdClient"><con:configuration><path>//ResultSet/Row/BONPREPARATION.IDCLIENT</path><content>00003870</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="TypeBonPreparation = Livraison"><con:configuration><path>//ResultSet/Row/BONPREPARATION.TYPEBONPREPARATION</path><content>LIVRAISON</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="Dates Workflow"><con:configuration><path>exists(//ResultSet/Row/BONPREPARATION.DATEINITIATION/text())
and
exists(//ResultSet/Row/BONPREPARATION.DATEDEBUTPREPARATION/text())
and
exists(//ResultSet/Row/BONPREPARATION.DATEPREPARATION/text())</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="DateRetourTermine Null"><con:configuration><path>exists(//ResultSet/Row/BONPREPARATION.DATERETOURTERMINE/text())</path><content>false</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/>
        </con:config>
      </con:testStep><con:testStep type="delay" name="Wait for end Facturation" id="c323663f-ce1b-45ff-82e5-b92341121d4c" disabled="true">
        <con:settings/>
        <con:config>
          <delay>500</delay>
        </con:config>
      </con:testStep><con:testStep type="jdbc" name="Facturation-exists" id="c6425a54-6594-4cda-9d31-29b9c6858eab" disabled="true">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.100.105.41:3306/test_saphir?user=test&amp;password=test</con:connectionString>
          <con:query>select * from movement 
where accountId = '00003870'
  and productId = 'avfwpro-confort-s'
  and minute(timediff(now(), create_date)) &lt; 1
  and id IN (
  	select movement_idFK 
  	  from movement_appendix_item 
  	 where productReferenceId = '${CreerContrat#RefContrat}'
  )
;</con:query>
          <con:properties/>
        </con:config>
      </con:testStep><con:testStep type="goto" name="Go Facturation" id="0b2efe1b-34df-4dec-a1d8-27180900f496" disabled="true">
        <con:settings/>
        <con:config xsi:type="con:GotoStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:condition>
            <con:name>Wait Facturation</con:name>
            <con:type>XPATH</con:type>
            <con:expression>not(//Results/ResultSet/Row/MOVEMENT.ID/text())</con:expression>
            <con:targetStep>Wait for end Facturation</con:targetStep>
          </con:condition>
        </con:config>
      </con:testStep><con:testStep type="jdbc" name="Facturation-valid" id="1db40e4f-d85b-4c59-baae-26e850180f90" disabled="true">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.100.105.41:3306/test_saphir?user=test&amp;password=test</con:connectionString>
          <con:query>select * from movement 
where accountId = '00003870'
  and productId = 'avfwpro-confort-s'
  and minute(timediff(now(), create_date)) &lt; 1
  and id IN (
  	select movement_idFK 
  	  from movement_appendix_item 
  	 where productReferenceId = '${CreerContrat#RefContrat}'
  )
;</con:query>
          
          
          
          
          
          <con:assertion type="XPath Match" name="Au moins 1 mouvement"><con:configuration><path>count(//Row) > 0</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/>
        </con:config>
      </con:testStep><con:properties/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Resiliation" searchProperties="true" id="1c6d53ae-e49d-47fe-9f67-6fed34e1ff45">
      <con:settings/>
      
      <con:testStep type="calltestcase" name="CreerContrat">
        <con:settings/>
        <con:config xsi:type="con:RunTestCaseStep" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:targetTestCase>c3134394-ecff-433e-9aed-7a7b112617c3</con:targetTestCase>
          <con:properties>
            <con:property>
              <con:name>RefCommande</con:name>
              <con:value>062033a1-6e6e-43b1-b656-ac0fa1e34ea5</con:value>
            </con:property>
            <con:property>
              <con:name>RefContrat</con:name>
              <con:value>00000365</con:value>
            </con:property>
          </con:properties>
          <con:returnProperties>
            <con:entry>RefCommande</con:entry>
            <con:entry>RefContrat</con:entry>
          </con:returnProperties>
          <con:runMode>SINGLETON_AND_WAIT</con:runMode>
        </con:config>
      </con:testStep>
      <con:testStep type="restrequest" name="Resilier Contrat">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/{refContrat}/resilier" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="Resilier Contrat" mediaType="application/json" postQueryString="false">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{
  "user": "test",
  "politiqueResiliation": {
    "fraisResiliation": "true",
    "montantResiliation": "",
    "typeResiliation": "RIC",
    "remboursement": "true",
    "montantRemboursement": "",
    "penalite": "true",
    "commentaire": "this is a test"
  }
}</con:request>
            <con:originalUri>http://10.10.2.52/contrat-core/contrat/c793a745/resilier</con:originalUri><con:assertion type="Valid HTTP Status Codes" name="Code Retour 200" id="20b95fed-f66f-4685-bce1-6e0a1d92ffad">
              <con:configuration>
                <codes>200</codes>
              </con:configuration>
            </con:assertion>
            <con:assertion type="GroovyScriptAssertion" name="Response must be empty" id="6ca1ddfa-7b0f-48d8-b5fa-1642229ad752">
              <con:configuration><scriptText>assert messageExchange.hasResponse() == false</scriptText></con:configuration>
            </con:assertion>
            <con:credentials>
              <con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters>
              <entry key="refContrat" value="${CreerContrat#RefContrat}" xmlns="http://eviware.com/soapui/config"/>
            </con:parameters>
          </con:restRequest>
        </con:config>
      </con:testStep>
      <con:testStep type="jdbc" name="Politique Resiliation">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString>
          <con:query>select * 
from politiqueresiliation 
where id = 
  (select politiqueResiliationId 
     from contrat 
    where reference = "${CreerContrat#RefContrat}")</con:query>
          <con:assertion type="Simple Contains" name="Commentaire">
            <con:configuration>
              <token>&lt;POLITIQUERESILIATION.COMMENTAIRE>this is a test&lt;/POLITIQUERESILIATION.COMMENTAIRE></token>
              <ignoreCase>false</ignoreCase>
              <useRegEx>false</useRegEx>
            </con:configuration>
          </con:assertion>
          <con:assertion type="Simple Contains" name="Cascade=True">
            <con:configuration>
              <token>&lt;POLITIQUERESILIATION.ENCASCADE>1&lt;/POLITIQUERESILIATION.ENCASCADE></token>
              <ignoreCase>false</ignoreCase>
              <useRegEx>false</useRegEx>
            </con:configuration>
          </con:assertion>
          <con:properties/>
        </con:config>
      </con:testStep>
      <con:testStep type="jdbc" name="Contrat Resilie">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString>
          <con:query>select *
from contrat c 
where c.reference = "${CreerContrat#RefContrat}"</con:query>
          
          <con:assertion type="XPath Match" name="DateFin = Now()" disabled="true"><con:configuration><path>starts-with(//Row/CONTRAT.DATEFINCONTRAT/text(), '${=new java.text.SimpleDateFormat("yyyy-MM-dd").format(new Date())}')</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/>
        </con:config>
      </con:testStep>
      <con:testStep type="jdbc" name="EC Resilie">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString>
          <con:query>select *
from elementcontractuel c 
where c.contratParent=(select id from contrat
where reference LIKE "${CreerContrat#RefContrat}%")</con:query>
          <con:assertion type="XQuery Match" name="Date Fin Contrat = Now()" disabled="true">
            <con:configuration><path>&lt;Results> 
{ 
  for $x in //Row 
  where starts-with($x/ELEMENTCONTRACTUEL.DATEFINCONTRAT/text(), '${=new java.text.SimpleDateFormat("yyyy-MM-dd").format(new Date())}')
  return &lt;result>{exists($x/ELEMENTCONTRACTUEL.DATEFINCONTRAT/text())}&lt;/result> 
}
&lt;/Results></path><content>&lt;Results>
  &lt;result>true&lt;/result>
&lt;/Results>
</content><allowWildcards>false</allowWildcards></con:configuration>
          </con:assertion>
          <con:properties/>
        </con:config>
      </con:testStep>
      <con:testStep type="delay" name="Wait for beginning Retour">
        <con:settings/>
        <con:config>
          <delay>500</delay>
        </con:config>
      </con:testStep>
      <con:testStep type="jdbc" name="Bon de Retour - Initié">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString>
          <con:query>select *
from bonpreparation 
where reference = "${CreerContrat#RefContrat}"
  and typebonpreparation = "RETOUR"</con:query>
          
          
          
          <con:assertion type="XPath Match" name="Date Initiation = Now()" disabled="true"><con:configuration><path>starts-with(//Row/BONPREPARATION.DATEINITIATION/text(), '${=new java.text.SimpleDateFormat("yyyy-MM-dd").format(new Date())}')</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="IdClient = 00003870"><con:configuration><path>//Row/BONPREPARATION.IDCLIENT/text()</path><content>00003870</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/>
        </con:config>
      </con:testStep>
      <con:testStep type="jdbc" name="EL de retour - Initié">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString>
          <con:query>select * 
from elementlivraison 
where bonPreparationParent = 
 (select id
   from bonpreparation 
   where reference = "${CreerContrat#RefContrat}"
     and typebonpreparation = "retour")</con:query>
          <con:assertion type="XPath Match" name="1 seul ER"><con:configuration><path>count(//Row)</path><content>3</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XQuery Match" name="TypeEL=Retour">
            <con:configuration><path>&lt;Results> 
{ 
 for $x in //Row 
 return &lt;Result>{$x/ELEMENTLIVRAISON.TYPEBONPREPARATION/text()}&lt;/Result> 
} 
&lt;/Results></path><content><![CDATA[<Results>
  <Result>RETOUR</Result>
  <Result>RETOUR</Result>
  <Result>RETOUR</Result>
</Results>]]></content><allowWildcards>false</allowWildcards></con:configuration>
          </con:assertion>
          <con:assertion type="XQuery Match" name="Acteurs=Packager">
            <con:configuration><path>&lt;Results> 
{ 
 for $x in //Row 
 order by $x/ELEMENTLIVRAISON.TYPECONTRAT 
 return &lt;result>{$x/ELEMENTLIVRAISON.ACTEUR/text()}&lt;/result> 
} 
&lt;/Results></path><content><![CDATA[<Results>
  <result>PACKAGER</result>
  <result>PACKAGER</result>
  <result>NETRETOUR</result>
</Results>]]></content><allowWildcards>false</allowWildcards></con:configuration>
          </con:assertion>
          <con:assertion type="XPath Match" name="1 seul code Produit">
            <con:configuration><path>count(//Row[ELEMENTLIVRAISON.TYPECONTRAT="ABONNEMENT"]/ELEMENTLIVRAISON.RETAILERPACKAGERID/text())</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
          </con:assertion>
          <con:assertion type="XQuery Match" name="0 code Colis">
            <con:configuration><path>count(//Row[ELEMENTLIVRAISON.TYPECONTRAT="LOCATION"]/ELEMENTLIVRAISON.CODECOLIS/text())</path><content>&lt;xml-fragment>1&lt;/xml-fragment></content><allowWildcards>false</allowWildcards></con:configuration>
          </con:assertion>
          <con:properties/>
        </con:config>
      </con:testStep>
      <con:testStep type="delay" name="Wait for end Retour">
        <con:settings/>
        <con:config><delay>500</delay></con:config>
      </con:testStep>
      <con:testStep type="jdbc" name="Bon de Retour - Témoin">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString>
          <con:query>select id, reference,
causenonlivraison,
date_format(dateinitiation, '%Y-%m-%d') as "datefinContrat",
datedebutPreparation,
dateretourtermine,
idClient, typebonpreparation
from bonpreparation 
where reference = "${CreerContrat#RefContrat}" and typebonpreparation="RETOUR"</con:query>
          
          
          
          <con:properties/>
        </con:config>
      </con:testStep><con:testStep type="goto" name="Go End Retour">
        <con:settings/>
        <con:config xsi:type="con:GotoStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:condition>
            <con:name>Wait Facturation</con:name>
            <con:type>XPATH</con:type>
            <con:expression>not(//Results/ResultSet/Row/BONPREPARATION.DATERETOURTERMINE/text())
and
not(//Results/ResultSet/Row/BONPREPARATION.CAUSENONLIVRAISON/text())</con:expression>
            <con:targetStep>Wait for end Retour</con:targetStep>
          </con:condition>
        </con:config>
      </con:testStep><con:testStep type="jdbc" name="Bon de Retour - Retourné">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString>
          <con:query>select *
from bonpreparation 
where reference = "${CreerContrat#RefContrat}" </con:query>
          
          
          
          <con:assertion type="XPath Match" name="Date Initiation"><con:configuration><path>exists(//ResultSet/Row/BONPREPARATION.DATEINITIATION/text())</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="Date Retour" disabled="true"><con:configuration><path>starts-with(//Row/BONPREPARATION.DATERETOUR/text(), '${=new java.text.SimpleDateFormat("yyyy-MM-dd").format(new Date())}')</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="Type Bon = Retour"><con:configuration><path>//Row/BONPREPARATION.TYPEBONPREPARATION/text()</path><content>RETOUR</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="IdClient = 00003870"><con:configuration><path>//Row/BONPREPARATION.IDCLIENT/text()</path><content>00003870</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/>
        </con:config>
      </con:testStep><con:testStep type="jdbc" name="EL de retour - Retourné">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString>
          <con:query>select * 
from elementlivraison 
where bonPreparationParent = 
 (select id
   from bonpreparation 
   where reference = "${CreerContrat#RefContrat}"
     and typebonpreparation = "retour")
order by reference</con:query>
          
          <con:assertion type="XPath Match" name="1 seule ligne"><con:configuration><path>count(//Row)</path><content>3</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="1 seul Code Produit">
            <con:configuration><path>count(//Row[ELEMENTLIVRAISON.TYPECONTRAT="ABONNEMENT"]/ELEMENTLIVRAISON.RETAILERPACKAGERID/text())</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
          </con:assertion>
          <con:assertion type="XQuery Match" name="0 Code Colis">
            <con:configuration><path>count(//Row[ELEMENTLIVRAISON.TYPECONTRAT="LOCATION"]/ELEMENTLIVRAISON.CODECOLIS/text())</path><content>&lt;xml-fragment>1&lt;/xml-fragment></content><allowWildcards>false</allowWildcards></con:configuration>
          </con:assertion>
          <con:assertion type="XQuery Match" name="Tous les éléments retournés"><con:configuration><path>&lt;Results>
{
  for $x in //Row
  return &lt;result>{exists($x/ELEMENTLIVRAISON.DATERETOURTERMINE/text())}&lt;/result>
}
&lt;/Results></path><content><![CDATA[<Results>
  <result>true</result>
  <result>true</result>
  <result>true</result>
</Results>]]></content><allowWildcards>false</allowWildcards></con:configuration></con:assertion><con:assertion type="XQuery Match" name="NumEC" disabled="true"><con:configuration><path>&lt;Results>
{
  for $x in //Row
  order by reference
  return &lt;result>{$x/ELEMENTLIVRAISON.NUMEC/text()}&lt;/result>
}
&lt;/Results></path><content><![CDATA[<Results>
  <result>1</result>
  <result>2</result>
  <result>3</result>
</Results>]]></content><allowWildcards>false</allowWildcards></con:configuration></con:assertion><con:assertion type="XQuery Match" name="Resiliation Partielle = 0"><con:configuration><path>&lt;Results>
{
  for $x in //Row
  order by reference
  return &lt;result>{$x/ELEMENTLIVRAISON.RESILIATIONPARTIEL/text()}&lt;/result>
}
&lt;/Results></path><content><![CDATA[<Results>
  <result>0</result>
  <result>0</result>
  <result>0</result>
</Results>]]></content><allowWildcards>false</allowWildcards></con:configuration></con:assertion><con:assertion type="XQuery Match" name="Acteur = Packager"><con:configuration><path>&lt;Results> 
{ 
 for $x in //Row 
 order by $x/ELEMENTLIVRAISON.TYPECONTRAT 
 return &lt;result>{$x/ELEMENTLIVRAISON.ACTEUR/text()}&lt;/result> 
} 
&lt;/Results></path><content><![CDATA[<Results>
  <result>PACKAGER</result>
  <result>PACKAGER</result>
  <result>NETRETOUR</result>
</Results>]]></content><allowWildcards>false</allowWildcards></con:configuration></con:assertion><con:properties/>
        </con:config>
      </con:testStep><con:testStep type="transfer" name="Transfert Date Retour">
        <con:settings/>
        <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false">
            <con:name>DateLivraison</con:name>
            <con:sourceType>ResponseAsXml</con:sourceType>
            <con:sourceStep>EL de retour - Retourné</con:sourceStep>
            <con:sourcePath>//Results/ResultSet/Row/BONPREPARATION.DATETERMINE/text()</con:sourcePath>
            <con:targetType>DateLivraison</con:targetType>
            <con:targetStep>InfosFacture</con:targetStep>
          </con:transfers>
        </con:config>
      </con:testStep><con:testStep type="properties" name="InfosFacture">
        <con:settings/>
        <con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:properties>
            <con:property>
              <con:name>DateLivraison</con:name>
              <con:value xsi:nil="true"/>
            </con:property>
          </con:properties>
        </con:config>
      </con:testStep><con:testStep type="groovy" name="Nb Passes = 0">
        <con:settings/>
        <con:config><script>int passe = 0 
testRunner.testCase.setPropertyValue("NbPasses", passe.toString())</script></con:config>
      </con:testStep><con:testStep type="delay" name="Wait for end Facturation" disabled="true">
        <con:settings/>
        <con:config>
          <delay>500</delay>
        </con:config>
      </con:testStep><con:testStep type="groovy" name="Nb Passes +1" disabled="true">
        <con:settings/>
        <con:config><script>int passe = testRunner.testCase.getPropertyValue("NbPasses").toInteger() 
passe = passe + 1
testRunner.testCase.setPropertyValue("NbPasses", passe.toString())</script></con:config>
      </con:testStep><con:testStep type="jdbc" name="Facturation-exists" disabled="true">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.100.105.41:3306/test_saphir?user=test&amp;password=test</con:connectionString>
          <con:query>select * from movement 
where accountId = '00003870' 
and billinggroup ="${CreerContrat#RefCommande}" 
and productid NOT LIKE '%/Frais/Creation';</con:query>
          <con:properties/>
        </con:config>
      </con:testStep><con:testStep type="goto" name="Go Facturation" disabled="true">
        <con:settings/>
        <con:config xsi:type="con:GotoStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:condition>
            <con:name>Wait Facturation</con:name>
            <con:type>XPATH</con:type>
            <con:expression>not(//Results/ResultSet/Row/MOVEMENT.ID/text())
and
${#TestCase#NbPasses} &lt; 6
</con:expression>
            <con:targetStep>Wait for end Facturation</con:targetStep>
          </con:condition>
        </con:config>
      </con:testStep><con:testStep type="jdbc" name="Facturation-valid" disabled="true">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.100.105.41:3306/test_saphir?user=test&amp;password=test</con:connectionString>
          <con:query>select * 
  from movement 
 where id IN (
  	select movement_idFK 
  	  from movement_appendix_item 
  	 where productReferenceId = '${CreerContrat#RefContrat}'
  )
;</con:query>
          <con:assertion type="XQuery Match" name="Frais de Résiliation">
            <con:configuration><path><![CDATA[<Results>
{
for $x in //Row[contains(MOVEMENT.PRODUCTID/text(), 'Frais/Resiliation')]
return 
<result>
   <label>{$x/MOVEMENT.PRODUCTLABEL/text()}</label>
   <productId>{$x/MOVEMENT.PRODUCTID/text()}</productId>
   <amount>{$x/MOVEMENT.AMOUNT/text()}</amount>
</result>
}
</Results>]]></path><content><![CDATA[<Results>
<result>
<label></label>
<productId></productId>
<amount></amount>
<result>
</Results>]]></content><allowWildcards>false</allowWildcards></con:configuration>
          </con:assertion>
          
          
          
          <con:assertion type="XQuery Match" name="Frais de Résiliation - Period">
            <con:configuration><path>&lt;Results> 
{ 
  for $x in //Row[contains(MOVEMENT.PRODUCTID/text(), 'Frais/Resiliation')] 
  return &lt;result>{$x/MOVEMENT.STARTFROM} {$x/MOVEMENT.ENDTO}&lt;/result> 
} 
&lt;/Results></path><content><![CDATA[ <Results>
  <result>
    <MOVEMENT.STARTFROM>${=new java.text.SimpleDateFormat("yyyy-MM-dd HH:mm:ss.S").parse('${InfosFacture#DateLivraison}').format('yyyy-MM-dd')}</MOVEMENT.STARTFROM>
    <MOVEMENT.ENDTO>${=new java.text.SimpleDateFormat("yyyy-MM-dd HH:mm:ss.S").parse('${InfosFacture#DateLivraison}').format('yyyy-MM-dd')}</MOVEMENT.ENDTO>
  </result>
</Results>
]]></content><allowWildcards>false</allowWildcards></con:configuration>
          </con:assertion>
          <con:properties/>
        </con:config>
      </con:testStep><con:properties><con:property><con:name>NbPasses</con:name><con:value>0</con:value></con:property></con:properties>
    </con:testCase><con:properties/></con:testSuite>
  
  <con:testSuite name="Error Champs Obligatoires + Tests de base" id="b17e60ef-d58b-4cdf-ac39-0f11bf0538ed">
    <con:description>TestSuite generated for REST Service [http://10.10.2.52:8080]</con:description>
    <con:settings/>
    <con:runType>SEQUENTIAL</con:runType>
    <con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Preparation Champs Obligatoires" searchProperties="true" id="0229c34c-a6e2-45b0-a1aa-9d0f33f08234" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="">
      <con:description>TestCase generated for REST Resource [Preparation] located at
      [/contrat-core/contrat/preparer]</con:description>
      <con:settings/>
      <con:testStep type="restrequest" name="Sans User" id="3e05bb5c-c1e4-4daa-b525-e791bba28e5c">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/preparer" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="Sans User" mediaType="application/json" postQueryString="false" id="01ddc01d-d8f6-43f9-ac4f-bda76da58129">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{
  "user": "",
  "produits": [
    {
      "reference": "option.plus.50g",
      "numEC": "2",
      "numeroCommande": "12345",
      "label": "Option+ 50Go",
      "typeProduit": "SERVICE",
      "prix": {
        "periodicite": 1,
        "typeTVA": "R",
        "montant": "50",
        "frais": [
          {
            "montant": "50",
            "typeFrais": "resiliation",
            "nombreMois": "12",
            "ordre": 1
          },
          {
            "montant": "30",
            "typeFrais": "resiliation",
            "ordre": 2
          }
        ],
        "modePaiement": "CB",
        "modeFacturation": "PREMIER_MOIS"
      }
    }
  ]
}</con:request>
            <con:originalUri>http://10.10.2.52/contrat-core/contrat/preparer</con:originalUri><con:assertion type="XPath Match" name="Error Code" id="eab8f9d0-d4e3-4879-aec7-122a2d1178c0">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/preparer'; 
//ns1:errorCode</path><content>1.1.91</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="URL" id="8e299a47-1344-4dbc-8de9-3b4ebde0ca54">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/preparer'; 
//ns1:url</path><content>/contrat-core/contrat/preparer</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="Error Message" id="854a3c31-025a-4116-92fb-9bce6524a0a1">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/preparer'; 
//ns1:errorMessage</path><content>L'element user est obligatoire.</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
            <con:assertion type="Invalid HTTP Status Codes" name="Error Code 500" disabled="true" id="097988b7-237f-4308-a37d-f91fa35a89f3">
              <con:configuration>
                <codes>500</codes>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters/>
          </con:restRequest>
        </con:config>
      </con:testStep>
      <con:testStep type="restrequest" name="Sans Produit" id="a2d954c8-b244-4fa4-8909-38f0b7569d13">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/preparer" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="Sans Produit" mediaType="application/json" postQueryString="false" id="01ddc01d-d8f6-43f9-ac4f-bda76da58129">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{
  "user": "test",
  "produits": []
}</con:request>
            <con:originalUri>http://10.10.2.52/contrat-core/contrat/preparer</con:originalUri><con:assertion type="XPath Match" name="URL" id="eb450454-bf51-48b5-b0ca-ecdbfee811d5">
              <con:configuration>
                <path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/preparer'; //ns1:url</path>
                <content>/contrat-core/contrat/preparer</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
                <ignoreComments>false</ignoreComments>
              </con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="Error Code" id="4d91276d-8024-4eec-b68f-8d7500652991">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/preparer'; //ns1:errorCode</path><content>1.1.93</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="Error Message" id="df90eaf6-e5a7-470a-9242-8fb9cd970dbf">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/preparer'; 
//ns1:errorMessage</path><content>Liste des produits est vide.</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
            <con:assertion type="Invalid HTTP Status Codes" name="Code HTTP 500" disabled="true" id="777bb649-e1a4-43ad-a983-50d342ba27ae">
              <con:configuration>
                <codes>500</codes>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters/>
          </con:restRequest>
        </con:config>
      </con:testStep>
      <con:testStep type="restrequest" name="Sans Numéro de Commande" id="23b4eb9d-4531-436d-b587-b1ca2db9cc7d">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/preparer" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="Sans Numéro de Commande" mediaType="application/json" postQueryString="false" id="01ddc01d-d8f6-43f9-ac4f-bda76da58129">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{
  "user": "test",
  "produits": [
    {
      "reference": "jet",
      "numEC": "1",
      "label": "Abonnement jet 10Go",
      "typeProduit": "SERVICE",
      "prix": {
        "periodicite": "1",
        "typeTVA": "R",
        "montant": "30",
        "frais": [
          {
            "montant": "30",
            "typeFrais": "creation"
          }
        ],
        "modePaiement": "SEPA",
        "modeFacturation": "PREMIER_MOIS"
      }
    }
  ]
}</con:request>
            <con:originalUri>http://10.10.2.52/contrat-core/contrat/preparer</con:originalUri><con:assertion type="XPath Match" name="Error Code" id="48a613a4-3864-4463-8304-2c74debdd3c2">
              <con:configuration>
                <path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/preparer'; //ns1:errorCode</path>
                <content>0.1.1</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
                <ignoreComments>false</ignoreComments>
              </con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="URL" id="448a7ed4-1ad6-4467-a0db-a2af906f3d15">
              <con:configuration>
                <path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/preparer'; //ns1:url</path>
                <content>/contrat-core/contrat/preparer</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
                <ignoreComments>false</ignoreComments>
              </con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorMessage" id="46f3d505-31c8-48f5-bc9a-1b7af9a9fe5c">
              <con:configuration>
                <path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/preparer'; //ns1:errorMessage</path>
                <content>un des paramÃ¨tres est mal formatÃ© : Produit.numeroCommande.</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
                <ignoreComments>false</ignoreComments>
              </con:configuration>
            </con:assertion>
			<con:assertion type="Invalid HTTP Status Codes" name="Code HTTP 500" disabled="true" id="f5f059c6-06e2-436c-9e33-701a5bac2e41">
              <con:configuration>
                <codes>500</codes>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters/>
          </con:restRequest>
        </con:config>
      </con:testStep>
      <con:testStep type="restrequest" name="Sans Label" id="1ffa8b31-a7a8-446b-8dac-052dced777dd">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/preparer" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="Sans Label" mediaType="application/json" postQueryString="false" id="01ddc01d-d8f6-43f9-ac4f-bda76da58129">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{
  "user": "test",
  "produits": [
    {
      "reference": "jet",
      "numEC": "1",
      "numeroCommande": "12345",
      "typeProduit": "SERVICE",
      "prix": {
        "periodicite": "1",
        "typeTVA": "R",
        "montant": "30",
        "frais": [
          {
            "montant": "30",
            "typeFrais": "creation"
          }
        ],
        "modePaiement": "SEPA",
        "modeFacturation": "PREMIER_MOIS"
      }
    }
  ]
}</con:request>
            <con:originalUri>http://10.10.2.52/contrat-core/contrat/preparer</con:originalUri><con:assertion type="XPath Match" name="Error Code" id="a81b0857-509b-49a9-9b71-d6ada5cba3e4">
              <con:configuration>
                <path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/preparer'; //ns1:errorCode</path>
                <content>0.1.1</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
                <ignoreComments>false</ignoreComments>
              </con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="URL" id="9a3dc42a-ecd8-4fe5-93ce-3a047d4299eb">
              <con:configuration>
                <path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/preparer'; //ns1:url</path>
                <content>/contrat-core/contrat/preparer</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
                <ignoreComments>false</ignoreComments>
              </con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorMessage" id="892df2bc-c08b-4218-88b5-c157f2784d67">
              <con:configuration>
                <path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/preparer'; //ns1:errorMessage</path>
                <content>un des paramÃ¨tres est mal formatÃ© : Produit.label.</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
                <ignoreComments>false</ignoreComments>
              </con:configuration>
            </con:assertion>
			<con:assertion type="Invalid HTTP Status Codes" name="Code HTTP 500" disabled="true" id="ac00f391-eedd-4fd9-b246-0ef4f7697e1f">
              <con:configuration>
                <codes>500</codes>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters/>
          </con:restRequest>
        </con:config>
      </con:testStep>
      <con:testStep type="restrequest" name="Sans TypeProduit" id="a21e9578-49c0-4a60-9732-4685541fd007">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/preparer" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="Sans TypeProduit" mediaType="application/json" postQueryString="false" id="01ddc01d-d8f6-43f9-ac4f-bda76da58129">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{
  "user": "test",
  "produits": [
    {
      "reference": "jet",
      "numEC": "1",
      "label": "Abonnement jet 10Go",
      "numeroCommande": "12345",
      "prix": {
        "periodicite": "1",
        "typeTVA": "R",
        "montant": "30",
        "frais": [
          {
            "montant": "30",
            "typeFrais": "creation"
          }
        ],
        "modePaiement": "SEPA",
        "modeFacturation": "PREMIER_MOIS"
      }
    }
  ]
}</con:request>
            <con:originalUri>http://10.10.2.52/contrat-core/contrat/preparer</con:originalUri><con:assertion type="XPath Match" name="Error Code" id="dcc9f3ab-457a-4b1d-bddb-fd08f6af45be">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/preparer'; //ns1:errorCode</path><content>0.1.11</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="URL" id="639be43c-a8f6-4e68-84e1-da8d8c5682d7">
              <con:configuration>
                <path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/preparer'; //ns1:url</path>
                <content>/contrat-core/contrat/preparer</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
                <ignoreComments>false</ignoreComments>
              </con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorMessage" id="407ab3c4-cd0c-4576-b399-2bb1725b9f44">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/preparer'; 
//ns1:errorMessage</path><content>Le Produit.typeProduit ne peut valoir que [BIEN, SERVICE].</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
			<con:assertion type="Invalid HTTP Status Codes" name="Code HTTP 500" disabled="true" id="69aaff88-0aff-4dba-b8da-78bbcb4c1cd8">
              <con:configuration>
                <codes>500</codes>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters/>
          </con:restRequest>
        </con:config>
      </con:testStep>
      
      <con:testStep type="restrequest" name="Sans Prix.Montant" id="69aa1d42-bf17-46a0-b569-8c87e876d4c4">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/preparer" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="Sans Prix.Montant" mediaType="application/json" postQueryString="false" id="01ddc01d-d8f6-43f9-ac4f-bda76da58129">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{
  "user": "test",
  "produits": [
    {
      "reference": "jet",
      "numEC": "1",
      "label": "Abonnement jet 10Go",
      "numeroCommande": "12345",
      "typeProduit": "SERVICE",
      "prix": {
        "periodicite": "1",
        "typeTVA": "R",
        "frais": [
          {
            "montant": "30",
            "typeFrais": "creation"
          }
        ],
        "modePaiement": "SEPA",
        "modeFacturation": "PREMIER_MOIS"
      }
    }
  ]
}</con:request>
            <con:originalUri>http://10.10.2.52/contrat-core/contrat/preparer</con:originalUri><con:assertion type="XPath Match" name="Error Code" id="c76f9ba5-23fd-44d4-aaaf-7e175a272e76">
              <con:configuration>
                <path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/preparer'; //ns1:errorCode</path>
                <content>0.1.1</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
                <ignoreComments>false</ignoreComments>
              </con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="URL" id="58b00038-51ba-400c-af86-302c62d5455d">
              <con:configuration>
                <path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/preparer'; //ns1:url</path>
                <content>/contrat-core/contrat/preparer</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
                <ignoreComments>false</ignoreComments>
              </con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorMessage" id="3efa2b7c-c846-4fb2-8f2a-fb247d7b5ab9">
              <con:configuration>
                <path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/preparer'; //ns1:errorMessage</path>
                <content>un des paramÃ¨tres est mal formatÃ© : Prix.montant.</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
                <ignoreComments>false</ignoreComments>
              </con:configuration>
            </con:assertion>
			<con:assertion type="Invalid HTTP Status Codes" name="Code HTTP 500" disabled="true" id="dad56a93-10c0-46bf-b591-6cddd0f71de0">
              <con:configuration>
                <codes>500</codes>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters/>
          </con:restRequest>
        </con:config>
      </con:testStep>
      
      <con:testStep type="restrequest" name="Sans Prix.typeTVA" id="3c197990-1f46-41ca-9856-9c38aa98a26a">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/preparer" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="Sans Prix.typeTVA" mediaType="application/json" postQueryString="false" id="01ddc01d-d8f6-43f9-ac4f-bda76da58129">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{
  "user": "test",
  "produits": [
    {
      "reference": "jet",
      "numEC": "1",
      "label": "Abonnement jet 10Go",
      "numeroCommande": "12345",
      "typeProduit": "SERVICE",
      "prix": {
        "periodicite": "1",
        "montant": "30",
        "frais": [
          {
            "montant": "30",
            "typeFrais": "creation"
          }
        ],
        "modePaiement": "SEPA",
        "modeFacturation": "PREMIER_MOIS"
      }
    }
  ]
}</con:request>
            <con:originalUri>http://10.10.2.52/contrat-core/contrat/preparer</con:originalUri><con:assertion type="XPath Match" name="Error Code" id="f16fcfca-a8db-44d4-93a8-250834a5f9ee">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/preparer'; //ns1:errorCode</path><content>0.1.11</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="URL" id="5e4a6d8d-7765-4a80-8c1a-ecc62fa8ff4d">
              <con:configuration>
                <path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/preparer'; //ns1:url</path>
                <content>/contrat-core/contrat/preparer</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
                <ignoreComments>false</ignoreComments>
              </con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorMessage" id="fad271ab-2eec-4b0b-b8c4-b4581c4be3b0">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/preparer'; //ns1:errorMessage</path><content>Le Prix.typeTVA ne peut valoir que [S, R, SR, P].</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
			<con:assertion type="Invalid HTTP Status Codes" name="Code HTTP 500" disabled="true" id="1826071e-cfc8-4953-b629-36394a148b1b">
              <con:configuration>
                <codes>500</codes>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters/>
          </con:restRequest>
        </con:config>
      </con:testStep>
      <con:testStep type="restrequest" name="Sans Prix.modePaiement" id="b727007d-57ee-45e6-a15b-cc9545770f47">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/preparer" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="Sans Prix.modePaiement" mediaType="application/json" postQueryString="false" id="01ddc01d-d8f6-43f9-ac4f-bda76da58129">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{
  "user": "test",
  "produits": [
    {
      "reference": "jet",
      "numEC": "1",
      "label": "Abonnement jet 10Go",
      "numeroCommande": "12345",
      "typeProduit": "SERVICE",
      "prix": {
        "periodicite": "1",
        "typeTVA": "R",
        "montant": "30",
        "frais": [
          {
            "montant": "30",
            "typeFrais": "creation"
          }
        ],
        "modeFacturation": "PREMIER_MOIS"
      }
    }
  ]
}</con:request>
            <con:originalUri>http://10.10.2.52/contrat-core/contrat/preparer</con:originalUri><con:assertion type="XPath Match" name="Error Code" id="3e323bc6-214c-4ed3-b086-fa4e4bc076fe">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/preparer'; //ns1:errorCode</path><content>0.1.11</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="URL" id="63222ea1-2788-4f0e-b82c-35e6084a51e2">
              <con:configuration>
                <path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/preparer'; //ns1:url</path>
                <content>/contrat-core/contrat/preparer</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
                <ignoreComments>false</ignoreComments>
              </con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorMessage" id="4a94d7dd-916a-49d0-8136-d4fd437d6c06">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/preparer'; //ns1:errorMessage</path><content>Le Prix.modePaiement ne peut valoir que [SEPA, CB, CHEQUE, FACTURE, TROIS_FOIS_SANS_FRAIS].</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
			<con:assertion type="Invalid HTTP Status Codes" name="Code HTTP 500" disabled="true" id="da65c4cd-3541-468d-a8fa-2a8327e248c9">
              <con:configuration>
                <codes>500</codes>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters/>
          </con:restRequest>
        </con:config>
      </con:testStep>
      <con:testStep type="restrequest" name="Sans Prix.modeFacturation" id="eb5748d3-e7e1-463d-b274-315c7a3d258d">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/preparer" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="Sans Prix.modeFacturation" mediaType="application/json" postQueryString="false" id="01ddc01d-d8f6-43f9-ac4f-bda76da58129">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{
  "user": "test",
  "produits": [
    {
      "reference": "jet",
      "numEC": "1",
      "label": "Abonnement jet 10Go",
      "numeroCommande": "12345",
      "typeProduit": "SERVICE",
      "prix": {
        "periodicite": "1",
        "typeTVA": "R",
        "montant": "30",
        "frais": [
          {
            "montant": "30",
            "typeFrais": "creation"
          }
        ],
        "modePaiement": "SEPA"
      }
    }
  ]
}</con:request>
            <con:originalUri>http://10.10.2.52/contrat-core/contrat/preparer</con:originalUri><con:assertion type="XPath Match" name="Error Code" id="88d59675-4e80-445b-8a23-66fbaba9cadc">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/preparer'; //ns1:errorCode</path><content>0.1.11</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="URL" id="5c708502-b155-45da-a203-9218b1c31207">
              <con:configuration>
                <path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/preparer'; //ns1:url</path>
                <content>/contrat-core/contrat/preparer</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
                <ignoreComments>false</ignoreComments>
              </con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorMessage" id="22f3c62c-be0c-48a0-9e05-7126041fbeca">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/preparer'; //ns1:errorMessage</path><content>Le Prix.modeFacturation ne peut valoir que [PREMIER_MOIS, DATE_ANNIVERSAIRE].</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
			<con:assertion type="Invalid HTTP Status Codes" name="Code HTTP 500" disabled="true" id="ce98aa69-b300-464b-ba85-1ce6dc62e407">
              <con:configuration>
                <codes>500</codes>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters/>
          </con:restRequest>
        </con:config>
      </con:testStep>
      <con:testStep type="restrequest" name="Sans reference" id="2675c1da-8cc5-410a-9960-a0ce6eadbaf4">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/preparer" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="Sans reference" mediaType="application/json" postQueryString="false" id="01ddc01d-d8f6-43f9-ac4f-bda76da58129">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{
  "user": "test",
  "produits": [
    {
      "numEC": "1",
      "label": "Abonnement jet 10Go",
      "numeroCommande": "12345",
      "typeProduit": "SERVICE",
      "prix": {
        "periodicite": "1",
        "typeTVA": "R",
        "montant": "30",
        "frais": [
          {
            "montant": "30",
            "typeFrais": "creation"
          }
        ],
        "modePaiement": "SEPA",
        "modeFacturation": "PREMIER_MOIS"
      }
    }
  ]
}</con:request>
            <con:originalUri>http://10.10.2.52/contrat-core/contrat/preparer</con:originalUri><con:assertion type="XPath Match" name="Error Code" id="81b76ece-3ede-4b81-a797-f64405831acb">
              <con:configuration>
                <path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/preparer'; //ns1:errorCode</path>
                <content>0.1.1</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
                <ignoreComments>false</ignoreComments>
              </con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="URL" id="92c4a970-172c-40ae-89df-2a1da4cb1a79">
              <con:configuration>
                <path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/preparer'; //ns1:url</path>
                <content>/contrat-core/contrat/preparer</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
                <ignoreComments>false</ignoreComments>
              </con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorMessage" id="86c4821d-3d92-4488-9721-c348062a22df">
              <con:configuration>
                <path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/preparer'; //ns1:errorMessage</path>
                <content>un des paramÃ¨tres est mal formatÃ© : Produit.reference.</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
                <ignoreComments>false</ignoreComments>
              </con:configuration>
            </con:assertion>
			<con:assertion type="Invalid HTTP Status Codes" name="Code HTTP 500" disabled="true" id="2ebd7e5f-ef25-49f4-b5ef-bb7a2e2c5051">
              <con:configuration>
                <codes>500</codes>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters/>
          </con:restRequest>
        </con:config>
      </con:testStep>
      <con:testStep type="restrequest" name="Sans numEC" id="df8be614-7517-4092-867e-d8c2c573c4a8">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/preparer" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="Sans numEC" mediaType="application/json" postQueryString="false" id="01ddc01d-d8f6-43f9-ac4f-bda76da58129">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{
  "user": "test",
  "produits": [
    {
      "reference": "jet",
      "label": "Abonnement jet 10Go",
      "numeroCommande": "12345",
      "typeProduit": "SERVICE",
      "prix": {
        "periodicite": "1",
        "typeTVA": "R",
        "montant": "30",
        "frais": [
          {
            "montant": "30",
            "typeFrais": "creation"
          }
        ],
        "modePaiement": "SEPA",
        "modeFacturation": "PREMIER_MOIS"
      }
    }
  ]
}</con:request>
            <con:originalUri>http://10.10.2.52/contrat-core/contrat/preparer</con:originalUri><con:assertion type="XPath Match" name="Error Code" id="68442f1e-b2f2-4a4d-a6ec-e22e39a1f539">
              <con:configuration>
                <path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/preparer'; //ns1:errorCode</path>
                <content>1.1.68</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
                <ignoreComments>false</ignoreComments>
              </con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="URL" id="bc3a951c-ad6f-44f0-be4e-16a58fd3c73e">
              <con:configuration>
                <path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/preparer'; //ns1:url</path>
                <content>/contrat-core/contrat/preparer</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
                <ignoreComments>false</ignoreComments>
              </con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorMessage" id="b91a707c-2473-4924-8663-e2ec6d3e9569">
              <con:configuration>
                <path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/preparer'; //ns1:errorMessage</path>
                <content>Le numero d'element contractuel pour le produit jet ne doit pas etre null.</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
                <ignoreComments>false</ignoreComments>
              </con:configuration>
            </con:assertion>
			<con:assertion type="Invalid HTTP Status Codes" name="Code HTTP 500" disabled="true" id="2ebd7e5f-ef25-49f4-b5ef-bb7a2e2c5051">
              <con:configuration>
                <codes>500</codes>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters/>
          </con:restRequest>
        </con:config>
      </con:testStep>
      <con:testStep type="restrequest" name="Sans Prix.Frais.Montant" id="c05bcd72-4271-491c-94b5-ca22319b7b03">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/preparer" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="Sans Prix.Frais.Montant" mediaType="application/json" postQueryString="false" id="01ddc01d-d8f6-43f9-ac4f-bda76da58129">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{ "user": "test", "produits": [ { "reference" : "jet",
            "numEC" : "1", "label": "Abonnement jet 10Go", "numeroCommande":
            "12345", "typeProduit": "SERVICE", "prix": { "periodicite":
            "1", "typeTVA" : "R", "montant": "30", "frais": [ {
            "typeFrais": "creation" } ], "modePaiement": "SEPA",
            "modeFacturation" : "PREMIER_MOIS" } } ] }</con:request>
            <con:originalUri>http://10.10.2.52/contrat-core/contrat/preparer</con:originalUri><con:assertion type="XPath Match" name="Error Code" id="1ff192be-8cd0-4e69-bbd8-2f229cd344dd">
              <con:configuration>
                <path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/preparer'; //ns1:errorCode</path>
                <content>0.1.4</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
                <ignoreComments>false</ignoreComments>
              </con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="URL" id="ee536b16-9324-4f65-8749-1972d07cd72e">
              <con:configuration>
                <path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/preparer'; //ns1:url</path>
                <content>/contrat-core/contrat/preparer</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
                <ignoreComments>false</ignoreComments>
              </con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorMessage" id="23e3f296-f47f-4dd4-ab2e-819b12a55d5c">
              <con:configuration>
                <path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/preparer'; //ns1:errorMessage</path>
                <content>Frais.montant ne peut pas etre null.</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
                <ignoreComments>false</ignoreComments>
              </con:configuration>
            </con:assertion>
			<con:assertion type="Invalid HTTP Status Codes" name="Code HTTP 500" disabled="true" id="2ebd7e5f-ef25-49f4-b5ef-bb7a2e2c5051">
              <con:configuration>
                <codes>500</codes>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters/>
          </con:restRequest>
        </con:config>
      </con:testStep>
      <con:testStep type="restrequest" name="Sans Prix.Frais.typeFrais" id="fd7e12b9-a1ad-4bd1-9ebd-3318abd6d8eb">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/preparer" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="Sans Prix.Frais.typeFrais" mediaType="application/json" postQueryString="false" id="01ddc01d-d8f6-43f9-ac4f-bda76da58129">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{
  "user": "test",
  "produits": [
    {
      "reference": "jet",
      "numEC": "1",
      "label": "Abonnement jet 10Go",
      "numeroCommande": "12345",
      "typeProduit": "SERVICE",
      "prix": {
        "periodicite": "1",
        "typeTVA": "R",
        "montant": "30",
        "frais": [
          {
            "montant": "30"
          }
        ],
        "modePaiement": "SEPA",
        "modeFacturation": "PREMIER_MOIS"
      }
    }
  ]
}</con:request>
            <con:originalUri>http://10.10.2.52/contrat-core/contrat/preparer</con:originalUri><con:assertion type="XPath Match" name="Error Code" id="b71d3328-a642-4d25-b916-e1673824e2f9">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/preparer'; //ns1:errorCode</path><content>0.1.11</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="URL" id="9fed57b3-edb1-48f5-9d6d-eacbb6597c55">
              <con:configuration>
                <path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/preparer'; //ns1:url</path>
                <content>/contrat-core/contrat/preparer</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
                <ignoreComments>false</ignoreComments>
              </con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorMessage" id="4688b163-7355-454b-9a8f-c463d23444de">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/preparer'; //ns1:errorMessage</path><content>Le Frais.typeFrais ne peut valoir que [CREATION, RESILIATION, MIGRATION].</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
			<con:assertion type="Invalid HTTP Status Codes" name="Code HTTP 500" disabled="true" id="2ebd7e5f-ef25-49f4-b5ef-bb7a2e2c5051">
              <con:configuration>
                <codes>500</codes>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters/>
          </con:restRequest>
        </con:config>
      </con:testStep>
      <con:testStep type="restrequest" name="EC Fils avec EC Parent inconnu" id="4558caa4-c39a-46a8-9a50-1fc143729e02">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/preparer" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="EC Fils avec EC Parent inconnu" mediaType="application/json" postQueryString="false" id="01ddc01d-d8f6-43f9-ac4f-bda76da58129">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{
  "user": "test",
  "produits": [
    {
      "reference": "option.plus.50g",
      "numEC": "2",
      "numECParent": "1",
      "numeroCommande": "12345",
      "label": "Option+ 50Go",
      "typeProduit": "SERVICE",
      "prix": {
        "periodicite": "1",
        "typeTVA": "R",
        "montant": "50",
        "frais": [
          {
            "montant": "50",
            "typeFrais": "resiliation",
            "nombreMois": "12",
            "ordre": "1"
          },
          {
            "montant": "30",
            "typeFrais": "resiliation",
            "ordre": "2"
          }
        ],
        "modePaiement": "CB",
        "modeFacturation": "PREMIER_MOIS"
      }
    }
  ]
}</con:request>
            <con:originalUri>http://10.10.2.52/contrat-core/contrat/preparer</con:originalUri><con:assertion type="XPath Match" name="Error Code" id="3c35eeb9-d98f-4016-89e6-17dbb375329d">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/preparer'; 
//ns1:errorCode</path><content>1.1.69</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="URL" id="e0c66cd5-7d2a-4cad-acb9-faf54bc240ef">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/preparer'; 
//ns1:url</path><content>/contrat-core/contrat/preparer</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
			<con:assertion type="Invalid HTTP Status Codes" name="Code HTTP 500" disabled="true" id="2ebd7e5f-ef25-49f4-b5ef-bb7a2e2c5051">
              <con:configuration>
                <codes>500</codes>
              </con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="Error Message" id="3c35eeb9-d98f-4016-89e6-17dbb375329d">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/preparer'; 
//ns1:errorMessage</path><content>Le parent du produit de reference option.plus.50g et de numero d'element contractuel 2 n'existe pas.</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion><con:credentials>
              <con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters/>
          </con:restRequest>
        </con:config>
      </con:testStep>
      <con:testStep type="restrequest" name="Frais de Résil dégressif sans ordre" id="d1dfa0ab-813e-46ba-aa48-1772548ba90b">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/preparer" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="Frais de Résil dégressif sans ordre" mediaType="application/json" postQueryString="false" id="01ddc01d-d8f6-43f9-ac4f-bda76da58129">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{
  "user": "test",
  "produits": [
    {
      "reference": "jet",
      "numEC": "1",
      "label": "Abonnement jet 10Go",
      "numeroCommande": "12345",
      "typeProduit": "SERVICE",
      "prix": {
        "periodicite": "1",
        "typeTVA": "R",
        "montant": "30",
        "frais": [
          {
            "montant": "50",
            "typeFrais": "resiliation",
            "nombreMois": "12"
          },
          {
            "montant": "30",
            "typeFrais": "resiliation"
          }
        ],
        "modePaiement": "SEPA",
        "modeFacturation": "PREMIER_MOIS"
      }
    }
  ]
}</con:request>
            <con:originalUri>http://10.10.2.52/contrat-core/contrat/preparer</con:originalUri><con:assertion type="XPath Match" name="Error Code" id="76141d03-a206-4f65-9643-ab96357fa1bd">
              <con:configuration>
                <path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/preparer'; //ns1:errorCode</path>
                <content>1.1.44</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
                <ignoreComments>false</ignoreComments>
              </con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="URL" id="df962682-65cc-4aa1-adf5-7b448eab5c53">
              <con:configuration>
                <path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/preparer'; //ns1:url</path>
                <content>/contrat-core/contrat/preparer</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
                <ignoreComments>false</ignoreComments>
              </con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="Error Message" id="903197a1-c822-44ab-a9fa-c9c6ba3ee50c">
              <con:configuration>
                <path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/preparer'; //ns1:errorMessage</path>
                <content>Tous les frais de resiliation doivent avoir un ordre.</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
                <ignoreComments>false</ignoreComments>
              </con:configuration>
            </con:assertion>
			<con:assertion type="Invalid HTTP Status Codes" name="Code HTTP 500" disabled="true" id="2ebd7e5f-ef25-49f4-b5ef-bb7a2e2c5051">
              <con:configuration>
                <codes>500</codes>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters/>
          </con:restRequest>
        </con:config>
      </con:testStep>
      <con:testStep type="restrequest" name="Frais de Résil dégressif incohérent" id="2dbc97c1-4e17-4b91-aacf-1786f3d98658">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/preparer" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="Frais de Résil dégressif incohérent" mediaType="application/json" postQueryString="false" id="01ddc01d-d8f6-43f9-ac4f-bda76da58129">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{
  "user": "test",
  "produits": [
    {
      "reference": "jet",
      "numEC": "1",
      "label": "Abonnement jet 10Go",
      "numeroCommande": "12345",
      "typeProduit": "SERVICE",
      "prix": {
        "periodicite": "1",
        "typeTVA": "R",
        "montant": "30",
        "frais": [
          {
            "montant": "50",
            "typeFrais": "resiliation",
            "nombreMois": "12",
            "ordre" : 2
          },
          {
            "montant": "30",
            "typeFrais": "resiliation",
            "ordre": 1
          }
        ],
        "modePaiement": "SEPA",
        "modeFacturation": "PREMIER_MOIS"
      }
    }
  ]
}</con:request>
            <con:originalUri>http://10.10.2.52/contrat-core/contrat/preparer</con:originalUri><con:assertion type="XPath Match" name="Error Code" id="7dca5118-1c51-4d65-92e4-03fc9b9e8b70">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/preparer'; 
//ns1:errorCode</path><content>1.1.46</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="URL" id="8afc3f1c-fbc7-495b-9a04-a04799ad72fd">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/preparer'; 
//ns1:url</path><content>/contrat-core/contrat/preparer</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
			<con:assertion type="Invalid HTTP Status Codes" name="Code HTTP 500" disabled="true" id="2ebd7e5f-ef25-49f4-b5ef-bb7a2e2c5051">
              <con:configuration>
                <codes>500</codes>
              </con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="Error Message" id="8afc3f1c-fbc7-495b-9a04-a04799ad72fd">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/preparer'; 
//ns1:errorMessage</path><content>Un frais sans nombre de mois doit etre le dernier dans l'ordre.</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion><con:credentials>
              <con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters/>
          </con:restRequest>
        </con:config>
      </con:testStep>
      <con:testStep type="restrequest" name="EC Fils = EC Parent" id="c6e698d7-5e60-4b12-9aab-25069234397d">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/preparer" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="EC Fils = EC Parent" mediaType="application/json" postQueryString="false" id="01ddc01d-d8f6-43f9-ac4f-bda76da58129">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{
  "user": "test",
  "produits": [
    {
      "reference": "option.plus.50g",
      "numEC": "2",
      "numECParent": "2",
      "numeroCommande": "12345",
      "label": "Option+ 50Go",
      "typeProduit": "SERVICE",
      "prix": {
        "periodicite": "1",
        "typeTVA": "R",
        "montant": "50",
        "modePaiement": "CB",
        "modeFacturation": "PREMIER_MOIS"
      }
    }
  ]
}</con:request>
            <con:originalUri>http://10.10.2.52/contrat-core/contrat/preparer</con:originalUri><con:assertion type="XPath Match" name="Error Code" id="3978ea77-05cf-46db-aa68-c3370055dce0">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/preparer'; 
//ns1:errorCode</path><content>1.1.70</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="URL" id="ee1bf87c-4401-4435-a7e6-82962809e8f2">
              <con:configuration>
                <path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/preparer'; //ns1:url</path>
                <content>/contrat-core/contrat/preparer</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
                <ignoreComments>false</ignoreComments>
              </con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="Error Message" id="f57282e9-5d37-4a96-bef9-76129702f819">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/preparer'; 
//ns1:errorMessage</path><content>le produit option.plus.50g ne peut pas Ã©tre le parent de lui mÃªme.</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
			<con:assertion type="Invalid HTTP Status Codes" name="Code HTTP 500" disabled="true" id="2ebd7e5f-ef25-49f4-b5ef-bb7a2e2c5051">
              <con:configuration>
                <codes>500</codes>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters/>
          </con:restRequest>
        </con:config>
      </con:testStep>
      <con:testStep type="restrequest" name="Avec Frais de Création Dégressif" id="464379e7-615c-4ce7-96fa-ad4d1442e18a">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" methodName="" resourcePath="/contrat-core/contrat/preparer" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="Avec Frais de Création Dégressif" mediaType="application/json" postQueryString="false">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:encoding>UTF-8</con:encoding>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{
  "user": "test",
  "produits": [
    {
      "reference": "jet",
      "numEC": "1",
      "numeroCommande": "12345",
      "label": "Abonnement jet 10Go",
      "typeProduit": "SERVICE",
      "prix": {
        "periodicite": "1",
        "typeTVA": "R",
        "montant": "30",
        "frais": [
          {
            "montant": "30",
            "typeFrais": "creation",
            "ordre": "1",
            "nombreMois": "12"
          },
          {
            "montant": "30",
            "typeFrais": "creation",
            "ordre": "2"
          }
        ],
        "modePaiement": "SEPA",
        "modeFacturation": "PREMIER_MOIS"
      }
    }
  ]
}</con:request>
            <con:originalUri>http://10.10.2.52/contrat-core/contrat/preparer</con:originalUri><con:assertion type="XPath Match" name="URL" id="faf2e796-2eaf-4436-a3aa-f24116cf1ca7">
              <con:configuration>
                <path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/preparer'; //ns1:url</path>
                <content>/contrat-core/contrat/preparer</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
                <ignoreComments>false</ignoreComments>
              </con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorCode" id="c3ba583d-fa9f-4185-ac9c-2a5c7ab8f87a">
              <con:configuration>
                <path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/preparer'; //ns1:errorCode</path>
                <content>1.1.43</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
                <ignoreComments>false</ignoreComments>
              </con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorMessage" id="eefa91b6-2024-46cf-8b01-c1f4e93b1971">
              <con:configuration>
                <path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/preparer'; //ns1:errorMessage</path>
                <content>Impossible d'ajouter un ordre ou un nombre de mois a un frais de CREATION.</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
                <ignoreComments>false</ignoreComments>
              </con:configuration>
            </con:assertion>
			<con:assertion type="Invalid HTTP Status Codes" name="Code HTTP 500" disabled="true" id="2ebd7e5f-ef25-49f4-b5ef-bb7a2e2c5051">
              <con:configuration>
                <codes>500</codes>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters/>
          </con:restRequest>
        </con:config>
      </con:testStep>
      <con:testStep type="restrequest" name="Avec Prix.Frais.Type Inconnu" id="2f26211d-550d-4b59-94f2-40a7e4ac91c0">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" methodName="" resourcePath="/contrat-core/contrat/preparer" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="Avec Prix.Frais.Type Inconnu" mediaType="application/json" postQueryString="false">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:encoding>UTF-8</con:encoding>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{
  "user": "test",
  "produits": [
    {
      "reference": "jet",
      "numEC": "1",
      "numeroCommande": "12345",
      "label": "Abonnement jet 10Go",
      "typeProduit": "SERVICE",
      "prix": {
        "periodicite": "1",
        "typeTVA": "R",
        "montant": "30",
        "frais": [
          {
            "montant": "30",
            "typeFrais": "INCONNU"
          }
        ],
        "modePaiement": "SEPA",
        "modeFacturation": "PREMIER_MOIS"
      }
    }
  ]
}</con:request>
            <con:originalUri>http://10.10.2.52/contrat-core/contrat/preparer</con:originalUri><con:assertion type="XPath Match" name="URL" id="2b007639-15dd-490a-9699-af198918c586">
              <con:configuration>
                <path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/preparer'; //ns1:url</path>
                <content>/contrat-core/contrat/preparer</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
                <ignoreComments>false</ignoreComments>
              </con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorCode" id="6442c105-1915-4709-b723-11a7414ecc18">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/preparer'; //ns1:errorCode</path><content>0.1.11</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorMessage" id="e8a2335c-7cad-4d6d-a7b4-d5390dd21701">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/preparer'; //ns1:errorMessage</path><content>Le Frais.typeFrais ne peut valoir que [CREATION, RESILIATION, MIGRATION].</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
			<con:assertion type="Invalid HTTP Status Codes" name="Code HTTP 500" disabled="true" id="2ebd7e5f-ef25-49f4-b5ef-bb7a2e2c5051">
              <con:configuration>
                <codes>500</codes>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters/>
          </con:restRequest>
        </con:config>
      </con:testStep>
      <con:testStep type="restrequest" name="Avec TypeProduit Inconnu" id="5caa7493-2e43-4883-bd92-0231f8128ae3">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/preparer" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="Avec TypeProduit Inconnu" mediaType="application/json" postQueryString="false" id="01ddc01d-d8f6-43f9-ac4f-bda76da58129">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{
  "user": "test",
  "produits": [
    {
      "reference": "jet",
      "numEC": "1",
      "label": "Abonnement jet 10Go",
      "typeProduit": "INCONNU",
      "numeroCommande": "12345",
      "prix": {
        "periodicite": "1",
        "typeTVA": "R",
        "montant": "30",
        "frais": [
          {
            "montant": "30",
            "typeFrais": "creation"
          }
        ],
        "modePaiement": "SEPA",
        "modeFacturation": "PREMIER_MOIS"
      }
    }
  ]
}</con:request>
            <con:originalUri>http://10.10.2.52/contrat-core/contrat/preparer</con:originalUri><con:assertion type="XPath Match" name="Error Code" id="25480cc0-2c04-4c7e-b1c0-e16918223552">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/preparer'; 
//ns1:errorCode</path><content>0.1.11</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="URL" id="faf7876e-774a-42a7-8cf6-18bbc2d5b67c">
              <con:configuration>
                <path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/preparer'; //ns1:url</path>
                <content>/contrat-core/contrat/preparer</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
                <ignoreComments>false</ignoreComments>
              </con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorMessage" id="8fd308c6-6244-45c5-bc60-7bf6b3cc8ca7">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/preparer'; 
//ns1:errorMessage</path><content>Le Produit.typeProduit ne peut valoir que [BIEN, SERVICE].</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
			<con:assertion type="Invalid HTTP Status Codes" name="Code HTTP 500" disabled="true" id="2ebd7e5f-ef25-49f4-b5ef-bb7a2e2c5051">
              <con:configuration>
                <codes>500</codes>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters/>
          </con:restRequest>
        </con:config>
      </con:testStep>
      
      <con:testStep type="restrequest" name="Avec Prix.Montant &lt; 0">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" methodName="" resourcePath="/contrat-core/contrat/preparer" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="Avec Prix.Montant &lt; 0" mediaType="application/json" postQueryString="false">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:encoding>UTF-8</con:encoding>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{
  "user": "test",
  "produits": [
    {
      "reference": "jet",
      "numEC": "1",
      "numeroCommande": "12345",
      "label": "Abonnement jet 10Go",
      "typeProduit": "SERVICE",
      "prix": {
        "periodicite": "1",
        "typeTVA": "R",
        "montant": "-5",
        "frais": [
          {
            "montant": "30",
            "typeFrais": "CREATION"
          }
        ],
        "modePaiement": "SEPA",
        "modeFacturation": "PREMIER_MOIS"
      }
    }
  ]
}</con:request>
            <con:originalUri>http://10.10.2.52/contrat-core/contrat/preparer</con:originalUri><con:assertion type="XPath Match" name="URL" id="2b007639-15dd-490a-9699-af198918c586">
              <con:configuration>
                <path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/preparer'; //ns1:url</path>
                <content>/contrat-core/contrat/preparer</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
                <ignoreComments>false</ignoreComments>
              </con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorCode" id="6442c105-1915-4709-b723-11a7414ecc18">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/preparer'; //ns1:errorCode</path><content>1.1.90</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorMessage" id="e8a2335c-7cad-4d6d-a7b4-d5390dd21701">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/preparer'; //ns1:errorMessage</path><content>un produit ne peut pas avoir un montant negatif.</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
			<con:assertion type="Invalid HTTP Status Codes" name="Code HTTP 500" disabled="true" id="2ebd7e5f-ef25-49f4-b5ef-bb7a2e2c5051">
              <con:configuration>
                <codes>500</codes>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters/>
          </con:restRequest>
        </con:config>
      </con:testStep>
      <con:testStep type="restrequest" name="Avec Prix.periodicite = 0" id="40d7dc07-1d38-47fe-8570-13453c714a73">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/preparer" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="Avec Prix.periodicite = 0" mediaType="application/json" postQueryString="false" id="01ddc01d-d8f6-43f9-ac4f-bda76da58129">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{
  "user": "test",
  "produits": [
    {
      "reference": "jet",
      "numEC": "1",
      "label": "Abonnement jet 10Go",
      "typeProduit": "SERVICE",
      "numeroCommande": "12345",
      "prix": {
        "periodicite": "0",
        "typeTVA": "R",
        "montant": "30",
        "frais": [
          {
            "montant": "30",
            "typeFrais": "creation"
          }
        ],
        "modePaiement": "SEPA",
        "modeFacturation": "PREMIER_MOIS"
      }
    }
  ]
}</con:request>
            <con:originalUri>http://10.10.2.52/contrat-core/contrat/preparer</con:originalUri><con:assertion type="XPath Match" name="Error Code" id="cda2ed3f-32e0-41c2-a541-bf2e1eb2c576">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/preparer'; 
//ns1:errorCode</path><content>0.1.12</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="URL" id="263d1a4a-2072-444e-876f-9f2f7200b1f9">
              <con:configuration>
                <path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/preparer'; //ns1:url</path>
                <content>/contrat-core/contrat/preparer</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
                <ignoreComments>false</ignoreComments>
              </con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorMessage" id="b5b28652-4881-45e7-ab7c-55d0a366f668">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/preparer'; 
//ns1:errorMessage</path><content>Le Prix.periodicite ne peut pas etre negatif ou egal a zero.</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
			<con:assertion type="Invalid HTTP Status Codes" name="Code HTTP 500" disabled="true" id="2ebd7e5f-ef25-49f4-b5ef-bb7a2e2c5051">
              <con:configuration>
                <codes>500</codes>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters/>
          </con:restRequest>
        </con:config>
      </con:testStep>
      <con:testStep type="restrequest" name="Avec Prix.periodicite &lt; 0" id="9a3a9ee1-227d-4c35-9f56-11a0b92111b6">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/preparer" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="Avec Prix.periodicite &lt; 0" mediaType="application/json" postQueryString="false" id="01ddc01d-d8f6-43f9-ac4f-bda76da58129">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{
  "user": "test",
  "produits": [
    {
      "reference": "jet",
      "numEC": "1",
      "label": "Abonnement jet 10Go",
      "typeProduit": "SERVICE",
      "numeroCommande": "12345",
      "prix": {
        "periodicite": "-1",
        "typeTVA": "R",
        "montant": "30",
        "modePaiement": "SEPA",
        "modeFacturation": "PREMIER_MOIS"
      }
    }
  ]
}</con:request>
            <con:originalUri>http://10.10.2.52/contrat-core/contrat/preparer</con:originalUri><con:assertion type="XPath Match" name="Error Code" id="6cb55f73-f27b-46a1-bdde-1a73813174dc">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/preparer'; 
//ns1:errorCode</path><content>0.1.12</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="URL" id="3f2bcda4-d2d2-4268-a0ff-ec28ca1c1dfa">
              <con:configuration>
                <path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/preparer'; //ns1:url</path>
                <content>/contrat-core/contrat/preparer</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
                <ignoreComments>false</ignoreComments>
              </con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorMessage" id="f060058b-ef42-434b-9e14-9e1ac0b55b72">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/preparer'; //ns1:errorMessage</path><content>Le Prix.periodicite ne peut pas etre negatif ou egal a zero.</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
			<con:assertion type="Invalid HTTP Status Codes" name="Code HTTP 500" disabled="true" id="2ebd7e5f-ef25-49f4-b5ef-bb7a2e2c5051">
              <con:configuration>
                <codes>500</codes>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters/>
          </con:restRequest>
        </con:config>
      </con:testStep>
      <con:testStep type="restrequest" name="Avec Prix.typeTVA Inconnu" id="54d4fb56-80b8-4de8-8ed0-e026c171f61a">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/preparer" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="Avec Prix.typeTVA Inconnu" mediaType="application/json" postQueryString="false" id="01ddc01d-d8f6-43f9-ac4f-bda76da58129">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{
  "user": "test",
  "produits": [
    {
      "reference": "jet",
      "numEC": "1",
      "label": "Abonnement jet 10Go",
      "typeProduit": "SERVICE",
      "numeroCommande": "12345",
      "prix": {
        "periodicite": "1",
        "typeTVA": "INCONNU",
        "montant": "30",
        "frais": [
          {
            "montant": "30",
            "typeFrais": "creation"
          }
        ],
        "modePaiement": "SEPA",
        "modeFacturation": "PREMIER_MOIS"
      }
    }
  ]
}</con:request>
            <con:originalUri>http://10.10.2.52/contrat-core/contrat/preparer</con:originalUri><con:assertion type="XPath Match" name="Error Code" id="3b260fab-15a4-44d5-8fe7-3b7a82684fce">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/preparer'; 
//ns1:errorCode</path><content>0.1.11</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="URL" id="766895a3-fcd9-4391-a4d0-42b7f61526c4">
              <con:configuration>
                <path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/preparer'; //ns1:url</path>
                <content>/contrat-core/contrat/preparer</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
                <ignoreComments>false</ignoreComments>
              </con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorMessage" id="31a3a2fd-3962-41ce-bc0e-fef240dbbf18">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/preparer'; 
//ns1:errorMessage</path><content>Le Prix.typeTVA ne peut valoir que [S, R, SR, P].</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
			<con:assertion type="Invalid HTTP Status Codes" name="Code HTTP 500" disabled="true" id="2ebd7e5f-ef25-49f4-b5ef-bb7a2e2c5051">
              <con:configuration>
                <codes>500</codes>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters/>
          </con:restRequest>
        </con:config>
      </con:testStep>
      <con:testStep type="restrequest" name="Avec Prix.modePaiement Inconnu" id="48fea77b-24d0-4045-9e75-f5c3adae0b05">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/preparer" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="Avec Prix.modePaiement Inconnu" mediaType="application/json" postQueryString="false" id="01ddc01d-d8f6-43f9-ac4f-bda76da58129">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{
  "user": "test",
  "produits": [
    {
      "reference": "jet",
      "numEC": "1",
      "label": "Abonnement jet 10Go",
      "typeProduit": "SERVICE",
      "numeroCommande": "12345",
      "prix": {
        "periodicite": "1",
        "typeTVA": "P",
        "montant": "30",
        "modePaiement": "INCONNU",
        "modeFacturation": "PREMIER_MOIS"
      }
    }
  ]
}</con:request>
            <con:originalUri>http://10.10.2.52/contrat-core/contrat/preparer</con:originalUri><con:assertion type="XPath Match" name="Error Code" id="efa4f18d-f277-4bac-a277-163d480d2287">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/preparer'; 
//ns1:errorCode</path><content>0.1.11</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="URL" id="1d99f0fe-74c0-4fce-be49-3b2a08f85d03">
              <con:configuration>
                <path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/preparer'; //ns1:url</path>
                <content>/contrat-core/contrat/preparer</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
                <ignoreComments>false</ignoreComments>
              </con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorMessage" id="2d2b6a31-11a0-476b-b179-85ae9eebe1c4">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/preparer'; //ns1:errorMessage</path><content>Le Prix.modePaiement ne peut valoir que [SEPA, CB, CHEQUE, FACTURE, TROIS_FOIS_SANS_FRAIS].</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
			<con:assertion type="Invalid HTTP Status Codes" name="Code HTTP 500" disabled="true" id="2ebd7e5f-ef25-49f4-b5ef-bb7a2e2c5051">
              <con:configuration>
                <codes>500</codes>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters/>
          </con:restRequest>
        </con:config>
      </con:testStep>
      <con:testStep type="restrequest" name="Avec Prix.modeFacturation Inconnu" id="1e3e0f58-4cd6-475a-9cbb-dc0c7e182ce7">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/preparer" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="Avec Prix.modeFacturation Inconnu" mediaType="application/json" postQueryString="false" id="01ddc01d-d8f6-43f9-ac4f-bda76da58129">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{
  "user": "test",
  "produits": [
    {
      "reference": "jet",
      "numEC": "1",
      "label": "Abonnement jet 10Go",
      "typeProduit": "SERVICE",
      "numeroCommande": "12345",
      "prix": {
        "periodicite": "1",
        "typeTVA": "P",
        "montant": "30",
        "frais": [
          {
            "montant": "30",
            "typeFrais": "creation"
          }
        ],
        "modePaiement": "SEPA",
        "modeFacturation": "INCONNU"
      }
    }
  ]
}</con:request>
            <con:originalUri>http://10.10.2.52/contrat-core/contrat/preparer</con:originalUri><con:assertion type="XPath Match" name="Error Code" id="68336c5f-81b5-4ca3-bcfe-84b9a4ee8c92">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/preparer'; 
//ns1:errorCode</path><content>0.1.11</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="URL" id="ce226d44-10a9-47ed-929a-c4bf86aa40b9">
              <con:configuration>
                <path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/preparer'; //ns1:url</path>
                <content>/contrat-core/contrat/preparer</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
                <ignoreComments>false</ignoreComments>
              </con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorMessage" id="022756cd-89c9-4f6a-90b9-ee210047db84">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/preparer'; 
//ns1:errorMessage</path><content>Le Prix.modeFacturation ne peut valoir que [PREMIER_MOIS, DATE_ANNIVERSAIRE].</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
			<con:assertion type="Invalid HTTP Status Codes" name="Code HTTP 500" disabled="true" id="2ebd7e5f-ef25-49f4-b5ef-bb7a2e2c5051">
              <con:configuration>
                <codes>500</codes>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters/>
          </con:restRequest>
        </con:config>
      </con:testStep><con:testStep type="restrequest" name="Avec même numEC" id="f8bf9eb4-ee79-44a7-83c3-e17a80124097">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/preparer" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="Avec même numEC" mediaType="application/json" postQueryString="false" id="01ddc01d-d8f6-43f9-ac4f-bda76da58129">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{
  "user": "test",
  "produits": [
    {
      "numEC": "1",
      "reference": "jet",
      "label": "Abonnement jet 10Go",
      "numeroCommande": "12345",
      "typeProduit": "SERVICE",
      "prix": {
        "periodicite": "1",
        "typeTVA": "R",
        "montant": "30",
        "frais": [
          {
            "montant": "30",
            "typeFrais": "creation"
          }
        ],
        "modePaiement": "SEPA",
        "modeFacturation": "PREMIER_MOIS"
      }
    },
    {
      "numEC": "1",
      "reference": "jet",
      "label": "Abonnement jet 10Go",
      "numeroCommande": "12345",
      "typeProduit": "SERVICE",
      "prix": {
        "periodicite": "1",
        "typeTVA": "R",
        "montant": "30",
        "frais": [
          {
            "montant": "30",
            "typeFrais": "creation"
          }
        ],
        "modePaiement": "SEPA",
        "modeFacturation": "PREMIER_MOIS"
      }
    }
  ]
}</con:request>
            <con:originalUri>http://10.10.2.52/contrat-core/contrat/preparer</con:originalUri><con:assertion type="XPath Match" name="Error Code" id="a77f6377-f503-4b50-bcf4-3b4eb815e086">
              <con:configuration>
                <path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/preparer'; //ns1:errorCode</path>
                <content>1.1.30</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
                <ignoreComments>false</ignoreComments>
              </con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="URL" id="d827b067-154a-4df0-818b-0ae4d80b275c">
              <con:configuration>
                <path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/preparer'; //ns1:url</path>
                <content>/contrat-core/contrat/preparer</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
                <ignoreComments>false</ignoreComments>
              </con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorMessage" id="a995ee30-cabc-4393-aaf6-a9a067e0efb1">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/preparer'; 
//ns1:errorMessage</path><content>Deux produits ont le mÃªme numero d'element contractuel.</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
			<con:assertion type="Invalid HTTP Status Codes" name="Code HTTP 500" disabled="true" id="2ebd7e5f-ef25-49f4-b5ef-bb7a2e2c5051">
              <con:configuration>
                <codes>500</codes>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters/>
          </con:restRequest>
        </con:config>
      </con:testStep><con:testStep type="restrequest" name="Avec Engagement > Durée">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/preparer" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="Avec Engagement > Durée" mediaType="application/json" postQueryString="false" id="7e8cfe53-72a4-4424-beea-8afb9dc13250">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{
  "user": "test",
  "produits": [
    {
      "reference": "avfw.prestige.l",
      "numEC": "1",
      "numeroCommande": "741258",
      "label": "Abonnement Antivirus Securitoo 6 postes",
      "typeProduit": "SERVICE",
      "prix": {
        "periodicite": "1",
        "duree": "24",
        "engagement": "48",
        "typeTVA": "R",
        "montant": "30",
        "frais": [
          {
            "montant": "30",
            "typeFrais": "creation"
          }
        ],
        "modePaiement": "SEPA",
        "modeFacturation": "PREMIER_MOIS"
      }
    }
  ]
}</con:request>
            <con:originalUri>http://10.10.2.52/contrat-core/contrat/preparer</con:originalUri>
            
            
            <con:assertion type="Valid HTTP Status Codes" name="Code Error 500" disabled="true"><con:configuration><codes>500</codes></con:configuration></con:assertion><con:assertion type="XPath Match" name="URL"><con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/preparer';
//ns1:url</path><content>/contrat-core/contrat/preparer</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="Error Code"><con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/preparer';
//ns1:errorCode</path><content>1.1.13</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="Error Message"><con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/preparer';
//ns1:errorMessage</path><content>L'engagement d'un contrat ne peut pas etre superieure a la duree.</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials>
              <con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters/>
          </con:restRequest>
        </con:config>
      </con:testStep><con:properties/>
    </con:testCase>
    <con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Validation Champs Obligatoires" searchProperties="true" id="f440a06c-4f11-4e56-9ccb-6e865e283596" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="">
      <con:settings/>
      <con:testStep type="calltestcase" name="PreparationContrat" id="bf5b97b9-0521-4e44-a4da-30c86ee14ede">
        <con:settings/>
        <con:config xsi:type="con:RunTestCaseStep" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:targetTestCase>e7072e2a-0fb9-4743-a447-c332f0ca0e94</con:targetTestCase>
          <con:properties>
            <con:property>
              <con:name>RefCommande</con:name>
              <con:value>7c398a7b-fcd7-4641-91a6-5f4ddad14c72</con:value>
            </con:property>
            <con:property>
              <con:name>RefContrat</con:name>
              <con:value>00000367</con:value>
            </con:property>
          </con:properties>
          <con:returnProperties>
            <con:entry>RefCommande</con:entry>
            <con:entry>RefContrat</con:entry>
          </con:returnProperties>
          <con:runMode>SINGLETON_AND_WAIT</con:runMode>
        </con:config>
      </con:testStep>
      <con:testStep type="restrequest" name="Validation incomplète" id="7ee7c3a0-5530-40ae-b24d-f2c0ab5f0b4d">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/{refContrat}/valider" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="Validation incomplète" mediaType="application/json" postQueryString="false" id="61e5a8b8-9e0b-49d7-a9ba-078986cdcc50">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{
  "user" : "test",
  "idClient": "00003870",
  "idAdrFacturation": "685",
  "paiementInfos": [
    {
      "referenceProduit": "jet",
      "numEC": "1",
      "referenceModePaiement": "R0000012",
      "idAdrLivraison": "adrliv1"
    },
    {
      "referenceProduit": "option.plus.50g",
      "numEC": "2",
      "referenceModePaiement": "R0000012",
      "idAdrLivraison": "adrliv1"
    }
  ],
  "politiqueValidation": {
    "fraisCreation": "true",
    "checkIsPackagerCreationPossible": "true"
  }
}</con:request>
            <con:originalUri>http://10.10.2.52/contrat-core/contrat/${PreparationContrat#RefContrat}/valider</con:originalUri><con:assertion type="XPath Match" name="URL" id="74ed8007-2fee-42ba-83d4-e477a1165bdd">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${PreparationContrat#RefContrat}/valider';
//ns1:url</path><content>/contrat-core/contrat/${PreparationContrat#RefContrat}/valider</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorCode" id="23e89f03-f858-4307-a4e3-a3316a4e8bad">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${PreparationContrat#RefContrat}/valider'; 
//ns1:errorCode</path><content>1.1.31</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorMessage" id="47da7c09-3ff3-49b1-a486-46bc8e5f6dcd">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${PreparationContrat#RefContrat}/valider'; 
//ns1:errorMessage</path><content>Les mÃªme numeros d'element contractuel et RÃ©fÃ©rences  utilisÃ©es lors de la preparation doivent Ãªtre utilisÃ©es lors de validation.</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
			<con:assertion type="Invalid HTTP Status Codes" name="Code HTTP 500" disabled="true" id="2ebd7e5f-ef25-49f4-b5ef-bb7a2e2c5051">
              <con:configuration>
                <codes>500</codes>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters><entry key="refContrat" value="${PreparationContrat#RefContrat}" xmlns="http://eviware.com/soapui/config"/></con:parameters>
          </con:restRequest>
        </con:config>
      </con:testStep>
      <con:testStep type="restrequest" name="Validation incohérente : NumEC &lt;> referenceProduit" id="ec8453c5-b7ef-4a23-ac67-79a7bda3d217">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/{refContrat}/valider" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="Validation incohérente : NumEC &lt;> referenceProduit" mediaType="application/json" postQueryString="false" id="61e5a8b8-9e0b-49d7-a9ba-078986cdcc50">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{
  "user" : "test",
  "idClient": "00003870",
  "idAdrFacturation": "685",
  "paiementInfos": [
    {
      "referenceProduit": "jet",
      "numEC": "3",
      "referenceModePaiement": "R0000012",
      "idAdrLivraison": "adrliv1"
    },
    {
      "referenceProduit": "option.plus.50g",
      "numEC": "1",
      "referenceModePaiement": "R0000012",
      "idAdrLivraison": "adrliv1"
    },
    {
      "referenceProduit": "kit-sat",
      "numEC": "2",
      "referenceModePaiement": "R0000012",
      "idAdrLivraison": "adrliv1"
    }
  ],
  "politiqueValidation": {
    "fraisCreation": "true",
    "checkIsPackagerCreationPossible": "true"
  }
}</con:request>
            <con:originalUri>http://10.10.2.52/contrat-core/contrat/${PreparationContrat#RefContrat}/valider</con:originalUri><con:assertion type="XPath Match" name="URL" id="3693744c-8323-4395-ad2d-f6795dbe5abf">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${PreparationContrat#RefContrat}/valider'; 
//ns1:url</path><content>/contrat-core/contrat/${PreparationContrat#RefContrat}/valider</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorCode" id="8af540ae-18e3-4ba0-8da8-26db03250dff">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${PreparationContrat#RefContrat}/valider'; 
//ns1:errorCode</path><content>1.1.31</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorMessage" id="fca8cae3-89dd-43f7-88ff-36a4605e55b3">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${PreparationContrat#RefContrat}/valider'; 
//ns1:errorMessage</path><content>Les mÃªme numeros d'element contractuel et RÃ©fÃ©rences  utilisÃ©es lors de la preparation doivent Ãªtre utilisÃ©es lors de validation.</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
			<con:assertion type="Invalid HTTP Status Codes" name="Code HTTP 500" disabled="true" id="2ebd7e5f-ef25-49f4-b5ef-bb7a2e2c5051">
              <con:configuration>
                <codes>500</codes>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters><entry key="refContrat" value="${PreparationContrat#RefContrat}" xmlns="http://eviware.com/soapui/config"/></con:parameters>
          </con:restRequest>
        </con:config>
      </con:testStep>
      <con:testStep type="restrequest" name="Sans PaiementsInfos" id="b17173e0-0878-4a1e-b114-a29db91b782b">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/{refContrat}/valider" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="Sans PaiementsInfos" mediaType="application/json" postQueryString="false" id="61e5a8b8-9e0b-49d7-a9ba-078986cdcc50">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{
  "user" : "test",
  "idClient": "00003870",
  "idAdrFacturation": "685",
  "paiementInfos": [],
  "politiqueValidation": {
    "fraisCreation": "true",
    "checkIsPackagerCreationPossible": "true"
  }
}</con:request>
            <con:originalUri>http://10.10.2.52/contrat-core/contrat/${PreparationContrat#RefContrat}/valider</con:originalUri><con:assertion type="XPath Match" name="URL" id="32ee0cd1-b3f8-456e-827e-2308607bc616">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${PreparationContrat#RefContrat}/valider'; 
//ns1:url</path><content>/contrat-core/contrat/${PreparationContrat#RefContrat}/valider</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorCode" id="c5504292-eb98-471f-ba1b-7f2f87249d62">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${PreparationContrat#RefContrat}/valider'; 
//ns1:errorCode</path><content>1.1.7</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorMessage" id="a1e26909-88e5-4874-8ae8-4c2f8f14a8ce">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${PreparationContrat#RefContrat}/valider'; 
//ns1:errorMessage</path><content>Pas des information de validation.</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
			<con:assertion type="Invalid HTTP Status Codes" name="Code HTTP 500" disabled="true" id="2ebd7e5f-ef25-49f4-b5ef-bb7a2e2c5051">
              <con:configuration>
                <codes>500</codes>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters><entry key="refContrat" value="${PreparationContrat#RefContrat}" xmlns="http://eviware.com/soapui/config"/></con:parameters>
          </con:restRequest>
        </con:config>
      </con:testStep>
      <con:testStep type="restrequest" name="Sans idClient" id="25b6662d-fc2a-45da-99a3-1afa25e675ec">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/{refContrat}/valider" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="Sans idClient" mediaType="application/json" postQueryString="false" id="61e5a8b8-9e0b-49d7-a9ba-078986cdcc50">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{
  "user" : "test",
  "idAdrFacturation": "685",
  "paiementInfos": [
    {
      "referenceProduit": "jet",
      "numEC": "1",
      "referenceModePaiement": "R0000012",
      "idAdrLivraison": "adrliv1"
    },
    {
      "referenceProduit": "option.plus.50g",
      "numEC": "2",
      "referenceModePaiement": "R0000012",
      "idAdrLivraison": "adrliv1"
    },
    {
      "referenceProduit": "kit-sat",
      "numEC": "3",
      "referenceModePaiement": "R0000012",
      "idAdrLivraison": "adrliv1"
    }
  ],
  "politiqueValidation": {
    "fraisCreation": "true",
    "checkIsPackagerCreationPossible": "true"
  }
}</con:request>
            <con:originalUri>http://10.10.2.52/contrat-core/contrat/${PreparationContrat#RefContrat}/valider</con:originalUri><con:assertion type="XPath Match" name="URL" id="b104a18d-0493-4a6f-a54a-37a53db58e21">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${PreparationContrat#RefContrat}/valider'; 
//ns1:url</path><content>/contrat-core/contrat/${PreparationContrat#RefContrat}/valider</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorCode" id="dbf9dc2a-3a2f-4394-b5b0-8980823d7db4">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${PreparationContrat#RefContrat}/valider'; 
//ns1:errorCode</path><content>0.1.1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorMessage" id="7e3db80f-8982-4b03-ae7f-6bc71be39702">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${PreparationContrat#RefContrat}/valider'; 
//ns1:errorMessage</path><content>un des paramÃ¨tres est mal formatÃ© : Contrat.idClient.</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
			<con:assertion type="Invalid HTTP Status Codes" name="Code HTTP 500" disabled="true" id="2ebd7e5f-ef25-49f4-b5ef-bb7a2e2c5051">
              <con:configuration>
                <codes>500</codes>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters><entry key="refContrat" value="${PreparationContrat#RefContrat}" xmlns="http://eviware.com/soapui/config"/></con:parameters>
          </con:restRequest>
        </con:config>
      </con:testStep>
      <con:testStep type="restrequest" name="Sans idAdrFacturation" id="746286ce-4a7f-446b-a1cd-636cc88c2bcb">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/{refContrat}/valider" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="Sans idAdrFacturation" mediaType="application/json" postQueryString="false" id="61e5a8b8-9e0b-49d7-a9ba-078986cdcc50">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{
  "user" : "test",
  "idClient": "00161",
  "paiementInfos": [
    {
      "referenceProduit": "jet",
      "numEC": "1",
      "referenceModePaiement": "R0000012",
      "idAdrLivraison": "adrliv1"
    },
    {
      "referenceProduit": "option.plus.50g",
      "numEC": "2",
      "referenceModePaiement": "R0000012",
      "idAdrLivraison": "adrliv1"
    },
    {
      "referenceProduit": "kit-sat",
      "numEC": "3",
      "referenceModePaiement": "R0000012",
      "idAdrLivraison": "adrliv1"
    }
  ],
  "politiqueValidation": {
    "fraisCreation": "true",
    "checkIsPackagerCreationPossible": "true"
  }
}</con:request>
            <con:originalUri>http://10.10.2.52/contrat-core/contrat/${PreparationContrat#RefContrat}/valider</con:originalUri><con:assertion type="XPath Match" name="URL" id="c3a73f81-3e39-47d2-85ea-13bc848c0f8d">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${PreparationContrat#RefContrat}/valider'; //ns1:url</path><content>/contrat-core/contrat/${PreparationContrat#RefContrat}/valider</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorCode" id="dc5bfb0a-dd56-4102-a21b-24fc9427ccd1">
              <con:configuration>
                <path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${PreparationContrat#RefContrat}/valider'; //ns1:errorCode</path>
                <content>0.1.1</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
                <ignoreComments>false</ignoreComments>
              </con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorMessage" id="2037a4ac-b238-483d-bc59-cea58abf2456">
              <con:configuration>
                <path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${PreparationContrat#RefContrat}/valider'; //ns1:errorMessage</path>
                <content>un des paramÃ¨tres est mal formatÃ© : Contrat.idAdrFacturation.</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
                <ignoreComments>false</ignoreComments>
              </con:configuration>
            </con:assertion>
			<con:assertion type="Invalid HTTP Status Codes" name="Code HTTP 500" disabled="true" id="2ebd7e5f-ef25-49f4-b5ef-bb7a2e2c5051">
              <con:configuration>
                <codes>500</codes>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters><entry key="refContrat" value="${PreparationContrat#RefContrat}" xmlns="http://eviware.com/soapui/config"/></con:parameters>
          </con:restRequest>
        </con:config>
      </con:testStep>
      <con:testStep type="restrequest" name="Sans paiementInfos" id="0f69678f-d94f-43d3-a759-5755ae149288">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/{refContrat}/valider" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="Sans paiementInfos" mediaType="application/json" postQueryString="false" id="61e5a8b8-9e0b-49d7-a9ba-078986cdcc50">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{
  "user" : "test",
  "idClient": "00161",
  "idAdrFacturation": "685",
  "politiqueValidation": {
    "fraisCreation": "true",
    "checkIsPackagerCreationPossible": "true"
  }
}</con:request>
            <con:originalUri>http://10.10.2.52/contrat-core/contrat/${PreparationContrat#RefContrat}/valider</con:originalUri><con:assertion type="XPath Match" name="URL" id="8f521e8e-94f3-41d4-9105-4d3572c63f2d">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${PreparationContrat#RefContrat}/valider'; //ns1:url</path><content>/contrat-core/contrat/${PreparationContrat#RefContrat}/valider</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorCode" id="7f1eb7ee-9e78-4e65-b728-7377510819ff">
              <con:configuration>
                <path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${PreparationContrat#RefContrat}/valider'; //ns1:errorCode</path>
                <content>1.1.7</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
                <ignoreComments>false</ignoreComments>
              </con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorMessage" id="c7a50888-e6d5-4b24-8cca-9eae156efffc">
              <con:configuration>
                <path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${PreparationContrat#RefContrat}/valider'; //ns1:errorMessage</path>
                <content>Pas des information de validation.</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
                <ignoreComments>false</ignoreComments>
              </con:configuration>
            </con:assertion>
			<con:assertion type="Invalid HTTP Status Codes" name="Code HTTP 500" disabled="true" id="2ebd7e5f-ef25-49f4-b5ef-bb7a2e2c5051">
              <con:configuration>
                <codes>500</codes>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters>
              <entry key="refContrat" value="${PreparationContrat#RefContrat}" xmlns="http://eviware.com/soapui/config"/>
            </con:parameters>
          </con:restRequest>
        </con:config>
      </con:testStep>
      <con:testStep type="restrequest" name="Sans politiqueValidation" id="a2b34609-c465-448e-a502-42a4a04e11cd">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/{refContrat}/valider" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="Sans politiqueValidation" mediaType="application/json" postQueryString="false" id="61e5a8b8-9e0b-49d7-a9ba-078986cdcc50">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{
  "user" : "test",
  "idClient": "00161",
  "idAdrFacturation": "167",
  "paiementInfos": [
    {
      "referenceProduit": "jet",
      "numEC": "1",
      "referenceModePaiement": "R0000012",
      "idAdrLivraison": "adrliv1"
    },
    {
      "referenceProduit": "option.plus.50g",
      "numEC": "2",
      "referenceModePaiement": "R0000012",
      "idAdrLivraison": "adrliv1"
    },
    {
      "referenceProduit": "kit-sat",
      "numEC": "3",
      "referenceModePaiement": "R0000012",
      "idAdrLivraison": "adrliv1"
    }
  ]
}</con:request>
            <con:originalUri>http://10.10.2.52/contrat-core/contrat/${PreparationContrat#RefContrat}/valider</con:originalUri><con:assertion type="XPath Match" name="URL" id="1903a5b1-729f-4047-8415-2bd5e076cccc">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${PreparationContrat#RefContrat}/valider'; //ns1:url</path><content>/contrat-core/contrat/${PreparationContrat#RefContrat}/valider</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorCode" id="305e392e-47e4-4ab2-a79f-518b95e37d05">
              <con:configuration>
                <path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${PreparationContrat#RefContrat}/valider'; //ns1:errorCode</path>
                <content>1.1.17</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
                <ignoreComments>false</ignoreComments>
              </con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorMessage" id="e03b093c-301a-4f1a-b881-341947180b8a">
              <con:configuration>
                <path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${PreparationContrat#RefContrat}/valider'; //ns1:errorMessage</path>
                <content>La politique de validation est obligatoire.</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
                <ignoreComments>false</ignoreComments>
              </con:configuration>
            </con:assertion>
			<con:assertion type="Invalid HTTP Status Codes" name="Code HTTP 500" disabled="true" id="2ebd7e5f-ef25-49f4-b5ef-bb7a2e2c5051">
              <con:configuration>
                <codes>500</codes>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters>
              <entry key="refContrat" value="${PreparationContrat#RefContrat}" xmlns="http://eviware.com/soapui/config"/>
            </con:parameters>
          </con:restRequest>
        </con:config>
      </con:testStep>
      <con:testStep type="restrequest" name="Sans paiementsInfos.referenceProduit" id="c4b2ee20-fabe-434a-8fda-7bcf3acc938b">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/{refContrat}/valider" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="Sans paiementsInfos.referenceProduit" mediaType="application/json" postQueryString="false" id="61e5a8b8-9e0b-49d7-a9ba-078986cdcc50">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{
  "user" : "test",
  "idClient": "00003870",
  "idAdrFacturation": "685",
  "paiementInfos": [
    {
      "numEC": "1",
      "referenceModePaiement": "R0000012",
      "idAdrLivraison": "adrliv1"
    },
    {
      "referenceProduit": "option.plus.50g",
      "numEC": "2",
      "referenceModePaiement": "R0000012",
      "idAdrLivraison": "adrliv1"
    },
    {
      "referenceProduit": "kit-sat",
      "numEC": "3",
      "referenceModePaiement": "R0000012",
      "idAdrLivraison": "adrliv1"
    }
  ],
  "politiqueValidation": {
    "fraisCreation": "true",
    "checkIsPackagerCreationPossible": "true"
  }
}</con:request>
            <con:originalUri>http://10.10.2.52/contrat-core/contrat/${PreparationContrat#RefContrat}/valider</con:originalUri><con:assertion type="XPath Match" name="URL" id="491e41b1-91bc-4855-af89-cd50fe49d90a">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${PreparationContrat#RefContrat}/valider'; //ns1:url</path><content>/contrat-core/contrat/${PreparationContrat#RefContrat}/valider</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorCode" id="d70d7166-a5fb-419b-95c8-e82e04bcd49f">
              <con:configuration>
                <path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${PreparationContrat#RefContrat}/valider'; //ns1:errorCode</path>
                <content>1.1.31</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
                <ignoreComments>false</ignoreComments>
              </con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorMessage" id="435a5deb-1dbf-41e8-8a93-7eaa6cd324a5">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${PreparationContrat#RefContrat}/valider'; //ns1:errorMessage</path><content>Les mÃªme numeros d'element contractuel et RÃ©fÃ©rences  utilisÃ©es lors de la preparation doivent Ãªtre utilisÃ©es lors de validation.</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
			<con:assertion type="Invalid HTTP Status Codes" name="Code HTTP 500" disabled="true" id="2ebd7e5f-ef25-49f4-b5ef-bb7a2e2c5051">
              <con:configuration>
                <codes>500</codes>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters>
              <entry key="refContrat" value="${PreparationContrat#RefContrat}" xmlns="http://eviware.com/soapui/config"/>
            </con:parameters>
          </con:restRequest>
        </con:config>
      </con:testStep>
      <con:testStep type="restrequest" name="Sans paiementsInfos.NumEC" id="c953e629-1f31-49c0-8e58-1ae53d418baf">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/{refContrat}/valider" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="Sans paiementsInfos.NumEC" mediaType="application/json" postQueryString="false" id="61e5a8b8-9e0b-49d7-a9ba-078986cdcc50">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{
  "user" : "test",
  "idClient": "00003870",
  "idAdrFacturation": "685",
  "paiementInfos": [
    {
      "referenceProduit": "jet",
      "referenceModePaiement": "R0000012",
      "idAdrLivraison": "adrliv1"
    },
    {
      "referenceProduit": "option.plus.50g",
      "numEC": "2",
      "referenceModePaiement": "R0000012",
      "idAdrLivraison": "adrliv1"
    },
    {
      "referenceProduit": "kit-sat",
      "numEC": "3",
      "referenceModePaiement": "R0000012",
      "idAdrLivraison": "adrliv1"
    }
  ],
  "politiqueValidation": {
    "fraisCreation": "true",
    "checkIsPackagerCreationPossible": "true"
  }
}</con:request>
            <con:originalUri>http://10.10.2.52/contrat-core/contrat/${PreparationContrat#RefContrat}/valider</con:originalUri><con:assertion type="XPath Match" name="URL" id="27c6f1f1-946a-4a26-ac47-93f77076c1d3">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${PreparationContrat#RefContrat}/valider'; //ns1:url</path><content>/contrat-core/contrat/${PreparationContrat#RefContrat}/valider</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorCode" id="30a78e52-8c5d-4a57-aeb1-9f6de42da49e">
              <con:configuration>
                <path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${PreparationContrat#RefContrat}/valider'; //ns1:errorCode</path>
                <content>1.1.31</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
                <ignoreComments>false</ignoreComments>
              </con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorMessage" id="523187e5-3178-4885-afee-7e39782d9241">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${PreparationContrat#RefContrat}/valider'; //ns1:errorMessage</path><content>Les mÃªme numeros d'element contractuel et RÃ©fÃ©rences  utilisÃ©es lors de la preparation doivent Ãªtre utilisÃ©es lors de validation.</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
			<con:assertion type="Invalid HTTP Status Codes" name="Code HTTP 500" disabled="true" id="2ebd7e5f-ef25-49f4-b5ef-bb7a2e2c5051">
              <con:configuration>
                <codes>500</codes>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters>
              <entry key="refContrat" value="${PreparationContrat#RefContrat}" xmlns="http://eviware.com/soapui/config"/>
            </con:parameters>
          </con:restRequest>
        </con:config>
      </con:testStep>
      <con:testStep type="restrequest" name="Sans paiementsInfos.referenceModePaiement" id="ca23457f-4367-4fba-99fa-ba725bba38b0">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/{refContrat}/valider" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="Sans paiementsInfos.referenceModePaiement" mediaType="application/json" postQueryString="false" id="61e5a8b8-9e0b-49d7-a9ba-078986cdcc50">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{
  "user" : "test",
  "idClient": "00003870",
  "idAdrFacturation": "685",
  "paiementInfos": [
    {
      "referenceProduit": "jet",
      "numEC": "1",
      "idAdrLivraison": "adrliv1"
    },
    {
      "referenceProduit": "option.plus.50g",
      "numEC": "2",
      "referenceModePaiement": "R0000012",
      "idAdrLivraison": "adrliv1"
    },
    {
      "referenceProduit": "kit-sat",
      "numEC": "3",
      "referenceModePaiement": "R0000012",
      "idAdrLivraison": "adrliv1"
    }
  ],
  "politiqueValidation": {
    "fraisCreation": "true",
    "checkIsPackagerCreationPossible": "true"
  }
}</con:request>
            <con:originalUri>http://10.10.2.52/contrat-core/contrat/${PreparationContrat#RefContrat}/valider</con:originalUri><con:assertion type="XPath Match" name="URL" id="62fa069f-df83-473d-88ab-b8e507228d5c">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${PreparationContrat#RefContrat}/valider'; //ns1:url</path><content>/contrat-core/contrat/${PreparationContrat#RefContrat}/valider</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorCode" id="d2250188-6a07-4b39-90da-447f77a8efc4">
              <con:configuration>
                <path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${PreparationContrat#RefContrat}/valider'; //ns1:errorCode</path>
                <content>1.1.37</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
                <ignoreComments>false</ignoreComments>
              </con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorMessage" id="9105228a-543e-47c6-81e8-3958c27cb815">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${PreparationContrat#RefContrat}/valider'; //ns1:errorMessage</path><content>la RÃ©fÃ©rence de Mode paiement est obligatoire seulement pour le mode de paiement de type CB, SEPA ou FACTURE .</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
			<con:assertion type="Invalid HTTP Status Codes" name="Code HTTP 500" disabled="true" id="2ebd7e5f-ef25-49f4-b5ef-bb7a2e2c5051">
              <con:configuration>
                <codes>500</codes>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters>
              <entry key="refContrat" value="${PreparationContrat#RefContrat}" xmlns="http://eviware.com/soapui/config"/>
            </con:parameters>
          </con:restRequest>
        </con:config>
      </con:testStep>
      <con:testStep type="restrequest" name="Sans politique" id="32a3ed2f-363d-49f4-a8db-f87b85a44e40">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/{refContrat}/valider" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="Sans politique" mediaType="application/json" postQueryString="false" id="61e5a8b8-9e0b-49d7-a9ba-078986cdcc50">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{
  "user" : "test",
  "idClient": "00003870",
  "idAdrFacturation": "685",
  "paiementInfos": [
    {
      "referenceProduit": "jet",
      "numEC": "1",
      "referenceModePaiement": "R0000012",
      "idAdrLivraison": "adrliv1"
    },
    {
      "referenceProduit": "option.plus.50g",
      "numEC": "2",
      "referenceModePaiement": "R0000012",
      "idAdrLivraison": "adrliv1"
    },
    {
      "referenceProduit": "kit-sat",
      "numEC": "3",
      "referenceModePaiement": "R0000012",
      "idAdrLivraison": "adrliv1"
    }
  ],
  "politiqueValidation": {}
}</con:request>
            <con:originalUri>http://10.10.2.52/contrat-core/contrat/${PreparationContrat#RefContrat}/valider</con:originalUri><con:assertion type="XPath Match" name="URL" id="ee66de36-092a-4daf-aa7b-7247eafb1542">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${PreparationContrat#RefContrat}/valider'; //ns1:url</path><content>/contrat-core/contrat/${PreparationContrat#RefContrat}/valider</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorCode" id="89920ff2-515e-4b36-a85f-fd0889472f34">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${PreparationContrat#RefContrat}/valider'; //ns1:errorCode</path><content>1.1.17</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorMessage" id="317b518f-8047-44f2-ba5d-197e7961399f">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${PreparationContrat#RefContrat}/valider'; //ns1:errorMessage</path><content>La politique de validation est obligatoire.</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
			<con:assertion type="Invalid HTTP Status Codes" name="Code HTTP 500" disabled="true" id="2ebd7e5f-ef25-49f4-b5ef-bb7a2e2c5051">
              <con:configuration>
                <codes>500</codes>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters>
              <entry key="refContrat" value="${PreparationContrat#RefContrat}" xmlns="http://eviware.com/soapui/config"/>
            </con:parameters>
          </con:restRequest>
        </con:config>
      </con:testStep>
      <con:testStep type="restrequest" name="Sans politique.checkIsPackagerCreationPossible" id="8d635f92-9906-46aa-a33f-ee1b71ad8c6d">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/{refContrat}/valider" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="Sans politique.checkIsPackagerCreationPossible" mediaType="application/json" postQueryString="false" id="61e5a8b8-9e0b-49d7-a9ba-078986cdcc50">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{
  "user" : "test",
  "idClient": "00003870",
  "idAdrFacturation": "685",
  "paiementInfos": [
    {
      "referenceProduit": "jet",
      "numEC": "1",
      "referenceModePaiement": "R0000012",
      "idAdrLivraison": "adrliv1"
    },
    {
      "referenceProduit": "option.plus.50g",
      "numEC": "2",
      "referenceModePaiement": "R0000012",
      "idAdrLivraison": "adrliv1"
    },
    {
      "referenceProduit": "kit-sat",
      "numEC": "3",
      "referenceModePaiement": "R0000012",
      "idAdrLivraison": "adrliv1"
    }
  ],
  "politiqueValidation": {
    "fraisCreation": true
  }
}</con:request>
            <con:originalUri>http://10.10.2.52/contrat-core/contrat/${PreparationContrat#RefContrat}/valider</con:originalUri><con:assertion type="XPath Match" name="URL" id="f6ce17cb-c48a-4278-bbe5-f8d11bf20db6">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${PreparationContrat#RefContrat}/valider'; //ns1:url</path><content>/contrat-core/contrat/${PreparationContrat#RefContrat}/valider</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorCode" id="2b70e37a-004f-47e1-9d6c-d5d692d55fb4">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${PreparationContrat#RefContrat}/valider'; //ns1:errorCode</path><content>0.1.1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorMessage" id="db6579f3-0471-42f8-b8d0-c74f82a45d2f">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${PreparationContrat#RefContrat}/valider'; //ns1:errorMessage</path><content>un des paramÃ¨tres est mal formatÃ© : PolitiqueValidation.checkIsPackagerCreationPossible.</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
			<con:assertion type="Invalid HTTP Status Codes" name="Code HTTP 500" disabled="true" id="2ebd7e5f-ef25-49f4-b5ef-bb7a2e2c5051">
              <con:configuration>
                <codes>500</codes>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters>
              <entry key="refContrat" value="${PreparationContrat#RefContrat}" xmlns="http://eviware.com/soapui/config"/>
            </con:parameters>
          </con:restRequest>
        </con:config>
      </con:testStep>
      <con:testStep type="restrequest" name="Sans politique.fraisCreation" id="c97a6bf0-4d7a-4ed9-9df9-b64a83de6669">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/{refContrat}/valider" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="Sans politique.fraisCreation" mediaType="application/json" postQueryString="false" id="61e5a8b8-9e0b-49d7-a9ba-078986cdcc50">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{
  "user" : "test",
  "idClient": "00003870",
  "idAdrFacturation": "685",
  "paiementInfos": [
    {
      "referenceProduit": "jet",
      "numEC": "1",
      "referenceModePaiement": "R0000012",
      "idAdrLivraison": "adrliv1"
    },
    {
      "referenceProduit": "option.plus.50g",
      "numEC": "2",
      "referenceModePaiement": "R0000012",
      "idAdrLivraison": "adrliv1"
    },
    {
      "referenceProduit": "kit-sat",
      "numEC": "3",
      "referenceModePaiement": "R0000012",
      "idAdrLivraison": "adrliv1"
    }
  ],
  "politiqueValidation": {
    "checkIsPackagerCreationPossible": "true"
  }
}</con:request>
            <con:originalUri>http://10.10.2.52/contrat-core/contrat/${PreparationContrat#RefContrat}/valider</con:originalUri><con:assertion type="XPath Match" name="URL" id="41bad655-b079-4ba9-a989-866beab7d617">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${PreparationContrat#RefContrat}/valider'; //ns1:url</path><content>/contrat-core/contrat/${PreparationContrat#RefContrat}/valider</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorCode" id="53df626a-26b9-4372-ad45-7230bb3ad381">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${PreparationContrat#RefContrat}/valider'; //ns1:errorCode</path><content>0.1.1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorMessage" id="1977c3e6-6e5a-4e44-9d69-946ae5fc0c4f">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${PreparationContrat#RefContrat}/valider'; //ns1:errorMessage</path><content>un des paramÃ¨tres est mal formatÃ© : PolitiqueValidation.fraisCreation.</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
			<con:assertion type="Invalid HTTP Status Codes" name="Code HTTP 500" disabled="true" id="2ebd7e5f-ef25-49f4-b5ef-bb7a2e2c5051">
              <con:configuration>
                <codes>500</codes>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters>
              <entry key="refContrat" value="${PreparationContrat#RefContrat}" xmlns="http://eviware.com/soapui/config"/>
            </con:parameters>
          </con:restRequest>
        </con:config>
      </con:testStep>
      <con:testStep type="restrequest" name="Sans paiementsInfos.idAdrLivraison alors que bien présent" id="3c208b76-f27a-4e5e-ab16-eb47534e273e">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/{refContrat}/valider" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="Sans paiementsInfos.idAdrLivraison alors que bien présent" mediaType="application/json" postQueryString="false" id="61e5a8b8-9e0b-49d7-a9ba-078986cdcc50">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{
  "user" : "test",
  "idClient": "00003870",
  "idAdrFacturation": "685",
  "paiementInfos": [
    {
      "referenceProduit": "jet",
      "numEC": "1",
      "referenceModePaiement": "R0000012"
    },
    {
      "referenceProduit": "option.plus.50g",
      "numEC": "2",
      "referenceModePaiement": "R0000012"
    },
    {
      "referenceProduit": "kit-sat",
      "numEC": "3",
      "referenceModePaiement": "R0000012"
    }
  ],
  "politiqueValidation": {
    "fraisCreation": "true",
    "checkIsPackagerCreationPossible": "true"
  }
}</con:request>
            <con:originalUri>http://10.10.2.52/contrat-core/contrat/${PreparationContrat#RefContrat}/valider</con:originalUri><con:assertion type="XPath Match" name="URL" id="abe3db94-bebf-4142-9e19-39d543483104">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${PreparationContrat#RefContrat}/valider'; 
//ns1:url</path><content>/contrat-core/contrat/${PreparationContrat#RefContrat}/valider</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorCode" id="e63eef4c-eee0-4b8d-9cf8-43161cb8db9f">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${PreparationContrat#RefContrat}/valider'; 
//ns1:errorCode</path><content>1.1.94</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorMessage" id="64a417de-ef92-4b8d-9fdc-3ff77b256393">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${PreparationContrat#RefContrat}/valider'; 
//ns1:errorMessage</path><content>L'adresse de livraison est obligatoire pour le produit kit-sat de type BIEN.</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
			<con:assertion type="Invalid HTTP Status Codes" name="Code HTTP 500" disabled="true" id="2ebd7e5f-ef25-49f4-b5ef-bb7a2e2c5051">
              <con:configuration>
                <codes>500</codes>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters><entry key="refContrat" value="${PreparationContrat#RefContrat}" xmlns="http://eviware.com/soapui/config"/></con:parameters>
          </con:restRequest>
        </con:config>
      </con:testStep>
      
      <con:properties/>
    </con:testCase>
    <con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Resiliation Totale Champs Obligatoires" searchProperties="true" id="cf801751-1e75-4bde-9b52-1778ad30799b">
      <con:description>TestCase generated for REST Resource [Resiliation] located at
      [/contrat-core/contrat/{refContrat}/resilier]</con:description>
      <con:settings/>
      <con:testStep type="calltestcase" name="Preparation" id="d8204ba6-c606-45a8-bfe5-5cd6b72e8a2b">
        <con:settings/>
        <con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:targetTestCase>e7072e2a-0fb9-4743-a447-c332f0ca0e94</con:targetTestCase>
          <con:properties>
            <con:property>
              <con:name>RefCommande</con:name>
              <con:value>7b96b854-921a-4111-a99e-a289a9873996</con:value>
            </con:property>
            <con:property>
              <con:name>RefContrat</con:name>
              <con:value>00000095</con:value>
            </con:property>
          </con:properties>
          <con:returnProperties>
            <con:entry>RefCommande</con:entry>
            <con:entry>RefContrat</con:entry>
          </con:returnProperties>
          <con:runMode>SINGLETON_AND_WAIT</con:runMode>
        </con:config>
      </con:testStep>
      <con:testStep type="restrequest" name="Sans Validation préalable" id="87582706-2e4e-4e13-ba1e-9dd400235374">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/{refContrat}/resilier" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="Sans Validation préalable" mediaType="application/json" postQueryString="false" id="39c3f79f-e72c-4bd5-acfe-614a9d4e5b15">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{
  "user": "test",
  "politiqueResiliation": {
    "fraisResiliation": "true",
    "montantResiliation": "50",
    "typeResiliation": "RIC",
    "remboursement": "true",
    "montantRemboursement": "50",
    "penalite": "true",
    "dateResiliation": null,
    "commentaire": null
  }
}</con:request>
           <con:originalUri>http://10.10.2.52/contrat-core/contrat/00000341/resilier</con:originalUri><con:assertion type="XPath Match" name="URL" id="ccd9819e-6100-4b83-a2dc-7f5cac249e46">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Preparation#RefContrat}/resilier';
                //ns1:url</path><content>/contrat-core/contrat/${Preparation#RefContrat}/resilier</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorCode" id="57b5ee5f-49f0-4789-b6d7-dc0c67560ff4">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Preparation#RefContrat}/resilier';
                //ns1:errorCode</path><content>1.1.41</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorMessage" id="444946b8-3c9d-4841-a732-11183efcf3a2">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Preparation#RefContrat}/resilier';
                //ns1:errorMessage</path><content>Resiliation Impossible: Un contrat non validÃ© ne peut pas Ãªtre rÃ©siliÃ©.</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
            <con:assertion type="Invalid HTTP Status Codes" name="Code 500"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials>
              <con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters><entry key="refContrat" value="${Preparation#RefContrat}" xmlns="http://eviware.com/soapui/config"/></con:parameters>
          </con:restRequest>
        </con:config>
      </con:testStep>
      <con:testStep type="restrequest" name="Validation" id="5bcf242b-9f27-4a02-ba78-79b7fa3db298">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/{refContrat}/valider" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="Validation" mediaType="application/json" postQueryString="false" id="61e5a8b8-9e0b-49d7-a9ba-078986cdcc50">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{
  "user" : "test",
  "idClient": "00003870",
  "idAdrFacturation": "685",
  "paiementInfos": [
    {
      "referenceProduit": "jet",
      "numEC": "1",
      "referenceModePaiement": "R0000012",
      "idAdrLivraison": "adrliv1"
    },
    {
      "referenceProduit": "option.plus.50g",
      "numEC": "2",
      "referenceModePaiement": "R0000012",
      "idAdrLivraison": "adrliv1"
    },
    {
      "referenceProduit": "kit-sat",
      "numEC": "3",
      "referenceModePaiement": "R0000012",
      "idAdrLivraison": "adrliv1"
    }
  ],
  "politiqueValidation": {
    "fraisCreation": "true",
    "checkIsPackagerCreationPossible": "true"
  }
}</con:request>
            <con:originalUri>http://10.10.2.52/contrat-core/contrat/1a231d9e/valider</con:originalUri><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="af09356b-a03f-4917-bbac-d4ca1f123697">
              <con:configuration>
                <codes>200</codes>
              </con:configuration>
            </con:assertion>
            <con:assertion type="GroovyScriptAssertion" name="Response must be empty" id="1e2cca1b-d037-42b9-b223-6ae1dc514638">
              <con:configuration>
                <scriptText>assert messageExchange.hasResponse() == false</scriptText>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters>
              <entry key="refContrat" value="${Preparation#RefContrat}" xmlns="http://eviware.com/soapui/config"/>
            </con:parameters>
          </con:restRequest>
        </con:config>
      </con:testStep>
      <con:testStep type="restrequest" name="Sans Politique" id="43ae4b6b-1ecb-47d6-b7af-a78fb7bee8a2">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/{refContrat}/resilier" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="Sans Politique" mediaType="application/json" postQueryString="false" id="39c3f79f-e72c-4bd5-acfe-614a9d4e5b15">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{ "user" : "test" }</con:request>
            <con:originalUri>http://10.10.2.52/contrat-core/contrat/1a231d9e/resilier</con:originalUri><con:assertion type="XPath Match" name="URL" id="80d7500f-9879-468f-bbb5-cce7ea4bf5ca">
              <con:configuration>
                <path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Preparation#RefContrat}/resilier';
                //ns1:url</path>
                <content>/contrat-core/contrat/${Preparation#RefContrat}/resilier</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
                <ignoreComments>false</ignoreComments>
              </con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorCode" id="1ca1eacf-02af-434d-ab95-c111682047af">
              <con:configuration>
                <path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Preparation#RefContrat}/resilier';
                //ns1:errorCode</path>
                <content>1.1.17</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
                <ignoreComments>false</ignoreComments>
              </con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorMessage" id="2fa7f889-7529-4a56-9735-d1b588c499bb">
              <con:configuration>
                <path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Preparation#RefContrat}/resilier';
                //ns1:errorMessage</path>
                <content>La politique de rÃ©siliation est obligatoire.</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
                <ignoreComments>false</ignoreComments>
              </con:configuration>
            </con:assertion>
			<con:assertion type="Invalid HTTP Status Codes" name="Code HTTP 500" disabled="true">
              <con:configuration>
                <codes>500</codes>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters>
              <entry key="refContrat" value="${Preparation#RefContrat}" xmlns="http://eviware.com/soapui/config"/>
            </con:parameters>
          </con:restRequest>
        </con:config>
      </con:testStep>
      <con:testStep type="restrequest" name="Sans Politique.typeResiliation" id="6b551cde-8e3d-449e-981f-e307d8d07151">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/{refContrat}/resilier" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="Sans Politique.typeResiliation" mediaType="application/json" postQueryString="false" id="39c3f79f-e72c-4bd5-acfe-614a9d4e5b15">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{
  "user": "test",
  "politiqueResiliation": {
    "remboursement": "true",
    "penalite": "true"
  }
}</con:request>
            <con:originalUri>http://10.10.2.52/contrat-core/contrat/1a231d9e/resilier</con:originalUri><con:assertion type="XPath Match" name="URL" id="0c9adb3c-fe36-4ba4-a5d4-68218dcfeee2">
              <con:configuration>
                <path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Preparation#RefContrat}/resilier';
                //ns1:url</path>
                <content>/contrat-core/contrat/${Preparation#RefContrat}/resilier</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
                <ignoreComments>false</ignoreComments>
              </con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorCode" id="650f8e06-bc63-4716-a963-064e46a6bb3e">
              <con:configuration>
                <path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Preparation#RefContrat}/resilier';
                //ns1:errorCode</path>
                <content>0.1.1</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
                <ignoreComments>false</ignoreComments>
              </con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorMessage" id="54223ed0-ecba-4e77-bea0-c74372b50d8f">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Preparation#RefContrat}/resilier';
//ns1:errorMessage</path><content>Le PolitiqueResiliation.typeResiliation ne peut valoir que [RIN, RIC].</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
			<con:assertion type="Invalid HTTP Status Codes" name="Code HTTP 500" disabled="true">
              <con:configuration>
                <codes>500</codes>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters>
              <entry key="refContrat" value="${Preparation#RefContrat}" xmlns="http://eviware.com/soapui/config"/>
            </con:parameters>
          </con:restRequest>
        </con:config>
      </con:testStep>
      <con:testStep type="restrequest" name="Avec Date Resiliation &lt; Now" id="8a5fadc8-5dff-4dd0-a46e-402966c930c6">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/{refContrat}/resilier" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="Avec Date Resiliation &lt; Now" mediaType="application/json" postQueryString="false" id="39c3f79f-e72c-4bd5-acfe-614a9d4e5b15">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{
  "user": "test",
  "politiqueResiliation": {
    "fraisResiliation": "true",
    "montantResiliation": "50",
    "typeResiliation": "RIC",
    "remboursement": "true",
    "montantRemboursement": "50",
    "penalite": "true",
    "dateResiliation": "2013-08-11",
    "commentaire": null
  }
}</con:request>
            <con:originalUri>http://10.10.2.52/contrat-core/contrat/1a231d9e/resilier</con:originalUri><con:assertion type="XPath Match" name="URL" id="bcf71f40-7375-4e9d-8155-f5fa91c243bc">
              <con:configuration>
                <path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Preparation#RefContrat}/resilier';
                //ns1:url</path>
                <content>/contrat-core/contrat/${Preparation#RefContrat}/resilier</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
                <ignoreComments>false</ignoreComments>
              </con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorCode" id="4a6d8996-69c7-4294-a8bf-50b458c0a2a7">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Preparation#RefContrat}/resilier';
//ns1:errorCode</path><content>1.1.92</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorMessage" id="9853a3a9-f1ef-4f2e-97ae-ccaafaf8242d">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Preparation#RefContrat}/resilier';
//ns1:errorMessage</path><content>Date rÃ©siliation doit etre supÃ©rieure ou Ã©gale Ã  la date du jour.</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
            <con:assertion type="Invalid HTTP Status Codes" name="Code 500" disabled="true"><con:configuration><codes>500</codes></con:configuration></con:assertion><con:credentials>
              <con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters>
              <entry key="refContrat" value="${Preparation#RefContrat}" xmlns="http://eviware.com/soapui/config"/>
            </con:parameters>
          </con:restRequest>
        </con:config>
      </con:testStep>
      <con:testStep type="restrequest" name="Sans politique.Remboursement MAIS avec montantRemboursement" id="e6ded5ac-f17b-4b46-8e8a-a5d028f41238">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/{refContrat}/resilier" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="Sans politique.Remboursement MAIS avec montantRemboursement" mediaType="application/json" postQueryString="false" id="39c3f79f-e72c-4bd5-acfe-614a9d4e5b15">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{
  "user": "test",
  "politiqueResiliation": {
    "fraisResiliation" : true,
    "typeResiliation": "RIC",
    "montantRemboursement": "50",
    "penalite": "true",
    "dateResiliation": null,
    "commentaire": ""
  }
}</con:request>
            <con:originalUri>http://10.10.2.52/contrat-core/contrat/1a231d9e/resilier</con:originalUri><con:assertion type="XPath Match" name="URL" id="26b90ed0-fe36-4134-8ac4-2fd660453048">
              <con:configuration>
                <path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Preparation#RefContrat}/resilier';
                //ns1:url</path>
                <content>/contrat-core/contrat/${Preparation#RefContrat}/resilier</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
                <ignoreComments>false</ignoreComments>
              </con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorCode" id="2775c74e-e991-44a6-86d5-0994caa1cd3c">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Preparation#RefContrat}/resilier';
                //ns1:errorCode</path><content>0.1.1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorMessage" id="72bbdfaf-f397-4786-b564-dc33ca45baee">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Preparation#RefContrat}/resilier';
//ns1:errorMessage</path><content>un des paramÃ¨tres est mal formatÃ© : PolitiqueResiliation.remboursement.</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
			<con:assertion type="Invalid HTTP Status Codes" name="Code HTTP 500" disabled="true">
              <con:configuration>
                <codes>500</codes>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters>
              <entry key="refContrat" value="${Preparation#RefContrat}" xmlns="http://eviware.com/soapui/config"/>
            </con:parameters>
          </con:restRequest>
        </con:config>
      </con:testStep>
      <con:testStep type="restrequest" name="Sans politique.FraisResiliation MAIS avec montantResiliation" id="e3565f3d-f265-44b4-8965-81b9dd4930f1">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/{refContrat}/resilier" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="Sans politique.FraisResiliation MAIS avec montantResiliation" mediaType="application/json" postQueryString="false" id="39c3f79f-e72c-4bd5-acfe-614a9d4e5b15">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{
  "user": "test",
  "politiqueResiliation": {
    "montantResiliation": "50",
    "typeResiliation": "RIC",
    "remboursement": "true",
    "montantRemboursement": "",
    "penalite": "true",
    "dateResiliation": null,
    "commentaire": ""
  }
}</con:request>
            <con:originalUri>http://10.10.2.52/contrat-core/contrat/1a231d9e/resilier</con:originalUri><con:assertion type="XPath Match" name="URL" id="6522ce7c-69d5-4d59-8895-5cc0cd0511d2">
              <con:configuration>
                <path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Preparation#RefContrat}/resilier';
                //ns1:url</path>
                <content>/contrat-core/contrat/${Preparation#RefContrat}/resilier</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
                <ignoreComments>false</ignoreComments>
              </con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorCode" id="5c7426b0-c54d-4ae6-8c88-396ccd850cce">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Preparation#RefContrat}/resilier';
//ns1:errorCode</path><content>0.1.1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorMessage" id="53dd00fb-c706-4e76-8da6-7f3bc4727436">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Preparation#RefContrat}/resilier';
//ns1:errorMessage</path><content>un des paramÃ¨tres est mal formatÃ© : PolitiqueResiliation.fraisResiliation.</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
			<con:assertion type="Invalid HTTP Status Codes" name="Code HTTP 500" disabled="true">
              <con:configuration>
                <codes>500</codes>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters>
              <entry key="refContrat" value="${Preparation#RefContrat}" xmlns="http://eviware.com/soapui/config"/>
            </con:parameters>
          </con:restRequest>
        </con:config>
      </con:testStep>
      <con:testStep type="restrequest" name="Sans User" id="d7480743-e1c9-4ef5-8eab-e9554af6c47e">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/{refContrat}/resilier" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="Sans User" mediaType="application/json" postQueryString="false" id="39c3f79f-e72c-4bd5-acfe-614a9d4e5b15">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{
  "politiqueResiliation": {
    "fraisResiliation": "true",
    "montantResiliation": "50",
    "typeResiliation": "RIC",
    "remboursement": "true",
    "penalite": "true"
  }
}</con:request>
            <con:originalUri>http://10.10.2.52/contrat-core/contrat/1a231d9e/resilier</con:originalUri><con:assertion type="XPath Match" name="URL" id="d138319b-f71c-4f9e-b614-11774383cf15">
              <con:configuration>
                <path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Preparation#RefContrat}/resilier';
                //ns1:url</path>
                <content>/contrat-core/contrat/${Preparation#RefContrat}/resilier</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
                <ignoreComments>false</ignoreComments>
              </con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorCode" id="6363fcf6-fd26-493e-8d97-99c047189a80">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Preparation#RefContrat}/resilier';
                //ns1:errorCode</path><content>1.1.91</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorMessage" id="4bf1dcb4-96e9-4c78-99f0-8d242c802e4c">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Preparation#RefContrat}/resilier';
                //ns1:errorMessage</path><content>L'element user est obligatoire.</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
            <con:assertion type="Invalid HTTP Status Codes" name="Code 500" disabled="true"><con:configuration><codes>500</codes></con:configuration></con:assertion><con:credentials>
              <con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters>
              <entry key="refContrat" value="${Preparation#RefContrat}" xmlns="http://eviware.com/soapui/config"/>
            </con:parameters>
          </con:restRequest>
        </con:config>
      </con:testStep>
      <con:properties/>
    </con:testCase>
    <con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Resiliation Partielle Champs Obligatoires" searchProperties="true" id="55829737-1ffb-4c02-8fe5-5327d0392de7">
      <con:description>TestCase generated for REST Resource [Resiliation Partielle] located at
      [/contrat-core/contrat/{refContrat}/partiel/{refProduit}/resilier]</con:description>
      <con:settings/>
      <con:testStep type="calltestcase" name="Preparation" id="716d5296-31f1-432d-9b30-6982534cf77d">
        <con:settings/>
        <con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:targetTestCase>e7072e2a-0fb9-4743-a447-c332f0ca0e94</con:targetTestCase>
          <con:properties>
            <con:property>
              <con:name>RefCommande</con:name>
              <con:value>eb24d4fe-1671-466f-9763-8109dcbc6bd2</con:value>
            </con:property>
            <con:property>
              <con:name>RefContrat</con:name>
              <con:value>00000084</con:value>
            </con:property>
          </con:properties>
          <con:returnProperties>
            <con:entry>RefCommande</con:entry>
            <con:entry>RefContrat</con:entry>
          </con:returnProperties>
          <con:runMode>SINGLETON_AND_WAIT</con:runMode>
        </con:config>
      </con:testStep>
      <con:testStep type="restrequest" name="Sans Validation préalable" id="0d41cb3d-af5e-45e5-936d-7b9428bb0adc">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/{refContrat}/resilier" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="Sans Validation préalable" mediaType="application/json" postQueryString="false" id="39c3f79f-e72c-4bd5-acfe-614a9d4e5b15">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{
  "user": "test",
  "politiqueResiliation": {
    "fraisResiliation": "true",
    "montantResiliation": "50",
    "typeResiliation": "RIC",
    "remboursement": "true",
    "montantRemboursement": "50",
    "penalite": "true",
    "dateResiliation": null,
    "commentaire": null
  }
}</con:request>
            <con:originalUri>http://10.10.2.52/contrat-core/contrat/${Preparation#RefContrat}/resilier</con:originalUri><con:assertion type="XPath Match" name="URL" id="57ccc821-59c7-4a88-9b46-3d72a3d2cd8d">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Preparation#RefContrat}/resilier';
//ns1:url</path><content>/contrat-core/contrat/${Preparation#RefContrat}/resilier</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorCode" id="1b06798f-316e-408c-a760-46ecf4821f69">
              <con:configuration>
                <path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Preparation#RefContrat}/resilier';
                //ns1:errorCode</path>
                <content>1.1.41</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
                <ignoreComments>false</ignoreComments>
              </con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorMessage" id="2f409378-3678-4ce8-8ffc-67cabc6f80d7">
              <con:configuration>
                <path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Preparation#RefContrat}/resilier';
                //ns1:errorMessage</path>
                <content>Resiliation Impossible: Un contrat non validÃ© ne peut pas Ãªtre rÃ©siliÃ©.</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
                <ignoreComments>false</ignoreComments>
              </con:configuration>
            </con:assertion>
			<con:assertion type="Invalid HTTP Status Codes" name="Code HTTP 500" disabled="true">
              <con:configuration>
                <codes>500</codes>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters>
              <entry key="refContrat" value="${Preparation#RefContrat}" xmlns="http://eviware.com/soapui/config"/>
            </con:parameters>
          </con:restRequest>
        </con:config>
      </con:testStep><con:testStep type="restrequest" name="Validation" id="b14e862e-92db-4842-8fee-f87e26ff9de8">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/{refContrat}/valider" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="Validation" mediaType="application/json" postQueryString="false" id="61e5a8b8-9e0b-49d7-a9ba-078986cdcc50">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{
  "user": "test",
  "idClient": "00003870",
  "idAdrFacturation": "685",
  "paiementInfos": [
    {
      "referenceProduit": "jet",
      "numEC": "1",
      "referenceModePaiement": "R0000012",
      "idAdrLivraison": "adrliv1"
    },
    {
      "referenceProduit": "option.plus.50g",
      "numEC": "2",
      "referenceModePaiement": "R0000012",
      "idAdrLivraison": "adrliv1"
    },
    {
      "referenceProduit": "kit-sat",
      "numEC": "3",
      "referenceModePaiement": "R0000012",
      "idAdrLivraison": "adrliv1"
    }
  ],
  "politiqueValidation": {
    "fraisCreation": "true",
    "checkIsPackagerCreationPossible": "true"
  }
}</con:request>
            <con:originalUri>http://10.10.2.52/contrat-core/contrat/${Preparation#RefContrat}/valider</con:originalUri><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="1418e219-e71a-45a2-9574-10d22c7c6264">
              <con:configuration>
                <codes>200</codes>
              </con:configuration>
            </con:assertion>
            <con:assertion type="GroovyScriptAssertion" name="Response must be empty" id="1fd1591b-4590-40f0-b62f-65c146315899">
              <con:configuration>
                <scriptText>assert messageExchange.hasResponse() == false</scriptText>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters>
              <entry key="refContrat" value="${Preparation#RefContrat}" xmlns="http://eviware.com/soapui/config"/>
            </con:parameters>
          </con:restRequest>
        </con:config>
      </con:testStep>
      <con:testStep type="restrequest" name="Produit Inconnu" id="e18ab0a4-61f5-4955-88a6-d3ce60d83712">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/{refContrat}/{numEC}/resilier" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="Produit Inconnu" mediaType="application/json" postQueryString="false" id="8eceb09f-8db3-49fc-93fc-3b0998c3f17f">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{
  "user": "test",
  "politiqueResiliation": {
    "fraisResiliation": "true",
    "montantResiliation": "50",
    "typeResiliation": "RIC",
    "remboursement": "true",
    "penalite": "true"
  }
}</con:request>
            <con:originalUri>http://10.10.2.52/contrat-core/contrat/${Preparation#RefContrat}/4/resilier</con:originalUri><con:assertion type="XPath Match" name="URL" id="a9e86d43-5313-4078-b22b-e62b18cfa490">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Preparation#RefContrat}/4/resilier';
//ns1:url</path><content>/contrat-core/contrat/${Preparation#RefContrat}/4/resilier</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="ErrorCode" id="6c25158f-c812-4104-8826-d5ce664cc3f2">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Preparation#RefContrat}/4/resilier';
//ns1:errorCode</path><content>1.1.71</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="ErrorMessage" id="c7b88f3c-00f1-4ae3-9425-33d811723e00">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Preparation#RefContrat}/4/resilier';
//ns1:errorMessage</path><content>Aucun element contractuel dans le contrat de reference ${Preparation#RefContrat} avec un numero Ã©gal Ã  4.</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
			<con:assertion type="Invalid HTTP Status Codes" name="Code HTTP 500" disabled="true">
              <con:configuration>
                <codes>500</codes>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters>
  <con:entry key="refContrat" value="${Preparation#RefContrat}"/>
  <con:entry key="numEC" value="4"/>
</con:parameters>
          <con:parameterOrder><con:entry>refContrat</con:entry><con:entry>numEC</con:entry></con:parameterOrder></con:restRequest>
        </con:config>
      </con:testStep>
      <con:testStep type="restrequest" name="Sans User" id="1420b5ff-efac-4c28-a739-22f898bfe1a1">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/{refContrat}/{numEC}/resilier" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="Sans User" mediaType="application/json" postQueryString="false" id="39c3f79f-e72c-4bd5-acfe-614a9d4e5b15">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{
  "politiqueResiliation": {
    "fraisResiliation": "true",
    "montantResiliation": "50",
    "typeResiliation": "RIC",
    "remboursement": "false",
    "penalite": "true"
  }
}</con:request>
            <con:originalUri>http://10.10.2.52/contrat-core/contrat/${Preparation#RefContrat}/075ed439-2/resilier</con:originalUri><con:assertion type="XPath Match" name="URL" id="7eb4b89e-4e74-477e-93e2-07cd088bbb5a">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Preparation#RefContrat}/partiel/jet/resilier';
//ns1:url</path><content>1.1.2</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="ErrorCode" id="7eb4b89e-4e74-477e-93e2-07cd088bbb5a">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Preparation#RefContrat}/partiel/jet/resilier';
//ns1:errorCode</path><content>1.1.2</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion><con:assertion type="XPath Match" name="ErrorMessage" id="7eb4b89e-4e74-477e-93e2-07cd088bbb5a">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Preparation#RefContrat}/partiel/jet/resilier';
//ns1:errorMessage</path><content>1.1.2</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion><con:assertion type="Invalid HTTP Status Codes" name="Code 500" disabled="true"><con:configuration><codes>500</codes></con:configuration></con:assertion><con:credentials>
              <con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters>
  <con:entry key="refContrat" value="${Preparation#RefContrat}"/>
  <con:entry key="numEC" value="2"/>
</con:parameters>
          <con:parameterOrder><con:entry>refContrat</con:entry><con:entry>numEC</con:entry></con:parameterOrder></con:restRequest>
        </con:config>
      </con:testStep>
      <con:testStep type="restrequest" name="Element Non Remboursable"><con:settings/><con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/{refContrat}/{numEC}/resilier" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Element Non Remboursable" mediaType="application/json" postQueryString="false" id="8eceb09f-8db3-49fc-93fc-3b0998c3f17f">
          <con:settings>
            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
          </con:settings>
          <con:endpoint>http://10.10.2.52:8080</con:endpoint>
          <con:request>{
  "user": "test",
  "politiqueResiliation": {
    "fraisResiliation": "true",
    "montantResiliation": "50",
    "typeResiliation": "RIC",
    "remboursement": "true",
    "penalite": "true"
  }
}</con:request>
          <con:originalUri>http://10.10.2.52/contrat-core/contrat/${Preparation#RefContrat}/2/resilier</con:originalUri><con:assertion type="XPath Match" name="URL"><con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Preparation#RefContrat}/2/resilier';
//ns1:url</path><content>/contrat-core/contrat/${Preparation#RefContrat}/2/resilier</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="errorCode"><con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Preparation#RefContrat}/2/resilier';
//ns1:errorCode</path><content>1.1.8</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="errorMessage"><con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Preparation#RefContrat}/2/resilier';
//ns1:errorMessage</path><content>L'element de  reference ${Preparation#RefContrat}-2 n'est pas remboursable.</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials>
            <con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType>
          </con:credentials>
          <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
          <con:jmsPropertyConfig/>
          <con:parameters>
  <con:entry key="refContrat" value="${Preparation#RefContrat}"/>
  <con:entry key="numEC" value="2"/>
</con:parameters>
        <con:parameterOrder><con:entry>refContrat</con:entry><con:entry>numEC</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep>
      <con:testStep type="restrequest" name="Date Resiliation &lt; Now" id="3837f4c6-9599-454a-95aa-3b6e37079335">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/{refContrat}/{numEC}/resilier" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="Date Resiliation &lt; Now" mediaType="application/json" postQueryString="false" id="39c3f79f-e72c-4bd5-acfe-614a9d4e5b15">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{
  "user": "test",
  "politiqueResiliation": {
    "fraisResiliation": "true",
    "montantResiliation": "50",
    "typeResiliation": "RIC",
    "remboursement": "true",
    "montantRemboursement": "50",
    "penalite": "true",
    "dateResiliation": "2013-08-11",
    "commentaire": null
  }
}</con:request>
            <con:originalUri>http://10.10.2.52/contrat-core/contrat/${Preparation#RefContrat}/numEC/resilier</con:originalUri><con:assertion type="XPath Match" name="URL" id="14808ac9-ebea-4307-9f6d-c343c5c392d2">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Preparation#RefContrat}/2/resilier';
//ns1:url</path><content>/contrat-core/contrat/${Preparation#RefContrat}/2/resilier</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorCode" id="44117f5a-a0b3-4156-a286-c9f35f8d5fd2">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Preparation#RefContrat}/2/resilier';
//ns1:errorCode</path><content>1.1.92</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorMessage" id="03940c1f-ab20-4931-b8ca-750b256ba34f">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Preparation#RefContrat}/2/resilier';
//ns1:errorMessage</path><content>Date rÃ©fÃ©siliation doit etre supÃ©fÃ©rieure ou Ã©fÃ©gale Ã  la date du jour.</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
			<con:assertion type="Invalid HTTP Status Codes" name="Code HTTP 500" disabled="true">
              <con:configuration>
                <codes>500</codes>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters>
  <con:entry key="refContrat" value="${Preparation#RefContrat}"/>
  <con:entry key="numEC" value="2"/>
</con:parameters>
          <con:parameterOrder><con:entry>refContrat</con:entry><con:entry>numEC</con:entry></con:parameterOrder></con:restRequest>
        </con:config>
      </con:testStep>
      <con:testStep type="restrequest" name="Sans politique.Remboursement MAIS avec montantRemboursement" id="67f39f99-4836-4284-8dfa-cfd338e169f2">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/{refContrat}/{numEC}/resilier" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="Sans politique.Remboursement MAIS avec montantRemboursement" mediaType="application/json" postQueryString="false" id="39c3f79f-e72c-4bd5-acfe-614a9d4e5b15">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{
  "user": "test",
  "politiqueResiliation": {
    "fraisResiliation": true,
    "typeResiliation": "RIC",
    "montantRemboursement": "50",
    "penalite": "true",
    "dateResiliation": null,
    "commentaire": ""
  }
}</con:request>
            <con:originalUri>http://10.10.2.52/contrat-core/contrat/${Preparation#RefContrat}/2/resilier</con:originalUri><con:assertion type="XPath Match" name="URL" id="1527ff79-7ea6-4dae-8d8d-676ba7ca239b">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Preparation#RefContrat}/2/resilier';
//ns1:url</path><content>/contrat-core/contrat/${Preparation#RefContrat}/2/resilier</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorCode" id="75074532-6628-4d22-bd75-ea562a4722aa">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Preparation#RefContrat}/2/resilier';
//ns1:errorCode</path><content>0.1.1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorMessage" id="4bc672af-0758-4085-9849-0f38d6fa51ee">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Preparation#RefContrat}/2/resilier';
//ns1:errorMessage</path><content>un des paramÃ¨tres est mal formatÃ© : PolitiqueResiliation.remboursement.</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
			<con:assertion type="Invalid HTTP Status Codes" name="Code HTTP 500" disabled="true">
              <con:configuration>
                <codes>500</codes>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters>
  <con:entry key="refContrat" value="${Preparation#RefContrat}"/>
  <con:entry key="numEC" value="2"/>
</con:parameters>
          <con:parameterOrder><con:entry>refContrat</con:entry><con:entry>numEC</con:entry></con:parameterOrder></con:restRequest>
        </con:config>
      </con:testStep>
      <con:testStep type="restrequest" name="Sans politique.FraisResiliation MAIS avec montantResiliation" id="477631a8-2855-4fb2-aa19-f71f1e4307ee">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/{refContrat}/{numEC}/resilier" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="Sans politique.FraisResiliation MAIS avec montantResiliation" mediaType="application/json" postQueryString="false" id="39c3f79f-e72c-4bd5-acfe-614a9d4e5b15">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{
  "user": "test",
  "politiqueResiliation": {
    "montantResiliation": "50",
    "typeResiliation": "RIC",
    "remboursement": "true",
    "montantRemboursement": "",
    "penalite": "true",
    "dateResiliation": null,
    "commentaire": ""
  }
}</con:request>
            <con:originalUri>http://10.10.2.52/contrat-core/contrat/${Preparation#RefContrat}/2/resilier</con:originalUri><con:assertion type="XPath Match" name="URL" id="12aa1a1e-cd69-49b9-ab2e-44a449ae05eb">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Preparation#RefContrat}/2/resilier';
//ns1:url</path><content>/contrat-core/contrat/${Preparation#RefContrat}/2/resilier</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorCode" id="a1d62ac3-d5d8-4c35-86ae-018660006ec6">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Preparation#RefContrat}/2/resilier';
                //ns1:errorCode</path><content>0.1.1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorMessage" id="201a1e98-00cf-4be5-86a1-a310fcfaff29">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Preparation#RefContrat}/2/resilier';
                //ns1:errorMessage</path><content>un des paramÃ¨tres est mal formatÃ© : PolitiqueResiliation.fraisResiliation.</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
			<con:assertion type="Invalid HTTP Status Codes" name="Code HTTP 500" disabled="true">
              <con:configuration>
                <codes>500</codes>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters>
  <con:entry key="refContrat" value="${Preparation#RefContrat}"/>
  <con:entry key="numEC" value="2"/>
</con:parameters>
          <con:parameterOrder><con:entry>refContrat</con:entry><con:entry>numEC</con:entry></con:parameterOrder></con:restRequest>
        </con:config>
      </con:testStep>
      <con:properties/>
    </con:testCase>
    <con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Reduction Champs Obligatoires" searchProperties="true" id="8006c37b-d6d7-4f61-b843-090809972df3" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="">
      <con:settings/>
      <con:testStep type="calltestcase" name="Preparation" id="652940ec-8329-4da5-a4c9-b4f895566493">
        <con:settings/>
        <con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:targetTestCase>e7072e2a-0fb9-4743-a447-c332f0ca0e94</con:targetTestCase>
          <con:properties>
            <con:property>
              <con:name>RefCommande</con:name>
              <con:value>93d747dd-4ac6-41ba-91c5-50b896746feb</con:value>
            </con:property>
            <con:property>
              <con:name>RefContrat</con:name>
              <con:value>00000370</con:value>
            </con:property>
          </con:properties>
          <con:returnProperties>
            <con:entry>RefCommande</con:entry>
            <con:entry>RefContrat</con:entry>
          </con:returnProperties>
          <con:runMode>SINGLETON_AND_WAIT</con:runMode>
        </con:config>
      </con:testStep>
      <con:testStep type="restrequest" name="Valeur Mois > Périodicité" id="e26632ea-ce63-49fa-a943-bd167e299b04">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/{refContrat}/reduction/ajouter" methodName="Ajouter Sur Contrat" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="Valeur Mois > Périodicité" mediaType="application/json" postQueryString="false" id="5a84cfa0-6f4d-4d77-869b-55bdf18fe011">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{
  "user" : "test",
  "reduction":{
    "typeReduction": "CONTRAT",
    "typeValeur": "MOIS",
    "nbUtilisationMax": "1",
    "valeur": "3"
  }
}</con:request>
            <con:originalUri>http://10.10.2.52/contrat-core/contrat/8f03d06d/reduction/ajouter</con:originalUri><con:assertion type="XPath Match" name="URL" id="46bca5dd-ba33-404f-a15a-2a13dc86a527">
              <con:configuration>
                <path>declare namespace
                ns1='http://10.10.2.52/contrat-core/contrat/${Preparation#RefContrat}/reduction/ajouter';
                //ns1:url</path>
                <content>/contrat-core/contrat/${Preparation#RefContrat}/reduction/ajouter</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
                <ignoreComments>false</ignoreComments>
              </con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorCode" id="1bdb0e34-a98b-4f75-96de-fe12b40ccfc7">
              <con:configuration>
                <path>declare namespace
                ns1='http://10.10.2.52/contrat-core/contrat/${Preparation#RefContrat}/reduction/ajouter';
                //ns1:errorCode</path>
                <content>1.1.56</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
                <ignoreComments>false</ignoreComments>
              </con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorMessage" id="7ecfedba-13d2-4e6a-a145-a0951ad8179f">
              <con:configuration>
                <path>declare namespace
                ns1='http://10.10.2.52/contrat-core/contrat/${Preparation#RefContrat}/reduction/ajouter';
                //ns1:errorMessage</path>
                <content>La valeur de reduction ne doit pas etre superieur au minimum des periodicites dans un contrat.</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
                <ignoreComments>false</ignoreComments>
              </con:configuration>
            </con:assertion>
			<con:assertion type="Invalid HTTP Status Codes" name="Code HTTP 500" disabled="true">
              <con:configuration>
                <codes>500</codes>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters>
              <entry key="refContrat" value="${Preparation#RefContrat}" xmlns="http://eviware.com/soapui/config"/>
            </con:parameters>
          </con:restRequest>
        </con:config>
      </con:testStep>
      <con:testStep type="restrequest" name="Type Reduction Inconnu" id="2bc27c09-3b97-4d33-a7d7-96ff58f4e2dc">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/{refContrat}/reduction/ajouter" methodName="Ajouter Sur Contrat" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="Type Reduction Inconnu" mediaType="application/json" postQueryString="false" id="94da1623-685a-48f6-8aaf-4b3a4e9be482">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{
  "user": "test",
  "reduction": {
    "typeReduction": "ELEMENT_CONTRACTUEL",
    "valeur": "100",
    "typeValeur": "POURCENTAGE",
    "nbUtilisationMax": 1
  }
}</con:request>
            <con:originalUri>http://10.10.2.52/contrat-core/contrat/8f03d06d/reduction/ajouter</con:originalUri><con:assertion type="XPath Match" name="URL" id="e8139b03-ae8f-40ef-8d58-133d2ac87172">
              <con:configuration>
                <path>declare namespace
                ns1='http://10.10.2.52/contrat-core/contrat/${Preparation#RefContrat}/reduction/ajouter';
                //ns1:url</path>
                <content>/contrat-core/contrat/${Preparation#RefContrat}/reduction/ajouter</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
                <ignoreComments>false</ignoreComments>
              </con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorCode" id="f92322ed-79af-41fc-bf9a-ebacb3c998ca">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Preparation#RefContrat}/reduction/ajouter';
//ns1:errorCode</path><content>0.1.1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorMessage" id="d1a1a268-222c-4fe9-809b-2f81be67d615">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Preparation#RefContrat}/reduction/ajouter';
//ns1:errorMessage</path><content>un des paramÃ¨tres est mal formatÃ© : Reduction.typeReduction.</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
			<con:assertion type="Invalid HTTP Status Codes" name="Code HTTP 500" disabled="true">
              <con:configuration>
                <codes>500</codes>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters>
              <entry key="refContrat" value="${Preparation#RefContrat}" xmlns="http://eviware.com/soapui/config"/>
            </con:parameters>
          </con:restRequest>
        </con:config>
      </con:testStep>
      <con:testStep type="restrequest" name="Sans typeReduction" id="17c5fc3b-d671-4fc2-8812-7fac71977157">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/{refContrat}/reduction/ajouter" methodName="Ajouter Sur Contrat" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="Sans typeReduction" mediaType="application/json" postQueryString="false" id="5a84cfa0-6f4d-4d77-869b-55bdf18fe011">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{
  "user": "test",
  "reduction": {
    "typeValeur": "MOIS",
    "nbUtilisationMax": "1",
    "valeur": "3"
  }
}</con:request>
            <con:originalUri>http://10.10.2.52/contrat-core/contrat/8f03d06d/reduction/ajouter</con:originalUri><con:assertion type="XPath Match" name="URL" id="56556cea-1352-4305-b634-2b193af3ce16">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Preparation#RefContrat}/reduction/ajouter';
//ns1:url</path><content>/contrat-core/contrat/${Preparation#RefContrat}/reduction/ajouter</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorCode" id="6789f885-641e-42ed-b621-b5984e503e59">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Preparation#RefContrat}/reduction/ajouter';
//ns1:errorCode</path><content>0.1.1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorMessage" id="1583155f-e679-4c03-834a-2ff69119a995">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Preparation#RefContrat}/reduction/ajouter';
//ns1:errorMessage</path><content>un des paramÃ¨tres est mal formatÃ© : Reduction.typeReduction.</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
            <con:assertion type="Invalid HTTP Status Codes" name="Code 500" disabled="true"><con:configuration><codes>500</codes></con:configuration></con:assertion><con:credentials>
              <con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters>
              <entry key="refContrat" value="${Preparation#RefContrat}" xmlns="http://eviware.com/soapui/config"/>
            </con:parameters>
          </con:restRequest>
        </con:config>
      </con:testStep>
      <con:testStep type="restrequest" name="Type Frais Inconnu" id="511a5e72-6af0-4aba-b5d8-a5a272fe811d">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/{refContrat}/reduction/ajouter" methodName="Ajouter Sur Contrat" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="Type Frais Inconnu" mediaType="application/json" postQueryString="false" id="94da1623-685a-48f6-8aaf-4b3a4e9be482">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{
  "user": "test",
  "reduction": {
    "typeReduction": "FRAIS",
    "typeFrais": "INCONNU",
    "valeur": "100",
    "typeValeur": "POURCENTAGE",
    "nbUtilisationMax": 1
  }
}</con:request>
            <con:originalUri>http://10.10.2.52/contrat-core/contrat/8f03d06d/reduction/ajouter</con:originalUri><con:assertion type="XPath Match" name="URL" id="5417a1e9-f89d-452d-8414-7c32c6e99ec2">
              <con:configuration>
                <path>declare namespace
                ns1='http://10.10.2.52/contrat-core/contrat/${Preparation#RefContrat}/reduction/ajouter';
                //ns1:url</path>
                <content>/contrat-core/contrat/${Preparation#RefContrat}/reduction/ajouter</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
                <ignoreComments>false</ignoreComments>
              </con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorCode" id="ee297d7a-cd5d-4a44-8846-0e48ed19eac6">
              <con:configuration><path>declare namespace
                ns1='http://10.10.2.52/contrat-core/contrat/${Preparation#RefContrat}/reduction/ajouter';
                //ns1:errorCode</path><content>0.1.1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorMessage" id="97a93af5-b8ea-48a6-be82-6b1b5672c48c">
              <con:configuration><path>declare namespace
                ns1='http://10.10.2.52/contrat-core/contrat/${Preparation#RefContrat}/reduction/ajouter';
                //ns1:errorMessage</path><content>un des paramÃ¨tres est mal formatÃ© : Reduction.typeFrais.</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
			<con:assertion type="Invalid HTTP Status Codes" name="Code HTTP 500" disabled="true">
              <con:configuration>
                <codes>500</codes>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters>
              <entry key="refContrat" value="${Preparation#RefContrat}" xmlns="http://eviware.com/soapui/config"/>
            </con:parameters>
          </con:restRequest>
        </con:config>
      </con:testStep>
      <con:testStep type="restrequest" name="Sans Type Frais" id="aefe8253-23cb-43ff-b061-9c2d580cc35e">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/{refContrat}/reduction/ajouter" methodName="Ajouter Sur Contrat" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="Sans Type Frais" mediaType="application/json" postQueryString="false" id="94da1623-685a-48f6-8aaf-4b3a4e9be482">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{
  "user": "test",
  "reduction": {
    "typeReduction": "FRAIS",
    "valeur": "100",
    "typeValeur": "POURCENTAGE",
    "nbUtilisationMax": 1
  }
}</con:request>
            <con:originalUri>http://10.10.2.52/contrat-core/contrat/8f03d06d/reduction/ajouter</con:originalUri><con:assertion type="XPath Match" name="URL" id="b549e2dd-cd49-4a8f-a2a9-f758c470f8f6">
              <con:configuration>
                <path>declare namespace
                ns1='http://10.10.2.52/contrat-core/contrat/${Preparation#RefContrat}/reduction/ajouter';
                //ns1:url</path>
                <content>/contrat-core/contrat/${Preparation#RefContrat}/reduction/ajouter</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
                <ignoreComments>false</ignoreComments>
              </con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorCode" id="39b62cac-d777-42cc-b893-7414da438eab">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Preparation#RefContrat}/reduction/ajouter';
//ns1:errorCode</path><content>0.1.1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorMessage" id="6a5fa203-3197-4a29-ab3d-5ffde06c11df">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Preparation#RefContrat}/reduction/ajouter';
//ns1:errorMessage</path><content>un des paramÃ¨tres est mal formatÃ© : Reduction.typeFrais.</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
			<con:assertion type="Invalid HTTP Status Codes" name="Code HTTP 500" disabled="true">
              <con:configuration>
                <codes>500</codes>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters>
              <entry key="refContrat" value="${Preparation#RefContrat}" xmlns="http://eviware.com/soapui/config"/>
            </con:parameters>
          </con:restRequest>
        </con:config>
      </con:testStep>
      <con:testStep type="restrequest" name="Sans Valeur" id="2d9d6878-7593-48f3-8fe1-807ea055b315">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/{refContrat}/reduction/ajouter" methodName="Ajouter Sur Contrat" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="Sans Valeur" mediaType="application/json" postQueryString="false" id="5a84cfa0-6f4d-4d77-869b-55bdf18fe011">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{
  "user" : "test",
  "reduction":{
  "typeReduction": "CONTRAT",
  "typeValeur": "MOIS",
  "nbUtilisationMax": "1"
}
}</con:request>
            <con:originalUri>http://10.10.2.52/contrat-core/contrat/8f03d06d/reduction/ajouter</con:originalUri><con:assertion type="XPath Match" name="URL" id="32405f2b-169e-413d-8d67-2dd774ad8e66">
              <con:configuration>
                <path>declare namespace
                ns1='http://10.10.2.52/contrat-core/contrat/${Preparation#RefContrat}/reduction/ajouter';
                //ns1:url</path>
                <content>/contrat-core/contrat/${Preparation#RefContrat}/reduction/ajouter</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
                <ignoreComments>false</ignoreComments>
              </con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorCode" id="283145d9-1af7-4a39-9603-27ccc9c1076f">
              <con:configuration>
                <path>declare namespace
                ns1='http://10.10.2.52/contrat-core/contrat/${Preparation#RefContrat}/reduction/ajouter';
                //ns1:errorCode</path>
                <content>0.1.4</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
                <ignoreComments>false</ignoreComments>
              </con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorMessage" id="6667f83b-c6ff-4a1d-8283-8e0eeb4709c8">
              <con:configuration>
                <path>declare namespace
                ns1='http://10.10.2.52/contrat-core/contrat/${Preparation#RefContrat}/reduction/ajouter';
                //ns1:errorMessage</path>
                <content>Reduction.valeur ne peut pas etre null.</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
                <ignoreComments>false</ignoreComments>
              </con:configuration>
            </con:assertion>
			<con:assertion type="Invalid HTTP Status Codes" name="Code HTTP 500" disabled="true">
              <con:configuration>
                <codes>500</codes>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters>
              <entry key="refContrat" value="${Preparation#RefContrat}" xmlns="http://eviware.com/soapui/config"/>
            </con:parameters>
          </con:restRequest>
        </con:config>
      </con:testStep>
      <con:testStep type="restrequest" name="Sans typeValeur" id="1b03ab6c-9c17-444d-a1e9-f243f9992048">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/{refContrat}/reduction/ajouter" methodName="Ajouter Sur Contrat" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="Sans typeValeur" mediaType="application/json" postQueryString="false" id="5a84cfa0-6f4d-4d77-869b-55bdf18fe011">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{
  "user" : "test",
  "reduction":{
  "typeReduction": "CONTRAT",
  "nbUtilisationMax": "1",
  "valeur": "3"
}
}</con:request>
            <con:originalUri>http://10.10.2.52/contrat-core/contrat/8f03d06d/reduction/ajouter</con:originalUri><con:assertion type="XPath Match" name="URL" id="441fec48-0dbb-420c-9af8-6fa708f8bb46">
              <con:configuration>
                <path>declare namespace
                ns1='http://10.10.2.52/contrat-core/contrat/${Preparation#RefContrat}/reduction/ajouter';
                //ns1:url</path>
                <content>/contrat-core/contrat/${Preparation#RefContrat}/reduction/ajouter</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
                <ignoreComments>false</ignoreComments>
              </con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorCode" id="82ff478b-5ea8-4a63-b7e7-41822065ffbc">
              <con:configuration>
                <path>declare namespace
                ns1='http://10.10.2.52/contrat-core/contrat/${Preparation#RefContrat}/reduction/ajouter';
                //ns1:errorCode</path>
                <content>0.1.1</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
                <ignoreComments>false</ignoreComments>
              </con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorMessage" id="7f318175-92fd-4b17-8580-df5e3c2a4dc4">
              <con:configuration>
                <path>declare namespace
                ns1='http://10.10.2.52/contrat-core/contrat/${Preparation#RefContrat}/reduction/ajouter';
                //ns1:errorMessage</path>
                <content>un des paramÃ¨tres est mal formatÃ© : Reduction.typeValeur.</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
                <ignoreComments>false</ignoreComments>
              </con:configuration>
            </con:assertion>
			<con:assertion type="Invalid HTTP Status Codes" name="Code HTTP 500" disabled="true">
              <con:configuration>
                <codes>500</codes>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters>
              <entry key="refContrat" value="${Preparation#RefContrat}" xmlns="http://eviware.com/soapui/config"/>
            </con:parameters>
          </con:restRequest>
        </con:config>
      </con:testStep>
      <con:testStep type="restrequest" name="Type Valeur Inconnu" id="fe9a75ff-2e96-48db-8d45-ac50b1408f67">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/{refContrat}/reduction/ajouter" methodName="Ajouter Sur Contrat" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="Type Valeur Inconnu" mediaType="application/json" postQueryString="false" id="5a84cfa0-6f4d-4d77-869b-55bdf18fe011">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{
  "user" : "test",
  "reduction":{
  "typeReduction": "CONTRAT",
  "typeValeur": "FRAIS",
  "nbUtilisationMax": "1",
  "valeur": "3"
}
}</con:request>
            <con:originalUri>http://10.10.2.52/contrat-core/contrat/8f03d06d/reduction/ajouter</con:originalUri><con:assertion type="XPath Match" name="URL" id="84eabf72-9bb5-449f-b1a9-03522b631bc8">
              <con:configuration>
                <path>declare namespace
                ns1='http://10.10.2.52/contrat-core/contrat/${Preparation#RefContrat}/reduction/ajouter';
                //ns1:url</path>
                <content>/contrat-core/contrat/${Preparation#RefContrat}/reduction/ajouter</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
                <ignoreComments>false</ignoreComments>
              </con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorCode" id="2e53881b-7a5e-41d1-bf01-31c043a7f198">
              <con:configuration>
                <path>declare namespace
                ns1='http://10.10.2.52/contrat-core/contrat/${Preparation#RefContrat}/reduction/ajouter';
                //ns1:errorCode</path>
                <content>0.1.1</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
                <ignoreComments>false</ignoreComments>
              </con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorMessage" id="15a2e6ab-5f49-4832-b611-9504ee1a9e75">
              <con:configuration>
                <path>declare namespace
                ns1='http://10.10.2.52/contrat-core/contrat/${Preparation#RefContrat}/reduction/ajouter';
                //ns1:errorMessage</path>
                <content>un des paramÃ¨tres est mal formatÃ© : Reduction.typeValeur.</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
                <ignoreComments>false</ignoreComments>
              </con:configuration>
            </con:assertion>
			<con:assertion type="Invalid HTTP Status Codes" name="Code HTTP 500" disabled="true">
              <con:configuration>
                <codes>500</codes>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters>
              <entry key="refContrat" value="${Preparation#RefContrat}" xmlns="http://eviware.com/soapui/config"/>
            </con:parameters>
          </con:restRequest>
        </con:config>
      </con:testStep>
      <con:testStep type="restrequest" name="Pourcentage > 100" id="94e106fa-ed0d-4be7-9e2e-2cc936f4923f">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/{refContrat}/reduction/ajouter" methodName="Ajouter Sur Contrat" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="Pourcentage > 100" mediaType="application/json" postQueryString="false" id="5a84cfa0-6f4d-4d77-869b-55bdf18fe011">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{
  "user" : "test",
  "reduction":{
  "typeReduction": "CONTRAT",
  "typeValeur": "POURCENTAGE",
  "nbUtilisationMax": "1",
  "valeur": "150"
}
}</con:request>
            <con:originalUri>http://10.10.2.52/contrat-core/contrat/8f03d06d/reduction/ajouter</con:originalUri><con:assertion type="XPath Match" name="URL" id="5807da5c-522c-4136-a917-fd7514bac7a2">
              <con:configuration>
                <path>declare namespace
                ns1='http://10.10.2.52/contrat-core/contrat/${Preparation#RefContrat}/reduction/ajouter';
                //ns1:url</path>
                <content>/contrat-core/contrat/${Preparation#RefContrat}/reduction/ajouter</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
                <ignoreComments>false</ignoreComments>
              </con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorCode" id="3f473cc9-5fc9-4b5d-bbac-557a226e97b6">
              <con:configuration>
                <path>declare namespace
                ns1='http://10.10.2.52/contrat-core/contrat/${Preparation#RefContrat}/reduction/ajouter';
                //ns1:errorCode</path>
                <content>1.1.53</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
                <ignoreComments>false</ignoreComments>
              </con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorMessage" id="1e3ebfe4-9dcf-4798-92fc-1b212e3f83be">
              <con:configuration>
                <path>declare namespace
                ns1='http://10.10.2.52/contrat-core/contrat/${Preparation#RefContrat}/reduction/ajouter';
                //ns1:errorMessage</path>
                <content>Pour une valeur de reduction de type POURCENTAGE la valeur doit etre comprise entre 0 et 100.</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
                <ignoreComments>false</ignoreComments>
              </con:configuration>
            </con:assertion>
			<con:assertion type="Invalid HTTP Status Codes" name="Code HTTP 500" disabled="true">
              <con:configuration>
                <codes>500</codes>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters>
              <entry key="refContrat" value="${Preparation#RefContrat}" xmlns="http://eviware.com/soapui/config"/>
            </con:parameters>
          </con:restRequest>
        </con:config>
      </con:testStep>
      <con:testStep type="restrequest" name="Pourcentage = 0" id="c3f70122-6e2a-4cce-afbb-4f3bf7a907bb">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/{refContrat}/reduction/ajouter" methodName="Ajouter Sur Contrat" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="Pourcentage = 0" mediaType="application/json" postQueryString="false" id="5a84cfa0-6f4d-4d77-869b-55bdf18fe011">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{
  "user" : "test",
  "reduction":{
  "typeReduction": "CONTRAT",
  "typeValeur": "POURCENTAGE",
  "nbUtilisationMax": "1",
  "valeur": "0"
}
}</con:request>
            <con:originalUri>http://10.10.2.52/contrat-core/contrat/8f03d06d/reduction/ajouter</con:originalUri><con:assertion type="XPath Match" name="URL" id="45868a7e-d742-42df-80e9-6cba0d91fd9d">
              <con:configuration>
                <path>declare namespace
                ns1='http://10.10.2.52/contrat-core/contrat/${Preparation#RefContrat}/reduction/ajouter';
                //ns1:url</path>
                <content>/contrat-core/contrat/${Preparation#RefContrat}/reduction/ajouter</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
                <ignoreComments>false</ignoreComments>
              </con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorCode" id="5784678d-7a92-4a47-91da-9b92b8c5a7b0">
              <con:configuration>
                <path>declare namespace
                ns1='http://10.10.2.52/contrat-core/contrat/${Preparation#RefContrat}/reduction/ajouter';
                //ns1:errorCode</path>
                <content>1.1.53</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
                <ignoreComments>false</ignoreComments>
              </con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorMessage" id="7f856aba-12d8-41c4-9ffc-e841f313fb45">
              <con:configuration>
                <path>declare namespace
                ns1='http://10.10.2.52/contrat-core/contrat/${Preparation#RefContrat}/reduction/ajouter';
                //ns1:errorMessage</path>
                <content>Pour une valeur de reduction de type POURCENTAGE la valeur doit etre comprise entre 0 et 100.</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
                <ignoreComments>false</ignoreComments>
              </con:configuration>
            </con:assertion>
			<con:assertion type="Invalid HTTP Status Codes" name="Code HTTP 500" disabled="true">
              <con:configuration>
                <codes>500</codes>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters>
              <entry key="refContrat" value="${Preparation#RefContrat}" xmlns="http://eviware.com/soapui/config"/>
            </con:parameters>
          </con:restRequest>
        </con:config>
      </con:testStep>
      <con:testStep type="restrequest" name="Pourcentage &lt; 0" id="22d45443-96b4-4dcb-b3f2-5c7c109125f4">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/{refContrat}/reduction/ajouter" methodName="Ajouter Sur Contrat" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="Pourcentage &lt; 0" mediaType="application/json" postQueryString="false" id="5a84cfa0-6f4d-4d77-869b-55bdf18fe011">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{
  "user" : "test",
  "reduction":{
  "typeReduction": "CONTRAT",
  "typeValeur": "POURCENTAGE",
  "nbUtilisationMax": "1",
  "valeur": "-50"
}
}</con:request>
            <con:originalUri>http://10.10.2.52/contrat-core/contrat/8f03d06d/reduction/ajouter</con:originalUri><con:assertion type="XPath Match" name="URL" id="4cd6a6ab-145c-4147-a8b3-b10357284ff4">
              <con:configuration>
                <path>declare namespace
                ns1='http://10.10.2.52/contrat-core/contrat/${Preparation#RefContrat}/reduction/ajouter';
                //ns1:url</path>
                <content>/contrat-core/contrat/${Preparation#RefContrat}/reduction/ajouter</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
                <ignoreComments>false</ignoreComments>
              </con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorCode" id="531eb0ae-8921-4158-b710-489193622dae">
              <con:configuration>
                <path>declare namespace
                ns1='http://10.10.2.52/contrat-core/contrat/${Preparation#RefContrat}/reduction/ajouter';
                //ns1:errorCode</path>
                <content>1.1.53</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
                <ignoreComments>false</ignoreComments>
              </con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorMessage" id="7fd6e252-5d60-4f0f-8083-14a630752fc2">
              <con:configuration>
                <path>declare namespace
                ns1='http://10.10.2.52/contrat-core/contrat/${Preparation#RefContrat}/reduction/ajouter';
                //ns1:errorMessage</path>
                <content>Pour une valeur de reduction de type POURCENTAGE la valeur doit etre comprise entre 0 et 100.</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
                <ignoreComments>false</ignoreComments>
              </con:configuration>
            </con:assertion>
			<con:assertion type="Invalid HTTP Status Codes" name="Code HTTP 500" disabled="true">
              <con:configuration>
                <codes>500</codes>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters>
              <entry key="refContrat" value="${Preparation#RefContrat}" xmlns="http://eviware.com/soapui/config"/>
            </con:parameters>
          </con:restRequest>
        </con:config>
      </con:testStep>
      <con:testStep type="restrequest" name="Valeur Mois &lt; 0" id="e24ce14a-f372-4c1c-8dce-c2f81da7c4a1">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/{refContrat}/reduction/ajouter" methodName="Ajouter Sur Contrat" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="Valeur Mois &lt; 0" mediaType="application/json" postQueryString="false" id="5a84cfa0-6f4d-4d77-869b-55bdf18fe011">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{
  "user" : "test",
  "reduction":{
  "typeReduction": "CONTRAT",
  "typeValeur": "MOIS",
  "nbUtilisationMax": "1",
  "valeur": "-1"
}
}</con:request>
            <con:originalUri>http://10.10.2.52/contrat-core/contrat/8f03d06d/reduction/ajouter</con:originalUri><con:assertion type="XPath Match" name="URL" id="bd3574c2-4d24-45bb-9dd8-a1c3cb3f4039">
              <con:configuration>
                <path>declare namespace
                ns1='http://10.10.2.52/contrat-core/contrat/${Preparation#RefContrat}/reduction/ajouter';
                //ns1:url</path>
                <content>/contrat-core/contrat/${Preparation#RefContrat}/reduction/ajouter</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
                <ignoreComments>false</ignoreComments>
              </con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorCode" id="d76831db-e93a-4795-a719-04da9344a42a">
              <con:configuration>
                <path>declare namespace
                ns1='http://10.10.2.52/contrat-core/contrat/${Preparation#RefContrat}/reduction/ajouter';
                //ns1:errorCode</path>
                <content>1.1.51</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
                <ignoreComments>false</ignoreComments>
              </con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorMessage" id="b1b4040a-62f4-4abc-994a-4f382b245a67">
              <con:configuration>
                <path>declare namespace
                ns1='http://10.10.2.52/contrat-core/contrat/${Preparation#RefContrat}/reduction/ajouter';
                //ns1:errorMessage</path>
                <content>Pour une valeur de reduction de type MOIS la valeur doit etre un entier superieur a zero.</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
                <ignoreComments>false</ignoreComments>
              </con:configuration>
            </con:assertion>
			<con:assertion type="Invalid HTTP Status Codes" name="Code HTTP 500" disabled="true">
              <con:configuration>
                <codes>500</codes>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters>
              <entry key="refContrat" value="${Preparation#RefContrat}" xmlns="http://eviware.com/soapui/config"/>
            </con:parameters>
          </con:restRequest>
        </con:config>
      </con:testStep>
      <con:testStep type="restrequest" name="Valeur Euro &lt; 0" id="93278577-812f-41cd-9a68-a4d595566815">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/{refContrat}/reduction/ajouter" methodName="Ajouter Sur Contrat" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="Valeur Euro &lt; 0" mediaType="application/json" postQueryString="false" id="5a84cfa0-6f4d-4d77-869b-55bdf18fe011">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{
  "user" : "test",
  "reduction":{
  "typeReduction": "CONTRAT",
  "typeValeur": "EURO",
  "nbUtilisationMax": "1",
  "valeur": "-50"
}
}</con:request>
            <con:originalUri>http://10.10.2.52/contrat-core/contrat/8f03d06d/reduction/ajouter</con:originalUri><con:assertion type="XPath Match" name="URL" id="4a7aaac9-08d6-417f-b403-d9b96a8ea6f2">
              <con:configuration>
                <path>declare namespace
                ns1='http://10.10.2.52/contrat-core/contrat/${Preparation#RefContrat}/reduction/ajouter';
                //ns1:url</path>
                <content>/contrat-core/contrat/${Preparation#RefContrat}/reduction/ajouter</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
                <ignoreComments>false</ignoreComments>
              </con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorCode" id="f3d2fa00-55c2-4ec1-97df-24fe34095604">
              <con:configuration>
                <path>declare namespace
                ns1='http://10.10.2.52/contrat-core/contrat/${Preparation#RefContrat}/reduction/ajouter';
                //ns1:errorCode</path>
                <content>1.1.52</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
                <ignoreComments>false</ignoreComments>
              </con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorMessage" id="f9fa90ff-e608-496a-baf0-ec686f65e72b">
              <con:configuration>
                <path>declare namespace
                ns1='http://10.10.2.52/contrat-core/contrat/${Preparation#RefContrat}/reduction/ajouter';
                //ns1:errorMessage</path>
                <content>Pour une valeur de reduction de type EURO la valeur doit etre superieur a zero.</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
                <ignoreComments>false</ignoreComments>
              </con:configuration>
            </con:assertion>
			<con:assertion type="Invalid HTTP Status Codes" name="Code HTTP 500" disabled="true">
              <con:configuration>
                <codes>500</codes>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters>
              <entry key="refContrat" value="${Preparation#RefContrat}" xmlns="http://eviware.com/soapui/config"/>
            </con:parameters>
          </con:restRequest>
        </con:config>
      </con:testStep>
      <con:testStep type="restrequest" name="Valeur Mois = 0" id="9dd33b67-a7cc-478f-b41a-73644b05ad64">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/{refContrat}/reduction/ajouter" methodName="Ajouter Sur Contrat" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="Valeur Mois = 0" mediaType="application/json" postQueryString="false" id="5a84cfa0-6f4d-4d77-869b-55bdf18fe011">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{
  "user" : "test",
  "reduction":{
  "typeReduction": "CONTRAT",
  "typeValeur": "MOIS",
  "nbUtilisationMax": "1",
  "valeur": "0"
}
}</con:request>
            <con:originalUri>http://10.10.2.52/contrat-core/contrat/8f03d06d/reduction/ajouter</con:originalUri><con:assertion type="XPath Match" name="URL" id="2d0d7a0a-69bd-4bf7-aa32-211dd5a9d71e">
              <con:configuration>
                <path>declare namespace
                ns1='http://10.10.2.52/contrat-core/contrat/${Preparation#RefContrat}/reduction/ajouter';
                //ns1:url</path>
                <content>/contrat-core/contrat/${Preparation#RefContrat}/reduction/ajouter</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
                <ignoreComments>false</ignoreComments>
              </con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorCode" id="e196f35d-c63d-4adb-bdf9-0b31d328575f">
              <con:configuration>
                <path>declare namespace
                ns1='http://10.10.2.52/contrat-core/contrat/${Preparation#RefContrat}/reduction/ajouter';
                //ns1:errorCode</path>
                <content>1.1.51</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
                <ignoreComments>false</ignoreComments>
              </con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorMessage" id="99aa134d-1dab-412a-a4fb-bdf3d94abf4e">
              <con:configuration>
                <path>declare namespace
                ns1='http://10.10.2.52/contrat-core/contrat/${Preparation#RefContrat}/reduction/ajouter';
                //ns1:errorMessage</path>
                <content>Pour une valeur de reduction de type MOIS la valeur doit etre un entier superieur a zero.</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
                <ignoreComments>false</ignoreComments>
              </con:configuration>
            </con:assertion>
			<con:assertion type="Invalid HTTP Status Codes" name="Code HTTP 500" disabled="true">
              <con:configuration>
                <codes>500</codes>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters>
              <entry key="refContrat" value="${Preparation#RefContrat}" xmlns="http://eviware.com/soapui/config"/>
            </con:parameters>
          </con:restRequest>
        </con:config>
      </con:testStep>
      <con:testStep type="restrequest" name="Valeur Euro = 0" id="9af9c74d-3194-4265-a0d8-286b724c1abc">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/{refContrat}/reduction/ajouter" methodName="Ajouter Sur Contrat" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="Valeur Euro = 0" mediaType="application/json" postQueryString="false" id="5a84cfa0-6f4d-4d77-869b-55bdf18fe011">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{
  "user" : "test",
  "reduction":
  {
  "typeReduction": "CONTRAT",
  "typeValeur": "EURO",
  "nbUtilisationMax": "1",
  "valeur": "0"
}
}</con:request>
            <con:originalUri>http://10.10.2.52/contrat-core/contrat/8f03d06d/reduction/ajouter</con:originalUri><con:assertion type="XPath Match" name="URL" id="ccba058e-21f3-492d-840e-3ac1d811783c">
              <con:configuration>
                <path>declare namespace
                ns1='http://10.10.2.52/contrat-core/contrat/${Preparation#RefContrat}/reduction/ajouter';
                //ns1:url</path>
                <content>/contrat-core/contrat/${Preparation#RefContrat}/reduction/ajouter</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
                <ignoreComments>false</ignoreComments>
              </con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorCode" id="35048786-b222-40fa-afca-ed9db9421657">
              <con:configuration>
                <path>declare namespace
                ns1='http://10.10.2.52/contrat-core/contrat/${Preparation#RefContrat}/reduction/ajouter';
                //ns1:errorCode</path>
                <content>1.1.52</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
                <ignoreComments>false</ignoreComments>
              </con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorMessage" id="b454e92e-c3f4-4090-804a-b468bee7382d">
              <con:configuration>
                <path>declare namespace
                ns1='http://10.10.2.52/contrat-core/contrat/${Preparation#RefContrat}/reduction/ajouter';
                //ns1:errorMessage</path>
                <content>Pour une valeur de reduction de type EURO la valeur doit etre superieur a zero.</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
                <ignoreComments>false</ignoreComments>
              </con:configuration>
            </con:assertion>
			<con:assertion type="Invalid HTTP Status Codes" name="Code HTTP 500" disabled="true">
              <con:configuration>
                <codes>500</codes>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters>
              <entry key="refContrat" value="${Preparation#RefContrat}" xmlns="http://eviware.com/soapui/config"/>
            </con:parameters>
          </con:restRequest>
        </con:config>
      </con:testStep>
      <con:testStep type="restrequest" name="Sans Date Debut mais Avec Date Fin" id="d0cec36c-4d06-4e72-8eb7-01a2ba78b5fd">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/{refContrat}/reduction/ajouter" methodName="Ajouter Sur Contrat" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="Sans Date Debut mais Avec Date Fin" mediaType="application/json" postQueryString="false" id="5a84cfa0-6f4d-4d77-869b-55bdf18fe011">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{
  "user" : "test",
  "reduction":{
  "typeReduction": "CONTRAT",
  "typeValeur": "EURO",
  "dateFin": "2014-12-31",
  "valeur": "50"
}
}</con:request>
            <con:originalUri>http://10.10.2.52/contrat-core/contrat/8f03d06d/reduction/ajouter</con:originalUri><con:assertion type="XPath Match" name="URL" id="a48cae35-c40e-424d-9917-4b2165cb7737">
              <con:configuration>
                <path>declare namespace
                ns1='http://10.10.2.52/contrat-core/contrat/${Preparation#RefContrat}/reduction/ajouter';
                //ns1:url</path>
                <content>/contrat-core/contrat/${Preparation#RefContrat}/reduction/ajouter</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
                <ignoreComments>false</ignoreComments>
              </con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorCode" id="8c4895b2-f8c0-4a87-8d08-5dc690a90aed">
              <con:configuration>
                <path>declare namespace
                ns1='http://10.10.2.52/contrat-core/contrat/${Preparation#RefContrat}/reduction/ajouter';
                //ns1:errorCode</path>
                <content>1.1.60</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
                <ignoreComments>false</ignoreComments>
              </con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorMessage" id="b3f77502-9637-493a-976c-28430acb1a96">
              <con:configuration>
                <path>declare namespace
                ns1='http://10.10.2.52/contrat-core/contrat/${Preparation#RefContrat}/reduction/ajouter';
                //ns1:errorMessage</path>
                <content>Period Reduction invalide date debut reduction doit Ãªtre avant la date fin reduction.</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
                <ignoreComments>false</ignoreComments>
              </con:configuration>
            </con:assertion>
			<con:assertion type="Invalid HTTP Status Codes" name="Code HTTP 500" disabled="true">
              <con:configuration>
                <codes>500</codes>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters>
              <entry key="refContrat" value="${Preparation#RefContrat}" xmlns="http://eviware.com/soapui/config"/>
            </con:parameters>
          </con:restRequest>
        </con:config>
      </con:testStep>
      <con:testStep type="restrequest" name="Date Debut > Date Fin" id="916214b5-e9f2-448a-b33c-0689320c2e26">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/{refContrat}/reduction/ajouter" methodName="Ajouter Sur Contrat" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="Date Debut > Date Fin" mediaType="application/json" postQueryString="false" id="5a84cfa0-6f4d-4d77-869b-55bdf18fe011">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{
  "user" : "test",
  "reduction":{
  "typeReduction": "CONTRAT",
  "typeValeur": "EURO",
  "dateDebut": "2015-12-31",
  "dateFin": "2014-12-31",
  "valeur": "50"
}
}</con:request>
            <con:originalUri>http://10.10.2.52/contrat-core/contrat/8f03d06d/reduction/ajouter</con:originalUri><con:assertion type="XPath Match" name="URL" id="110292fc-e28c-44b0-878f-be019be3c9fa">
              <con:configuration>
                <path>declare namespace
                ns1='http://10.10.2.52/contrat-core/contrat/${Preparation#RefContrat}/reduction/ajouter';
                //ns1:url</path>
                <content>/contrat-core/contrat/${Preparation#RefContrat}/reduction/ajouter</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
                <ignoreComments>false</ignoreComments>
              </con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorCode" id="b68dfe6a-18e3-4d37-91d2-e76a268527e0">
              <con:configuration>
                <path>declare namespace
                ns1='http://10.10.2.52/contrat-core/contrat/${Preparation#RefContrat}/reduction/ajouter';
                //ns1:errorCode</path>
                <content>1.1.60</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
                <ignoreComments>false</ignoreComments>
              </con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorMessage" id="a5272f68-c54f-4cc1-914e-db2ee73673db">
              <con:configuration>
                <path>declare namespace
                ns1='http://10.10.2.52/contrat-core/contrat/${Preparation#RefContrat}/reduction/ajouter';
                //ns1:errorMessage</path>
                <content>Period Reduction invalide date debut reduction doit Ãªtre avant la date fin reduction.</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
                <ignoreComments>false</ignoreComments>
              </con:configuration>
            </con:assertion>
			<con:assertion type="Invalid HTTP Status Codes" name="Code HTTP 500" disabled="true">
              <con:configuration>
                <codes>500</codes>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters>
              <entry key="refContrat" value="${Preparation#RefContrat}" xmlns="http://eviware.com/soapui/config"/>
            </con:parameters>
          </con:restRequest>
        </con:config>
      </con:testStep>
      <con:testStep type="restrequest" name="nbUtilisationMax = 0" id="9fd9e300-ce2f-424d-9a35-b6e71d3eb1a3">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/{refContrat}/reduction/ajouter" methodName="Ajouter Sur Contrat" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="nbUtilisationMax = 0" mediaType="application/json" postQueryString="false" id="5a84cfa0-6f4d-4d77-869b-55bdf18fe011">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{
  "user" : "test",
  "reduction":{
  "typeReduction": "CONTRAT",
  "typeValeur": "MOIS",
  "nbUtilisationMax": "0",
  "valeur": "1"
}
}</con:request>
            <con:originalUri>http://10.10.2.52/contrat-core/contrat/8f03d06d/reduction/ajouter</con:originalUri><con:assertion type="XPath Match" name="URL" id="2fde00f6-7f8b-4a5c-bb0e-f55b5fd43b27">
              <con:configuration>
                <path>declare namespace
                ns1='http://10.10.2.52/contrat-core/contrat/${Preparation#RefContrat}/reduction/ajouter';
                //ns1:url</path>
                <content>/contrat-core/contrat/${Preparation#RefContrat}/reduction/ajouter</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
                <ignoreComments>false</ignoreComments>
              </con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorCode" id="59146a0e-21a1-4ae0-bd78-c29463d19c8f">
              <con:configuration>
                <path>declare namespace
                ns1='http://10.10.2.52/contrat-core/contrat/${Preparation#RefContrat}/reduction/ajouter';
                //ns1:errorCode</path>
                <content>0.1.10</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
                <ignoreComments>false</ignoreComments>
              </con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorMessage" id="0e6c55ad-9d27-43bb-9c09-14ba78bde116">
              <con:configuration>
                <path>declare namespace
                ns1='http://10.10.2.52/contrat-core/contrat/${Preparation#RefContrat}/reduction/ajouter';
                //ns1:errorMessage</path>
                <content>Reduction.NbUtilisationMax ne peut pas etre zero ou negatif.</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
                <ignoreComments>false</ignoreComments>
              </con:configuration>
            </con:assertion>
			<con:assertion type="Invalid HTTP Status Codes" name="Code HTTP 500" disabled="true">
              <con:configuration>
                <codes>500</codes>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters>
              <entry key="refContrat" value="${Preparation#RefContrat}" xmlns="http://eviware.com/soapui/config"/>
            </con:parameters>
          </con:restRequest>
        </con:config>
      </con:testStep>
      <con:testStep type="restrequest" name="nbUtilisationMax &lt; 0" id="f466d334-c1a7-4195-9ca6-7eebff30f434">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/{refContrat}/reduction/ajouter" methodName="Ajouter Sur Contrat" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="nbUtilisationMax &lt; 0" mediaType="application/json" postQueryString="false" id="5a84cfa0-6f4d-4d77-869b-55bdf18fe011">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{
  "user" : "test",
  "reduction":{
  "typeReduction": "CONTRAT",
  "typeValeur": "MOIS",
  "nbUtilisationMax": "-1",
  "valeur": "1"
}
}</con:request>
            <con:originalUri>http://10.10.2.52/contrat-core/contrat/8f03d06d/reduction/ajouter</con:originalUri><con:assertion type="XPath Match" name="URL" id="c185c155-f3b0-4fdb-a73c-3ae46534f2f5">
              <con:configuration>
                <path>declare namespace
                ns1='http://10.10.2.52/contrat-core/contrat/${Preparation#RefContrat}/reduction/ajouter';
                //ns1:url</path>
                <content>/contrat-core/contrat/${Preparation#RefContrat}/reduction/ajouter</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
                <ignoreComments>false</ignoreComments>
              </con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorCode" id="f7097700-0238-4f22-a6c8-a80e15a76504">
              <con:configuration>
                <path>declare namespace
                ns1='http://10.10.2.52/contrat-core/contrat/${Preparation#RefContrat}/reduction/ajouter';
                //ns1:errorCode</path>
                <content>0.1.10</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
                <ignoreComments>false</ignoreComments>
              </con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorMessage" id="23ca47a3-fefd-4741-ae8b-3acf23661848">
              <con:configuration>
                <path>declare namespace
                ns1='http://10.10.2.52/contrat-core/contrat/${Preparation#RefContrat}/reduction/ajouter';
                //ns1:errorMessage</path>
                <content>Reduction.NbUtilisationMax ne peut pas etre zero ou negatif.</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
                <ignoreComments>false</ignoreComments>
              </con:configuration>
            </con:assertion>
			<con:assertion type="Invalid HTTP Status Codes" name="Code HTTP 500" disabled="true">
              <con:configuration>
                <codes>500</codes>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters>
              <entry key="refContrat" value="${Preparation#RefContrat}" xmlns="http://eviware.com/soapui/config"/>
            </con:parameters>
          </con:restRequest>
        </con:config>
      </con:testStep>
      
      <con:testStep type="restrequest" name="Date Fin &lt; Now" id="736ddcaa-d15c-486a-948d-8df8b2a4409e">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/{refContrat}/reduction/ajouter" methodName="Ajouter Sur Contrat" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="Date Fin &lt; Now" mediaType="application/json" postQueryString="false" id="5a84cfa0-6f4d-4d77-869b-55bdf18fe011">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{
  "user": "test",
  "reduction":{
    "typeReduction": "CONTRAT",
    "typeValeur": "EURO",
    "dateDebut": "2013-02-31",
    "dateFin": "2013-12-31",
    "valeur": "50"
  }
}</con:request>
            <con:originalUri>http://10.10.2.52/contrat-core/contrat/8f03d06d/reduction/ajouter</con:originalUri><con:assertion type="XPath Match" name="URL" id="88047b13-13bf-490b-8168-ec048895dcdc">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Preparation#RefContrat}/reduction/ajouter';
//ns1:url</path><content>/contrat-core/contrat/${Preparation#RefContrat}/reduction/ajouter</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorCode" id="544e15fe-3c3c-49d4-8d28-8ee1e8023ac5">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Preparation#RefContrat}/reduction/ajouter';
//ns1:errorCode</path><content>1.1.89</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorMessage" id="14752d91-1ddd-480c-b887-344b38156063">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Preparation#RefContrat}/reduction/ajouter';
//ns1:errorMessage</path><content>La periode de reduction ne doit pas etre dans le passe.</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
            <con:assertion type="Invalid HTTP Status Codes" name="Code 500" disabled="true"><con:configuration><codes>500</codes></con:configuration></con:assertion><con:credentials>
              <con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters><entry key="refContrat" value="${Preparation#RefContrat}" xmlns="http://eviware.com/soapui/config"/></con:parameters>
          </con:restRequest>
        </con:config>
      </con:testStep>
      <con:testStep type="restrequest" name="TypeReduc = &quot;CONTRAT&quot; et TypeFrais = &quot;CREATION&quot;" id="3823ddf4-e0e7-4099-9196-83177ed3a5a5">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/{refContrat}/reduction/ajouter" methodName="Ajouter Sur Contrat" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="TypeReduc = &quot;CONTRAT&quot; et TypeFrais = &quot;CREATION&quot;" mediaType="application/json" postQueryString="false" id="5a84cfa0-6f4d-4d77-869b-55bdf18fe011">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{
  "user": "test",
  "reduction": {
    "typeReduction": "CONTRAT",
    "typeFrais": "CREATION",
    "typeValeur": "MOIS",
    "nbUtilisationMax": "1",
    "valeur": "1"
  }
}</con:request>
            <con:originalUri>http://10.10.2.52/contrat-core/contrat/8f03d06d/reduction/ajouter</con:originalUri><con:assertion type="XPath Match" name="URL" id="2c27f799-e7a9-4d81-933a-ec0a4f800ab8">
              <con:configuration>
                <path>declare namespace
                ns1='http://10.10.2.52/contrat-core/contrat/${Preparation#RefContrat}/reduction/ajouter';
                //ns1:url</path>
                <content>/contrat-core/contrat/${Preparation#RefContrat}/reduction/ajouter</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
                <ignoreComments>false</ignoreComments>
              </con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorCode" id="81fb400c-0558-426f-89d0-45c17763726b">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Preparation#RefContrat}/reduction/ajouter';
//ns1:errorCode</path><content>1.1.90</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorMessage" id="84d79c3d-e07c-4a7a-a5ba-b32c3ecbc0cc">
              <con:configuration>
                <path>declare namespace
                ns1='http://10.10.2.52/contrat-core/contrat/${Preparation#RefContrat}/reduction/ajouter';
                //ns1:errorMessage</path>
                <content>La valeur de reduction ne doit pas etre superieur au minimum des periodicites dans un contrat.</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
                <ignoreComments>false</ignoreComments>
              </con:configuration>
            </con:assertion>
			<con:assertion type="Invalid HTTP Status Codes" name="Code HTTP 500" disabled="true">
              <con:configuration>
                <codes>500</codes>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters>
              <entry key="refContrat" value="${Preparation#RefContrat}" xmlns="http://eviware.com/soapui/config"/>
            </con:parameters>
          </con:restRequest>
        </con:config>
      </con:testStep>
      <con:testStep type="restrequest" name="Sans User">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/{refContrat}/reduction/ajouter" methodName="Ajouter Sur Contrat" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="Sans User" mediaType="application/json" postQueryString="false" id="5a84cfa0-6f4d-4d77-869b-55bdf18fe011">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{ 
  "reduction":{
    "typeReduction" : "CONTRAT", 
    "typeValeur": "FRAIS",
    "nbUtilisationMax" : "1", 
    "valeur" : "3" 
  }
}</con:request>
            <con:originalUri>http://10.10.2.52/contrat-core/contrat/8f03d06d/reduction/ajouter</con:originalUri><con:assertion type="XPath Match" name="URL" id="84eabf72-9bb5-449f-b1a9-03522b631bc8">
              <con:configuration>
                <path>declare namespace
                ns1='http://10.10.2.52/contrat-core/contrat/${Preparation#RefContrat}/reduction/ajouter';
                //ns1:url</path>
                <content>/contrat-core/contrat/${Preparation#RefContrat}/reduction/ajouter</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
                <ignoreComments>false</ignoreComments>
              </con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorCode" id="2e53881b-7a5e-41d1-bf01-31c043a7f198">
              <con:configuration><path>declare namespace
                ns1='http://10.10.2.52/contrat-core/contrat/${Preparation#RefContrat}/reduction/ajouter';
                //ns1:errorCode</path><content>1.1.91</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorMessage" id="15a2e6ab-5f49-4832-b611-9504ee1a9e75">
              <con:configuration><path>declare namespace
                ns1='http://10.10.2.52/contrat-core/contrat/${Preparation#RefContrat}/reduction/ajouter';
                //ns1:errorMessage</path><content>L'element user est obligatoire.</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
			<con:assertion type="Invalid HTTP Status Codes" name="Code HTTP 500" disabled="true">
              <con:configuration>
                <codes>500</codes>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters>
              <entry key="refContrat" value="${Preparation#RefContrat}" xmlns="http://eviware.com/soapui/config"/>
            </con:parameters>
          </con:restRequest>
        </con:config>
      </con:testStep><con:properties/>
    </con:testCase>
    <con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Migration Champs Obligatoires" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="" id="7fe60611-da2d-4f8c-8aa7-3bdfb5a5d869"><con:settings/><con:testStep type="restrequest" name="Valide" id="78e16163-81cd-4bec-ae96-d1bf321700b2" disabled="true"><con:settings/><con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/{refContrat}/migrer" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Valide" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.10.2.52:8080</con:endpoint><con:request>{
  "user": "test",
  "politiqueMigration": {
    "fraisMigration": "30",
    "fraisResiliation": true,
    "montantResiliation": "50",
    "remboursement": true,
    "montantRemboursement": "50",
    "fraisCreation": true,
    "penalite": false,
    "reductionAncienne": true
  },
  "produitsMigration": [
    {
      "numEC": 1,
      "referenceGammeSource": "jet",
      "referenceProduitSource": "jet",
      "referenceGammeDestination": "jet",
      "referenceProduitDestination": "sat.jet.20",
      "label": "Abonnement Jet 10Go",
      "numeroCommande": "Order_migration_1",
      "typeProduit": "SERVICE",
      "prix": {
        "periodicite": 1,
        "montant": "30",
        "typeTVA": "R",
        "frais": [
          {
            "montant": "30",
            "titre": "Frais d'ouverture de dossier",
            "typeFrais": "CREATION"
          }
        ],
        "modeFacturation": "PREMIER_MOIS"
      },
	  "referenceDePaiement": "R0000012",
	  "modePaiement": "SEPA"
    },
    {
      "numEC": 2,
      "numECParent": 1,
      "referenceGammeSource": "jet",
      "referenceProduitSource": "option.plus.50g",
      "referenceGammeDestination": "jet",
      "referenceProduitDestination": "option.plus.50g",
      "label": "Option+ 50Go",
      "numeroCommande": "Order_migration_1",
      "typeProduit": "SERVICE",
      "prix": {
        "periodicite": 1,
        "montant": "5",
        "typeTVA": "R",
        "modeFacturation": "PREMIER_MOIS"
      },
	  "referenceDePaiement": "R0000012",
	  "modePaiement": "SEPA"
    }
  ]
}</con:request><con:originalUri>http://10.10.2.52/contrat-core/contrat/4439504e/migrer</con:originalUri><con:assertion type="Invalid HTTP Status Codes" name="Code HTTP 500" disabled="true" id="5fa3aac6-bc81-4af8-822b-52dd19227057"><con:configuration><codes>500</codes></con:configuration></con:assertion><con:assertion type="XPath Match" name="URL" id="5718ed8d-ebc2-440e-b5a8-2453f729ece3"><con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer'; 
//ns1:url</path><content>/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="errorCode" id="d5807472-3295-4369-b1a5-bf84c433fa42"><con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer'; 
//ns1:errorCode</path><content>/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="errorMessage" id="a8775872-8b01-461a-be2c-5f93c763e80e"><con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer'; 
//ns1:errorMessage</path><content>/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="refContrat" value="${Prepa + Validation#RefContrat}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refContrat</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="calltestcase" name="Prepa + Validation" id="1c521459-35bf-40d2-ad0d-e0415ab4a0de"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>3d1406c1-6558-4539-a011-8394a232a260</con:targetTestCase><con:properties><con:property><con:name>RefCommande</con:name><con:value>7cbca744-d494-4218-858f-ceed4b1cf8dd</con:value></con:property><con:property><con:name>RefContrat</con:name><con:value>00000371</con:value></con:property></con:properties><con:returnProperties><con:entry>RefCommande</con:entry><con:entry>RefContrat</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="Sans User" id="750bbc84-744c-43a2-811f-0154a43a4a72"><con:settings/><con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/{refContrat}/migrer" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Sans User" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.10.2.52:8080</con:endpoint><con:request>{
  "user": null,
  "politiqueMigration": {
    "fraisMigration": "30",
    "fraisResiliation": true,
    "montantResiliation": "50",
    "remboursement": true,
    "montantRemboursement": "50",
    "fraisCreation": true,
    "penalite": false
  },
  "produitsMigration": [
    {
      "numEC": 1,
      "referenceGammeSource": "jet",
      "referenceProduitSource": "sat.jet.10",
      "referenceGammeDestination": "jet",
      "referenceProduitDestination": "sat.jet.20",
      "label": "Abonnement Jet 10Go",
      "numeroCommande": "Order_migration_1",
      "typeProduit": "SERVICE",
      "prix": {
        "periodicite": 1,
        "montant": "30",
        "typeTVA": "R",
        "frais": [
          {
            "montant": "30",
            "nombreMois": 0,
            "ordre": 0,
            "titre": "Frais d'ouverture de dossier",
            "typeFrais": "CREATION"
          }
        ],
        "modeFacturation": "PREMIER_MOIS"
      },
	  "referenceDePaiement": "R0000012",
	  "modePaiement": "SEPA"
    },
    {
      "numEC": 2,
      "numECParent": 1,
      "referenceGammeSource": "jet",
      "referenceProduitSource": "option.plus.50g",
      "referenceGammeDestination": "jet",
      "referenceProduitDestination": "option.plus.50g",
      "label": "Option+ 50Go",
      "numeroCommande": "Order_migration_1",
      "typeProduit": "SERVICE",
      "prix": {
        "periodicite": 1,
        "montant": "5",
        "typeTVA": "R",
        "modeFacturation": "PREMIER_MOIS"
      },
	  "referenceDePaiement": "R0000012",
	  "modePaiement": "SEPA"
    }
  ]
}</con:request><con:originalUri>http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer</con:originalUri><con:assertion type="Invalid HTTP Status Codes" name="Code HTTP 500" disabled="true" id="ae4b7389-8e46-4d71-bf38-6754bbd0a73b"><con:configuration><codes>500</codes></con:configuration></con:assertion><con:assertion type="XPath Match" name="URL" id="d060e2a5-169c-43e4-b4f7-b4609cc276dd"><con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer'; 
//ns1:url</path><content>/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="errorCode" id="0eee0ca5-b157-499f-990b-8e709b4fbe7e"><con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer';
//ns1:errorCode</path><content>1.1.91</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="errorMessage" id="eaee80cd-c84e-44a1-b52d-68798a9cce1c"><con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer';
//ns1:errorMessage</path><content>L'element user est obligatoire.</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="refContrat" value="${Prepa + Validation#RefContrat}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refContrat</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="Sans PolitiqueMigration" id="c06b38d7-2f6b-4307-8da9-6d54d4f78c4f"><con:settings/><con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/{refContrat}/migrer" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Sans PolitiqueMigration" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.10.2.52:8080</con:endpoint><con:request>{
  "user": "test",
  "politiqueMigration": null,
  "produitsMigration": [
    {
      "numEC": 1,
      "referenceGammeSource": "jet",
      "referenceProduitSource": "sat.jet.10",
      "referenceGammeDestination": "jet",
      "referenceProduitDestination": "sat.jet.20",
      "label": "Abonnement Jet 10Go",
      "numeroCommande": "Order_migration_1",
      "typeProduit": "SERVICE",
      "prix": {
        "periodicite": 1,
        "montant": "30",
        "typeTVA": "R",
        "frais": [
          {
            "montant": "30",
            "nombreMois": 0,
            "ordre": 0,
            "titre": "Frais d'ouverture de dossier",
            "typeFrais": "CREATION"
          }
        ],
        "modeFacturation": "PREMIER_MOIS"
      },
	  "referenceDePaiement": "R0000012",
	  "modePaiement": "SEPA"
    },
    {
      "numEC": 2,
      "numECParent": 1,
      "referenceGammeSource": "jet",
      "referenceProduitSource": "option.plus.50g",
      "referenceGammeDestination": "jet",
      "referenceProduitDestination": "option.plus.50g",
      "label": "Option+ 50Go",
      "numeroCommande": "Order_migration_1",
      "typeProduit": "SERVICE",
      "prix": {
        "periodicite": 1,
        "montant": "5",
        "typeTVA": "R",
        "modeFacturation": "PREMIER_MOIS"
      },
	  "referenceDePaiement": "R0000012",
	  "modePaiement": "SEPA"
    }
  ]
}</con:request><con:originalUri>http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer</con:originalUri><con:assertion type="Invalid HTTP Status Codes" name="Code HTTP 500" disabled="true" id="3b6e50a5-8440-49a2-90b3-e428a2fbc8ff"><con:configuration><codes>500</codes></con:configuration></con:assertion><con:assertion type="XPath Match" name="URL" id="d7d0684e-1d0a-4979-9213-b70beecc7a92"><con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer'; 
//ns1:url</path><content>/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="errorCode" id="ac56ecab-776d-4a9e-97bf-8eb5020d6f34"><con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer'; 
//ns1:errorCode</path><content>1.1.17</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="errorMessage" id="a543799a-7145-4581-b80f-82738a06b436"><con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer'; 
//ns1:errorMessage</path><content>La politique de migration est obligatoire.</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="refContrat" value="${Prepa + Validation#RefContrat}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refContrat</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="Sans PolitiqueMigration.FraisResiliation" id="2c474a87-0e50-4680-bf78-2bc6615971a1"><con:settings/><con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/{refContrat}/migrer" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Sans PolitiqueMigration.FraisResiliation" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@remove_empty_content">false</con:setting><con:setting id="com.eviware.soapui.impl.support.AbstractHttpRequest@follow-redirects">true</con:setting></con:settings><con:encoding/><con:endpoint>http://10.10.2.52:8080</con:endpoint><con:request>{
  "user": "test",
  "politiqueMigration": {
    "fraisMigration": "30",
    "remboursement": true,
    "montantRemboursement": "50",
    "fraisCreation": true,
    "penalite": false,
    "reductionAncienne": true
  },
  "produitsMigration": [
    {
      "numEC": 1,
      "referenceGammeSource": "jet",
      "referenceProduitSource": "jet",
      "referenceGammeDestination": "jet",
      "referenceProduitDestination": "sat.jet.20",
      "label": "Abonnement Jet 10Go",
      "numeroCommande": "Order_migration_1",
      "typeProduit": "SERVICE",
      "prix": {
        "periodicite": 1,
        "montant": "30",
        "typeTVA": "R",
        "frais": [
          {
            "montant": "30",
            "titre": "Frais d'ouverture de dossier",
            "typeFrais": "CREATION"
          }
        ],
        "modeFacturation": "PREMIER_MOIS"
      },
	  "referenceDePaiement": "R0000012",
	  "modePaiement": "SEPA"
    },
    {
      "numEC": 2,
      "numECParent": 1,
      "referenceGammeSource": "jet",
      "referenceProduitSource": "option.plus.50g",
      "referenceGammeDestination": "jet",
      "referenceProduitDestination": "option.plus.50g",
      "label": "Option+ 50Go",
      "numeroCommande": "Order_migration_1",
      "typeProduit": "SERVICE",
      "prix": {
        "periodicite": 1,
        "montant": "5",
        "typeTVA": "R",
        "modeFacturation": "PREMIER_MOIS"
      },
	  "referenceDePaiement": "R0000012",
	  "modePaiement": "SEPA"
    }
  ]
}</con:request><con:originalUri>http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer</con:originalUri><con:assertion type="Invalid HTTP Status Codes" name="Code HTTP 500" disabled="true" id="784d8241-3543-4791-b1d2-2f3a87f6092e"><con:configuration><codes>500</codes></con:configuration></con:assertion><con:assertion type="XPath Match" name="URL" id="5f41c4bf-d5c3-42b0-bcab-a053bf41f7cb"><con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer'; 
//ns1:url</path><content>/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="errorCode" id="49a9f6ac-4d19-4131-87fd-885898ebed15"><con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer'; 
//ns1:errorCode</path><content>0.1.1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="errorMessage" id="f331bf6d-818b-435b-bdb1-055fb56ed342"><con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer'; 
//ns1:errorMessage</path><content>un des paramÃ¨tres est mal formatÃ© : PolitiqueMigration.fraisResiliation.</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="refContrat" value="${Prepa + Validation#RefContrat}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refContrat</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="Sans PolitiqueMigration.FraisResiliation MAIS avec montantResiliation" id="2b81f153-0966-46a3-99b5-d79b65a46ec0">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/{refContrat}/migrer" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="Sans PolitiqueMigration.FraisResiliation MAIS avec montantResiliation" mediaType="application/json" postQueryString="false" id="39c3f79f-e72c-4bd5-acfe-614a9d4e5b15">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{
  "user": "test",
  "politiqueMigration": {
    "fraisMigration": "30",
    "remboursement": true,
    "montantRemboursement": "50",
    "fraisCreation": true,
    "montantResiliation" : "50",
    "penalite": false,
    "reductionAncienne": true
  },
  "produitsMigration": [
    {
	  "numEC": 1,
	  "referenceGammeSource": "jet",
      "referenceProduitSource": "jet",
      "referenceGammeDestination": "jet",
	  "referenceProduitDestination": "sat.jet.20",
	  "label": "Abonnement Jet 10Go",
	  "numeroCommande": "Order_migration_1",
      "typeProduit": "SERVICE",
      "prix": {
        "periodicite": 1,
        "montant": "30",
		"typeTVA": "R",
        "frais": [
          {
            "montant": "30",
            "titre": "Frais d'ouverture de dossier",
            "typeFrais": "CREATION"
          }
        ],
        "modeFacturation": "PREMIER_MOIS"
      },
	  "referenceDePaiement": "R0000012",
	  "modePaiement": "SEPA"
    },
	{
	  "numEC": 2,
      "numECParent": 1,
	  "referenceGammeSource": "jet",
      "referenceProduitSource": "option.plus.50g",
      "referenceGammeDestination": "jet",
	  "referenceProduitDestination": "option.plus.50g",
	  "label": "Option+ 50Go",
	  "numeroCommande": "Order_migration_1",
      "typeProduit": "SERVICE",
      "prix": {
        "periodicite": 1,
        "montant": "5",
		"typeTVA": "R",
        "modeFacturation": "PREMIER_MOIS"
      },
	  "referenceDePaiement": "R0000012",
	  "modePaiement": "SEPA"
    }
  ] 
}</con:request>
            <con:originalUri>http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer</con:originalUri><con:assertion type="XPath Match" name="URL" id="6522ce7c-69d5-4d59-8895-5cc0cd0511d2">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer'; 
//ns1:url</path><content>/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorCode" id="5c7426b0-c54d-4ae6-8c88-396ccd850cce">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer'; 
//ns1:errorCode</path><content>0.1.1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorMessage" id="53dd00fb-c706-4e76-8da6-7f3bc4727436">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer'; 
                //ns1:errorMessage</path><content>un des paramÃ¨tres est mal formatÃ© : PolitiqueMigration.fraisResiliation.</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
			<con:assertion type="Invalid HTTP Status Codes" name="Code HTTP 500" disabled="true">
              <con:configuration>
                <codes>500</codes>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters><entry key="refContrat" value="${Prepa + Validation#RefContrat}" xmlns="http://eviware.com/soapui/config"/></con:parameters>
          </con:restRequest>
        </con:config>
      </con:testStep><con:testStep type="restrequest" name="Sans PolitiqueMigration.Remboursement" id="267b5f4b-3f38-4720-849f-0b2b424b2b55"><con:settings/><con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/{refContrat}/migrer" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Sans PolitiqueMigration.Remboursement" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.10.2.52:8080</con:endpoint><con:request>{
  "user": "test",
  "politiqueMigration": {
    "fraisMigration": "30",
    "fraisResiliation": true,
    "montantResiliation": "50",
    "fraisCreation": true,
    "penalite": false,
    "reductionAncienne": true
  },
  "produitsMigration": [
    {
      "numEC": 1,
      "referenceGammeSource": "jet",
      "referenceProduitSource": "jet",
      "referenceGammeDestination": "jet",
      "referenceProduitDestination": "sat.jet.20",
      "label": "Abonnement Jet 10Go",
      "numeroCommande": "Order_migration_1",
      "typeProduit": "SERVICE",
      "prix": {
        "periodicite": 1,
        "montant": "30",
        "typeTVA": "R",
        "frais": [
          {
            "montant": "30",
            "titre": "Frais d'ouverture de dossier",
            "typeFrais": "CREATION"
          }
        ],
        "modeFacturation": "PREMIER_MOIS"
      },
	  "referenceDePaiement": "R0000012",
	  "modePaiement": "SEPA"
    },
    {
      "numEC": 2,
      "numECParent": 1,
      "referenceGammeSource": "jet",
      "referenceProduitSource": "option.plus.50g",
      "referenceGammeDestination": "jet",
      "referenceProduitDestination": "option.plus.50g",
      "label": "Option+ 50Go",
      "numeroCommande": "Order_migration_1",
      "typeProduit": "SERVICE",
      "prix": {
        "periodicite": 1,
        "montant": "5",
        "typeTVA": "R",
        "modeFacturation": "PREMIER_MOIS"
      },
	  "referenceDePaiement": "R0000012",
	  "modePaiement": "SEPA"
    }
  ]
}</con:request><con:originalUri>http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer</con:originalUri><con:assertion type="Invalid HTTP Status Codes" name="Code HTTP 500" disabled="true" id="5fa3aac6-bc81-4af8-822b-52dd19227057"><con:configuration><codes>500</codes></con:configuration></con:assertion><con:assertion type="XPath Match" name="URL" id="5718ed8d-ebc2-440e-b5a8-2453f729ece3"><con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer'; 
//ns1:url</path><content>/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="errorCode" id="d5807472-3295-4369-b1a5-bf84c433fa42"><con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer'; 
//ns1:errorCode</path><content>0.1.1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="errorMessage" id="a8775872-8b01-461a-be2c-5f93c763e80e"><con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer'; 
//ns1:errorMessage</path><content>un des paramÃ¨tres est mal formatÃ© : PolitiqueMigration.remboursement.</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="refContrat" value="${Prepa + Validation#RefContrat}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refContrat</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="Sans PolitiqueMigration.Remboursement MAIS avec montantRemboursement" id="4c3efbf3-6ce3-44c3-9c36-dac9087266d5">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/{refContrat}/migrer" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="Sans PolitiqueMigration.Remboursement MAIS avec montantRemboursement" mediaType="application/json" postQueryString="false" id="39c3f79f-e72c-4bd5-acfe-614a9d4e5b15">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{
  "user": "test",
  "politiqueMigration": {
    "fraisMigration": "30",
    "fraisResiliation": true,
    "montantResiliation": "50",
    "montantRemboursement": "50",
    "fraisCreation": true,
    "penalite": false,
    "reductionAncienne": true
  },
  "produitsMigration": [
    {
      "numEC": 1,
      "referenceGammeSource": "jet",
      "referenceProduitSource": "jet",
      "referenceGammeDestination": "jet",
      "referenceProduitDestination": "sat.jet.20",
      "label": "Abonnement Jet 10Go",
      "numeroCommande": "Order_migration_1",
      "typeProduit": "SERVICE",
      "prix": {
        "periodicite": 1,
        "montant": "30",
        "typeTVA": "R",
        "frais": [
          {
            "montant": "30",
            "titre": "Frais d'ouverture de dossier",
            "typeFrais": "CREATION"
          }
        ],
        "modeFacturation": "PREMIER_MOIS"
      },
	  "referenceDePaiement": "R0000012",
	  "modePaiement": "SEPA"
    },
    {
      "numEC": 2,
      "numECParent": 1,
      "referenceGammeSource": "jet",
      "referenceProduitSource": "option.plus.50g",
      "referenceGammeDestination": "jet",
      "referenceProduitDestination": "option.plus.50g",
      "label": "Option+ 50Go",
      "numeroCommande": "Order_migration_1",
      "typeProduit": "SERVICE",
      "prix": {
        "periodicite": 1,
        "montant": "5",
        "typeTVA": "R",
        "modeFacturation": "PREMIER_MOIS"
      },
	  "referenceDePaiement": "R0000012",
	  "modePaiement": "SEPA"
    }
  ]
}</con:request>
            <con:originalUri>http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer</con:originalUri><con:assertion type="XPath Match" name="URL" id="26b90ed0-fe36-4134-8ac4-2fd660453048">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer';
                //ns1:url</path><content>/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorCode" id="2775c74e-e991-44a6-86d5-0994caa1cd3c">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer'
                //ns1:errorCode</path><content>0.1.1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorMessage" id="72bbdfaf-f397-4786-b564-dc33ca45baee">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer'
                //ns1:errorMessage</path><content>un des paramÃ¨tres est mal formatÃ© : PolitiqueMigration.remboursement.</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
			<con:assertion type="Invalid HTTP Status Codes" name="Code HTTP 500" disabled="true">
              <con:configuration>
                <codes>500</codes>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters><entry key="refContrat" value="${Prepa + Validation#RefContrat}" xmlns="http://eviware.com/soapui/config"/></con:parameters>
          </con:restRequest>
        </con:config>
      </con:testStep><con:testStep type="restrequest" name="Sans PolitiqueMigration.FraisCreation" id="04f53d7d-69ab-4fa3-894a-dd23a8950ff2"><con:settings/><con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/{refContrat}/migrer" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Sans PolitiqueMigration.FraisCreation" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.10.2.52:8080</con:endpoint><con:request>{
  "user": "test",
  "politiqueMigration": {
    "fraisMigration": "30",
    "fraisResiliation": true,
    "montantResiliation": "50",
    "remboursement": true,
    "montantRemboursement": "50",
    "penalite": false,
    "reductionAncienne": true
  },
  "produitsMigration": [
    {
      "numEC": 1,
      "referenceGammeSource": "jet",
      "referenceProduitSource": "jet",
      "referenceGammeDestination": "jet",
      "referenceProduitDestination": "sat.jet.20",
      "label": "Abonnement Jet 10Go",
      "numeroCommande": "Order_migration_1",
      "typeProduit": "SERVICE",
      "prix": {
        "periodicite": 1,
        "montant": "30",
        "typeTVA": "R",
        "frais": [
          {
            "montant": "30",
            "titre": "Frais d'ouverture de dossier",
            "typeFrais": "CREATION"
          }
        ],
        "modeFacturation": "PREMIER_MOIS"
      },
	  "referenceDePaiement": "R0000012",
	  "modePaiement": "SEPA"
    },
    {
      "numEC": 2,
      "numECParent": 1,
      "referenceGammeSource": "jet",
      "referenceProduitSource": "option.plus.50g",
      "referenceGammeDestination": "jet",
      "referenceProduitDestination": "option.plus.50g",
      "label": "Option+ 50Go",
      "numeroCommande": "Order_migration_1",
      "typeProduit": "SERVICE",
      "prix": {
        "periodicite": 1,
        "montant": "5",
        "typeTVA": "R",
        "modeFacturation": "PREMIER_MOIS"
      },
	  "referenceDePaiement": "R0000012",
	  "modePaiement": "SEPA"
    }
  ]
}</con:request><con:originalUri>http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer</con:originalUri><con:assertion type="Invalid HTTP Status Codes" name="Code HTTP 500" disabled="true" id="2708e72d-3913-4411-a259-349a0f22c7de"><con:configuration><codes>500</codes></con:configuration></con:assertion><con:assertion type="XPath Match" name="URL" id="c9ff54a8-2930-47e1-bb11-c8805f6b9d46"><con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer'; 
//ns1:url</path><content>/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="errorCode" id="6c51c2d2-f2e3-489b-b90a-7e8bf19b8b12"><con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer'; 
//ns1:errorCode</path><content>0.1.1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="errorMessage" id="bce4fa89-c034-4718-9a56-7f8556bbffda"><con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer'; 
//ns1:errorMessage</path><content>un des paramÃ¨tres est mal formatÃ© : PolitiqueMigration.fraisCreation.</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="refContrat" value="${Prepa + Validation#RefContrat}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refContrat</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="Sans PolitiqueMigration.Penalite" id="50fc6745-c422-4327-be33-9cd32604e79f"><con:settings/><con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/{refContrat}/migrer" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Sans PolitiqueMigration.Penalite" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.10.2.52:8080</con:endpoint><con:request>{
  "user": "test",
  "politiqueMigration": {
    "fraisMigration": "30",
    "fraisResiliation": true,
    "montantResiliation": "50",
    "remboursement": true,
    "montantRemboursement": "50",
    "fraisCreation": true,
    "reductionAncienne": true
  },
  "produitsMigration": [
    {
      "numEC": 1,
      "referenceGammeSource": "jet",
      "referenceProduitSource": "jet",
      "referenceGammeDestination": "jet",
      "referenceProduitDestination": "sat.jet.20",
      "label": "Abonnement Jet 10Go",
      "numeroCommande": "Order_migration_1",
      "typeProduit": "SERVICE",
      "prix": {
        "periodicite": 1,
        "montant": "30",
        "typeTVA": "R",
        "frais": [
          {
            "montant": "30",
            "titre": "Frais d'ouverture de dossier",
            "typeFrais": "CREATION"
          }
        ],
        "modeFacturation": "PREMIER_MOIS"
      },
	  "referenceDePaiement": "R0000012",
	  "modePaiement": "SEPA"
    },
    {
      "numEC": 2,
      "numECParent": 1,
      "referenceGammeSource": "jet",
      "referenceProduitSource": "option.plus.50g",
      "referenceGammeDestination": "jet",
      "referenceProduitDestination": "option.plus.50g",
      "label": "Option+ 50Go",
      "numeroCommande": "Order_migration_1",
      "typeProduit": "SERVICE",
      "prix": {
        "periodicite": 1,
        "montant": "5",
        "typeTVA": "R",
        "modeFacturation": "PREMIER_MOIS"
      },
	  "referenceDePaiement": "R0000012",
	  "modePaiement": "SEPA"
    }
  ]
}</con:request><con:originalUri>http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer</con:originalUri><con:assertion type="Invalid HTTP Status Codes" name="Code HTTP 500" disabled="true" id="8a918dfe-3d0b-441f-8ad9-72c876100cb2"><con:configuration><codes>500</codes></con:configuration></con:assertion><con:assertion type="XPath Match" name="URL" id="8dd48e85-217e-4b91-8357-033869e9519e"><con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer'; 
//ns1:url</path><content>/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="errorCode" id="145e2f3b-9a62-4a7e-bb51-ffd9f45a86da"><con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer'; 
//ns1:errorCode</path><content>0.1.1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="errorMessage" id="d5f971d3-e9e1-47ba-9d6e-ee813307aa32"><con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer'; 
//ns1:errorMessage</path><content>un des paramÃ¨tres est mal formatÃ© : PolitiqueMigration.penalite.</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="refContrat" value="${Prepa + Validation#RefContrat}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refContrat</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="Sans PolitiqueMigration.ReductionAncienne" id="32684353-745c-4332-a2b7-c2f51522c3b4"><con:settings/><con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/{refContrat}/migrer" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Sans PolitiqueMigration.ReductionAncienne" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.10.2.52:8080</con:endpoint><con:request>{
  "user": "test",
  "politiqueMigration": {
    "fraisMigration": "30",
    "fraisResiliation": true,
    "montantResiliation": "50",
    "remboursement": true,
    "montantRemboursement": "50",
    "fraisCreation": true,
    "penalite": false
  },
  "produitsMigration": [
    {
      "numEC": 1,
      "referenceGammeSource": "jet",
      "referenceProduitSource": "jet",
      "referenceGammeDestination": "jet",
      "referenceProduitDestination": "sat.jet.20",
      "label": "Abonnement Jet 10Go",
      "numeroCommande": "Order_migration_1",
      "typeProduit": "SERVICE",
      "prix": {
        "periodicite": 1,
        "montant": "30",
        "typeTVA": "R",
        "frais": [
          {
            "montant": "30",
            "titre": "Frais d'ouverture de dossier",
            "typeFrais": "CREATION"
          }
        ],
        "modeFacturation": "PREMIER_MOIS"
      },
	  "referenceDePaiement": "R0000012",
	  "modePaiement": "SEPA"
    },
    {
      "numEC": 2,
      "numECParent": 1,
      "referenceGammeSource": "jet",
      "referenceProduitSource": "option.plus.50g",
      "referenceGammeDestination": "jet",
      "referenceProduitDestination": "option.plus.50g",
      "label": "Option+ 50Go",
      "numeroCommande": "Order_migration_1",
      "typeProduit": "SERVICE",
      "prix": {
        "periodicite": 1,
        "montant": "5",
        "typeTVA": "R",
        "modeFacturation": "PREMIER_MOIS"
      },
	  "referenceDePaiement": "R0000012",
	  "modePaiement": "SEPA"
    }
  ]
}</con:request><con:originalUri>http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer</con:originalUri><con:assertion type="Invalid HTTP Status Codes" name="Code HTTP 500" disabled="true" id="af9434a0-5d4e-4110-993e-0e26d2255bd4"><con:configuration><codes>500</codes></con:configuration></con:assertion><con:assertion type="XPath Match" name="URL" id="8de1eed8-2831-4af2-8752-9e4fda3e4389"><con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer'; 
//ns1:url</path><content>/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="errorCode" id="2ecb37d8-74de-4135-9580-a65885153fab"><con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer'; 
//ns1:errorCode</path><content>0.1.1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="errorMessage" id="333e00d5-7dfb-4309-ac53-70e5c53f2d9f"><con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer'; 
//ns1:errorMessage</path><content>un des paramÃ¨tres est mal formatÃ© : PolitiqueMigration.reductionAncienne.</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="refContrat" value="${Prepa + Validation#RefContrat}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refContrat</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="Sans Produit" id="d43e3dd1-9a3b-48c9-b391-5754f96a2746"><con:settings/><con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/{refContrat}/migrer" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Sans Produit" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.10.2.52:8080</con:endpoint><con:request>{
  "user": "test",
  "politiqueMigration": {
    "fraisMigration": "30",
    "fraisResiliation": true,
    "montantResiliation": "50",
    "remboursement": true,
    "montantRemboursement": "50",
    "fraisCreation": true,
    "penalite": false,
    "reductionAncienne": true
  },
  "produitsMigration": [
  ]
}</con:request><con:originalUri>http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer</con:originalUri><con:assertion type="Invalid HTTP Status Codes" name="Code HTTP 500" disabled="true" id="c61f1085-1198-4855-9f70-fe05a78bcadc"><con:configuration><codes>500</codes></con:configuration></con:assertion><con:assertion type="XPath Match" name="URL" id="67bde628-4f65-45e7-abc0-4e2e0b83bdf9"><con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer'; 
//ns1:url</path><content>/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="errorCode" id="14b7a635-5c03-47d1-a18f-691e255c9f23"><con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer'; 
//ns1:errorCode</path><content>1.1.93</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="errorMessage" id="a101b54d-3d06-46ef-983f-1bb7cf87e069"><con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer'; 
//ns1:errorMessage</path><content>Liste des produits est vide.</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="refContrat" value="${Prepa + Validation#RefContrat}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refContrat</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="Sans Produit.NumEC" id="e898dc8c-a70b-4e49-a023-ae4eb290b621"><con:settings/><con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/{refContrat}/migrer" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Sans Produit.NumEC" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.10.2.52:8080</con:endpoint><con:request>{
  "user": "test",
  "politiqueMigration": {
    "fraisMigration": "30",
    "fraisResiliation": true,
    "montantResiliation": "50",
    "remboursement": true,
    "montantRemboursement": "50",
    "fraisCreation": true,
    "penalite": false,
    "reductionAncienne": true
  },
  "produitsMigration": [
    {
      "referenceGammeSource": "jet",
      "referenceProduitSource": "jet",
      "referenceGammeDestination": "jet",
      "referenceProduitDestination": "sat.jet.20",
      "label": "Abonnement Jet 10Go",
      "numeroCommande": "Order_migration_1",
      "typeProduit": "SERVICE",
      "prix": {
        "periodicite": 1,
        "montant": "30",
        "typeTVA": "R",
        "frais": [
          {
            "montant": "30",
            "titre": "Frais d'ouverture de dossier",
            "typeFrais": "CREATION"
          }
        ],
        "modeFacturation": "PREMIER_MOIS"
      },
	  "referenceDePaiement": "R0000012",
	  "modePaiement": "SEPA"
    },
    {
      "numECParent": 1,
      "referenceGammeSource": "jet",
      "referenceProduitSource": "option.plus.50g",
      "referenceGammeDestination": "jet",
      "referenceProduitDestination": "option.plus.50g",
      "label": "Option+ 50Go",
      "numeroCommande": "Order_migration_1",
      "typeProduit": "SERVICE",
      "prix": {
        "periodicite": 1,
        "montant": "5",
        "typeTVA": "R",
        "modeFacturation": "PREMIER_MOIS"
      },
	  "referenceDePaiement": "R0000012",
	  "modePaiement": "SEPA"
    }
  ]
}</con:request><con:originalUri>http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer</con:originalUri><con:assertion type="Invalid HTTP Status Codes" name="Code HTTP 500" disabled="true" id="7dc08588-dd83-4fd0-8b4e-c07ae7a714f0"><con:configuration><codes>500</codes></con:configuration></con:assertion><con:assertion type="XPath Match" name="URL" id="c4f162fa-3e39-4039-98fa-87c61d07b9a2"><con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer'; 
//ns1:url</path><content>/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="errorCode" id="5e49ccac-b2d4-40b5-8c91-2528608d3743"><con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer'; 
//ns1:errorCode</path><content>1.1.74</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="errorMessage" id="77aa5422-9343-4d69-b0af-3ad6c2fb6c5b"><con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer'; 
//ns1:errorMessage</path><content>Impossible de migrer un produit qui nâ€™est pas rÃ©fÃ©rencÃ© par son numÃ©ro de ligne du prÃ©cÃ©dent contrat.</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="refContrat" value="${Prepa + Validation#RefContrat}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refContrat</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="Sans Produit.ReferenceGammeSource" id="d0a2ea4f-5b74-4784-8bdb-207d76e8bc90"><con:settings/><con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/{refContrat}/migrer" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Sans Produit.ReferenceGammeSource" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.10.2.52:8080</con:endpoint><con:request>{
  "user": "test",
  "politiqueMigration": {
    "fraisMigration": "30",
    "fraisResiliation": true,
    "montantResiliation": "50",
    "remboursement": true,
    "montantRemboursement": "50",
    "fraisCreation": true,
    "penalite": false,
    "reductionAncienne": true
  },
  "produitsMigration": [
    {
      "numEC": 1,
      "referenceProduitSource": "jet",
      "referenceGammeDestination": "jet",
      "referenceProduitDestination": "sat.jet.20",
      "label": "Abonnement Jet 10Go",
      "numeroCommande": "Order_migration_1",
      "typeProduit": "SERVICE",
      "prix": {
        "periodicite": 1,
        "montant": "30",
        "typeTVA": "R",
        "frais": [
          {
            "montant": "30",
            "titre": "Frais d'ouverture de dossier",
            "typeFrais": "CREATION"
          }
        ],
        "modeFacturation": "PREMIER_MOIS"
      },
	  "referenceDePaiement": "R0000012",
	  "modePaiement": "SEPA"
    },
    {
      "numEC": 2,
      "numECParent": 1,
      "referenceProduitSource": "option.plus.50g",
      "referenceGammeDestination": "jet",
      "referenceProduitDestination": "option.plus.50g",
      "label": "Option+ 50Go",
      "numeroCommande": "Order_migration_1",
      "typeProduit": "SERVICE",
      "prix": {
        "periodicite": 1,
        "montant": "5",
        "typeTVA": "R",
        "modeFacturation": "PREMIER_MOIS"
      },
	  "referenceDePaiement": "R0000012",
	  "modePaiement": "SEPA"
    }
  ]
}</con:request><con:originalUri>http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer</con:originalUri><con:assertion type="Invalid HTTP Status Codes" name="Code HTTP 500" disabled="true" id="0b8400eb-d13f-470f-a746-f46ad62f4400"><con:configuration><codes>500</codes></con:configuration></con:assertion><con:assertion type="XPath Match" name="URL" id="3e0635cb-2d74-4694-804a-9c7a5bbf0ac5"><con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer'; 
//ns1:url</path><content>/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="errorCode" id="7a7238ba-a2c3-4859-83d9-badebef234eb"><con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer'; 
//ns1:errorCode</path><content>1.1.75</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="errorMessage" id="c448f4e1-e5c2-4909-a711-ae995c8f234f"><con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer'; 
//ns1:errorMessage</path><content>Impossible de migrer un produit qui nâ€™est pas rÃ©fÃ©rencÃ© par ses rÃ©fÃ©rences de produit et de gamme.</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="refContrat" value="${Prepa + Validation#RefContrat}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refContrat</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="Sans Produit.ReferenceProduitSource" id="b2fcdee3-17ef-474d-a297-346625467861"><con:settings/><con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/{refContrat}/migrer" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Sans Produit.ReferenceProduitSource" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.10.2.52:8080</con:endpoint><con:request>{
  "user": "test",
  "politiqueMigration": {
    "fraisMigration": "30",
    "fraisResiliation": true,
    "montantResiliation": "50",
    "remboursement": true,
    "montantRemboursement": "50",
    "fraisCreation": true,
    "penalite": false,
    "reductionAncienne": true
  },
  "produitsMigration": [
    {
      "numEC": 1,
      "referenceGammeSource": "jet",
      "referenceGammeDestination": "jet",
      "referenceProduitDestination": "sat.jet.20",
      "label": "Abonnement Jet 10Go",
      "numeroCommande": "Order_migration_1",
      "typeProduit": "SERVICE",
      "prix": {
        "periodicite": 1,
        "montant": "30",
        "typeTVA": "R",
        "frais": [
          {
            "montant": "30",
            "titre": "Frais d'ouverture de dossier",
            "typeFrais": "CREATION"
          }
        ],
        "modeFacturation": "PREMIER_MOIS"
      },
	  "referenceDePaiement": "R0000012",
	  "modePaiement": "SEPA"
    },
    {
      "numEC": 2,
      "numECParent": 1,
      "referenceGammeSource": "jet",
      "referenceGammeDestination": "jet",
      "referenceProduitDestination": "option.plus.50g",
      "label": "Option+ 50Go",
      "numeroCommande": "Order_migration_1",
      "typeProduit": "SERVICE",
      "prix": {
        "periodicite": 1,
        "montant": "5",
        "typeTVA": "R",
        "modeFacturation": "PREMIER_MOIS"
      },
	  "referenceDePaiement": "R0000012",
	  "modePaiement": "SEPA"
    }
  ]
}</con:request><con:originalUri>http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer</con:originalUri><con:assertion type="Invalid HTTP Status Codes" name="Code HTTP 500" disabled="true" id="fd1fddb4-e7cd-4c15-bd73-e2842efd86f9"><con:configuration><codes>500</codes></con:configuration></con:assertion><con:assertion type="XPath Match" name="URL" id="f802c5e9-0b1c-46e3-a01b-041af7afe9b5"><con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer'; 
//ns1:url</path><content>/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="errorCode" id="4ea465e3-95f7-4364-aa3e-93241ee59043"><con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer'; 
//ns1:errorCode</path><content>1.1.75</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="errorMessage" id="c23adb8f-b4af-4ab2-a387-63a4fa631adc"><con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer'; 
//ns1:errorMessage</path><content>Impossible de migrer un produit qui nâ€™est pas rÃ©fÃ©rencÃ© par ses rÃ©fÃ©rences de produit et de gamme.</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="refContrat" value="${Prepa + Validation#RefContrat}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refContrat</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="Sans Produit.ReferenceGammeDestination" id="a7da3291-ec09-4ae3-827e-491ae588c43d"><con:settings/><con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/{refContrat}/migrer" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Sans Produit.ReferenceGammeDestination" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.10.2.52:8080</con:endpoint><con:request>{
  "user": "test",
  "politiqueMigration": {
    "fraisMigration": "30",
    "fraisResiliation": true,
    "montantResiliation": "50",
    "remboursement": true,
    "montantRemboursement": "50",
    "fraisCreation": true,
    "penalite": false,
    "reductionAncienne": true
  },
  "produitsMigration": [
    {
      "numEC": 1,
      "referenceGammeSource": "jet",
      "referenceProduitSource": "jet",
      "referenceProduitDestination": "sat.jet.20",
      "label": "Abonnement Jet 10Go",
      "numeroCommande": "Order_migration_1",
      "typeProduit": "SERVICE",
      "prix": {
        "periodicite": 1,
        "montant": "30",
        "typeTVA": "R",
        "frais": [
          {
            "montant": "30",
            "titre": "Frais d'ouverture de dossier",
            "typeFrais": "CREATION"
          }
        ],
        "modeFacturation": "PREMIER_MOIS"
      },
	  "referenceDePaiement": "R0000012",
	  "modePaiement": "SEPA"
    },
    {
      "numEC": 2,
      "numECParent": 1,
      "referenceGammeSource": "jet",
      "referenceProduitSource": "option.plus.50g",
      "referenceProduitDestination": "option.plus.50g",
      "label": "Option+ 50Go",
      "numeroCommande": "Order_migration_1",
      "typeProduit": "SERVICE",
      "prix": {
        "periodicite": 1,
        "montant": "5",
        "typeTVA": "R",
        "modeFacturation": "PREMIER_MOIS"
      },
	  "referenceDePaiement": "R0000012",
	  "modePaiement": "SEPA"
    }
  ]
}</con:request><con:originalUri>http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer</con:originalUri><con:assertion type="Invalid HTTP Status Codes" name="Code HTTP 500" disabled="true" id="12368f9f-f7a2-467a-b1aa-cdc014c08072"><con:configuration><codes>500</codes></con:configuration></con:assertion><con:assertion type="XPath Match" name="URL" id="4d8aaa8b-92bc-49ff-b455-9d407af09d55"><con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer'; 
//ns1:url</path><content>/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="errorCode" id="bfade3b9-db4f-41c1-b588-6b931655dc35"><con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer'; 
//ns1:errorCode</path><content>1.1.87</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="errorMessage" id="47d018ec-87dc-4900-a5e1-cf29008d1549"><con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer'; 
//ns1:errorMessage</path><content>Impossible dâ€™ajouter le produit 1. Il ne renseigne pas les informations RefProduit et/ou RefGamme</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="refContrat" value="${Prepa + Validation#RefContrat}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refContrat</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="Sans Produit.ReferenceProduitDestination" id="b5ee1a69-4b20-4f11-8fb4-cac43b220dbe"><con:settings/><con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/{refContrat}/migrer" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Sans Produit.ReferenceProduitDestination" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.10.2.52:8080</con:endpoint><con:request>{
  "user": "test",
  "politiqueMigration": {
    "fraisMigration": "30",
    "fraisResiliation": true,
    "montantResiliation": "50",
    "remboursement": true,
    "montantRemboursement": "50",
    "fraisCreation": true,
    "penalite": false,
    "reductionAncienne": true
  },
  "produitsMigration": [
    {
      "numEC": 1,
      "referenceGammeSource": "jet",
      "referenceProduitSource": "jet",
      "referenceGammeDestination": "jet",
      "label": "Abonnement Jet 10Go",
      "numeroCommande": "Order_migration_1",
      "typeProduit": "SERVICE",
      "prix": {
        "periodicite": 1,
        "montant": "30",
        "typeTVA": "R",
        "frais": [
          {
            "montant": "30",
            "titre": "Frais d'ouverture de dossier",
            "typeFrais": "CREATION"
          }
        ],
        "modeFacturation": "PREMIER_MOIS"
      },
	  "referenceDePaiement": "R0000012",
	  "modePaiement": "SEPA"
    },
    {
      "numEC": 2,
      "numECParent": 1,
      "referenceGammeSource": "jet",
      "referenceProduitSource": "option.plus.50g",
      "referenceGammeDestination": "jet",
      "label": "Option+ 50Go",
      "numeroCommande": "Order_migration_1",
      "typeProduit": "SERVICE",
      "prix": {
        "periodicite": 1,
        "montant": "5",
        "typeTVA": "R",
        "modeFacturation": "PREMIER_MOIS"
      },
	  "referenceDePaiement": "R0000012",
	  "modePaiement": "SEPA"
    }
  ]
}</con:request><con:originalUri>http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer</con:originalUri><con:assertion type="Invalid HTTP Status Codes" name="Code HTTP 500" disabled="true" id="82bace56-69f5-4a70-a641-98d722d28dff"><con:configuration><codes>500</codes></con:configuration></con:assertion><con:assertion type="XPath Match" name="URL" id="634eb132-c277-48a7-9356-5f7da3465d7b"><con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer'; 
//ns1:url</path><content>/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="errorCode" id="6dd04795-0340-4fb1-b35f-ccd95e92c3ca"><con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer'; 
//ns1:errorCode</path><content>1.1.87</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="errorMessage" id="450cf5e6-3b28-4806-976e-b434e3d8d819"><con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer'; 
//ns1:errorMessage</path><content>Impossible dâ€™ajouter le produit 1. Il ne renseigne pas les informations RefProduit et/ou RefGamme</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="refContrat" value="${Prepa + Validation#RefContrat}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refContrat</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="Sans Produit.Label" id="a91e3358-644e-49e8-835e-445d7a1b0bf0"><con:settings/><con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/{refContrat}/migrer" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Sans Produit.Label" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.10.2.52:8080</con:endpoint><con:request>{
  "user": "test",
  "politiqueMigration": {
    "fraisMigration": "30",
    "fraisResiliation": true,
    "montantResiliation": "50",
    "remboursement": true,
    "montantRemboursement": "50",
    "fraisCreation": true,
    "penalite": false,
    "reductionAncienne": true
  },
  "produitsMigration": [
    {
      "numEC": 1,
      "referenceGammeSource": "jet",
      "referenceProduitSource": "jet",
      "referenceGammeDestination": "jet",
      "referenceProduitDestination": "sat.jet.20",
      "numeroCommande": "Order_migration_1",
      "typeProduit": "SERVICE",
      "prix": {
        "periodicite": 1,
        "montant": "30",
        "typeTVA": "R",
        "modeFacturation": "PREMIER_MOIS",
        "frais": [
          {
            "montant": "30",
            "titre": "Frais d'ouverture de dossier",
            "typeFrais": "CREATION"
          }
        ]
        
      },
	  "referenceDePaiement": "R0000012",
	  "modePaiement": "SEPA"
    },
    {
      "numEC": 2,
      "numECParent": 1,
      "referenceGammeSource": "jet",
      "referenceProduitSource": "option.plus.50g",
      "referenceGammeDestination": "jet",
      "referenceProduitDestination": "option.plus.50g",
      "numeroCommande": "Order_migration_1",
      "typeProduit": "SERVICE",
      "prix": {
        "periodicite": 1,
        "montant": "5",
        "typeTVA": "R",
        "modeFacturation": "PREMIER_MOIS"
      },
	  "referenceDePaiement": "R0000012",
	  "modePaiement": "SEPA"
    }
  ]
}</con:request><con:originalUri>http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer</con:originalUri><con:assertion type="Invalid HTTP Status Codes" name="Code HTTP 500" disabled="true" id="51059b6c-3377-47d8-b3f9-0592c49375b2"><con:configuration><codes>500</codes></con:configuration></con:assertion><con:assertion type="XPath Match" name="URL" id="4592fc0e-1d7c-47b1-96e1-e452c0f12a89"><con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer'; 
//ns1:url</path><content>/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="errorCode" id="2b59eb67-cf4c-4d22-83af-8d55efad3213"><con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer'; 
//ns1:errorCode</path><content>0.1.1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="errorMessage" id="cfc591ce-9517-4f1f-85a6-32b93c0dccf3"><con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer'; 
//ns1:errorMessage</path><content>un des paramÃ¨tres est mal formatÃ© : Produit.label.</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="refContrat" value="${Prepa + Validation#RefContrat}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refContrat</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="Sans Produit.NumeroCommande" id="6b3e6441-b4dd-4943-93f4-c0dd2af53b39"><con:settings/><con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/{refContrat}/migrer" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Sans Produit.NumeroCommande" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.10.2.52:8080</con:endpoint><con:request>{
  "user": "test",
  "politiqueMigration": {
    "fraisMigration": "30",
    "fraisResiliation": true,
    "montantResiliation": "50",
    "remboursement": true,
    "montantRemboursement": "50",
    "fraisCreation": true,
    "penalite": false,
    "reductionAncienne": true
  },
  "produitsMigration": [
    {
      "numEC": 1,
      "referenceGammeSource": "jet",
      "referenceProduitSource": "jet",
      "referenceGammeDestination": "jet",
      "referenceProduitDestination": "sat.jet.20",
      "label": "Abonnement Jet 10Go",
      "typeProduit": "SERVICE",
      "prix": {
        "periodicite": 1,
        "montant": "30",
        "typeTVA": "R",
        "frais": [
          {
            "montant": "30",
            "titre": "Frais d'ouverture de dossier",
            "typeFrais": "CREATION"
          }
        ],
        "modeFacturation": "PREMIER_MOIS"
      },
	  "referenceDePaiement": "R0000012",
	  "modePaiement": "SEPA"
    },
    {
      "numEC": 2,
      "numECParent": 1,
      "referenceGammeSource": "jet",
      "referenceProduitSource": "option.plus.50g",
      "referenceGammeDestination": "jet",
      "referenceProduitDestination": "option.plus.50g",
      "label": "Option+ 50Go",
      "typeProduit": "SERVICE",
      "prix": {
        "periodicite": 1,
        "montant": "5",
        "typeTVA": "R",
        "modeFacturation": "PREMIER_MOIS"
      },
	  "referenceDePaiement": "R0000012",
	  "modePaiement": "SEPA"
    }
  ]
}</con:request><con:originalUri>http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer</con:originalUri><con:assertion type="Invalid HTTP Status Codes" name="Code HTTP 500" disabled="true" id="f7ac40c4-684e-4a7a-bf81-86e774858a5e"><con:configuration><codes>500</codes></con:configuration></con:assertion><con:assertion type="XPath Match" name="URL" id="617230f6-b1af-4b74-8f93-1edecdab5076"><con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer'; 
//ns1:url</path><content>/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="errorCode" id="f38bfa69-5454-4e24-9fff-57069a4619c6"><con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer'; 
//ns1:errorCode</path><content>0.1.1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="errorMessage" id="9c38460f-1485-4000-9352-70d81a25712f"><con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer'; 
//ns1:errorMessage</path><content>un des paramÃ¨tres est mal formatÃ© : Produit.numeroCommande.</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="refContrat" value="${Prepa + Validation#RefContrat}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refContrat</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="Sans Produit.TypeProduit" id="7cfd22a9-fc28-4147-8070-810ff2cce30c"><con:settings/><con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/{refContrat}/migrer" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Sans Produit.TypeProduit" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.10.2.52:8080</con:endpoint><con:request>{
  "user": "test",
  "politiqueMigration": {
    "fraisMigration": "30",
    "fraisResiliation": true,
    "montantResiliation": "50",
    "remboursement": true,
    "montantRemboursement": "50",
    "fraisCreation": true,
    "penalite": false,
    "reductionAncienne": true
  },
  "produitsMigration": [
    {
      "numEC": 1,
      "referenceGammeSource": "jet",
      "referenceProduitSource": "jet",
      "referenceGammeDestination": "jet",
      "referenceProduitDestination": "sat.jet.20",
      "label": "Abonnement Jet 10Go",
      "numeroCommande": "Order_migration_1",
      "prix": {
        "periodicite": 1,
        "montant": "30",
        "typeTVA": "R",
        "frais": [
          {
            "montant": "30",
            "titre": "Frais d'ouverture de dossier",
            "typeFrais": "CREATION"
          }
        ],
        "modeFacturation": "PREMIER_MOIS"
      },
	  "referenceDePaiement": "R0000012",
	  "modePaiement": "SEPA"
    },
    {
      "numEC": 2,
      "numECParent": 1,
      "referenceGammeSource": "jet",
      "referenceProduitSource": "option.plus.50g",
      "referenceGammeDestination": "jet",
      "referenceProduitDestination": "option.plus.50g",
      "label": "Option+ 50Go",
      "numeroCommande": "Order_migration_1",
      "prix": {
        "periodicite": 1,
        "montant": "5",
        "typeTVA": "R",
        "modeFacturation": "PREMIER_MOIS"
      },
	  "referenceDePaiement": "R0000012",
	  "modePaiement": "SEPA"
    }
  ]
}</con:request><con:originalUri>http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer</con:originalUri><con:assertion type="Invalid HTTP Status Codes" name="Code HTTP 500" disabled="true" id="3699f9cc-2ac9-4c0c-8ea7-c696ee6b7878"><con:configuration><codes>500</codes></con:configuration></con:assertion><con:assertion type="XPath Match" name="URL" id="c909c067-e7ed-4e8b-b908-d2ed016817a2"><con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer'; 
//ns1:url</path><content>/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="errorCode" id="14c13fd6-291d-4325-ab53-9f13a62b411e"><con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer'; 
//ns1:errorCode</path><content>0.1.11</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="errorMessage" id="6c7d2c9f-47dd-49dd-b5cc-fe3fa86fde7f"><con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer'; 
//ns1:errorMessage</path><content>Le ProduitMigration.typeProduit ne peut valoir que [BIEN, SERVICE].</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="refContrat" value="${Prepa + Validation#RefContrat}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refContrat</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="Sans Produit.Prix" id="3d39283c-a3ae-4112-95a2-2f456f35873f"><con:settings/><con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/{refContrat}/migrer" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Sans Produit.Prix" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.10.2.52:8080</con:endpoint><con:request>{
  "user": "test",
  "politiqueMigration": {
    "fraisMigration": "30",
    "fraisResiliation": true,
    "montantResiliation": "50",
    "remboursement": true,
    "montantRemboursement": "50",
    "fraisCreation": true,
    "penalite": false,
    "reductionAncienne": true
  },
  "produitsMigration": [
    {
      "numEC": 1,
      "referenceGammeSource": "jet",
      "referenceProduitSource": "jet",
      "referenceGammeDestination": "jet",
      "referenceProduitDestination": "sat.jet.20",
      "label": "Abonnement Jet 10Go",
      "numeroCommande": "Order_migration_1",
      "typeProduit": "SERVICE"
    },
    {
      "numEC": 2,
      "numECParent": 1,
      "referenceGammeSource": "jet",
      "referenceProduitSource": "option.plus.50g",
      "referenceGammeDestination": "jet",
      "referenceProduitDestination": "option.plus.50g",
      "label": "Option+ 50Go",
      "numeroCommande": "Order_migration_1",
      "typeProduit": "SERVICE"
    }
  ]
}</con:request><con:originalUri>http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer</con:originalUri><con:assertion type="Invalid HTTP Status Codes" name="Code HTTP 500" disabled="true" id="597682c2-9595-4b34-892c-57982ff25c40"><con:configuration><codes>500</codes></con:configuration></con:assertion><con:assertion type="XPath Match" name="URL" id="f15db54c-465a-4ec8-843b-699727d10ce2"><con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer'; 
//ns1:url</path><content>/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="errorCode" id="2b4b7e85-7406-49c7-a3e5-3e81b621b18a"><con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer'; 
//ns1:errorCode</path><content>1.1.131</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="errorMessage" id="618bc957-9035-46df-9840-b31eb2ad972f"><con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer'; 
//ns1:errorMessage</path><content>Impossible d'associer les frais de migration a une offre sans prix.</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="refContrat" value="${Prepa + Validation#RefContrat}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refContrat</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="Sans Produit.Prix.Periodicite (=transformer en contrat de vente)"><con:settings/><con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/{refContrat}/migrer" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Sans Produit.Prix.Periodicite (=transformer en contrat de vente)" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.10.2.52:8080</con:endpoint><con:request>{
  "user": "test",
  "politiqueMigration": {
    "fraisMigration": "30",
    "fraisResiliation": true,
    "montantResiliation": "50",
    "remboursement": true,
    "montantRemboursement": "50",
    "fraisCreation": true,
    "penalite": false,
    "reductionAncienne": true
  },
  "produitsMigration": [
    {
      "numEC": 1,
      "referenceGammeSource": "jet",
      "referenceProduitSource": "jet",
      "referenceGammeDestination": "jet",
      "referenceProduitDestination": "sat.jet.20",
      "label": "Abonnement Jet 10Go",
      "numeroCommande": "Order_migration_1",
      "typeProduit": "SERVICE",
      "prix": {
        "montant": "30",
        "typeTVA": "R",
        "frais": [
          {
            "montant": "30",
            "titre": "Frais d'ouverture de dossier",
            "typeFrais": "CREATION"
          }
        ],
        "modeFacturation": "PREMIER_MOIS"
      },
	  "referenceDePaiement": "R0000012",
	  "modePaiement": "SEPA"
    },
    {
      "numEC": 2,
      "numECParent": 1,
      "referenceGammeSource": "jet",
      "referenceProduitSource": "option.plus.50g",
      "referenceGammeDestination": "jet",
      "referenceProduitDestination": "option.plus.50g",
      "label": "Option+ 50Go",
      "numeroCommande": "Order_migration_1",
      "typeProduit": "SERVICE",
      "prix": {
        "montant": "5",
        "typeTVA": "R",
        "modeFacturation": "PREMIER_MOIS"
      },
	  "referenceDePaiement": "R0000012",
	  "modePaiement": "SEPA"
    }
  ]
}</con:request><con:originalUri>http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer</con:originalUri><con:assertion type="Invalid HTTP Status Codes" name="Code HTTP 500" disabled="true" id="597682c2-9595-4b34-892c-57982ff25c40"><con:configuration><codes>500</codes></con:configuration></con:assertion><con:assertion type="XPath Match" name="URL" id="f15db54c-465a-4ec8-843b-699727d10ce2"><con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer'; 
//ns1:url</path><content>/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="errorCode" id="2b4b7e85-7406-49c7-a3e5-3e81b621b18a"><con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer'; 
//ns1:errorCode</path><content>1.1.76</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="errorMessage" id="618bc957-9035-46df-9840-b31eb2ad972f"><con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer'; 
//ns1:errorMessage</path><content>IncohÃ©rence entre le NumEC 1 et la rÃ©fÃ©rence de produit renseignÃ©e jet. La rÃ©fÃ©rence du produit connue est sat.jet.20.</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="refContrat" value="${Prepa + Validation#RefContrat}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refContrat</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="Sans Produit.Prix.Montant" id="3b334ffa-8940-4b8b-b65c-b4decfb23dfe"><con:settings/><con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/{refContrat}/migrer" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Sans Produit.Prix.Montant" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.10.2.52:8080</con:endpoint><con:request>{
  "user": "test",
  "politiqueMigration": {
    "fraisMigration": "30",
    "fraisResiliation": true,
    "montantResiliation": "50",
    "remboursement": true,
    "montantRemboursement": "50",
    "fraisCreation": true,
    "penalite": false,
    "reductionAncienne": true
  },
  "produitsMigration": [
    {
      "numEC": 1,
      "referenceGammeSource": "jet",
      "referenceProduitSource": "jet",
      "referenceGammeDestination": "jet",
      "referenceProduitDestination": "sat.jet.20",
      "label": "Abonnement Jet 10Go",
      "numeroCommande": "Order_migration_1",
      "typeProduit": "SERVICE",
       
      "prix": {
        "periodicite": 1,
        "typeTVA": "R",
        "modeFacturation": "PREMIER_MOIS",
        "frais": [
          {
            "montant": "30",
            "titre": "Frais d'ouverture de dossier",
            "typeFrais": "CREATION"
          }
        ]
 
      },
	  "referenceDePaiement": "R0000012",
	  "modePaiement": "SEPA"
    },
    {
      "numEC": 2,
      "numECParent": 1,
      "referenceGammeSource": "jet",
      "referenceProduitSource": "option.plus.50g",
      "referenceGammeDestination": "jet",
      "referenceProduitDestination": "option.plus.50g",
      "label": "Option+ 50Go",
      "numeroCommande": "Order_migration_1",
      "typeProduit": "SERVICE",
      "prix": {
        "periodicite": 1,
        "typeTVA": "R",
        "modeFacturation": "PREMIER_MOIS"
      },

	  "referenceDePaiement": "R0000012",
	  "modePaiement": "SEPA"
    }

  ]
}</con:request><con:originalUri>http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer</con:originalUri><con:assertion type="Invalid HTTP Status Codes" name="Code HTTP 500" disabled="true" id="b486746a-d086-4c1e-bcfb-78938233a6e2"><con:configuration><codes>500</codes></con:configuration></con:assertion><con:assertion type="XPath Match" name="URL" id="de195d64-b643-4e74-affe-ad77b04f1fc3"><con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer'; 
//ns1:url</path><content>/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="errorCode" id="9c53cc8f-9d67-4cd5-808f-3fb6948d71ef"><con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer'; 
//ns1:errorCode</path><content>1.1.76</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="errorMessage" id="3ed648f9-4bf2-4875-86b6-0a43c617b1f6"><con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer'; 
//ns1:errorMessage</path><content>IncohÃ©rence entre le NumEC 1 et la rÃ©fÃ©rence de produit renseignÃ©e jet. La rÃ©fÃ©rence du produit connue est sat.jet.20.</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="refContrat" value="${Prepa + Validation#RefContrat}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refContrat</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="Sans Produit.Prix.TypeTVA" id="6c5294d7-c14e-45e6-afba-931589c4bca2"><con:settings/><con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/{refContrat}/migrer" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Sans Produit.Prix.TypeTVA" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.10.2.52:8080</con:endpoint><con:request>{
  "user": "test",
  "politiqueMigration": {
    "fraisMigration": "30",
    "fraisResiliation": true,
    "montantResiliation": "50",
    "remboursement": true,
    "montantRemboursement": "50",
    "fraisCreation": true,
    "penalite": false,
    "reductionAncienne": true
  },
  "produitsMigration": [
    {
      "numEC": 1,
      "referenceGammeSource": "jet",
      "referenceProduitSource": "jet",
      "referenceGammeDestination": "jet",
      "referenceProduitDestination": "sat.jet.20",
      "label": "Abonnement Jet 10Go",
      "numeroCommande": "Order_migration_1",
      "typeProduit": "SERVICE",
      "prix": {
        "periodicite": 1,
        "montant": "30",
        "typeTVA": null,
        "modeFacturation": "PREMIER_MOIS",
        "frais": [
          {
            "montant": "30",
            "titre": "Frais d'ouverture de dossier",
            "typeFrais": "CREATION"
          }
        ]
        
      },
	  "referenceDePaiement": "R0000012",
	  "modePaiement": "SEPA"
    },
    {
      "numEC": 2,
      "numECParent": 1,
      "referenceGammeSource": "jet",
      "referenceProduitSource": "option.plus.50g",
      "referenceGammeDestination": "jet",
      "referenceProduitDestination": "option.plus.50g",
      "label": "Option+ 50Go",
      "numeroCommande": "Order_migration_1",
      "typeProduit": "SERVICE",
      "prix": {
        "periodicite": 1,
        "montant": "5",
        "typeTVA": null,
        "modeFacturation": "PREMIER_MOIS"
      },
	  "referenceDePaiement": "R0000012",
	  "modePaiement": "SEPA"
    }
  ]
}</con:request><con:originalUri>http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer</con:originalUri><con:assertion type="Invalid HTTP Status Codes" name="Code HTTP 500" disabled="true" id="55e1badf-5096-4820-bc5b-b8567f309de6"><con:configuration><codes>500</codes></con:configuration></con:assertion><con:assertion type="XPath Match" name="URL" id="3ac1f1e0-71ae-48bb-a73d-ecfa3448caeb"><con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer'; 
//ns1:url</path><content>/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="errorCode" id="857321ea-d23f-4824-b612-e5cd9329ce27"><con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer'; 
//ns1:errorCode</path><content>1.1.76</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="errorMessage" id="12990b2a-1c41-4cb5-8074-5ff98d02818b"><con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer'; 
//ns1:errorMessage</path><content>IncohÃ©rence entre le NumEC 1 et la rÃ©fÃ©rence de produit renseignÃ©e jet. La rÃ©fÃ©rence du produit connue est sat.jet.20.</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="refContrat" value="${Prepa + Validation#RefContrat}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refContrat</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="Sans Produit.Prix.MoyenDePaiement" id="1d67068d-c679-4b8b-847a-f771042e71dc"><con:settings/><con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/{refContrat}/migrer" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Sans Produit.Prix.MoyenDePaiement" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.10.2.52:8080</con:endpoint><con:request>{
  "user": "test",
  "politiqueMigration": {
    "fraisMigration": "30",
    "fraisResiliation": true,
    "montantResiliation": "50",
    "remboursement": true,
    "montantRemboursement": "50",
    "fraisCreation": true,
    "penalite": false,
    "reductionAncienne": true
  },
  "produitsMigration": [
    {
      "numEC": 1,
      "referenceGammeSource": "jet",
      "referenceProduitSource": "jet",
      "referenceGammeDestination": "jet",
      "referenceProduitDestination": "sat.jet.20",
      "label": "Abonnement Jet 10Go",
      "numeroCommande": "Order_migration_1",
      "typeProduit": "SERVICE",
      "prix": {
        "periodicite": 1,
        "montant": "30",
        "typeTVA": "R",
        "frais": [
          {
            "montant": "30",
            "titre": "Frais d'ouverture de dossier",
            "typeFrais": "CREATION"
          }
        ],
        "modeFacturation": "PREMIER_MOIS"
      },
	  "referenceDePaiement": null,
	  "modePaiement": "SEPA"
    },
    {
      "numEC": 2,
      "numECParent": 1,
      "referenceGammeSource": "jet",
      "referenceProduitSource": "option.plus.50g",
      "referenceGammeDestination": "jet",
      "referenceProduitDestination": "option.plus.50g",
      "label": "Option+ 50Go",
      "numeroCommande": "Order_migration_1",
      "typeProduit": "SERVICE",
      "prix": {
        "periodicite": 1,
        "montant": "5",
        "typeTVA": "R",
        "modeFacturation": "PREMIER_MOIS"
      },
	  "referenceDePaiement": null,
	  "modePaiement": "SEPA"
    }
  ]
}</con:request><con:originalUri>http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer</con:originalUri><con:assertion type="Invalid HTTP Status Codes" name="Code HTTP 500" disabled="true" id="01decb50-59c1-4792-85bb-bc64ffcaaf23"><con:configuration><codes>500</codes></con:configuration></con:assertion><con:assertion type="XPath Match" name="URL" id="e89bb0ef-9671-49d8-9a98-46b8cb3d5d0b"><con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer'; 
//ns1:url</path><content>/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="errorCode" id="6d9bda16-07d6-4349-ae0b-db0933ea3ffb"><con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer'; 
//ns1:errorCode</path><content>1.1.76</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="errorMessage" id="6a5ce4bb-cdc1-4942-b3f9-db9d4ed3d091"><con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer'; 
//ns1:errorMessage</path><content>IncohÃ©rence entre le NumEC 1 et la rÃ©fÃ©rence de produit renseignÃ©e jet. La rÃ©fÃ©rence du produit connue est sat.jet.20.</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="refContrat" value="${Prepa + Validation#RefContrat}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refContrat</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="Sans Produit.Prix.ModeFacturation" id="133c3869-ce09-4b1a-8188-786edb77584b"><con:settings/><con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/{refContrat}/migrer" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Sans Produit.Prix.ModeFacturation" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.10.2.52:8080</con:endpoint><con:request>{
  "user": "test",
  "politiqueMigration": {
    "fraisMigration": "30",
    "fraisResiliation": true,
    "montantResiliation": "50",
    "remboursement": true,
    "montantRemboursement": "50",
    "fraisCreation": true,
    "penalite": false,
    "reductionAncienne": true
  },
  "produitsMigration": [
    {
      "numEC": 1,
      "referenceGammeSource": "jet",
      "referenceProduitSource": "jet",
      "referenceGammeDestination": "jet",
      "referenceProduitDestination": "sat.jet.20",
      "label": "Abonnement Jet 10Go",
      "numeroCommande": "Order_migration_1",
      "typeProduit": "SERVICE",
      "prix": {
        "periodicite": 1,
        "montant": "30",
        "typeTVA": "R",
        "frais": [
          {
            "montant": "30",
            "titre": "Frais d'ouverture de dossier",
            "typeFrais": "CREATION"
          }
        ],
        "modeFacturation": null
      },
	  "referenceDePaiement": "R0000012",
	  "modePaiement": "SEPA"
    },
    {
      "numEC": 2,
      "numECParent": 1,
      "referenceGammeSource": "jet",
      "referenceProduitSource": "option.plus.50g",
      "referenceGammeDestination": "jet",
      "referenceProduitDestination": "option.plus.50g",
      "label": "Option+ 50Go",
      "numeroCommande": "Order_migration_1",
      "typeProduit": "SERVICE",
      "prix": {
        "periodicite": 1,
        "montant": "5",
        "typeTVA": "R",
        "modeFacturation": null
      },
	  "referenceDePaiement": "R0000012",
	  "modePaiement": "SEPA"
    }
  ]
}</con:request><con:originalUri>http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer</con:originalUri><con:assertion type="Invalid HTTP Status Codes" name="Code HTTP 500" disabled="true" id="ba93d028-c134-48ef-ab94-0bd6c4111d05"><con:configuration><codes>500</codes></con:configuration></con:assertion><con:assertion type="XPath Match" name="URL" id="a2256479-7ad9-438c-9010-7f6d207777b8"><con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer'; 
//ns1:url</path><content>/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="errorCode" id="d26ea326-ad1f-4d9c-9366-2580011ea221"><con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer'; 
//ns1:errorCode</path><content>1.1.76</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="errorMessage" id="a73c4c25-9706-4637-9c4f-101c098ddecb"><con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer'; 
//ns1:errorMessage</path><content>IncohÃ©rence entre le NumEC 1 et la rÃ©fÃ©rence de produit renseignÃ©e jet. La rÃ©fÃ©rence du produit connue est sat.jet.20.</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="refContrat" value="${Prepa + Validation#RefContrat}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refContrat</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="Sans Produit.Prix.ModePaiement" id="d1ea7411-4f22-4e6a-9721-37bd96b47c59"><con:settings/><con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/{refContrat}/migrer" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Sans Produit.Prix.ModePaiement" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.10.2.52:8080</con:endpoint><con:request>{
  "user": "test",
  "politiqueMigration": {
    "fraisMigration": "30",
    "fraisResiliation": true,
    "montantResiliation": "50",
    "remboursement": true,
    "montantRemboursement": "50",
    "fraisCreation": true,
    "penalite": false,
    "reductionAncienne": true
  },
  "produitsMigration": [
    {
      "numEC": 1,
      "referenceGammeSource": "jet",
      "referenceProduitSource": "jet",
      "referenceGammeDestination": "jet",
      "referenceProduitDestination": "sat.jet.20",
      "label": "Abonnement Jet 10Go",
      "numeroCommande": "Order_migration_1",
      "typeProduit": "SERVICE",
      "prix": {
        "periodicite": 1,
        "montant": "30",
        "typeTVA": "R",
        "frais": [
          {
            "montant": "30",
            "titre": "Frais d'ouverture de dossier",
            "typeFrais": "CREATION"
          }
        ],
        "modeFacturation": "PREMIER_MOIS"
      },
	  "referenceDePaiement": "R0000012",
	  "modePaiement": "SEPA"
    },
    {
      "numEC": 2,
      "numECParent": 1,
      "referenceGammeSource": "jet",
      "referenceProduitSource": "option.plus.50g",
      "referenceGammeDestination": "jet",
      "referenceProduitDestination": "option.plus.50g",
      "label": "Option+ 50Go",
      "numeroCommande": "Order_migration_1",
      "typeProduit": "SERVICE",
      "prix": {
        "periodicite": 1,
        "montant": "5",
        "typeTVA": "R",
        "modeFacturation": "PREMIER_MOIS"
      },
	  "referenceDePaiement": "R0000012",
	  "modePaiement": null
    }
  ]
}</con:request><con:originalUri>http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer</con:originalUri><con:assertion type="Invalid HTTP Status Codes" name="Code HTTP 500" disabled="true" id="891657f0-329d-4133-a403-af8c6db07abc"><con:configuration><codes>500</codes></con:configuration></con:assertion><con:assertion type="XPath Match" name="URL" id="7746d5f4-312d-4df7-90e8-e02f7d17c20b"><con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer'; 
//ns1:url</path><content>/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="errorCode" id="8acedc15-9d25-4bbe-876e-e84de3964640"><con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer'; 
//ns1:errorCode</path><content>1.1.76</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="errorMessage" id="870bb55b-5926-4b63-a5cd-8e6371095e99"><con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer'; 
//ns1:errorMessage</path><content>IncohÃ©rence entre le NumEC 1 et la rÃ©fÃ©rence de produit renseignÃ©e jet. La rÃ©fÃ©rence du produit connue est sat.jet.20.</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="refContrat" value="${Prepa + Validation#RefContrat}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refContrat</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="Avec TypeProduit Inconnu" id="757b334d-ff61-44c8-a6cf-535b95d15cc0">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/{refContrat}/migrer" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="Avec TypeProduit Inconnu" mediaType="application/json" postQueryString="false" id="01ddc01d-d8f6-43f9-ac4f-bda76da58129">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{
  "user": "test",
  "politiqueMigration": {
    "fraisMigration": "30",
    "fraisResiliation": true,
    "montantResiliation": "50",
    "remboursement": true,
    "montantRemboursement": "50",
    "fraisCreation": true,
    "penalite": false,
    "reductionAncienne": true
  },
  "produitsMigration": [
    {
      "numEC": 1,
      "referenceGammeSource": "jet",
      "referenceProduitSource": "jet",
      "referenceGammeDestination": "jet",
      "referenceProduitDestination": "sat.jet.20",
      "label": "Abonnement Jet 10Go",
      "numeroCommande": "Order_migration_1",
      "typeProduit": "INCONNU",
      "prix": {
        "periodicite": 1,
        "montant": "30",
        "typeTVA": "R",
        "frais": [
          {
            "montant": "30",
            "titre": "Frais d'ouverture de dossier",
            "typeFrais": "CREATION"
          }
        ],
        "modeFacturation": "PREMIER_MOIS"
      },
	  "referenceDePaiement": "R0000012",
	  "modePaiement": "SEPA"
    },
    {
      "numEC": 2,
      "numECParent": 1,
      "referenceGammeSource": "jet",
      "referenceProduitSource": "option.plus.50g",
      "referenceGammeDestination": "jet",
      "referenceProduitDestination": "option.plus.50g",
      "label": "Option+ 50Go",
      "numeroCommande": "Order_migration_1",
      "typeProduit": "INCONNU",
      "prix": {
        "periodicite": 1,
        "montant": "5",
        "typeTVA": "R",
        "modeFacturation": "PREMIER_MOIS"
      },
	  "referenceDePaiement": "R0000012",
	  "modePaiement": "SEPA"
    }
  ]
}</con:request>
            <con:originalUri>http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer</con:originalUri><con:assertion type="XPath Match" name="Error Code" id="25480cc0-2c04-4c7e-b1c0-e16918223552">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer'; 
//ns1:errorCode</path><content>0.1.11</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="URL" id="faf7876e-774a-42a7-8cf6-18bbc2d5b67c">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer'; 
//ns1:url</path><content>/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorMessage" id="8fd308c6-6244-45c5-bc60-7bf6b3cc8ca7">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer'; 
//ns1:errorMessage</path><content>Le ProduitMigration.typeProduit ne peut valoir que [BIEN, SERVICE].</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
			<con:assertion type="Invalid HTTP Status Codes" name="Code HTTP 500" disabled="true" id="2ebd7e5f-ef25-49f4-b5ef-bb7a2e2c5051">
              <con:configuration>
                <codes>500</codes>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters><entry key="refContrat" value="${Prepa + Validation#RefContrat}" xmlns="http://eviware.com/soapui/config"/></con:parameters>
          </con:restRequest>
        </con:config>
      </con:testStep><con:testStep type="restrequest" name="Avec Prix.Frais de Résil dégressif sans ordre" id="1b1d4fdf-41a5-40e6-ba04-691c28a26df1">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/{refContrat}/migrer" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="Avec Prix.Frais de Résil dégressif sans ordre" mediaType="application/json" postQueryString="false" id="01ddc01d-d8f6-43f9-ac4f-bda76da58129">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{
  "user": "test",
  "politiqueMigration": {
    "fraisMigration": "30",
    "fraisResiliation": true,
    "montantResiliation": "50",
    "remboursement": true,
    "montantRemboursement": "50",
    "fraisCreation": true,
    "penalite": false,
    "reductionAncienne": true
  },
  "produitsMigration": [
    {
      "numEC": 1,
      "referenceGammeSource": "jet",
      "referenceProduitSource": "jet",
      "referenceGammeDestination": "jet",
      "referenceProduitDestination": "sat.jet.20",
      "label": "Abonnement Jet 10Go",
      "numeroCommande": "Order_migration_1",
      "typeProduit": "SERVICE",
      "prix": {
        "periodicite": 1,
        "montant": "30",
        "typeTVA": "R",
        "frais": [
          {
            "montant": "30",
            "titre": "Frais d'ouverture de dossier",
            "typeFrais": "CREATION"
          },
          {
            "montant": "50",
            "typeFrais": "resiliation",
            "nombreMois": "12"
          },
          {
            "montant": "30",
            "typeFrais": "resiliation"
          }
        ],
        "modeFacturation": "PREMIER_MOIS"
      },
	  "referenceDePaiement": "R0000012",
	  "modePaiement": "SEPA"
    },
    {
      "numEC": 2,
      "numECParent": 1,
      "referenceGammeSource": "jet",
      "referenceProduitSource": "option.plus.50g",
      "referenceGammeDestination": "jet",
      "referenceProduitDestination": "option.plus.50g",
      "label": "Option+ 50Go",
      "numeroCommande": "Order_migration_1",
      "typeProduit": "SERVICE",
      "prix": {
        "periodicite": 1,
        "montant": "5",
        "typeTVA": "R",
        "modeFacturation": "PREMIER_MOIS"
      },
	  "referenceDePaiement": "R0000012",
	  "modePaiement": "SEPA"
    }
  ]
}</con:request>
            <con:originalUri>http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer</con:originalUri><con:assertion type="XPath Match" name="Error Code" id="76141d03-a206-4f65-9643-ab96357fa1bd">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer'; 
//ns1:errorCode</path><content>1.1.76</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="URL" id="df962682-65cc-4aa1-adf5-7b448eab5c53">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer'; 
//ns1:url</path><content>/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="Error Message" id="903197a1-c822-44ab-a9fa-c9c6ba3ee50c">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer'; 
//ns1:errorMessage</path><content>IncohÃ©rence entre le NumEC 1 et la rÃ©fÃ©rence de produit renseignÃ©e jet. La rÃ©fÃ©rence du produit connue est sat.jet.20.</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
			<con:assertion type="Invalid HTTP Status Codes" name="Code HTTP 500" disabled="true" id="2ebd7e5f-ef25-49f4-b5ef-bb7a2e2c5051">
              <con:configuration>
                <codes>500</codes>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters><entry key="refContrat" value="${Prepa + Validation#RefContrat}" xmlns="http://eviware.com/soapui/config"/></con:parameters>
          </con:restRequest>
        </con:config>
      </con:testStep><con:testStep type="restrequest" name="Avec Prix.Frais de Résil dégressif incohérent" id="d3ae1b49-bb32-4cb1-8b3c-d080b0e35096">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/{refContrat}/migrer" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="Avec Prix.Frais de Résil dégressif incohérent" mediaType="application/json" postQueryString="false" id="01ddc01d-d8f6-43f9-ac4f-bda76da58129">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{
  "user": "test",
  "politiqueMigration": {
    "fraisMigration": "30",
    "fraisResiliation": true,
    "montantResiliation": "50",
    "remboursement": true,
    "montantRemboursement": "50",
    "fraisCreation": true,
    "penalite": false,
    "reductionAncienne": true
  },
  "produitsMigration": [
    {
      "numEC": 1,
      "referenceGammeSource": "jet",
      "referenceProduitSource": "jet",
      "referenceGammeDestination": "jet",
      "referenceProduitDestination": "sat.jet.20",
      "label": "Abonnement Jet 10Go",
      "numeroCommande": "Order_migration_1",
      "typeProduit": "SERVICE",
      "prix": {
        "periodicite": 1,
        "montant": "30",
        "typeTVA": "R",
        "frais": [
          {
            "montant": "30",
            "titre": "Frais d'ouverture de dossier",
            "typeFrais": "CREATION"
          },
          {
            "montant": "50",
            "typeFrais": "resiliation",
            "ordre": "1"
          },
          {
            "montant": "30",
            "typeFrais": "resiliation",
            "nombreMois": "12",
            "ordre": "2"
          }
        ],
        "modeFacturation": "PREMIER_MOIS"
      },
	  "referenceDePaiement": "R0000012",
	  "modePaiement": "SEPA"
    },
    {
      "numEC": 2,
      "numECParent": 1,
      "referenceGammeSource": "jet",
      "referenceProduitSource": "option.plus.50g",
      "referenceGammeDestination": "jet",
      "referenceProduitDestination": "option.plus.50g",
      "label": "Option+ 50Go",
      "numeroCommande": "Order_migration_1",
      "typeProduit": "SERVICE",
      "prix": {
        "periodicite": 1,
        "montant": "5",
        "typeTVA": "R",
        "modeFacturation": "PREMIER_MOIS"
      },
	  "referenceDePaiement": "R0000012",
	  "modePaiement": "SEPA"
    }
  ]
}</con:request>
            <con:originalUri>http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer</con:originalUri><con:assertion type="XPath Match" name="Error Code" id="7dca5118-1c51-4d65-92e4-03fc9b9e8b70">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer'; 
//ns1:errorCode</path><content>1.1.76</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="URL" id="8afc3f1c-fbc7-495b-9a04-a04799ad72fd">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer'; 
//ns1:url</path><content>/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
			<con:assertion type="Invalid HTTP Status Codes" name="Code HTTP 500" disabled="true" id="2ebd7e5f-ef25-49f4-b5ef-bb7a2e2c5051">
              <con:configuration>
                <codes>500</codes>
              </con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="Error Message" id="8afc3f1c-fbc7-495b-9a04-a04799ad72fd">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer'; 
//ns1:errorMessage</path><content>IncohÃ©rence entre le NumEC 1 et la rÃ©fÃ©rence de produit renseignÃ©e jet. La rÃ©fÃ©rence du produit connue est sat.jet.20.</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion><con:credentials>
              <con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters><entry key="refContrat" value="${Prepa + Validation#RefContrat}" xmlns="http://eviware.com/soapui/config"/></con:parameters>
          </con:restRequest>
        </con:config>
      </con:testStep><con:testStep type="restrequest" name="Avec Prix.Frais de Création Dégressif" id="116fe809-28b8-472c-8f86-f02930ea9f6a">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" methodName="" resourcePath="/contrat-core/contrat/{refContrat}/migrer" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="Avec Prix.Frais de Création Dégressif" mediaType="application/json" postQueryString="false">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:encoding>UTF-8</con:encoding>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{
  "user": "test",
  "politiqueMigration": {
    "fraisMigration": "30",
    "fraisResiliation": true,
    "montantResiliation": "50",
    "remboursement": true,
    "montantRemboursement": "50",
    "fraisCreation": true,
    "penalite": false,
    "reductionAncienne": true
  },
  "produitsMigration": [
    {
      "numEC": 1,
      "referenceGammeSource": "jet",
      "referenceProduitSource": "jet",
      "referenceGammeDestination": "jet",
      "referenceProduitDestination": "sat.jet.20",
      "label": "Abonnement Jet 10Go",
      "numeroCommande": "Order_migration_1",
      "typeProduit": "SERVICE",
      "prix": {
        "periodicite": 1,
        "montant": "30",
        "typeTVA": "R",
        "frais": [
          {
            "montant": "30",
            "ordre": "1",
            "nombreMois" : "2",
            "titre": "Frais d'ouverture de dossier",
            "typeFrais": "CREATION"
          },
          {
            "montant" : "10",
            "ordre" : 2,
            "titre" : "Frais d'ouverture de dosiser", 
            "typeFrais": "CREATION"
          }
        ],
        "modeFacturation": "PREMIER_MOIS"
      },
	  "referenceDePaiement": "R0000012",
	  "modePaiement": "SEPA"
    },
    {
      "numEC": 2,
      "numECParent": 1,
      "referenceGammeSource": "jet",
      "referenceProduitSource": "option.plus.50g",
      "referenceGammeDestination": "jet",
      "referenceProduitDestination": "option.plus.50g",
      "label": "Option+ 50Go",
      "numeroCommande": "Order_migration_1",
      "typeProduit": "SERVICE",
      "prix": {
        "periodicite": 1,
        "montant": "5",
        "typeTVA": "R",
        "modeFacturation": "PREMIER_MOIS"
      },
	  "referenceDePaiement": "R0000012",
	  "modePaiement": "SEPA"
    }
  ]
}</con:request>
            <con:originalUri>http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer</con:originalUri><con:assertion type="XPath Match" name="URL" id="faf2e796-2eaf-4436-a3aa-f24116cf1ca7">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer'; 
//ns1:url</path><content>/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorCode" id="c3ba583d-fa9f-4185-ac9c-2a5c7ab8f87a">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer'; 
//ns1:errorCode</path><content>1.1.76</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorMessage" id="eefa91b6-2024-46cf-8b01-c1f4e93b1971">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer'; 
//ns1:errorMessage</path><content>Incohérence entre le NumEC 1 et la référence de produit renseignée jet. La référence du produit connue est sat.jet.20.</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
			<con:assertion type="Invalid HTTP Status Codes" name="Code HTTP 500" disabled="true" id="2ebd7e5f-ef25-49f4-b5ef-bb7a2e2c5051">
              <con:configuration>
                <codes>500</codes>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters><entry key="refContrat" value="${Prepa + Validation#RefContrat}" xmlns="http://eviware.com/soapui/config"/></con:parameters>
          </con:restRequest>
        </con:config>
      </con:testStep><con:testStep type="restrequest" name="Avec Prix.Frais.Type Inconnu" id="f20063c2-d744-408f-ac44-b5838b636b75">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" methodName="" resourcePath="/contrat-core/contrat/{refContrat}/migrer" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="Avec Prix.Frais.Type Inconnu" mediaType="application/json" postQueryString="false">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:encoding>UTF-8</con:encoding>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{
  "user": "test",
  "politiqueMigration": {
    "fraisMigration": "30",
    "fraisResiliation": true,
    "montantResiliation": "50",
    "remboursement": true,
    "montantRemboursement": "50",
    "fraisCreation": true,
    "penalite": false,
    "reductionAncienne": true
  },
  "produitsMigration": [
    {
      "numEC": 1,
      "referenceGammeSource": "jet",
      "referenceProduitSource": "jet",
      "referenceGammeDestination": "jet",
      "referenceProduitDestination": "sat.jet.20",
      "label": "Abonnement Jet 10Go",
      "numeroCommande": "Order_migration_1",
      "typeProduit": "SERVICE",
      "prix": {
        "periodicite": 1,
        "montant": "30",
        "typeTVA": "R",
        "frais": [
          {
            "montant": "30",
            "titre": "Frais d'ouverture de dossier",
            "typeFrais": "INCONNU"
          }
        ],
        "modeFacturation": "PREMIER_MOIS"
      },
	  "referenceDePaiement": "R0000012",
	  "modePaiement": "SEPA"
    },
    {
      "numEC": 2,
      "numECParent": 1,
      "referenceGammeSource": "jet",
      "referenceProduitSource": "option.plus.50g",
      "referenceGammeDestination": "jet",
      "referenceProduitDestination": "option.plus.50g",
      "label": "Option+ 50Go",
      "numeroCommande": "Order_migration_1",
      "typeProduit": "SERVICE",
      "prix": {
        "periodicite": 1,
        "montant": "5",
        "typeTVA": "R",
        "modeFacturation": "PREMIER_MOIS"
      },
	  "referenceDePaiement": "R0000012",
	  "modePaiement": "SEPA"
    }
  ]
}</con:request>
            <con:originalUri>http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer</con:originalUri><con:assertion type="XPath Match" name="URL" id="2b007639-15dd-490a-9699-af198918c586">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer'; 
//ns1:url</path><content>/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorCode" id="6442c105-1915-4709-b723-11a7414ecc18">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer'; 
//ns1:errorCode</path><content>1.1.76</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorMessage" id="e8a2335c-7cad-4d6d-a7b4-d5390dd21701">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer'; 
//ns1:errorMessage</path><content>Incohérence entre le NumEC 1 et la référence de produit renseignée jet. La référence du produit connue est sat.jet.20.</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
			<con:assertion type="Invalid HTTP Status Codes" name="Code HTTP 500" disabled="true" id="2ebd7e5f-ef25-49f4-b5ef-bb7a2e2c5051">
              <con:configuration>
                <codes>500</codes>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters><entry key="refContrat" value="${Prepa + Validation#RefContrat}" xmlns="http://eviware.com/soapui/config"/></con:parameters>
          </con:restRequest>
        </con:config>
      </con:testStep><con:testStep type="restrequest" name="Avec Prix.periodicite = 0" id="c6a89ed2-3b30-4986-8947-480370d0e8ef">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/{refContrat}/migrer" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="Avec Prix.periodicite = 0" mediaType="application/json" postQueryString="false" id="01ddc01d-d8f6-43f9-ac4f-bda76da58129">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{
  "user": "test",
  "politiqueMigration": {
    "fraisMigration": "30",
    "fraisResiliation": true,
    "montantResiliation": "50",
    "remboursement": true,
    "montantRemboursement": "50",
    "fraisCreation": true,
    "penalite": false,
    "reductionAncienne": true
  },
  "produitsMigration": [
    {
      "numEC": 1,
      "referenceGammeSource": "jet",
      "referenceProduitSource": "jet",
      "referenceGammeDestination": "jet",
      "referenceProduitDestination": "sat.jet.20",
      "label": "Abonnement Jet 10Go",
      "numeroCommande": "Order_migration_1",
      "typeProduit": "SERVICE",
      "prix": {
        "periodicite": 0,
        "montant": "30",
        "typeTVA": "R",
        "frais": [
          {
            "montant": "30",
            "titre": "Frais d'ouverture de dossier",
            "typeFrais": "CREATION"
          }
        ],
        "modeFacturation": "PREMIER_MOIS"
      },
	  "referenceDePaiement": "R0000012",
	  "modePaiement": "SEPA"
    },
    {
      "numEC": 2,
      "numECParent": 1,
      "referenceGammeSource": "jet",
      "referenceProduitSource": "option.plus.50g",
      "referenceGammeDestination": "jet",
      "referenceProduitDestination": "option.plus.50g",
      "label": "Option+ 50Go",
      "numeroCommande": "Order_migration_1",
      "typeProduit": "SERVICE",
      "prix": {
        "periodicite": 0,
        "montant": "5",
        "typeTVA": "R",
        "modeFacturation": "PREMIER_MOIS"
      },
	  "referenceDePaiement": "R0000012",
	  "modePaiement": "SEPA"
    }
  ]
}</con:request>
            <con:originalUri>http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer</con:originalUri><con:assertion type="XPath Match" name="Error Code" id="cda2ed3f-32e0-41c2-a541-bf2e1eb2c576">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer'; 
//ns1:errorCode</path><content>1.1.76</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="URL" id="263d1a4a-2072-444e-876f-9f2f7200b1f9">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer'; 
//ns1:url</path><content>/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorMessage" id="b5b28652-4881-45e7-ab7c-55d0a366f668">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer'; 
//ns1:errorMessage</path><content>IncohÃ©rence entre le NumEC 1 et la rÃ©fÃ©rence de produit renseignÃ©e jet. La rÃ©fÃ©rence du produit connue est sat.jet.20.</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
			<con:assertion type="Invalid HTTP Status Codes" name="Code HTTP 500" disabled="true" id="2ebd7e5f-ef25-49f4-b5ef-bb7a2e2c5051">
              <con:configuration>
                <codes>500</codes>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters><entry key="refContrat" value="${Prepa + Validation#RefContrat}" xmlns="http://eviware.com/soapui/config"/></con:parameters>
          </con:restRequest>
        </con:config>
      </con:testStep><con:testStep type="restrequest" name="Avec Prix.periodicite &lt; 0" id="ca9bcc8f-e511-4fd9-87e3-9ebe4ac8aef5">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/{refContrat}/migrer" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="Avec Prix.periodicite &lt; 0" mediaType="application/json" postQueryString="false" id="01ddc01d-d8f6-43f9-ac4f-bda76da58129">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{
  "user": "test",
  "politiqueMigration": {
    "fraisMigration": "30",
    "fraisResiliation": true,
    "montantResiliation": "50",
    "remboursement": true,
    "montantRemboursement": "50",
    "fraisCreation": true,
    "penalite": false,
    "reductionAncienne": true
  },
  "produitsMigration": [
    {
      "numEC": 1,
      "referenceGammeSource": "jet",
      "referenceProduitSource": "jet",
      "referenceGammeDestination": "jet",
      "referenceProduitDestination": "sat.jet.20",
      "label": "Abonnement Jet 10Go",
      "numeroCommande": "Order_migration_1",
      "typeProduit": "SERVICE",
      "prix": {
        "periodicite": -1,
        "montant": "30",
        "typeTVA": "R",
        "frais": [
          {
            "montant": "30",
            "titre": "Frais d'ouverture de dossier",
            "typeFrais": "CREATION"
          }
        ],
        "modeFacturation": "PREMIER_MOIS"
      },
	  "referenceDePaiement": "R0000012",
	  "modePaiement": "SEPA"
    },
    {
      "numEC": 2,
      "numECParent": 1,
      "referenceGammeSource": "jet",
      "referenceProduitSource": "option.plus.50g",
      "referenceGammeDestination": "jet",
      "referenceProduitDestination": "option.plus.50g",
      "label": "Option+ 50Go",
      "numeroCommande": "Order_migration_1",
      "typeProduit": "SERVICE",
      "prix": {
        "periodicite": -1,
        "montant": "5",
        "typeTVA": "R",
        "modeFacturation": "PREMIER_MOIS"
      },
	  "referenceDePaiement": "R0000012",
	  "modePaiement": "SEPA"
    }
  ]
}</con:request>
            <con:originalUri>http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer</con:originalUri><con:assertion type="XPath Match" name="Error Code" id="6cb55f73-f27b-46a1-bdde-1a73813174dc">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer'; 
//ns1:errorCode</path><content>1.1.76</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="URL" id="3f2bcda4-d2d2-4268-a0ff-ec28ca1c1dfa">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer'; 
//ns1:url</path><content>/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorMessage" id="f060058b-ef42-434b-9e14-9e1ac0b55b72">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer'; 
//ns1:errorMessage</path><content>IncohÃ©rence entre le NumEC 1 et la rÃ©fÃ©rence de produit renseignÃ©e jet. La rÃ©fÃ©rence du produit connue est sat.jet.20.</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
			<con:assertion type="Invalid HTTP Status Codes" name="Code HTTP 500" disabled="true" id="2ebd7e5f-ef25-49f4-b5ef-bb7a2e2c5051">
              <con:configuration>
                <codes>500</codes>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters><entry key="refContrat" value="${Prepa + Validation#RefContrat}" xmlns="http://eviware.com/soapui/config"/></con:parameters>
          </con:restRequest>
        </con:config>
      </con:testStep><con:testStep type="restrequest" name="Avec Prix.typeTVA Inconnu" id="16ceae85-68df-4282-a0b8-9eb642666033">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/{refContrat}/migrer" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="Avec Prix.typeTVA Inconnu" mediaType="application/json" postQueryString="false" id="01ddc01d-d8f6-43f9-ac4f-bda76da58129">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{
  "user": "test",
  "politiqueMigration": {
    "fraisMigration": "30",
    "fraisResiliation": true,
    "montantResiliation": "50",
    "remboursement": true,
    "montantRemboursement": "50",
    "fraisCreation": true,
    "penalite": false,
    "reductionAncienne": true
  },
  "produitsMigration": [
    {
      "numEC": 1,
      "referenceGammeSource": "jet",
      "referenceProduitSource": "jet",
      "referenceGammeDestination": "jet",
      "referenceProduitDestination": "sat.jet.20",
      "label": "Abonnement Jet 10Go",
      "numeroCommande": "Order_migration_1",
      "typeProduit": "SERVICE",
      "prix": {
        "periodicite": 1,
        "montant": "30",
        "typeTVA": "Z",
        "frais": [
          {
            "montant": "30",
            "titre": "Frais d'ouverture de dossier",
            "typeFrais": "CREATION"
          }
        ],
        "modeFacturation": "PREMIER_MOIS"
      },
	  "referenceDePaiement": "R0000012",
	  "modePaiement": "SEPA"
    },
    {
      "numEC": 2,
      "numECParent": 1,
      "referenceGammeSource": "jet",
      "referenceProduitSource": "option.plus.50g",
      "referenceGammeDestination": "jet",
      "referenceProduitDestination": "option.plus.50g",
      "label": "Option+ 50Go",
      "numeroCommande": "Order_migration_1",
      "typeProduit": "SERVICE",
      "prix": {
        "periodicite": 1,
        "montant": "5",
        "typeTVA": "Z",
        "modeFacturation": "PREMIER_MOIS"
      },
	  "referenceDePaiement": "R0000012",
	  "modePaiement": "SEPA"
    }
  ]
}</con:request>
            <con:originalUri>http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}743/migrer</con:originalUri><con:assertion type="XPath Match" name="Error Code" id="3b260fab-15a4-44d5-8fe7-3b7a82684fce">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer';
//ns1:errorCode</path><content>1.1.76</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="URL" id="766895a3-fcd9-4391-a4d0-42b7f61526c4">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer';
//ns1:url</path><content>/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorMessage" id="31a3a2fd-3962-41ce-bc0e-fef240dbbf18">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer'; 
//ns1:errorMessage</path><content>IncohÃ©rence entre le NumEC 1 et la rÃ©fÃ©rence de produit renseignÃ©e jet. La rÃ©fÃ©rence du produit connue est sat.jet.20.</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
			<con:assertion type="Invalid HTTP Status Codes" name="Code HTTP 500" disabled="true" id="2ebd7e5f-ef25-49f4-b5ef-bb7a2e2c5051">
              <con:configuration>
                <codes>500</codes>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters><entry key="refContrat" value="${Prepa + Validation#RefContrat}" xmlns="http://eviware.com/soapui/config"/></con:parameters>
          </con:restRequest>
        </con:config>
      </con:testStep><con:testStep type="restrequest" name="Avec Prix.modePaiement Inconnu" id="51babb2d-55ca-4787-bd28-9e7f5916cb64">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/{refContrat}/migrer" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="Avec Prix.modePaiement Inconnu" mediaType="application/json" postQueryString="false" id="01ddc01d-d8f6-43f9-ac4f-bda76da58129">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{
  "user": "test",
  "politiqueMigration": {
    "fraisMigration": "30",
    "fraisResiliation": true,
    "montantResiliation": "50",
    "remboursement": true,
    "montantRemboursement": "50",
    "fraisCreation": true,
    "penalite": false,
    "reductionAncienne": true
  },
  "produitsMigration": [
    {
      "numEC": 1,
      "referenceGammeSource": "jet",
      "referenceProduitSource": "jet",
      "referenceGammeDestination": "jet",
      "referenceProduitDestination": "sat.jet.20",
      "label": "Abonnement Jet 10Go",
      "numeroCommande": "Order_migration_1",
      "typeProduit": "SERVICE",
      "prix": {
        "periodicite": 1,
        "montant": "30",
        "typeTVA": "R",
        "frais": [
          {
            "montant": "30",
            "titre": "Frais d'ouverture de dossier",
            "typeFrais": "CREATION"
          }
        ],
        "modeFacturation": "PREMIER_MOIS"
      },
	  "referenceDePaiement": "R0000012",
	  "modePaiement": "INCONNU"
    },
    {
      "numEC": 2,
      "numECParent": 1,
      "referenceGammeSource": "jet",
      "referenceProduitSource": "option.plus.50g",
      "referenceGammeDestination": "jet",
      "referenceProduitDestination": "option.plus.50g",
      "label": "Option+ 50Go",
      "numeroCommande": "Order_migration_1",
      "typeProduit": "SERVICE",
      "prix": {
        "periodicite": 1,
        "montant": "5",
        "typeTVA": "R",
        "modeFacturation": "PREMIER_MOIS"
      },
	  "referenceDePaiement": "R0000012",
	  "modePaiement": "INCONNU"
    }
  ]
}</con:request>
            <con:originalUri>http://10.10.2.52/contrat-core/contrat/1${Prepa + Validation#RefContrat}58743/migrer</con:originalUri><con:assertion type="XPath Match" name="Error Code" id="efa4f18d-f277-4bac-a277-163d480d2287">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer'; 
//ns1:errorCode</path><content>1.1.76</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="URL" id="1d99f0fe-74c0-4fce-be49-3b2a08f85d03">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer';
//ns1:url</path><content>/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorMessage" id="2d2b6a31-11a0-476b-b179-85ae9eebe1c4">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer'; 
//ns1:errorMessage</path><content>IncohÃ©rence entre le NumEC 1 et la rÃ©fÃ©rence de produit renseignÃ©e jet. La rÃ©fÃ©rence du produit connue est sat.jet.20.</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
			<con:assertion type="Invalid HTTP Status Codes" name="Code HTTP 500" disabled="true" id="2ebd7e5f-ef25-49f4-b5ef-bb7a2e2c5051">
              <con:configuration>
                <codes>500</codes>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters><entry key="refContrat" value="${Prepa + Validation#RefContrat}" xmlns="http://eviware.com/soapui/config"/></con:parameters>
          </con:restRequest>
        </con:config>
      </con:testStep><con:testStep type="restrequest" name="Avec Prix.modeFacturation Inconnu" id="e679c769-1d1f-4405-9868-88662fa4b1b0">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/{refContrat}/migrer" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="Avec Prix.modeFacturation Inconnu" mediaType="application/json" postQueryString="false" id="01ddc01d-d8f6-43f9-ac4f-bda76da58129">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{
  "user": "test",
  "politiqueMigration": {
    "fraisMigration": "30",
    "fraisResiliation": true,
    "montantResiliation": "50",
    "remboursement": true,
    "montantRemboursement": "50",
    "fraisCreation": true,
    "penalite": false,
    "reductionAncienne": true
  },
  "produitsMigration": [
    {
      "numEC": 1,
      "referenceGammeSource": "jet",
      "referenceProduitSource": "jet",
      "referenceGammeDestination": "jet",
      "referenceProduitDestination": "sat.jet.20",
      "label": "Abonnement Jet 10Go",
      "numeroCommande": "Order_migration_1",
      "typeProduit": "SERVICE",
      "prix": {
        "periodicite": 1,
        "montant": "30",
        "typeTVA": "R",
        "frais": [
          {
            "montant": "30",
            "titre": "Frais d'ouverture de dossier",
            "typeFrais": "CREATION"
          }
        ],
        "modeFacturation": "INCONNU"
      },
	  "referenceDePaiement": "R0000012",
	  "modePaiement": "SEPA"
    },
    {
      "numEC": 2,
      "numECParent": 1,
      "referenceGammeSource": "jet",
      "referenceProduitSource": "option.plus.50g",
      "referenceGammeDestination": "jet",
      "referenceProduitDestination": "option.plus.50g",
      "label": "Option+ 50Go",
      "numeroCommande": "Order_migration_1",
      "typeProduit": "SERVICE",
      "prix": {
        "periodicite": 1,
        "montant": "5",
        "typeTVA": "R",
        "modeFacturation": "INCONNU"
      },
	  "referenceDePaiement": "R0000012",
	  "modePaiement": "SEPA"
    }
  ]
}</con:request>
            <con:originalUri>http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer</con:originalUri><con:assertion type="XPath Match" name="Error Code" id="68336c5f-81b5-4ca3-bcfe-84b9a4ee8c92">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer';
//ns1:errorCode</path><content>1.1.76</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="URL" id="ce226d44-10a9-47ed-929a-c4bf86aa40b9">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer'; 
//ns1:url</path><content>/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorMessage" id="022756cd-89c9-4f6a-90b9-ee210047db84">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer'; 
//ns1:errorMessage</path><content>IncohÃ©rence entre le NumEC 1 et la rÃ©fÃ©rence de produit renseignÃ©e jet. La rÃ©fÃ©rence du produit connue est sat.jet.20.</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
			<con:assertion type="Invalid HTTP Status Codes" name="Code HTTP 500" disabled="true" id="2ebd7e5f-ef25-49f4-b5ef-bb7a2e2c5051">
              <con:configuration>
                <codes>500</codes>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters><entry key="refContrat" value="${Prepa + Validation#RefContrat}" xmlns="http://eviware.com/soapui/config"/></con:parameters>
          </con:restRequest>
        </con:config>
      </con:testStep><con:testStep type="restrequest" name="Avec même numEC" id="10ec75c4-4b8d-458f-b65b-cbbaf60999a0">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/{refContrat}/migrer" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="Avec même numEC" mediaType="application/json" postQueryString="false" id="01ddc01d-d8f6-43f9-ac4f-bda76da58129">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{
  "user": "test",
  "politiqueMigration": {
    "fraisMigration": "30",
    "fraisResiliation": true,
    "montantResiliation": "50",
    "remboursement": true,
    "montantRemboursement": "50",
    "fraisCreation": true,
    "penalite": false,
    "reductionAncienne": true
  },
  "produitsMigration": [
    {
      "numEC": 2,
      "referenceGammeSource": "jet",
      "referenceProduitSource": "jet",
      "referenceGammeDestination": "jet",
      "referenceProduitDestination": "sat.jet.20",
      "label": "Abonnement Jet 10Go",
      "numeroCommande": "Order_migration_1",
      "typeProduit": "SERVICE",
      "prix": {
        "periodicite": 1,
        "montant": "30",
        "typeTVA": "R",
        "frais": [
          {
            "montant": "30",
            "titre": "Frais d'ouverture de dossier",
            "typeFrais": "CREATION"
          }
        ],
        "modeFacturation": "PREMIER_MOIS"
      },
	  "referenceDePaiement": "R0000012",
	  "modePaiement": "SEPA"
    },
    {
      "numEC": 2,
      "numECParent": 1,
      "referenceGammeSource": "jet",
      "referenceProduitSource": "option.plus.50g",
      "referenceGammeDestination": "jet",
      "referenceProduitDestination": "option.plus.50g",
      "label": "Option+ 50Go",
      "numeroCommande": "Order_migration_1",
      "typeProduit": "SERVICE",
      "prix": {
        "periodicite": 1,
        "montant": "5",
        "typeTVA": "R",
        "modeFacturation": "PREMIER_MOIS"
      },
	  "referenceDePaiement": "R0000012",
	  "modePaiement": "SEPA"
    }
  ]
}</con:request>
            <con:originalUri>http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer</con:originalUri><con:assertion type="XPath Match" name="Error Code" id="a77f6377-f503-4b50-bcf4-3b4eb815e086">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer'; 
//ns1:errorCode</path><content>1.1.76</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="URL" id="d827b067-154a-4df0-818b-0ae4d80b275c">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer'; 
//ns1:url</path><content>/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorMessage" id="a995ee30-cabc-4393-aaf6-a9a067e0efb1">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer'; 
//ns1:errorMessage</path><content>IncohÃ©rence entre le NumEC 2 et la rÃ©fÃ©rence de produit renseignÃ©e jet. La rÃ©fÃ©rence du produit connue est option.plus.50g.</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
			<con:assertion type="Invalid HTTP Status Codes" name="Code HTTP 500" disabled="true" id="2ebd7e5f-ef25-49f4-b5ef-bb7a2e2c5051">
              <con:configuration>
                <codes>500</codes>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters><entry key="refContrat" value="${Prepa + Validation#RefContrat}" xmlns="http://eviware.com/soapui/config"/></con:parameters>
          </con:restRequest>
        </con:config>
      </con:testStep><con:testStep type="restrequest" name="EC Fils = EC Parent" id="2477b4a2-282b-4746-aba6-56a5be681e67">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/{refContrat}/migrer" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="EC Fils = EC Parent" mediaType="application/json" postQueryString="false" id="01ddc01d-d8f6-43f9-ac4f-bda76da58129">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{
  "user": "test",
  "politiqueMigration": {
    "fraisMigration": "30",
    "fraisResiliation": true,
    "montantResiliation": "50",
    "remboursement": true,
    "montantRemboursement": "50",
    "fraisCreation": true,
    "penalite": false,
    "reductionAncienne": true
  },
  "produitsMigration": [
    {
      "numEC": 1,
      "referenceGammeSource": "jet",
      "referenceProduitSource": "jet",
      "referenceGammeDestination": "jet",
      "referenceProduitDestination": "sat.jet.20",
      "label": "Abonnement Jet 10Go",
      "numeroCommande": "Order_migration_1",
      "typeProduit": "SERVICE",
      "prix": {
        "periodicite": 1,
        "montant": "30",
        "typeTVA": "R",
        "frais": [
          {
            "montant": "30",
            "titre": "Frais d'ouverture de dossier",
            "typeFrais": "CREATION"
          }
        ],
        "modeFacturation": "PREMIER_MOIS"
      },
	  "referenceDePaiement": "R0000012",
	  "modePaiement": "SEPA"
    },
    {
      "numEC": 2,
      "numECParent": 2,
      "referenceGammeSource": "jet",
      "referenceProduitSource": "option.plus.50g",
      "referenceGammeDestination": "jet",
      "referenceProduitDestination": "option.plus.50g",
      "label": "Option+ 50Go",
      "numeroCommande": "Order_migration_1",
      "typeProduit": "SERVICE",
      "prix": {
        "periodicite": 1,
        "montant": "5",
        "typeTVA": "R",
        "modeFacturation": "PREMIER_MOIS"
      },
	  "referenceDePaiement": "R0000012",
	  "modePaiement": "SEPA"
    }
  ]
}</con:request>
            <con:originalUri>http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer</con:originalUri><con:assertion type="XPath Match" name="Error Code" id="3978ea77-05cf-46db-aa68-c3370055dce0">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer'; 
//ns1:errorCode</path><content>1.1.76</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="URL" id="ee1bf87c-4401-4435-a7e6-82962809e8f2">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer'; 
//ns1:url</path><content>/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="Error Message" id="f57282e9-5d37-4a96-bef9-76129702f819">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer'; 
//ns1:errorMessage</path><content>IncohÃ©rence entre le NumEC 1 et la rÃ©fÃ©rence de produit renseignÃ©e jet. La rÃ©fÃ©rence du produit connue est sat.jet.20.</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
			<con:assertion type="Invalid HTTP Status Codes" name="Code HTTP 500" disabled="true" id="2ebd7e5f-ef25-49f4-b5ef-bb7a2e2c5051">
              <con:configuration>
                <codes>500</codes>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters><entry key="refContrat" value="${Prepa + Validation#RefContrat}" xmlns="http://eviware.com/soapui/config"/></con:parameters>
          </con:restRequest>
        </con:config>
      </con:testStep><con:testStep type="restrequest" name="EC Fils avec EC Parent inconnu" id="ab271fee-0c86-4e0f-bbfa-b03f55d4237d">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/{refContrat}/migrer" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="EC Fils avec EC Parent inconnu" mediaType="application/json" postQueryString="false" id="01ddc01d-d8f6-43f9-ac4f-bda76da58129">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{
  "user": "test",
  "politiqueMigration": {
    "fraisMigration": "30",
    "fraisResiliation": true,
    "montantResiliation": "50",
    "remboursement": true,
    "montantRemboursement": "50",
    "fraisCreation": true,
    "penalite": false,
    "reductionAncienne": true
  },
  "produitsMigration": [
    {
      "numEC": 1,
      "referenceGammeSource": "jet",
      "referenceProduitSource": "jet",
      "referenceGammeDestination": "jet",
      "referenceProduitDestination": "sat.jet.20",
      "label": "Abonnement Jet 10Go",
      "numeroCommande": "Order_migration_1",
      "typeProduit": "SERVICE",
      "prix": {
        "periodicite": 1,
        "montant": "30",
        "typeTVA": "R",
        "frais": [
          {
            "montant": "30",
            "titre": "Frais d'ouverture de dossier",
            "typeFrais": "CREATION"
          }
        ],
        "modeFacturation": "PREMIER_MOIS"
      },
	  "referenceDePaiement": "R0000012",
	  "modePaiement": "SEPA"
    },
    {
      "numEC": 2,
      "numECParent": 3,
      "referenceGammeSource": "jet",
      "referenceProduitSource": "option.plus.50g",
      "referenceGammeDestination": "jet",
      "referenceProduitDestination": "option.plus.50g",
      "label": "Option+ 50Go",
      "numeroCommande": "Order_migration_1",
      "typeProduit": "SERVICE",
      "prix": {
        "periodicite": 1,
        "montant": "5",
        "typeTVA": "R",
        "modeFacturation": "PREMIER_MOIS"
      },
	  "referenceDePaiement": "R0000012",
	  "modePaiement": "SEPA"
    }
  ]
}</con:request>
            <con:originalUri>http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer</con:originalUri><con:assertion type="XPath Match" name="Error Code" id="3c35eeb9-d98f-4016-89e6-17dbb375329d">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer'; 
//ns1:errorCode</path><content>1.1.76</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="URL" id="e0c66cd5-7d2a-4cad-acb9-faf54bc240ef">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer'; 
//ns1:url</path><content>/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
			<con:assertion type="Invalid HTTP Status Codes" name="Code HTTP 500" disabled="true" id="2ebd7e5f-ef25-49f4-b5ef-bb7a2e2c5051">
              <con:configuration>
                <codes>500</codes>
              </con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="Error Message" id="3c35eeb9-d98f-4016-89e6-17dbb375329d">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer'; 
//ns1:errorMessage</path><content>IncohÃ©rence entre le NumEC 1 et la rÃ©fÃ©rence de produit renseignÃ©e jet. La rÃ©fÃ©rence du produit connue est sat.jet.20.</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion><con:credentials>
              <con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters><entry key="refContrat" value="${Prepa + Validation#RefContrat}" xmlns="http://eviware.com/soapui/config"/></con:parameters>
          </con:restRequest>
        </con:config>
      </con:testStep><con:testStep type="restrequest" name="EC Service -> EC Bien">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/{refContrat}/migrer" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="EC Service -> EC Bien" mediaType="application/json" postQueryString="false" id="01ddc01d-d8f6-43f9-ac4f-bda76da58129">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{
  "user": "test",
  "politiqueMigration": {
    "fraisMigration": "0",
    "fraisResiliation": true,
    "remboursement": true,
    "fraisCreation": true,
    "penalite": true,
    "reductionAncienne": true
  },
  "produitsMigration": [
    {
      "numEC": 1,
      "referenceGammeSource": "jet",
      "referenceProduitSource": "jet",
      "referenceGammeDestination": "jet",
      "referenceProduitDestination": "jet",
      "label": "Abonnement Jet 10Go",
      "numeroCommande": "Order_migration_1",
      "typeProduit": "BIEN",
      "prix": {
        "periodicite": 1,
        "montant": "30",
        "typeTVA": "R",
        "frais": [
          {
            "montant": "30",
            "titre": "Frais d'ouverture de dossier",
            "typeFrais": "CREATION"
          }
        ],
        "modeFacturation": "PREMIER_MOIS"
      },
	  "referenceDePaiement": "R0000012",
	  "modePaiement": "SEPA"
    },
    {
      "numEC": 2,
      "numECParent": 1,
      "referenceGammeSource": "jet",
      "referenceProduitSource": "option.plus.50g",
      "referenceGammeDestination": "jet",
      "referenceProduitDestination": "option.plus.50g",
      "label": "Option+ 50Go",
      "numeroCommande": "Order_migration_1",
      "typeProduit": "SERVICE",
      "prix": {
        "periodicite": 1,
        "montant": "50",
        "typeTVA": "R",
        "modeFacturation": "PREMIER_MOIS"
      },
	  "referenceDePaiement": "R0000012",
	  "modePaiement": "SEPA"
    },
    {
      "numEC": 3,
      "numECParent": 1,
      "referenceGammeSource": "jet",
      "referenceProduitSource": "kit-sat",
      "referenceGammeDestination": "jet",
      "referenceProduitDestination": "kit-sat",
      "label": "Kit Satellite",
      "numeroCommande": "Order_migration_1",
      "typeProduit": "SERVICE",
      "prix": {
        "engagement": "24",
        "duree": "48",
        "periodicite": "1",
        "typeTVA": "R",
        "montant": "10",
        "modeFacturation": "PREMIER_MOIS"
      },
	  "modePaiement": "SEPA",
      "referenceDePaiement": "R0000012"
    }
  ]
}</con:request>
            <con:originalUri>http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer</con:originalUri><con:assertion type="XPath Match" name="Error Code" id="3c35eeb9-d98f-4016-89e6-17dbb375329d">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer'; 
//ns1:errorCode</path><content>1.1.76</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="URL" id="e0c66cd5-7d2a-4cad-acb9-faf54bc240ef">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer';
//ns1:url</path><content>/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
			<con:assertion type="Invalid HTTP Status Codes" name="Code HTTP 500" disabled="true" id="2ebd7e5f-ef25-49f4-b5ef-bb7a2e2c5051">
              <con:configuration>
                <codes>500</codes>
              </con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="Error Message" id="3c35eeb9-d98f-4016-89e6-17dbb375329d">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/migrer';
//ns1:errorMessage</path><content>IncohÃ©rence entre le NumEC 1 et la rÃ©fÃ©rence de produit renseignÃ©e jet. La rÃ©fÃ©rence du produit connue est sat.jet.20.</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion><con:credentials>
              <con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters><entry key="refContrat" value="${Prepa + Validation#RefContrat}" xmlns="http://eviware.com/soapui/config"/></con:parameters>
          </con:restRequest>
        </con:config>
      </con:testStep><con:properties/></con:testCase><con:properties/>
  </con:testSuite>
  <con:testSuite name="Error Validation">
    <con:settings/>
    <con:runType>SEQUENTIAL</con:runType>
    <con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Validation Double Test Case" searchProperties="true" id="875ae447-38e0-4943-8f07-c6633614d7b7">
      <con:settings/>
      <con:testStep type="calltestcase" name="Prepa + Validation">
        <con:settings/>
        <con:config xsi:type="con:RunTestCaseStep" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:targetTestCase>3d1406c1-6558-4539-a011-8394a232a260</con:targetTestCase>
          <con:properties>
            <con:property>
              <con:name>RefCommande</con:name>
            <con:value xsi:nil="true"/></con:property>
            <con:property>
              <con:name>RefContrat</con:name>
              <con:value>00000372</con:value>
            </con:property>
          </con:properties>
          <con:returnProperties>
            <con:entry>RefContrat</con:entry>
          </con:returnProperties>
          <con:runMode>SINGLETON_AND_WAIT</con:runMode>
        </con:config>
      </con:testStep>
      <con:testStep type="restrequest" name="Validation">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/{refContrat}/valider" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="Validation" mediaType="application/json" postQueryString="false" id="61e5a8b8-9e0b-49d7-a9ba-078986cdcc50">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{
  "user" : "test",
  "idClient": "00003870",
  "idAdrFacturation": "685",
  "paiementInfos": [
    {
      "referenceProduit": "jet",
      "numEC": "1",
      "referenceModePaiement": "R0000012",
      "idAdrLivraison": "adrliv1"
    },
    {
      "referenceProduit": "option.plus.50g",
      "numEC": "2",
      "referenceModePaiement": "R0000012",
      "idAdrLivraison": "adrliv1"
    },
    {
      "referenceProduit": "kit-sat",
      "numEC": "3",
      "referenceModePaiement": "R0000012",
      "idAdrLivraison": "adrliv1"
    }
  ],
  "politiqueValidation": {
    "fraisCreation": "true",
    "checkIsPackagerCreationPossible": "true"
  }
}</con:request>
            <con:originalUri>http://10.10.2.52/contrat-core/contrat/${Prepa +Validation#RefContrat}/valider</con:originalUri><con:assertion type="XPath Match" name="URL">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/valider'; 
//ns1:url</path><content>/contrat-core/contrat/${Prepa + Validation#RefContrat}/valider</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorCode">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/valider'; //ns1:errorCode</path><content>1.1.5</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorMessage">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Prepa + Validation#RefContrat}/valider'; 
//ns1:errorMessage</path><content>Contrat global ${Prepa + Validation#RefContrat} deja valider.</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
            <con:assertion type="Valid HTTP Status Codes" name="Code Error 500" disabled="true"><con:configuration><codes>500</codes></con:configuration></con:assertion><con:credentials>
              <con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters>
              <entry key="refContrat" value="${Prepa + Validation#RefContrat}" xmlns="http://eviware.com/soapui/config"/>
            </con:parameters>
          </con:restRequest>
        </con:config>
      </con:testStep>
      <con:properties/>
    </con:testCase>
    <con:properties/>
  </con:testSuite>
  <con:testSuite name="Error Reduction">
    <con:settings/>
    <con:runType>SEQUENTIAL</con:runType>
    <con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Réduction valide après Date de résiliation Test Case" searchProperties="true" id="c5c3b05b-d55d-42e0-a898-5c3f86cc64c9">
      <con:settings/>
      <con:testStep type="groovy" name="Set Dates">
        <con:settings/>
        <con:config>
          <script>import groovy.time.TimeCategory 
def today = new Date() 
use(TimeCategory) { 
	def DateResilStr = new java.text.SimpleDateFormat("yyyy-MM-dd").format(today + 7.day) 
	def DateReducStr = new java.text.SimpleDateFormat("yyyy-MM-dd").format(today + 15.day)
	testRunner.testCase.setPropertyValue("DateResil", DateResilStr )
	testRunner.testCase.setPropertyValue("DateReduc", DateReducStr ) 
	// log.info testRunner.testCase.getPropertyValue("DateFuture") 
}
		  </script>
        </con:config>
      </con:testStep>
      <con:testStep type="calltestcase" name="Prepa + Valid">
        <con:settings/>
        <con:config xsi:type="con:RunTestCaseStep" copyLoadTestProperties="true" ignoreEmptyProperties="false" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:targetTestCase>3d1406c1-6558-4539-a011-8394a232a260</con:targetTestCase>
          <con:properties>
            <con:property>
              <con:name>RefCommande</con:name>
              <con:value>841c5e36-d11b-411e-8a41-8c9c943efd74</con:value>
            </con:property>
            <con:property>
              <con:name>RefContrat</con:name>
              <con:value>00000373</con:value>
            </con:property>
          </con:properties>
          <con:returnProperties>
            <con:entry>RefCommande</con:entry>
            <con:entry>RefContrat</con:entry>
          </con:returnProperties>
          <con:runMode>SINGLETON_AND_WAIT</con:runMode>
        </con:config>
      </con:testStep>
      <con:testStep type="restrequest" name="Resiliation Totale Future">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/{refContrat}/resilier" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="Resiliation Totale Future" mediaType="application/json" postQueryString="false">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{
  "user": "test",
  "politiqueResiliation": {
    
    "fraisResiliation": "true",
    "montantResiliation": "",
    "typeResiliation": "RIC",
    "remboursement": "true",
    "montantRemboursement": "",
    "penalite": "true",
    "commentaire": "Test Reduction valide apres Date de resiliation"
  }
}</con:request>
            <con:originalUri>http://10.10.2.52/contrat-core/contrat/b83fda2e/resilier</con:originalUri><con:assertion type="Valid HTTP Status Codes" name="Code Retour 200" id="20b95fed-f66f-4685-bce1-6e0a1d92ffad">
              <con:configuration><codes>200</codes></con:configuration>
            </con:assertion>
            <con:assertion type="GroovyScriptAssertion" name="Response must be empty" id="6ca1ddfa-7b0f-48d8-b5fa-1642229ad752">
              <con:configuration>
                <scriptText>assert messageExchange.hasResponse() == false</scriptText>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters>
              <entry key="refContrat" value="${Prepa + Valid#RefContrat}" xmlns="http://eviware.com/soapui/config"/>
            </con:parameters>
          </con:restRequest>
        </con:config>
      </con:testStep>
      <con:testStep type="restrequest" name="Reduction">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/{refContrat}/reduction/ajouter" methodName="Ajouter Sur Contrat" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="Reduction" mediaType="application/json" postQueryString="false" id="5307c583-409c-450d-9a9c-3edfaaef0e30">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{
  "user" : "test",
  "reduction":{
    "typeReduction": "CONTRAT",
    "valeur": "5",
    "typeValeur": "EURO",
    "nbUtilisationMax": "3",
    "dateDebut": "${#TestCase#DateReduc}"
  }
}</con:request>
            <con:originalUri>http://10.10.2.52/contrat-core/contrat/b83fda2e/reduction/ajouter</con:originalUri><con:assertion type="XPath Match" name="URL">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Prepa + Valid#RefContrat}/reduction/ajouter';
//ns1:url</path><content>/contrat-core/contrat/${Prepa + Valid#RefContrat}/reduction/ajouter</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorCode">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Prepa + Valid#RefContrat}/reduction/ajouter';
//ns1:errorCode</path><content>1.1.64</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorMessage">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Prepa + Valid#RefContrat}/reduction/ajouter';
//ns1:errorMessage</path><content>Impossible d'associer une reduction a un contrat ou  un element contractuel rÃ©siliÃ©.</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
			<con:assertion type="Invalid HTTP Status Codes" name="Code HTTP 500" disabled="true">
              <con:configuration>
                <codes>500</codes>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters><entry key="refContrat" value="${Prepa + Valid#RefContrat}" xmlns="http://eviware.com/soapui/config"/></con:parameters>
          </con:restRequest>
        </con:config>
      </con:testStep>
      <con:properties>
        <con:property>
          <con:name>DateFuture</con:name>
          <con:value>2014-08-18</con:value>
        </con:property>
        <con:property>
          <con:name>DateResil</con:name>
          <con:value>2014-12-02</con:value>
        </con:property>
        <con:property>
          <con:name>DateReduc</con:name>
          <con:value>2014-12-10</con:value>
        </con:property>
      </con:properties>
    </con:testCase>
    <con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Deux réductions de même type Test Case" searchProperties="true" id="269a54ba-ed65-406b-836b-73bd1323bc69">
      <con:settings/>
      <con:testStep type="calltestcase" name="Preparation">
        <con:settings/>
        <con:config xsi:type="con:RunTestCaseStep" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:targetTestCase>e7072e2a-0fb9-4743-a447-c332f0ca0e94</con:targetTestCase>
          <con:properties>
            <con:property>
              <con:name>RefCommande</con:name>
              <con:value>31ad3f43-9835-48d4-b55f-1ccd36556d71</con:value>
            </con:property>
            <con:property>
              <con:name>RefContrat</con:name>
              <con:value>00000374</con:value>
            </con:property>
          </con:properties>
          <con:returnProperties>
            <con:entry>RefCommande</con:entry>
            <con:entry>RefContrat</con:entry>
          </con:returnProperties>
          <con:runMode>SINGLETON_AND_WAIT</con:runMode>
        </con:config>
      </con:testStep>
      <con:testStep type="restrequest" name="Reduction">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/{refContrat}/reduction/ajouter" methodName="Ajouter Sur Contrat" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="Reduction" mediaType="application/json" postQueryString="false" id="5a84cfa0-6f4d-4d77-869b-55bdf18fe011">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{
  "user": "test",
  "reduction": {
    "typeReduction": "CONTRAT",
    "valeur": "5",
    "typeValeur": "EURO",
    "nbUtilisationMax": "1"
  }
}</con:request>
            <con:originalUri>http://10.10.2.52/contrat-core/contrat/8a0c9c3e/reduction/ajouter</con:originalUri><con:assertion type="GroovyScriptAssertion" name="No Msg Return" id="0c756b0e-da5d-4b82-a8c5-2cfbcab54afc">
              <con:configuration>
                <scriptText>assert messageExchange.hasResponse() == false</scriptText>
              </con:configuration>
            </con:assertion>
            <con:assertion type="Valid HTTP Status Codes" name="Code = 200">
              <con:configuration>
                <codes>200</codes>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters>
              <entry key="refContrat" value="${Preparation#RefContrat}" xmlns="http://eviware.com/soapui/config"/>
            </con:parameters>
          </con:restRequest>
        </con:config>
      </con:testStep>
      <con:testStep type="restrequest" name="Reduction 2">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/{refContrat}/reduction/ajouter" methodName="Ajouter Sur Contrat" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="Reduction 2" mediaType="application/json" postQueryString="false" id="5a84cfa0-6f4d-4d77-869b-55bdf18fe011">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{
  "user": "test",
  "reduction": {
    "typeReduction": "CONTRAT",
    "valeur": "5",
    "typeValeur": "EURO",
    "nbUtilisationMax": "1"
  }
}</con:request>
            <con:originalUri>http://10.10.2.52/contrat-core/contrat/8a0c9c3e/reduction/ajouter</con:originalUri><con:assertion type="XPath Match" name="URL">
              <con:configuration>
                <path>declare namespace
                ns1='http://10.10.2.52/contrat-core/contrat/${Preparation#RefContrat}/reduction/ajouter';
                //ns1:url</path>
                <content>/contrat-core/contrat/${Preparation#RefContrat}/reduction/ajouter</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
                <ignoreComments>false</ignoreComments>
              </con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorCode">
              <con:configuration>
                <path>declare namespace
                ns1='http://10.10.2.52/contrat-core/contrat/${Preparation#RefContrat}/reduction/ajouter';
                //ns1:errorCode</path>
                <content>1.1.50</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
                <ignoreComments>false</ignoreComments>
              </con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorMessage">
              <con:configuration>
                <path>declare namespace
                ns1='http://10.10.2.52/contrat-core/contrat/${Preparation#RefContrat}/reduction/ajouter';
                //ns1:errorMessage</path>
                <content>L'element de reference ${Preparation#RefContrat} a deja une reduction.</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
                <ignoreComments>false</ignoreComments>
              </con:configuration>
            </con:assertion>
			<con:assertion type="Invalid HTTP Status Codes" name="Code HTTP 500" disabled="true">
              <con:configuration>
                <codes>500</codes>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters>
              <entry key="refContrat" value="${Preparation#RefContrat}" xmlns="http://eviware.com/soapui/config"/>
            </con:parameters>
          </con:restRequest>
        </con:config>
      </con:testStep>
      <con:properties/>
    </con:testCase>
    <con:properties/>
  </con:testSuite>
  <con:testSuite name="Error Résiliation">
    <con:settings/>
    <con:runType>SEQUENTIAL</con:runType>
    <con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Resiliation Double Test Case" searchProperties="true" id="068e8cd5-9f6a-45e0-a61c-2cd4e3eadd18">
      <con:settings/>
      <con:testStep type="calltestcase" name="Prepa + Valid">
        <con:settings/>
        <con:config xsi:type="con:RunTestCaseStep" copyLoadTestProperties="true" ignoreEmptyProperties="false" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:targetTestCase>3d1406c1-6558-4539-a011-8394a232a260</con:targetTestCase>
          <con:properties>
            <con:property>
              <con:name>RefCommande</con:name>
              <con:value>f7556e31-8a38-455b-8578-188cdbdd3a56</con:value>
            </con:property>
            <con:property>
              <con:name>RefContrat</con:name>
              <con:value>00000375</con:value>
            </con:property>
          </con:properties>
          <con:returnProperties>
            <con:entry>RefCommande</con:entry>
            <con:entry>RefContrat</con:entry>
          </con:returnProperties>
          <con:runMode>SINGLETON_AND_WAIT</con:runMode>
        </con:config>
      </con:testStep>
      <con:testStep type="restrequest" name="Resiliation Totale 1">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/{refContrat}/resilier" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="Resiliation Totale 1" mediaType="application/json" postQueryString="false">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{ "user" : "test", "politiqueResiliation" : { "fraisResiliation":
            "true", "montantResiliation" : "", "typeResiliation": "RIC",
            "remboursement": "true", "montantRemboursement": "", "penalite":
            "true", "commentaire" : "Test resiliation double - 1" } }</con:request>
            <con:originalUri>http://10.10.2.52/contrat-core/contrat/${Prepa + Valid#RefContrat}/resilier</con:originalUri>
			<con:assertion type="Valid HTTP Status Codes" name="Code Retour 200" id="20b95fed-f66f-4685-bce1-6e0a1d92ffad">
              <con:configuration>
                <codes>200</codes>
              </con:configuration>
            </con:assertion>
            <con:assertion type="GroovyScriptAssertion" name="Response must be empty" id="6ca1ddfa-7b0f-48d8-b5fa-1642229ad752">
              <con:configuration>
                <scriptText>assert messageExchange.hasResponse() == false</scriptText>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters>
              <entry key="refContrat" value="${Prepa + Valid#RefContrat}" xmlns="http://eviware.com/soapui/config"/>
            </con:parameters>
          </con:restRequest>
        </con:config>
      </con:testStep>
      <con:testStep type="restrequest" name="Resiliation Totale 2">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/{refContrat}/resilier" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="Resiliation Totale 2" mediaType="application/json" postQueryString="false">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{
  "user": "test",
  "politiqueResiliation": {
    "fraisResiliation": "true",
    "montantResiliation": "",
    "typeResiliation": "RIC",
    "remboursement": "true",
    "montantRemboursement": "",
    "penalite": "true",
    "commentaire": "Test resiliation double - 2"
  }
}</con:request>
            
            <con:originalUri>http://10.10.2.52/contrat-core/contrat/fe43ef42/resilier</con:originalUri><con:assertion type="XPath Match" name="URL">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Prepa + Valid#RefContrat}/resilier'; 
//ns1:url</path><content>/contrat-core/contrat/${Prepa + Valid#RefContrat}/resilier</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorCode">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Prepa + Valid#RefContrat}/resilier'; 
//ns1:errorCode</path><content>1.1.9</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorMessage">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Prepa + Valid#RefContrat}/resilier'; 
//ns1:errorMessage</path><content>le contrat de reference ${Prepa + Valid#RefContrat} est deja resilier.</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
			<con:assertion type="Invalid HTTP Status Codes" name="Code HTTP 500" disabled="true">
              <con:configuration>
                <codes>500</codes>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters>
              <entry key="refContrat" value="${Prepa + Valid#RefContrat}" xmlns="http://eviware.com/soapui/config"/>
            </con:parameters>
          </con:restRequest>
        </con:config>
      </con:testStep>
      <con:properties>
        <con:property>
          <con:name>DateResil_1</con:name>
          <con:value>2014-08-19</con:value>
        </con:property>
        <con:property>
          <con:name>DateResil_2</con:name>
          <con:value>2014-08-27</con:value>
        </con:property>
      </con:properties>
    </con:testCase>
    <con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Resiliation de suite + Résiliation Future Test Case" searchProperties="true" id="5c2ebf87-42f4-487b-adb1-03690e7b2c56">
      <con:settings/>
      <con:testStep type="groovy" name="Set Date">
        <con:settings/>
        <con:config>
          <script>import groovy.time.TimeCategory 
def today = new Date() 
use(TimeCategory) {
	def DateResilStr = new java.text.SimpleDateFormat("yyyy-MM-dd").format(today + 7.day)
    testRunner.testCase.setPropertyValue("DateResil", DateResilStr ) 
	// log.info testRunner.testCase.getPropertyValue("DateFuture") 
}</script>
        </con:config>
      </con:testStep>
      <con:testStep type="calltestcase" name="Prepa + Valid">
        <con:settings/>
        <con:config xsi:type="con:RunTestCaseStep" copyLoadTestProperties="true" ignoreEmptyProperties="false" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:targetTestCase>3d1406c1-6558-4539-a011-8394a232a260</con:targetTestCase>
          <con:properties>
            <con:property>
              <con:name>RefCommande</con:name>
              <con:value>9f72b6af-98b3-427a-8b6d-98a6b09d2908</con:value>
            </con:property>
            <con:property>
              <con:name>RefContrat</con:name>
              <con:value>00000376</con:value>
            </con:property>
          </con:properties>
          <con:returnProperties>
            <con:entry>RefCommande</con:entry>
            <con:entry>RefContrat</con:entry>
          </con:returnProperties>
          <con:runMode>SINGLETON_AND_WAIT</con:runMode>
        </con:config>
      </con:testStep>
      <con:testStep type="restrequest" name="Resiliation Totale 1">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/{refContrat}/resilier" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="Resiliation Totale 1" mediaType="application/json" postQueryString="false">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{ "user" : "test", "politiqueResiliation" : { "fraisResiliation":
            "true", "montantResiliation" : "", "typeResiliation": "RIC",
            "remboursement": "true", "montantRemboursement": "", "penalite":
            "true", "commentaire" : "Test resiliation tout de suite suivi de resil future" }
            }</con:request>
            <con:originalUri>http://10.10.2.52/contrat-core/contrat/8794e661/resilier</con:originalUri><con:assertion type="Valid HTTP Status Codes" name="Code Retour 200" id="20b95fed-f66f-4685-bce1-6e0a1d92ffad">
              <con:configuration>
                <codes>200</codes>
              </con:configuration>
            </con:assertion>
            <con:assertion type="GroovyScriptAssertion" name="Response must be empty" id="6ca1ddfa-7b0f-48d8-b5fa-1642229ad752">
              <con:configuration>
                <scriptText>assert messageExchange.hasResponse() == false</scriptText>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters>
              <entry key="refContrat" value="${Prepa + Valid#RefContrat}" xmlns="http://eviware.com/soapui/config"/>
            </con:parameters>
          </con:restRequest>
        </con:config>
      </con:testStep>
      <con:testStep type="restrequest" name="Resiliation Totale 2">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/{refContrat}/resilier" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="Resiliation Totale 2" mediaType="application/json" postQueryString="false">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{
  "user": "test",
  "politiqueResiliation": {
    "dateResiliation": "${#TestCase#DateResil}",
    "fraisResiliation": "true",
    "montantResiliation": "",
    "typeResiliation": "RIC",
    "remboursement": "true",
    "montantRemboursement": "",
    "penalite": "true",
    "commentaire": "Test resiliation future apres resil tout de suite"
  }
}</con:request>
            
            <con:originalUri>http://10.10.2.52/contrat-core/contrat/8794e661/resilier</con:originalUri><con:assertion type="XPath Match" name="URL">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Prepa + Valid#RefContrat}/resilier'; 
//ns1:url</path><content>/contrat-core/contrat/${Prepa + Valid#RefContrat}/resilier</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorCode">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Prepa + Valid#RefContrat}/resilier'; 
//ns1:errorCode</path><content>1.1.9</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorMessage">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Prepa + Valid#RefContrat}/resilier'; 
//ns1:errorMessage</path><content>le contrat de reference ${Prepa + Valid#RefContrat} est deja resilier.</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
			<con:assertion type="Invalid HTTP Status Codes" name="Code HTTP 500" disabled="true">
              <con:configuration>
                <codes>500</codes>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters>
              <entry key="refContrat" value="${Prepa + Valid#RefContrat}" xmlns="http://eviware.com/soapui/config"/>
            </con:parameters>
          </con:restRequest>
        </con:config>
      </con:testStep>
      <con:properties>
        <con:property>
          <con:name>DateResil_1</con:name>
          <con:value>2014-08-19</con:value>
        </con:property>
        <con:property>
          <con:name>DateResil_2</con:name>
          <con:value>2014-08-27</con:value>
        </con:property>
        <con:property>
          <con:name>DateResil</con:name>
          <con:value>2014-12-02</con:value>
        </con:property>
      </con:properties>
    </con:testCase>
    <con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Resiliation Double Future Test Case" searchProperties="true" id="f1142acd-ff83-4258-aaa0-c51d1bb570ec">
      <con:settings/>
      <con:testStep type="groovy" name="Set Dates">
        <con:settings/>
        <con:config>
          <script>import groovy.time.TimeCategory 
def today = new Date() 
use(TimeCategory) { 
	def DateResil_1Str = new java.text.SimpleDateFormat("yyyy-MM-dd").format(today + 7.day) 
	def DateResil_2Str = new java.text.SimpleDateFormat("yyyy-MM-dd").format(today + 15.day)
	testRunner.testCase.setPropertyValue("DateResil_1", DateResil_1Str )
    testRunner.testCase.setPropertyValue("DateResil_2", DateResil_2Str ) 
	// log.info testRunner.testCase.getPropertyValue("DateFuture") 
}
</script>
        </con:config>
      </con:testStep>
      <con:testStep type="calltestcase" name="Prepa + Valid">
        <con:settings/>
        <con:config xsi:type="con:RunTestCaseStep" copyLoadTestProperties="true" ignoreEmptyProperties="false" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:targetTestCase>3d1406c1-6558-4539-a011-8394a232a260</con:targetTestCase>
          <con:properties>
            <con:property>
              <con:name>RefCommande</con:name>
              <con:value>f265991c-a4e7-4480-95bc-4e6dc36e85f3</con:value>
            </con:property>
            <con:property>
              <con:name>RefContrat</con:name>
              <con:value>00000377</con:value>
            </con:property>
          </con:properties>
          <con:returnProperties>
            <con:entry>RefCommande</con:entry>
            <con:entry>RefContrat</con:entry>
          </con:returnProperties>
          <con:runMode>SINGLETON_AND_WAIT</con:runMode>
        </con:config>
      </con:testStep>
      <con:testStep type="restrequest" name="Resiliation Totale Future 1">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/{refContrat}/resilier" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="Resiliation Totale Future 1" mediaType="application/json" postQueryString="false">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{
  "user": "test",
  "politiqueResiliation": {
    "dateResiliation": "${#TestCase#DateResil_1}",
    "fraisResiliation": "true",
    "montantResiliation": "",
    "typeResiliation": "RIC",
    "remboursement": "true",
    "montantRemboursement": "",
    "penalite": "true",
    "commentaire": "Test resiliation double - 1"
  }
}</con:request>
            <con:originalUri>http://10.10.2.52/contrat-core/contrat/1d792f17/resilier</con:originalUri><con:assertion type="Valid HTTP Status Codes" name="Code Retour 200" id="20b95fed-f66f-4685-bce1-6e0a1d92ffad">
              <con:configuration>
                <codes>200</codes>
              </con:configuration>
            </con:assertion>
            <con:assertion type="GroovyScriptAssertion" name="Response must be empty" id="6ca1ddfa-7b0f-48d8-b5fa-1642229ad752">
              <con:configuration>
                <scriptText>assert messageExchange.hasResponse() == false</scriptText>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters>
              <entry key="refContrat" value="${Prepa + Valid#RefContrat}" xmlns="http://eviware.com/soapui/config"/>
            </con:parameters>
          </con:restRequest>
        </con:config>
      </con:testStep>
      <con:testStep type="restrequest" name="Resiliation Totale Future 2">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/{refContrat}/resilier" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="Resiliation Totale Future 2" mediaType="application/json" postQueryString="false">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{
  "user": "test",
  "politiqueResiliation": {
    "dateResiliation": "${#TestCase#DateResil_2}",
    "fraisResiliation": "true",
    "montantResiliation": "",
    "typeResiliation": "RIC",
    "remboursement": "true",
    "montantRemboursement": "",
    "penalite": "true",
    "commentaire": "Test resiliation double - 2"
  }
}</con:request>
            
            
            <con:originalUri>http://10.10.2.52/contrat-core/contrat/bc7b3463/resilier</con:originalUri><con:assertion type="XPath Match" name="URL"><con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Prepa + Valid#RefContrat}/resilier';
//ns1:url</path><content>/contrat-core/contrat/${Prepa + Valid#RefContrat}/resilier</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="ErrorCode"><con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Prepa + Valid#RefContrat}/resilier';
//ns1:errorCode</path><content>1.1.9</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="ErrorMessage"><con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Prepa + Valid#RefContrat}/resilier';
//ns1:errorMessage</path><content>le contrat de reference ${Prepa + Valid#RefContrat} est deja resilier.</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Valid HTTP Status Codes" name="Code 500" disabled="true"><con:configuration><codes>500</codes></con:configuration></con:assertion><con:credentials>
              <con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters>
              <entry key="refContrat" value="${Prepa + Valid#RefContrat}" xmlns="http://eviware.com/soapui/config"/>
            </con:parameters>
          </con:restRequest>
        </con:config>
      </con:testStep>
      <con:properties>
        <con:property>
          <con:name>DateResil_1</con:name>
          <con:value>2014-12-02</con:value>
        </con:property>
        <con:property>
          <con:name>DateResil_2</con:name>
          <con:value>2014-12-10</con:value>
        </con:property>
      </con:properties>
    </con:testCase>
    <con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Resiliation Automatique par Durée Test Case" searchProperties="true" id="74cad98c-d6fc-49d5-bae1-a9fb4ceac773">
      <con:settings/>
      <con:testStep type="groovy" name="Set Nb Passes = 0">
        <con:settings/>
        <con:config><script>int passe = 0 
testRunner.testCase.setPropertyValue("NbPasses", passe.toString())</script></con:config>
      </con:testStep>
      <con:testStep type="restrequest" name="Préparer Contrat Antivirus 1 mois">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/preparer" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="Préparer Contrat Antivirus 1 mois" mediaType="application/json" postQueryString="false" id="7e8cfe53-72a4-4424-beea-8afb9dc13250">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{ "user": "test", "produits": [ { "reference":
            "avfwpro-confort-s", "numEC" : "1", "numeroCommande": "456789",
            "label": "Abonnement Antivirus 6 postes", "typeProduit": "SERVICE",
            "prix": { "periodicite": "1", "duree": "1", "typeTVA":
            "R", "montant": "30", "modePaiement": "SEPA",
            "modeFacturation": "DATE_ANNIVERSAIRE" } } ] }</con:request>
            <con:originalUri>http://10.10.2.52/contrat-core/contrat/preparer</con:originalUri><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="5f6049db-b8e1-40c2-8507-44fb099c7992">
              <con:configuration>
                <codes>200</codes>
              </con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="Reference Exists" id="8f1c10e2-7b07-4fc7-9111-c6d0cc8fac0d">
              <con:configuration>
                <path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/preparer';
                exists(//ns1:reference)</path>
                <content>true</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
                <ignoreComments>false</ignoreComments>
              </con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="Ref Commande" id="b33448e2-3a1a-4068-9bd1-0bb2bafb6abc">
              <con:configuration>
                <path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/preparer';
                //ns1:e[1]/ns1:numeroCommande</path>
                <content>456789</content>
                <allowWildcards>false</allowWildcards>
                <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
                <ignoreComments>false</ignoreComments>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters/>
          </con:restRequest>
        </con:config>
      </con:testStep>
      <con:testStep type="transfer" name="Move Infos Contrat">
        <con:settings/>
        <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false">
            <con:name>Ref Contrat Test Case</con:name>
            <con:sourceType>ResponseAsXml</con:sourceType>
            <con:sourceStep>Préparer Contrat Antivirus 1 mois</con:sourceStep>
            <con:sourcePath>declare namespace nsa='http://10.10.2.52/contrat-core/contrat/preparer';
            //nsa:reference</con:sourcePath>
            <con:targetType>RefContrat</con:targetType>
            <con:targetStep>#TestCase#</con:targetStep>
          </con:transfers>
        </con:config>
      </con:testStep>
      <con:testStep type="restrequest" name="Validation">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/{refContrat}/valider" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="Validation" mediaType="application/json" postQueryString="false" id="61e5a8b8-9e0b-49d7-a9ba-078986cdcc50">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{
  "user": "test",
  "idClient": "00003870",
  "idAdrFacturation": "685",
  "paiementInfos": [
    {
      "referenceProduit": "avfwpro-confort-s",
      "numEC": "1",
      "referenceModePaiement": "R0000012",
      "idAdrLivraison": "adrliv1"
    }
  ],
  "politiqueValidation": {
    "fraisCreation": "true",
    "checkIsPackagerCreationPossible": "true"
  }
}</con:request>
            <con:originalUri>http://10.10.2.52/contrat-core/contrat/987aa834/valider</con:originalUri><con:assertion type="GroovyScriptAssertion" name="No Msg Return">
              <con:configuration>
                <scriptText>assert messageExchange.hasResponse() == false</scriptText>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters>
              <entry key="refContrat" value="${#TestCase#RefContrat}" xmlns="http://eviware.com/soapui/config"/>
            </con:parameters>
          </con:restRequest>
        </con:config>
      </con:testStep>
      <con:testStep type="manualTestStep" name="Change DateServeur Mois +1">
        <con:description>Modifier la date du serveur pour lui ajouter un mois. Ainsi, le batch de résiliation devrait passer pour
        le résilier automatiquement</con:description>
        <con:settings/>
        <con:config xsi:type="con:ManualTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
      </con:testStep>
      <con:testStep type="groovy" name="Nb Passes +1">
        <con:settings/>
        <con:config><script>int passe = testRunner.testCase.getPropertyValue("NbPasses").toInteger() 
passe = passe + 1
testRunner.testCase.setPropertyValue("NbPasses", passe.toString())</script></con:config>
      </con:testStep>
      <con:testStep type="delay" name="Wait For Resiliation">
        <con:settings/>
        <con:config>
          <delay>5000</delay>
        </con:config>
      </con:testStep>
      <con:testStep type="jdbc" name="Test Resil Contrat">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString>
          <con:query>select * from contrat where reference = '${#TestCase#RefContrat}'</con:query>
          <con:properties/>
        </con:config>
      </con:testStep>
      <con:testStep type="goto" name="Must Wait Resil Contrat">
        <con:settings/>
        <con:config xsi:type="con:GotoStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:condition>
            <con:name>Resil Auto</con:name>
            <con:type>XPATH</con:type>
            <con:expression>not(//Results/ResultSet/Row/CONTRAT.DATEFINCONTRAT/text()) 
and 
${#TestCase#NbPasses} &lt; 2</con:expression>
            <con:targetStep>Nb Passes +1</con:targetStep>
          </con:condition>
        </con:config>
      </con:testStep>
      <con:testStep type="restrequest" name="Resiliation Totale Fail">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/{refContrat}/resilier" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="Resiliation Totale Fail" mediaType="application/json" postQueryString="false">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{
  "user": "test",
  "politiqueResiliation": {
    "fraisResiliation": "true",
    "montantResiliation": "",
    "typeResiliation": "RIC",
    "remboursement": "true",
    "montantRemboursement": "",
    "penalite": "true",
    "commentaire": "Test resiliation double - 2"
  }
}</con:request>
            
            <con:assertion type="XPath Match" name="URL">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52:8080/contrat-core/contrat/${Prepa +
                Valid#RefContrat}/resilier'; //ns1:url</path><content>/contrat-core/contrat/${Prepa + Valid#RefContrat}/resilier</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorCode">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52:8080/contrat-core/contrat/${Prepa +
                Valid#RefContrat}/resilier'; //ns1:errorCode</path><content>1.1.9</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="errorMessage">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${Prepa +
                Valid#RefContrat}/resilier'; //ns1:errorMessage</path><content>le contrat de reference ${Prepa + Valid#RefContrat} est deja resilier.</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
			<con:assertion type="Invalid HTTP Status Codes" name="Code HTTP 500" disabled="true">
              <con:configuration>
                <codes>500</codes>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters>
              <entry key="refContrat" value="${#TestCase#RefContrat}" xmlns="http://eviware.com/soapui/config"/>
            </con:parameters>
          </con:restRequest>
        </con:config>
      </con:testStep>
      <con:properties>
        <con:property>
          <con:name>DateResil_1</con:name>
          <con:value>2014-08-19</con:value>
        </con:property>
        <con:property>
          <con:name>DateResil_2</con:name>
          <con:value>2014-08-27</con:value>
        </con:property>
        <con:property>
          <con:name>RefContrat</con:name>
          <con:value>d27b7784</con:value>
        </con:property>
        <con:property>
          <con:name>NbPasses</con:name>
          <con:value>0</con:value>
        </con:property>
      </con:properties>
    </con:testCase>
    <con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Résiliation d'un contrat de vente livré" searchProperties="true" id="43fe3f6e-53ff-4bc1-beed-3ea0d1296ad2"><con:settings/><con:testStep type="restrequest" name="Préparer Contrat Vente"><con:settings/><con:config service="http://10.10.2.52:8080" methodName="" resourcePath="/contrat-core/contrat/preparer" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Préparer Contrat Vente" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.10.2.52:8080</con:endpoint><con:request>{
 "user": "test",
 "produits": [
    {
      "reference": "kit-sat",
      "numEC" : "3",
	 "delaisPreparation": 0,
      "numeroCommande": "852147",
      "label": "Kit Satellite Jet",
      "typeProduit": "BIEN",
      "prix": {
        "typeTVA": "R",
        "montant": "30",
        "modePaiement": "SEPA",
        "modeFacturation": "PREMIER_MOIS"
      }
    }
  ]
}</con:request><con:originalUri>http://10.10.2.52/contrat-core/contrat/preparer</con:originalUri><con:credentials><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="Transfert Ref Contrat">
        <con:settings/>
        <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false" disabled="false">
            <con:name>Ref Contrat</con:name>
            <con:sourceType>ResponseAsXml</con:sourceType>
            <con:sourceStep>Préparer Contrat Vente</con:sourceStep>
            <con:sourcePath>declare namespace nsa='http://10.10.2.52/contrat-core/contrat/preparer';
//nsa:reference</con:sourcePath>
            <con:targetType>RefContrat</con:targetType>
            <con:targetStep>InfosContrat</con:targetStep>
          </con:transfers>
          
        </con:config>
      </con:testStep><con:testStep type="properties" name="InfosContrat">
        <con:settings/>
        <con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:properties>
            <con:property>
              <con:name>RefContrat</con:name>
              <con:value xsi:nil="true"/>
            </con:property>
          </con:properties>
        </con:config>
      </con:testStep><con:testStep type="restrequest" name="Valider Contrat"><con:settings/><con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/{refContrat}/valider" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Valider Contrat" mediaType="application/json" postQueryString="false" id="45acbbc6-0e68-4a28-9c86-c45d0e31ccb6">
          <con:settings>
            <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
          </con:settings>
          <con:endpoint>http://10.10.2.52:8080</con:endpoint>
          <con:request>{
  "user": "test",
  "idClient": "00003870",
  "idAdrFacturation": "685",
  "paiementInfos": [
    {
      "referenceProduit": "kit-sat",
      "numEC": "3",
      "referenceModePaiement": "R0000012",
      "idAdrLivraison": "adrliv1"
    }
  ],
  "politiqueValidation": {
    "fraisCreation": "true",
    "checkIsPackagerCreationPossible" : "true"
  }
}</con:request>
          <con:originalUri>http://10.10.2.52/contrat-core/contrat/3adb703e/valider</con:originalUri><con:assertion type="GroovyScriptAssertion" name="Response must be empty"><con:configuration><scriptText>assert messageExchange.hasResponse() == false</scriptText></con:configuration></con:assertion><con:credentials>
            <con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType>
          </con:credentials>
          <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
          <con:jmsPropertyConfig/>
          <con:parameters><entry key="refContrat" value="${InfosContrat#RefContrat}" xmlns="http://eviware.com/soapui/config"/></con:parameters>
          <con:parameterOrder>
            <con:entry>refContrat</con:entry>
          </con:parameterOrder>
        </con:restRequest></con:config></con:testStep><con:testStep type="delay" name="Wait for end Livraison">
        <con:settings/>
        <con:config>
          <delay>500</delay>
        </con:config>
      </con:testStep><con:testStep type="jdbc" name="Bon de Livraison - Témoin">
        <con:settings/>
        <con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:driver>com.mysql.jdbc.Driver</con:driver>
          <con:connectionString>jdbc:mysql://10.10.2.52:3306/topaze_test?user=test&amp;password=test</con:connectionString>
          <con:query>select * from bonpreparation 
where reference = "${InfosContrat#refContrat}"</con:query>
          
          
          
          <con:properties/>
        </con:config>
      </con:testStep><con:testStep type="goto" name="Go End Livraison">
        <con:settings/>
        <con:config xsi:type="con:GotoStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:condition>
            <con:name>Wait Facturation</con:name>
            <con:type>XPATH</con:type>
            <con:expression>not(//ResultSet/Row/BONPREPARATION.DATELIVRAISONTERMINE/text()) 
and
not(//ResultSet/Row/BONPREPARATION.CAUSENONLIVRAISON/text())</con:expression>
            <con:targetStep>Wait for end Livraison</con:targetStep>
          </con:condition>
        </con:config>
      </con:testStep><con:testStep type="restrequest" name="Resilier Contrat">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/{refContrat}/resilier" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="Resilier Contrat" mediaType="application/json" postQueryString="false">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{
  "user": "test",
  "politiqueResiliation": {
    "fraisResiliation": "true",
    "montantResiliation": "",
    "typeResiliation": "RIC",
    "remboursement": "true",
    "montantRemboursement": "",
    "penalite": "true",
    "commentaire": "this is a test"
  }
}</con:request>
            <con:originalUri>http://10.10.2.52/contrat-core/contrat/${InfosContrat#RefContrat}/resilier</con:originalUri><con:assertion type="Valid HTTP Status Codes" name="Code Retour 500" id="20b95fed-f66f-4685-bce1-6e0a1d92ffad" disabled="true">
              <con:configuration><codes>500</codes></con:configuration>
            </con:assertion>
            
            <con:assertion type="XPath Match" name="URL"><con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${InfosContrat#RefContrat}/resilier'; 
//ns1:url</path><content>/contrat-core/contrat/${InfosContrat#RefContrat}/resilier</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="errorCode"><con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${InfosContrat#RefContrat}/resilier'; 
//ns1:errorCode</path><content>1.1.95</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="ErrorMessage"><con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/${InfosContrat#RefContrat}/resilier'; 
//ns1:errorMessage</path><content>Impossible de rÃ©silier un contrat ne comportant que des Ã©lÃ©ments de vente.</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials>
              <con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters><entry key="refContrat" value="${InfosContrat#RefContrat}" xmlns="http://eviware.com/soapui/config"/></con:parameters>
          </con:restRequest>
        </con:config>
      </con:testStep><con:properties/></con:testCase><con:properties/>
  </con:testSuite><con:testSuite name="Validité Intégrité"><con:description>TestSuite generated for REST Service [http://10.10.2.52:8080]</con:description><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Préparation" searchProperties="true" id="d1aa411d-5417-45b4-b2e7-4bc6e054ba3e"><con:settings/><con:testStep type="restrequest" name="Avec Prix.Montant = 0">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" methodName="" resourcePath="/contrat-core/contrat/preparer" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="Avec Prix.Montant = 0" mediaType="application/json" postQueryString="false">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:encoding>UTF-8</con:encoding>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{
  "user": "test",
  "produits": [
    {
      "reference": "jet",
      "numEC": "1",
      "numeroCommande": "12345",
      "label": "Abonnement jet 10Go",
      "typeProduit": "SERVICE",
      "prix": {
        "periodicite": "1",
        "typeTVA": "R",
        "montant": "0",
        "modePaiement": "SEPA",
        "modeFacturation": "PREMIER_MOIS"
      }
    }
  ]
}</con:request>
            
            
            
			
            <con:originalUri>http://10.10.2.52/contrat-core/contrat/preparer</con:originalUri><con:assertion type="XPath Match" name="Reference exists"><con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/preparer';
exists(//ns1:referenceContrat)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials>
              <con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters/>
          </con:restRequest>
        </con:config>
      </con:testStep><con:testStep type="restrequest" name="Contrat de vente (sans prix.Periodicite)">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/preparer" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="Contrat de vente (sans prix.Periodicite)" mediaType="application/json" postQueryString="false" id="01ddc01d-d8f6-43f9-ac4f-bda76da58129">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{
  "user": "test",
  "produits": [
    {
      "reference": "jet",
      "numEC": "1",
      "label": "Abonnement jet 10Go",
      "numeroCommande": "12345",
      "typeProduit": "SERVICE",
      "prix": {
        "typeTVA": "R",
        "montant": "30",
        "frais": [
          {
            "montant": "30",
            "typeFrais": "creation"
          }
        ],
        "modePaiement": "SEPA",
        "modeFacturation": "PREMIER_MOIS"
      }
    }
  ]
}</con:request>
            <con:originalUri>http://10.10.2.52/contrat-core/contrat/preparer</con:originalUri><con:assertion type="XPath Match" name="Response must contains reference" id="02b0b4b2-9f12-4130-9449-df83b454189a">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/preparer';
exists(//ns1:referenceContrat)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
			
            <con:assertion type="XPath Match" name="Contrat Vente" id="02b0b4b2-9f12-4130-9449-df83b454189a" disabled="true">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/preparer';
//ns1:typeContrat</path><content>VENTE</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion><con:credentials>
              <con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters/>
          </con:restRequest>
        </con:config>
      </con:testStep><con:properties/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Validation d'EC sur facture, donc sans ref paiement" searchProperties="true" id="08918247-696e-4c71-8be4-0148f01c3f7e"><con:settings/><con:testStep type="properties" name="infoContrat"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refContrat</con:name><con:value>00000381</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="restrequest" name="Préparer Contrat">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/preparer" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="Préparer Contrat" mediaType="application/json" postQueryString="false" id="7e8cfe53-72a4-4424-beea-8afb9dc13250">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{
 "user": "test",
 "produits": [
{
      "reference": "jet",
      "numEC" : "1",
      "numeroCommande": "951753",
      "label": "Abonnement jet 10Go",
      "typeProduit": "SERVICE",
      "prix": {
        "engagement" : "24",
        "periodicite": "1",
        "typeTVA": "R",
        "montant": "30",
        "modePaiement": "FACTURE",
        "modeFacturation": "PREMIER_MOIS"
      }
    }
  ]
}</con:request>
            <con:originalUri>http://10.10.2.52/contrat-core/contrat/preparer</con:originalUri><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="5f6049db-b8e1-40c2-8507-44fb099c7992">
              <con:configuration>
                <codes>200</codes>
              </con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="Reference Exists" id="8f1c10e2-7b07-4fc7-9111-c6d0cc8fac0d">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/preparer';
                exists(//ns1:referenceContrat)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="Ref Commande" id="b33448e2-3a1a-4068-9bd1-0bb2bafb6abc" disabled="true">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/preparer';
//ns1:e[1]/ns1:numeroCommande</path><content>951753</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
            <con:credentials>
              <con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters/>
          </con:restRequest>
        </con:config>
      </con:testStep><con:testStep type="transfer" name="Move Infos Contrat">
        <con:settings/>
        <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false">
            <con:name>Ref Contrat Test Case</con:name>
            <con:sourceType>ResponseAsXml</con:sourceType>
            <con:sourceStep>Préparer Contrat</con:sourceStep>
            <con:sourcePath>declare namespace nsa='http://10.10.2.52/contrat-core/contrat/preparer';
//nsa:referenceContrat</con:sourcePath>
            <con:targetType>refContrat</con:targetType>
            <con:targetStep>infoContrat</con:targetStep>
          </con:transfers>
        </con:config>
      </con:testStep><con:testStep type="restrequest" name="Validation">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/{refContrat}/valider" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="Validation" mediaType="application/json" postQueryString="false" id="61e5a8b8-9e0b-49d7-a9ba-078986cdcc50">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{
  "user": "test",
  "idClient": "00003870",
  "idAdrFacturation": "685",
  "paiementInfos": [
    {
      "referenceProduit": "jet",
      "numEC": "1",
    "referenceModePaiement" :"00ERDD00"
    }
  ],
  "politiqueValidation": {
    "fraisCreation": "true",
    "checkIsPackagerCreationPossible": "true"
  }
}</con:request>
            
            
            
            <con:originalUri>http://10.10.2.52/contrat-core/contrat//valider</con:originalUri><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion"><con:configuration><scriptText>assert messageExchange.hasResponse() == false</scriptText></con:configuration></con:assertion><con:credentials>
              <con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters><entry key="refContrat" value="${infoContrat#refContrat}" xmlns="http://eviware.com/soapui/config"/></con:parameters>
          </con:restRequest>
        </con:config>
      </con:testStep><con:properties><con:property><con:name>RefContrat</con:name><con:value>00000151</con:value></con:property></con:properties></con:testCase><con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Reduction" searchProperties="true" id="4170f002-8abc-4606-a58c-744d5c534de8" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="">
      <con:description>TestCase generated for REST Resource [reduction/ajouter] located at
      [/contrat-core/contrat/{refContrat}/reduction/ajouter]</con:description>
      <con:settings/>
      <con:testStep type="calltestcase" name="Preparation" id="efcd039f-4e47-4598-a22d-6798d1e21bd4">
        <con:settings/>
        <con:config xsi:type="con:RunTestCaseStep" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:targetTestCase>e7072e2a-0fb9-4743-a447-c332f0ca0e94</con:targetTestCase>
          <con:properties>
            <con:property>
              <con:name>RefCommande</con:name>
              <con:value>b46032ca-a4a9-4770-a258-3114fafa1bb0</con:value>
            </con:property>
            <con:property>
              <con:name>RefContrat</con:name>
              <con:value>00000382</con:value>
            </con:property>
          </con:properties>
          <con:returnProperties>
            <con:entry>RefCommande</con:entry>
            <con:entry>RefContrat</con:entry>
          </con:returnProperties>
          <con:runMode>SINGLETON_AND_WAIT</con:runMode>
        </con:config>
      </con:testStep>
      <con:testStep type="restrequest" name="Creer Reduction 5€ sur contrat" id="ffb9a78c-ce67-4186-b1cb-d86deca8beca">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/{refContrat}/reduction/ajouter" methodName="Ajouter Sur Contrat" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="Creer Reduction 5€ sur contrat" mediaType="application/json" postQueryString="false" id="5a84cfa0-6f4d-4d77-869b-55bdf18fe011">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{
  "user" : "test",
  "reduction": {
    "typeReduction": "CONTRAT",
    "valeur": "5",
    "typeValeur": "EURO",
    "nbUtilisationMax":"12"
  }
}</con:request>
            <con:originalUri>http://10.10.2.52/contrat-core/contrat/00000059/reduction/ajouter</con:originalUri><con:assertion type="GroovyScriptAssertion" name="No Msg Return" id="0c756b0e-da5d-4b82-a8c5-2cfbcab54afc">
              <con:configuration><scriptText>assert messageExchange.hasResponse() == false</scriptText></con:configuration>
            </con:assertion>
            <con:credentials>
              <con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters>
              <entry key="refContrat" value="${Preparation#RefContrat}" xmlns="http://eviware.com/soapui/config"/>
            </con:parameters>
          </con:restRequest>
        </con:config>
      </con:testStep>
      <con:testStep type="calltestcase" name="Preparation2" id="565331a1-1337-4ccc-ba2d-fef7afdb5f58">
        <con:settings/>
        <con:config xsi:type="con:RunTestCaseStep" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:targetTestCase>e7072e2a-0fb9-4743-a447-c332f0ca0e94</con:targetTestCase>
          <con:properties>
            <con:property>
              <con:name>RefCommande</con:name>
              <con:value>0ec1d44a-9e56-43e3-b303-55b9635cd3ea</con:value>
            </con:property>
            <con:property>
              <con:name>RefContrat</con:name>
              <con:value>00000383</con:value>
            </con:property>
          </con:properties>
          <con:returnProperties>
            <con:entry>RefCommande</con:entry>
            <con:entry>RefContrat</con:entry>
          </con:returnProperties>
          <con:runMode>SINGLETON_AND_WAIT</con:runMode>
        </con:config>
      </con:testStep>
      <con:testStep type="restrequest" name="Creer Reduction 5€ sur contrat utilisable 3 fois" id="19bc356f-6aa4-4392-8940-84d9a6c6017f">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/{refContrat}/reduction/ajouter" methodName="Ajouter Sur Contrat" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="Creer Reduction 5€ sur contrat utilisable 3 fois" mediaType="application/json" postQueryString="false" id="5307c583-409c-450d-9a9c-3edfaaef0e30">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{
  "user" : "test",
  "reduction": {
    "typeReduction": "CONTRAT",
    "valeur": "5",
    "typeValeur": "EURO",
    "nbUtilisationMax": "3"
  }
}</con:request>
            <con:originalUri>http://10.10.2.52/contrat-core/contrat/00000060/reduction/ajouter</con:originalUri><con:assertion type="GroovyScriptAssertion" name="No Msg Return" id="9471f6af-5ce1-471a-a6c6-71475b7578ad">
              <con:configuration>
                <scriptText>assert messageExchange.hasResponse() == false</scriptText>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters>
              <entry key="refContrat" value="${Preparation2#RefContrat}" xmlns="http://eviware.com/soapui/config"/>
            </con:parameters>
          </con:restRequest>
        </con:config>
      </con:testStep>
      <con:testStep type="calltestcase" name="Preparation3" id="13757a30-d2eb-49bc-9e0f-3cede86e50bc">
        <con:settings/>
        <con:config xsi:type="con:RunTestCaseStep" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:targetTestCase>e7072e2a-0fb9-4743-a447-c332f0ca0e94</con:targetTestCase>
          <con:properties>
            <con:property>
              <con:name>RefCommande</con:name>
              <con:value>be2b43b9-a9c6-436c-a420-26c536ea1d15</con:value>
            </con:property>
            <con:property>
              <con:name>RefContrat</con:name>
              <con:value>00000384</con:value>
            </con:property>
          </con:properties>
          <con:returnProperties>
            <con:entry>RefCommande</con:entry>
            <con:entry>RefContrat</con:entry>
          </con:returnProperties>
          <con:runMode>SINGLETON_AND_WAIT</con:runMode>
        </con:config>
      </con:testStep>
      <con:testStep type="restrequest" name="Creer Reduction 5€ sur contrat utilisable pendant une période" id="1bc214f6-6936-469a-ae1c-4f9729409163">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/{refContrat}/reduction/ajouter" methodName="Ajouter Sur Contrat" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="Creer Reduction 5€ sur contrat utilisable pendant une période" mediaType="application/json" postQueryString="false" id="ae2ef9bb-b9dd-450c-92f1-78593147b82f">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{
  "user": "test",
  "reduction": {
    "typeReduction": "CONTRAT",
    "valeur": "5",
    "typeValeur": "EURO",
    "dateDebut": "2015-04-01",
    "dateFin": "2015-09-01"
  }
}</con:request>
            <con:originalUri>http://10.10.2.52/contrat-core/contrat/00000061/reduction/ajouter</con:originalUri><con:assertion type="GroovyScriptAssertion" name="No Msg Return" id="daf397e1-ee59-4f19-9f96-ce2d54243dab">
              <con:configuration>
                <scriptText>assert messageExchange.hasResponse() == false</scriptText>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters>
              <entry key="refContrat" value="${Preparation3#RefContrat}" xmlns="http://eviware.com/soapui/config"/>
            </con:parameters>
          </con:restRequest>
        </con:config>
      </con:testStep>
      <con:testStep type="calltestcase" name="Preparation4" id="38be7630-8df0-4439-a71f-38419bcbe064">
        <con:settings/>
        <con:config xsi:type="con:RunTestCaseStep" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:targetTestCase>e7072e2a-0fb9-4743-a447-c332f0ca0e94</con:targetTestCase>
          <con:properties>
            <con:property>
              <con:name>RefCommande</con:name>
              <con:value>aa4f129e-a0d2-498e-8f49-cb15154103aa</con:value>
            </con:property>
            <con:property>
              <con:name>RefContrat</con:name>
              <con:value>00000385</con:value>
            </con:property>
          </con:properties>
          <con:returnProperties>
            <con:entry>RefCommande</con:entry>
            <con:entry>RefContrat</con:entry>
          </con:returnProperties>
          <con:runMode>SINGLETON_AND_WAIT</con:runMode>
        </con:config>
      </con:testStep>
      <con:testStep type="restrequest" name="Creer Reduction 5% sur contrat pendant une période" id="59242d67-41c0-4d41-b5d1-01d8c5abc864">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/{refContrat}/reduction/ajouter" methodName="Ajouter Sur Contrat" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="Creer Reduction 5% sur contrat pendant une période" mediaType="application/json" postQueryString="false" id="894d2edf-a858-4c40-9ec2-cae46fb7346b">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{
  "user": "test",
  "reduction": {
    "typeReduction": "CONTRAT",
    "valeur": "5",
    "typeValeur": "POURCENTAGE",
    "dateDebut": "2015-08-01",
    "dateFin": "2015-09-01"
  }
}</con:request>
            <con:originalUri>http://10.10.2.52/contrat-core/contrat/00000062/reduction/ajouter</con:originalUri><con:assertion type="GroovyScriptAssertion" name="No Msg Return" id="e422cb62-38c3-4841-8951-8c8a6cc27c82">
              <con:configuration>
                <scriptText>assert messageExchange.hasResponse() == false</scriptText>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters><entry key="refContrat" value="${Preparation4#RefContrat}" xmlns="http://eviware.com/soapui/config"/></con:parameters>
          </con:restRequest>
        </con:config>
      </con:testStep>
      <con:testStep type="calltestcase" name="Preparation5" id="5927febf-7d29-4883-99bd-6981664fcaa0">
        <con:settings/>
        <con:config xsi:type="con:RunTestCaseStep" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:targetTestCase>e7072e2a-0fb9-4743-a447-c332f0ca0e94</con:targetTestCase>
          <con:properties>
            <con:property>
              <con:name>RefCommande</con:name>
              <con:value>950206c8-add4-4ec8-9ca0-1ec14cc987da</con:value>
            </con:property>
            <con:property>
              <con:name>RefContrat</con:name>
              <con:value>00000386</con:value>
            </con:property>
          </con:properties>
          <con:returnProperties>
            <con:entry>RefCommande</con:entry>
            <con:entry>RefContrat</con:entry>
          </con:returnProperties>
          <con:runMode>SINGLETON_AND_WAIT</con:runMode>
        </con:config>
      </con:testStep>
      <con:testStep type="restrequest" name="Creer Reduction 5% sur contrat utilisable 2 fois" id="c8dba974-e5e4-40c0-a5aa-a4f5f4f2e7ef">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/{refContrat}/reduction/ajouter" methodName="Ajouter Sur Contrat" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="Creer Reduction 5% sur contrat utilisable 2 fois" mediaType="application/json" postQueryString="false" id="a4321c13-49f7-4627-bc6f-74c006dd2678">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{ "user" : "test",
  "reduction": {
  "typeReduction" : "CONTRAT", 
  "valeur" : "5",
 "typeValeur" : "POURCENTAGE",
  "nbUtilisationMax" : "3" 
            }}</con:request>
            <con:originalUri>http://10.10.2.52/contrat-core/contrat/00000059/reduction/ajouter</con:originalUri><con:assertion type="GroovyScriptAssertion" name="No Msg Return" id="add533e5-621f-4a9e-b661-b3e629b38d90">
              <con:configuration>
                <scriptText>assert messageExchange.hasResponse() == false</scriptText>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters><entry key="refContrat" value="${Preparation5#RefContrat}" xmlns="http://eviware.com/soapui/config"/></con:parameters>
          </con:restRequest>
        </con:config>
      </con:testStep>
      <con:testStep type="calltestcase" name="Preparation6" id="5c6ef5bc-8409-4a8f-8984-26d681425791">
        <con:settings/>
        <con:config xsi:type="con:RunTestCaseStep" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:targetTestCase>e7072e2a-0fb9-4743-a447-c332f0ca0e94</con:targetTestCase>
          <con:properties>
            <con:property>
              <con:name>RefCommande</con:name>
              <con:value>354bc55d-2209-4dee-8b16-b18aab4930fc</con:value>
            </con:property>
            <con:property>
              <con:name>RefContrat</con:name>
              <con:value>00000387</con:value>
            </con:property>
          </con:properties>
          <con:returnProperties>
            <con:entry>RefCommande</con:entry>
            <con:entry>RefContrat</con:entry>
          </con:returnProperties>
          <con:runMode>SINGLETON_AND_WAIT</con:runMode>
        </con:config>
      </con:testStep>
      <con:testStep type="restrequest" name="Creer Reduction 5% sur contrat" id="25408003-9bf6-40fc-9e31-7290fa202c7a">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/{refContrat}/reduction/ajouter" methodName="Ajouter Sur Contrat" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="Creer Reduction 5% sur contrat" mediaType="application/json" postQueryString="false" id="fc77e092-8ebb-42e0-87c8-865abd497b56">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{
  "user": "test",
  "reduction": {
    "typeReduction": "CONTRAT",
    "valeur": "5",
    "typeValeur": "POURCENTAGE",
    "nbUtilisationMax" : "3" 
  }
}</con:request>
            <con:originalUri>http://10.10.2.52/contrat-core/contrat/00000064/reduction/ajouter</con:originalUri><con:assertion type="GroovyScriptAssertion" name="No Msg Return" id="90ae3b09-3f62-48c1-92eb-dd7ec38d01e6">
              <con:configuration>
                <scriptText>assert messageExchange.hasResponse() == false</scriptText>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters>
              <entry key="refContrat" value="${Preparation6#RefContrat}" xmlns="http://eviware.com/soapui/config"/>
            </con:parameters>
          </con:restRequest>
        </con:config>
      </con:testStep>
      <con:testStep type="calltestcase" name="Preparation7" id="a304edba-3b1d-4c8f-98cc-d054c4317533">
        <con:settings/>
        <con:config xsi:type="con:RunTestCaseStep" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:targetTestCase>e7072e2a-0fb9-4743-a447-c332f0ca0e94</con:targetTestCase>
          <con:properties>
            <con:property>
              <con:name>RefCommande</con:name>
              <con:value>52a5084b-4982-4ec7-8948-a1e611213ed3</con:value>
            </con:property>
            <con:property>
              <con:name>RefContrat</con:name>
              <con:value>00000388</con:value>
            </con:property>
          </con:properties>
          <con:returnProperties>
            <con:entry>RefCommande</con:entry>
            <con:entry>RefContrat</con:entry>
          </con:returnProperties>
          <con:runMode>SINGLETON_AND_WAIT</con:runMode>
        </con:config>
      </con:testStep>
      <con:testStep type="restrequest" name="Creer Réduction Frais de création" id="5337f653-dbe0-42ad-bcb2-fdca08c93647">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/{refContrat}/reduction/ajouter" methodName="Ajouter Sur Contrat" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="Creer Réduction Frais de création" mediaType="application/json" postQueryString="false" id="94da1623-685a-48f6-8aaf-4b3a4e9be482">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{
  "user": "test",
  "reduction": {
    "typeReduction": "FRAIS",
    "valeur": "100",
    "typeValeur": "POURCENTAGE",
    "nbUtilisationMax": 1,
    "typeFrais": "CREATION"
  }
}</con:request>
            <con:originalUri>http://10.10.2.52/contrat-core/contrat/00000065/reduction/ajouter</con:originalUri><con:assertion type="GroovyScriptAssertion" name="No Msg Return" id="298e4301-7120-46a3-bd38-17758992edcc">
              <con:configuration>
                <scriptText>assert messageExchange.hasResponse() == false</scriptText>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters>
              <entry key="refContrat" value="${Preparation7#RefContrat}" xmlns="http://eviware.com/soapui/config"/>
            </con:parameters>
          </con:restRequest>
        </con:config>
      </con:testStep>
      <con:testStep type="calltestcase" name="Preparation8" id="087b0e2f-b545-4e3a-8a72-0c70577e312a">
        <con:settings/>
        <con:config xsi:type="con:RunTestCaseStep" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:targetTestCase>e7072e2a-0fb9-4743-a447-c332f0ca0e94</con:targetTestCase>
          <con:properties>
            <con:property>
              <con:name>RefCommande</con:name>
              <con:value>8c91517a-d173-4cbc-8ebd-5afe42886be4</con:value>
            </con:property>
            <con:property>
              <con:name>RefContrat</con:name>
              <con:value>00000389</con:value>
            </con:property>
          </con:properties>
          <con:returnProperties>
            <con:entry>RefCommande</con:entry>
            <con:entry>RefContrat</con:entry>
          </con:returnProperties>
          <con:runMode>SINGLETON_AND_WAIT</con:runMode>
        </con:config>
      </con:testStep>
      <con:testStep type="restrequest" name="Creer Réduction Frais de résiliation" id="648d754d-3895-4763-b17c-cb160ab50d4c">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/{refContrat}/reduction/ajouter" methodName="Ajouter Sur Contrat" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="Creer Réduction Frais de résiliation" mediaType="application/json" postQueryString="false" id="94da1623-685a-48f6-8aaf-4b3a4e9be482">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{
  "user": "test",
  "reduction": {
    "typeReduction": "FRAIS",
    "typeFrais": "RESILIATION",
    "valeur": "100",
    "typeValeur": "POURCENTAGE",
    "nbUtilisationMax": 1
  }
}</con:request>
            <con:originalUri>http://10.10.2.52/contrat-core/contrat/00000066/reduction/ajouter</con:originalUri><con:assertion type="GroovyScriptAssertion" name="No Msg Return" id="4658f94a-14c5-4446-85e5-f9086f81ebd5">
              <con:configuration>
                <scriptText>assert messageExchange.hasResponse() == false</scriptText>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters>
              <entry key="refContrat" value="${Preparation8#RefContrat}" xmlns="http://eviware.com/soapui/config"/>
            </con:parameters>
          </con:restRequest>
        </con:config>
      </con:testStep>
      <con:testStep type="calltestcase" name="Preparation9" id="2c06c0af-f537-480c-a7aa-6c9d8dda5aa2">
        <con:settings/>
        <con:config xsi:type="con:RunTestCaseStep" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:targetTestCase>e7072e2a-0fb9-4743-a447-c332f0ca0e94</con:targetTestCase>
          <con:properties>
            <con:property>
              <con:name>RefCommande</con:name>
              <con:value>58064e18-536c-4ce5-95a1-e189fd1cbe96</con:value>
            </con:property>
            <con:property>
              <con:name>RefContrat</con:name>
              <con:value>00000390</con:value>
            </con:property>
          </con:properties>
          <con:returnProperties>
            <con:entry>RefCommande</con:entry>
            <con:entry>RefContrat</con:entry>
          </con:returnProperties>
          <con:runMode>SINGLETON_AND_WAIT</con:runMode>
        </con:config>
      </con:testStep>
      <con:testStep type="restrequest" name="Creer Réduction Frais de migration" id="80ffe776-7f48-4ea6-b1b1-e068794ceaee">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/{refContrat}/reduction/ajouter" methodName="Ajouter Sur Contrat" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="Creer Réduction Frais de migration" mediaType="application/json" postQueryString="false" id="94da1623-685a-48f6-8aaf-4b3a4e9be482">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{
  "user": "test",
  "reduction": {
    "typeReduction": "FRAIS",
    "typeFrais": "MIGRATION",
    "valeur": "100",
    "typeValeur": "POURCENTAGE",
    "nbUtilisationMax": 1
  }
}</con:request>
            <con:originalUri>http://10.10.2.52/contrat-core/contrat/00000067/reduction/ajouter</con:originalUri><con:assertion type="GroovyScriptAssertion" name="No Msg Return" id="29668bd5-26f3-4dfb-bb0d-e09a95fc77fb">
              <con:configuration>
                <scriptText>assert messageExchange.hasResponse() == false</scriptText>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters>
              <entry key="refContrat" value="${Preparation9#RefContrat}" xmlns="http://eviware.com/soapui/config"/>
            </con:parameters>
          </con:restRequest>
        </con:config>
      </con:testStep>
      <con:testStep type="calltestcase" name="Preparation10" id="cc324609-e2fc-415f-ab93-a40df9cc547c">
        <con:settings/>
        <con:config xsi:type="con:RunTestCaseStep" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:targetTestCase>e7072e2a-0fb9-4743-a447-c332f0ca0e94</con:targetTestCase>
          <con:properties>
            <con:property>
              <con:name>RefCommande</con:name>
              <con:value>7c729795-0a14-4f07-b933-68bcd13c6da4</con:value>
            </con:property>
            <con:property>
              <con:name>RefContrat</con:name>
              <con:value>00000391</con:value>
            </con:property>
          </con:properties>
          <con:returnProperties>
            <con:entry>RefCommande</con:entry>
            <con:entry>RefContrat</con:entry>
          </con:returnProperties>
          <con:runMode>SINGLETON_AND_WAIT</con:runMode>
        </con:config>
      </con:testStep>
      <con:testStep type="restrequest" name="Creer Reduction 1 mois gratuit sur contrat" id="6dd26da3-a41c-466b-84db-ac58ed66ca32">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/{refContrat}/reduction/ajouter" methodName="Ajouter Sur Contrat" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="Creer Reduction 1 mois gratuit sur contrat" mediaType="application/json" postQueryString="false" id="5a84cfa0-6f4d-4d77-869b-55bdf18fe011">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{
  "user": "test",
  "reduction": {
    "typeReduction": "CONTRAT",
    "typeValeur": "MOIS",
    "nbUtilisationMax": "1",
    "valeur": "1"
  }
}</con:request>
            <con:originalUri>http://10.10.2.52/contrat-core/contrat/00000068/reduction/ajouter</con:originalUri><con:assertion type="GroovyScriptAssertion" name="No Msg Return" id="26622e39-42ab-453b-a229-82e4059145a9">
              <con:configuration>
                <scriptText>assert messageExchange.hasResponse() == false</scriptText>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters>
              <entry key="refContrat" value="${Preparation10#RefContrat}" xmlns="http://eviware.com/soapui/config"/>
            </con:parameters>
          </con:restRequest>
        </con:config>
      </con:testStep>
      <con:testStep type="calltestcase" name="Preparation11" id="4671d8ea-090a-4ee4-9e7c-35bc705bdeb3">
        <con:settings/>
        <con:config xsi:type="con:RunTestCaseStep" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:targetTestCase>e7072e2a-0fb9-4743-a447-c332f0ca0e94</con:targetTestCase>
          <con:properties>
            <con:property>
              <con:name>RefCommande</con:name>
              <con:value>e296d709-baf5-4c96-82cb-b34ff6b144e8</con:value>
            </con:property>
            <con:property>
              <con:name>RefContrat</con:name>
              <con:value>00000392</con:value>
            </con:property>
          </con:properties>
          <con:returnProperties>
            <con:entry>RefCommande</con:entry>
            <con:entry>RefContrat</con:entry>
          </con:returnProperties>
          <con:runMode>SINGLETON_AND_WAIT</con:runMode>
        </con:config>
      </con:testStep>
      <con:testStep type="restrequest" name="Préparer Contrat Jet" id="1f7b3e29-cc8f-462a-b319-c895c77f3534">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/preparer" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="Préparer Contrat Jet" mediaType="application/json" postQueryString="false" id="7e8cfe53-72a4-4424-beea-8afb9dc13250">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{
  "user": "test",
  "produits": [
    {
      "reference": "jet",
      "numEC": "1",
      "numeroCommande": "12345",
      "label": "Abonnement jet 10Go",
      "typeProduit": "SERVICE",
      "prix": {
        "periodicite": "3",
        "typeTVA": "R",
        "montant": "30",
        "frais": [
          {
            "montant": "30",
            "typeFrais": "creation"
          }
        ],
        "modePaiement": "SEPA",
        "modeFacturation": "PREMIER_MOIS"
      }
    },
    {
      "reference": "option.plus.50g",
      "numEC": "2",
      "numECParent": "1",
      
      "numeroCommande": "12345",
      "label": "Option+ 50Go",
      "typeProduit": "SERVICE",
      "prix": {
        "periodicite": "3",
        "typeTVA": "R",
        "montant": "50",
        "frais": [
          {
            "montant": "50",
            "typeFrais": "resiliation",
            "nombreMois": "12",
            "ordre": "1"
          },
          {
            "montant": "30",
            "typeFrais": "resiliation",
            "ordre": "2"
          }
        ],
        "modePaiement": "CB",
        "modeFacturation": "PREMIER_MOIS"
      }
    },
    {
      "reference": "kit-sat",
      "numEC": "3",
      "numECParent": "1",
      
      "numeroCommande": "12345",
      "label": "Kit Satellite Jet",
      "typeProduit": "BIEN",
      "prix": {
        "engagement": "24",
        "duree": "48",
        "periodicite": "3",
        "typeTVA": "R",
        "montant": "30",
        "modePaiement": "FACTURE",
        "modeFacturation": "PREMIER_MOIS"
      }
    }
  ]
}</con:request>
            <con:originalUri>http://10.10.2.52/contrat-core/contrat/preparer</con:originalUri><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="887e32e8-7107-4869-9129-0394f4d016fe">
              <con:configuration><codes>200</codes></con:configuration>
            </con:assertion>
            <con:assertion type="XPath Match" name="Reference Exists" id="5039835b-0d24-4c31-bf8c-ee6397bccee7">
              <con:configuration><path>declare namespace ns1='http://10.10.2.52/contrat-core/contrat/preparer';
                exists(//ns1:referenceContrat)</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
            </con:assertion>
            <con:credentials>
              <con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters/>
          </con:restRequest>
        </con:config>
      </con:testStep>
      <con:testStep type="transfer" name="Move Infos Contrat" id="962936e4-d7c8-4650-a5af-38f18a760c52">
        <con:settings/>
        <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="true" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false">
            <con:name>RefContrat</con:name>
            <con:sourceType>ResponseAsXml</con:sourceType>
            <con:sourceStep>Préparer Contrat Jet</con:sourceStep>
            <con:sourcePath>declare namespace nsa='http://10.10.2.52/contrat-core/contrat/preparer';
            //nsa:referenceContrat</con:sourcePath>
            <con:targetType>RefContrat</con:targetType>
            <con:targetStep>InfosContrat</con:targetStep>
          </con:transfers>
        </con:config>
      </con:testStep>
      <con:testStep type="restrequest" name="Creer Reduction 3 factures gratuites pour une période de 1 mois" id="a59728c7-be96-4d70-a492-d072257a5050">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/{refContrat}/reduction/ajouter" methodName="Ajouter Sur Contrat" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="Creer Reduction 3 factures gratuites pour une période de 1 mois" mediaType="application/json" postQueryString="false" id="5a84cfa0-6f4d-4d77-869b-55bdf18fe011">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{
  "user": "test",
  "reduction": {
    "typeReduction": "CONTRAT",
    "typeValeur": "MOIS",
    "nbUtilisationMax": "3",
    "valeur": "1"
  }
}</con:request>
            <con:originalUri>http://10.10.2.52/contrat-core/contrat/00000069/reduction/ajouter</con:originalUri><con:assertion type="GroovyScriptAssertion" name="No Msg Return" id="4f4f82cf-5a67-412d-857f-0b949533dad7">
              <con:configuration>
                <scriptText>assert messageExchange.hasResponse() == false</scriptText>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters><entry key="refContrat" value="${Preparation11#RefContrat}" xmlns="http://eviware.com/soapui/config"/></con:parameters>
          </con:restRequest>
        </con:config>
      </con:testStep>
      <con:testStep type="properties" name="InfosContrat" id="8eedc81a-8b78-4c7e-9011-bc1b7c3e268d">
        <con:settings/>
        <con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:properties>
            <con:property>
              <con:name>RefContrat</con:name>
              <con:value>00000393</con:value>
            </con:property>
          </con:properties>
        </con:config>
      </con:testStep>
      <con:testStep type="restrequest" name="Creer Reduction 1 facture gratuite pour une période de 3 mois" id="a1343024-bd20-48e7-863b-18a01b566a2e">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/{refContrat}/reduction/ajouter" methodName="Ajouter Sur Contrat" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="Creer Reduction 1 facture gratuite pour une période de 3 mois" mediaType="application/json" postQueryString="false" id="5a84cfa0-6f4d-4d77-869b-55bdf18fe011">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{
  "user": "test",
  "reduction": {
    "typeReduction": "CONTRAT",
    "typeValeur": "MOIS",
    "nbUtilisationMax": "1",
    "valeur": "3"
  }
}</con:request>
            <con:originalUri>http://10.10.2.52/contrat-core/contrat//reduction/ajouter</con:originalUri><con:assertion type="GroovyScriptAssertion" name="No Msg Return" id="14b70c79-449c-4b88-b2d2-7b84e165f5ec">
              <con:configuration>
                <scriptText>assert messageExchange.hasResponse() == false</scriptText>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters><entry key="refContrat" value="${InfosContrat#RefContrat}" xmlns="http://eviware.com/soapui/config"/></con:parameters>
          </con:restRequest>
        </con:config>
      </con:testStep>
      <con:properties/>
    </con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Reductions Cumulables" searchProperties="true" id="449279e3-8ddf-4f13-b7ff-4ad88b356652">
      <con:settings/>
      <con:testStep type="calltestcase" name="Preparation" id="a3874b2d-3912-4198-90a5-10e2f157a011">
        <con:settings/>
        <con:config xsi:type="con:RunTestCaseStep" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:targetTestCase>e7072e2a-0fb9-4743-a447-c332f0ca0e94</con:targetTestCase>
          <con:properties>
            <con:property>
              <con:name>RefCommande</con:name>
              <con:value>e0a61215-fb32-4ea8-afd2-059a348c61f4</con:value>
            </con:property>
            <con:property>
              <con:name>RefContrat</con:name>
              <con:value>00000394</con:value>
            </con:property>
          </con:properties>
          <con:returnProperties>
            <con:entry>RefCommande</con:entry>
            <con:entry>RefContrat</con:entry>
          </con:returnProperties>
          <con:runMode>SINGLETON_AND_WAIT</con:runMode>
        </con:config>
      </con:testStep>
      <con:testStep type="restrequest" name="Creer Réduction 5€ sur contrat" id="e01cc417-3460-4606-acb3-1613d7559f8f">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/{refContrat}/reduction/ajouter" methodName="Ajouter Sur Contrat" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="Creer Réduction 5€ sur contrat" mediaType="application/json" postQueryString="false" id="5a84cfa0-6f4d-4d77-869b-55bdf18fe011">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{
  "user" : "test",
  "reduction":{
    "typeReduction": "CONTRAT",
    "typeValeur": "EURO",
    "nbUtilisationMax": "1",
    "valeur": "5"
  }
}</con:request>
            <con:originalUri>http://10.10.2.52/contrat-core/contrat/00000070/reduction/ajouter</con:originalUri><con:assertion type="GroovyScriptAssertion" name="No Msg Return" id="0c756b0e-da5d-4b82-a8c5-2cfbcab54afc">
              <con:configuration>
                <scriptText>assert messageExchange.hasResponse() == false</scriptText>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters><entry key="refContrat" value="${Preparation#RefContrat}" xmlns="http://eviware.com/soapui/config"/></con:parameters>
          </con:restRequest>
        </con:config>
      </con:testStep>
      <con:testStep type="restrequest" name="Creer Réduction Frais de création" id="177fc35f-16af-4df7-b816-6975e3f55659">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/{refContrat}/reduction/ajouter" methodName="Ajouter Sur Contrat" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="Creer Réduction Frais de création" mediaType="application/json" postQueryString="false" id="94da1623-685a-48f6-8aaf-4b3a4e9be482">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>
{
  "user" : "test",
  "reduction":{
    "typeReduction": "FRAIS",
    "typeValeur": "POURCENTAGE",
    "nbUtilisationMax": "1",
    "valeur": "100",
    "typeFrais":"CREATION"
  }
}</con:request>
            <con:originalUri>http://10.10.2.52/contrat-core/contrat//reduction/ajouter</con:originalUri><con:assertion type="GroovyScriptAssertion" name="No Msg Return" id="298e4301-7120-46a3-bd38-17758992edcc">
              <con:configuration>
                <scriptText>assert messageExchange.hasResponse() == false</scriptText>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters><entry key="refContrat" value="${Preparation#RefContrat}" xmlns="http://eviware.com/soapui/config"/></con:parameters>
          </con:restRequest>
        </con:config>
      </con:testStep>
      <con:testStep type="restrequest" name="Creer Réduction Frais de résiliation" id="ba66cf69-2145-476b-9be9-43a88ca226e2">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/{refContrat}/reduction/ajouter" methodName="Ajouter Sur Contrat" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="Creer Réduction Frais de résiliation" mediaType="application/json" postQueryString="false" id="94da1623-685a-48f6-8aaf-4b3a4e9be482">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>            
{
  "user" : "test",
  "reduction":{
    "typeReduction": "FRAIS",
    "typeValeur": "POURCENTAGE",
    "nbUtilisationMax": "1",
    "valeur": "100",
    "typeFrais":"RESILIATION"
  }
}</con:request>
            <con:originalUri>http://10.10.2.52/contrat-core/contrat//reduction/ajouter</con:originalUri><con:assertion type="GroovyScriptAssertion" name="No Msg Return" id="4658f94a-14c5-4446-85e5-f9086f81ebd5">
              <con:configuration>
                <scriptText>assert messageExchange.hasResponse() == false</scriptText>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters><entry key="refContrat" value="${Preparation#RefContrat}" xmlns="http://eviware.com/soapui/config"/></con:parameters>
          </con:restRequest>
        </con:config>
      </con:testStep>
      <con:testStep type="restrequest" name="Creer Réduction Frais de migration" id="f8b7d0e3-01d8-4a86-beec-870cf179ed7c">
        <con:settings/>
        <con:config service="http://10.10.2.52:8080" resourcePath="/contrat-core/contrat/{refContrat}/reduction/ajouter" methodName="Ajouter Sur Contrat" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
          <con:restRequest name="Creer Réduction Frais de migration" mediaType="application/json" postQueryString="false" id="94da1623-685a-48f6-8aaf-4b3a4e9be482">
            <con:settings>
              <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
            </con:settings>
            <con:endpoint>http://10.10.2.52:8080</con:endpoint>
            <con:request>{
  "user" : "test",
  "reduction":{
    "typeReduction": "FRAIS",
    "typeValeur": "POURCENTAGE",
    "nbUtilisationMax": "1",
    "valeur": "100",
    "typeFrais":"MIGRATION"
  }
}</con:request>
            <con:originalUri>http://10.10.2.52/contrat-core/contrat//reduction/ajouter</con:originalUri><con:assertion type="GroovyScriptAssertion" name="No Msg Return" id="29668bd5-26f3-4dfb-bb0d-e09a95fc77fb">
              <con:configuration>
                <scriptText>assert messageExchange.hasResponse() == false</scriptText>
              </con:configuration>
            </con:assertion>
            <con:credentials>
              <con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType>
            </con:credentials>
            <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
            <con:jmsPropertyConfig/>
            <con:parameters><entry key="refContrat" value="${Preparation#RefContrat}" xmlns="http://eviware.com/soapui/config"/></con:parameters>
          </con:restRequest>
        </con:config>
      </con:testStep>
      <con:properties/>
    </con:testCase><con:properties/></con:testSuite><con:properties/>
  <con:wssContainer/>
  <con:oAuth2ProfileContainer/><con:sensitiveInformation/>
</con:soapui-project>