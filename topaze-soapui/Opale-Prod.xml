<?xml version="1.0" encoding="UTF-8"?>
<con:soapui-project activeEnvironment="Default" name="Opale - Prod" resourceRoot="" soapui-version="4.6.4" abortOnError="false" runType="SEQUENTIAL" xmlns:con="http://eviware.com/soapui/config">
	<con:settings/>
	<con:interface xsi:type="con:RestService" wadlVersion="http://wadl.dev.java.net/2009/02" name="http://si2-srv.si-core.nordnet.fr:8080" type="rest" id="cfe86e1d-e112-4c9b-86a3-8c60655bbf39" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
		<con:settings/>
				<con:endpoints>
			<con:endpoint>http://si2-srv.si-core.nordnet.fr:8080</con:endpoint>
		</con:endpoints>
		<con:resource name="Commande" path="/opale-api/commande/" id="461f2217-9971-45c6-bcb7-0aa24a55d338">
			<con:settings/>
			<con:parameters/>
			<con:resource name="Gérer" path="{refCommande}" id="98042571-6f62-4e9e-961c-3921b0b043ce">
				<con:settings/>
				<con:parameters>
					<con:parameter>
						<con:name>refCommande</con:name>
						<con:value>refCommande</con:value>
						<con:style>TEMPLATE</con:style>
						<con:default>refCommande</con:default>
					</con:parameter>
				</con:parameters>
				<con:resource name="Paiement" path="paiement/" id="78c6f37e-f68a-40af-a555-69a08940a23d">
					<con:settings/>
					<con:parameters/>
					<con:resource name="recurrent" path="recurrent" id="c7e42199-2af4-409d-b07f-0be0a2ca4e1d">
						<con:settings/>
						<con:parameters/>
						<con:method name="" method="POST" id="bd2dd00f-c4d6-459a-98a4-adccec13eea8">
							<con:settings/>
							<con:parameters/>
							<con:representation type="REQUEST">
								<con:mediaType>application/json</con:mediaType>
								<con:params/>
							</con:representation>
							<con:representation type="RESPONSE">
								<con:mediaType>application/json</con:mediaType>
								<con:status>200</con:status>
								<con:params/>
								<con:element xmlns:rec="http://si2-srv.si-core.nordnet.fr/opale-api/commande/Cmd-00000008/paiement/recurrent">rec:Response</con:element>
							</con:representation>
							<con:representation type="FAULT">
								<con:mediaType>text/html;charset=utf-8</con:mediaType>
								<con:status>400</con:status>
								<con:params/>
								<con:element>html</con:element>
							</con:representation>
							<con:request name="Mandat SEPA" mediaType="application/json" postQueryString="false" id="433f3ac2-74d2-4355-92be-901c05c2ff9d">
								<con:settings>
									<con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
						</con:settings>
						<con:endpoint>http://si2-srv.si-core.nordnet.fr:8080</con:endpoint>
						<con:request>{
  "rum": "MANDAT-id-14587",
  "modePaiement": "SEPA",
  "auteur": {
    "qui": "SoapUITest"
  }
}</con:request>
						<con:credentials>
							<con:authType>Global HTTP Settings</con:authType>
						</con:credentials>
						<con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
						<con:jmsPropertyConfig/>
						<con:parameters>
							<entry key="refCommande" value="Cmd-00000007" xmlns="http://eviware.com/soapui/config"/>
						</con:parameters>
					</con:request>
				</con:method>
			</con:resource>
			<con:resource name="comptant" path="comptant" id="819aef75-756e-4bd9-9bd6-6ffc60b9f279">
				<con:settings/>
				<con:parameters/>
				<con:method name="" method="POST" id="69396b4b-4fb7-478f-aec8-f0d9fcc449fb">
					<con:settings/>
					<con:parameters/>
					<con:representation type="FAULT">
						<con:mediaType>text/html;charset=utf-8</con:mediaType>
						<con:status>404</con:status>
						<con:params/>
						<con:element>html</con:element>
					</con:representation>
					<con:representation type="REQUEST">
						<con:mediaType>application/json</con:mediaType>
						<con:params/>
					</con:representation>
					<con:representation type="RESPONSE">
						<con:mediaType>application/json</con:mediaType>
						<con:status>200</con:status>
						<con:params/>
						<con:element xmlns:com="http://si2-srv.si-core.nordnet.fr/opale-api/commande/ddtc/paiement/comptant">com:Response</con:element>
					</con:representation>
					<con:representation type="FAULT"><con:mediaType>application/json</con:mediaType><con:status>400</con:status><con:params/><con:element xmlns:com="http://si2-srv.si-core.nordnet.fr/opale-api/commande/Cmd-00000002/paiement/comptant">com:Fault</con:element></con:representation><con:request name="5€ en CB" mediaType="application/json" postQueryString="false" id="23f08764-b335-4aae-97ce-9ae8ca97ed41">
						<con:settings>
							<con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"/>
						</con:settings>
						<con:endpoint>http://si2-srv.si-core.nordnet.fr:8080</con:endpoint>
						<con:request>{
  "modePaiement": "CB",
  "montant": "5",
  "infoPaiement": "123",
  "auteur": {
    "qui": "GRC.WEL-JOHNDOE",
    "canal": "welcome",
    "ip": {
      "ts": "1411654933",
      "ip": "127.0.0.1"
    }
  }
}</con:request>
						<con:credentials>
							<con:authType>Global HTTP Settings</con:authType>
						</con:credentials>
						<con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
						<con:jmsPropertyConfig/>
						<con:parameters>
							<entry key="refCommande" value="" xmlns="http://eviware.com/soapui/config"/>
						</con:parameters>
					</con:request>
				</con:method>
			</con:resource>
		</con:resource>
		<con:resource name="Signature" path="signature" id="87464e0a-20a0-4002-914f-ae22744cf9a1">
			<con:settings/>
			<con:parameters/>
			<con:resource name="{refSignature}" path="{refSignature}" id="49b2f96d-ccb4-42b9-989f-c1d385039b1a">
				<con:settings/>
				<con:parameters>
					<con:parameter>
						<con:name>refSignature</con:name>
						<con:value>refSignature</con:value>
						<con:style>TEMPLATE</con:style>
						<con:default>refSignature</con:default>
					</con:parameter>
				</con:parameters>
				<con:method name="Confirmer" method="POST" id="57a13d54-da89-478c-b2b3-2b86aa24cf8c">
					<con:settings/>
					<con:parameters/>
					<con:request name="OpenTrust" mediaType="application/json" postQueryString="false" id="f4c24631-aeed-4061-ad3f-7ee89c449f84">
						<con:settings>
							<con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"/>
						</con:settings>
						<con:endpoint>http://si2-srv.si-core.nordnet.fr:8080</con:endpoint>
						<con:request>{
  "mode": "OPEN_TRUST",
  "idSignature": "opentrust_dfr2225tr3555",
  "footprint": "e2680542f77606f42f1cb06d6849726af0c6d361da8e53678947fd394133cdcf063d02de5c8e228cdd044b0ac905063f063d1d7a134cf169d19fc684fc629f0a",
  "timestamp": 0.1,
  "auteur": {
    "qui": "GRC.WEL-JOHNDOE",
    "canal": "welcome",
    "ip": {
      "ts": "1411654933",
      "ip": "127.0.0.1"
    }
  }
}</con:request>
						<con:credentials>
							<con:authType>Global HTTP Settings</con:authType>
						</con:credentials>
						<con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
						<con:jmsPropertyConfig/>
						<con:parameters>
							<con:entry key="refSignature" value=""/>
							<con:entry key="refCommande" value=""/>
						</con:parameters>
					</con:request>
				</con:method>
			</con:resource>
			<con:method name="Intention" method="POST" id="812d8f40-9c51-44dd-b8f7-92cfe9478232">
				<con:settings/>
				<con:parameters/>
				<con:request name="OpenTrust" mediaType="application/json" postQueryString="false" id="113ab712-85fd-46b6-aed6-5b73b1c3070c">
					<con:settings>
						<con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"/>
					</con:settings>
					<con:endpoint>http://si2-srv.si-core.nordnet.fr:8080</con:endpoint>
					<con:request>{ mode: "OPEN_TRUST" }</con:request>
					<con:credentials>
						<con:authType>Global HTTP Settings</con:authType>
					</con:credentials>
					<con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
					<con:jmsPropertyConfig/>
					<con:parameters>
						<entry key="refCommande" value="" xmlns="http://eviware.com/soapui/config"/>
					</con:parameters>
				</con:request>
			</con:method>
		</con:resource>


		<con:resource name="Valider" path="valider" id="206a0d4b-8211-498c-b154-264900e21e7c">
			<con:settings/>
			<con:parameters/>
			<con:method name="Method 1" method="POST" id="a27fd6c1-6592-4b42-8167-1376205fe2f4">
				<con:settings/>
				<con:parameters/>
				<con:request name="Request 1" mediaType="application/json" id="fcf9328b-062d-48b7-a727-363addccf4fc" postQueryString="false">
					<con:settings/>
					<con:endpoint>http://si2-srv.si-core.nordnet.fr:8080</con:endpoint>
					<con:request/>
					<con:credentials>
						<con:authType>Global HTTP Settings</con:authType>
					</con:credentials>
					<con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
					<con:jmsPropertyConfig/>
					<con:parameters>
						<entry key="refCommande" value="" xmlns="http://eviware.com/soapui/config"/>
					</con:parameters>
				</con:request>
			</con:method>
		</con:resource>
		<con:resource name="Transformer En Draft" path="transformerEnDraft" id="fb0bf0c4-4be2-407e-b03f-fb2581b2f150">
			<con:settings/>
			<con:parameters/>
			<con:method name="Method 1" method="POST" id="6c952709-501f-4dbf-be26-12bb1db8fd35">
				<con:settings/>
				<con:parameters/>
				<con:request name="Request 1" mediaType="application/json" postQueryString="false" id="3a17ff22-0f48-46eb-b49c-365ca89310f8">
					<con:settings>
						<con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"/>
					</con:settings>
					<con:endpoint>http://si2-srv.si-core.nordnet.fr:8080</con:endpoint>
					<con:request/>
					<con:credentials>
						<con:authType>Global HTTP Settings</con:authType>
					</con:credentials>
					<con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
					<con:jmsPropertyConfig/>
					<con:parameters>
						<entry key="refCommande" value="" xmlns="http://eviware.com/soapui/config"/>
					</con:parameters>
				</con:request>
			</con:method>
		</con:resource>
		<con:resource name="Transformer En Contrat" path="transformerEnContrat" id="578cc95f-c3dc-466e-a932-31f06f0d421d">
			<con:settings/>
			<con:parameters/>
			<con:method name="Method 1" method="POST" id="1f7aed67-85bd-4f65-ab6c-f5ac04bfd74d">
				<con:settings/>
				<con:parameters/>
				<con:representation type="FAULT">
					<con:mediaType>text/html;charset=utf-8</con:mediaType>
					<con:status>404 500</con:status>
					<con:params/>
					<con:element>html</con:element>
				</con:representation>
				<con:representation type="REQUEST">
					<con:mediaType>application/json</con:mediaType>
					<con:params/>
				</con:representation>
				<con:representation type="RESPONSE">
					<con:mediaType>application/json</con:mediaType>
					<con:status>200</con:status>
					<con:params/>
					<con:element xmlns:tran="http://si2-srv.si-core.nordnet.fr/opale-api/commande/Cmd-00000026/transformerEnContrat">tran:Response</con:element>
				</con:representation>
				<con:representation type="FAULT"><con:mediaType>application/json</con:mediaType><con:status>500</con:status><con:params/><con:element xmlns:tran="http://si2-srv.si-core.nordnet.fr/opale-api/commande/Cmd-00000004/transformerEnContrat">tran:Fault</con:element></con:representation><con:request name="Request 1" mediaType="application/json" postQueryString="false" id="3a4ddbdf-02bd-4605-9463-13a3883c38b0">
					<con:settings>
						<con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
			</con:settings>
			<con:endpoint>http://si2-srv.si-core.nordnet.fr:8080</con:endpoint>
			<con:request>{
  "qui": "SoapUITest"
}</con:request>
			<con:credentials>
				<con:authType>Global HTTP Settings</con:authType>
			</con:credentials>
			<con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
			<con:jmsPropertyConfig/>
			<con:parameters>
				<entry key="refCommande" value="" xmlns="http://eviware.com/soapui/config"/>
			</con:parameters>
		</con:request>
	</con:method>
</con:resource>
<con:method name="Récupérer Commande" method="GET" id="c1eccb32-41a3-4355-a1b1-0328c20816b4">
	<con:settings/>
	<con:parameters/>
	<con:request name="Request 1" mediaType="application/json" id="c61eaae2-7a26-4db7-9be8-941f1a3ad4cf">
		<con:settings/>
		<con:endpoint>http://si2-srv.si-core.nordnet.fr:8080</con:endpoint>
		<con:request/>
		<con:credentials>
			<con:authType>Global HTTP Settings</con:authType>
		</con:credentials>
		<con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
		<con:jmsPropertyConfig/>
		<con:parameters>
			<entry key="refCommande" value="" xmlns="http://eviware.com/soapui/config"/>
		</con:parameters>
	</con:request>
</con:method>
</con:resource>
</con:resource>
<con:resource name="Draft" path="/opale-api/draft/" id="bbf399ec-034f-446e-91ac-b9103c86bdbe">
	<con:settings/>
	<con:parameters/>
	<con:resource name="Créer" path="draft/" id="bc67ca1b-f36b-4651-b797-13b7f77c96ba">
		<con:settings/>
		<con:parameters/>
		<con:method name="" method="POST" id="b934bfc8-a2a8-40d4-a203-098bf783c653">
			<con:settings/>
			<con:parameters/>
			<con:representation type="RESPONSE">
				<con:mediaType>application/json</con:mediaType>
				<con:status>200</con:status>
				<con:params/>
				<con:element xmlns:draf="http://si2-srv.si-core.nordnet.fr/opale-api/draft/draft/">draf:Response</con:element>
			</con:representation>
			<con:representation type="REQUEST">
				<con:mediaType>application/json</con:mediaType>
				<con:params/>
			</con:representation>
			<con:representation type="FAULT">
				<con:mediaType>text/html;charset=utf-8</con:mediaType>
				<con:status>400</con:status>
				<con:params/>
				<con:element>html</con:element>
			</con:representation>
			<con:representation type="FAULT"><con:mediaType>application/json</con:mediaType><con:status>500</con:status><con:params/><con:element xmlns:draf="http://si2-srv.si-core.nordnet.fr/opale-api/draft/draft/">draf:Fault</con:element></con:representation><con:request name="Auteur + Ligne + Code Partenaire" mediaType="application/json" postQueryString="false" id="188f5ba5-03d9-4706-baf3-183364103220">
				<con:settings>
					<con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"/>
				</con:settings>
				<con:endpoint>http://si2-srv.si-core.nordnet.fr:8080</con:endpoint>
				<con:request>{
  "geste": "Vente",
  "auteur": {
    "canal": "SoapUI",
    "qui": "Gilles",
    "ip": {
      "ts": "1415292523",
      "ip": "192.168.4.10"
    }
  },
  "codePartenaire": "string",
  "lignes": [
    {
      "offre": {
        "referenceTarif": "avfw.essentiel.1mois",
        "modeFacturation": "PREMIER_MOIS",
        "referenceOffre": "avfw.essentiel",
        "modePaiement": "SEPA",
        "details": [
          {
            "dependDe": null,
            "referenceTarif": "avfw.essentiel.1mois",
            "configurationJson": null,
            "referenceChoix": "avfw.esssentiel.choix",
            "modePaiement": "SEPA",
            "reference": "avfw.esssentiel.choix",
            "referenceSelection": "avfw.esssentiel.selection"
          }
        ]
      }
    }
  ]
}</con:request>
				<con:credentials>
					<con:authType>Global HTTP Settings</con:authType>
				</con:credentials>
				<con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
				<con:jmsPropertyConfig/>
				<con:parameters/>
			</con:request>
		</con:method>
	</con:resource>
	<con:resource name="Gérer" path="{refDraft}" id="1af743fe-df63-4955-9947-becdd957d0a4">
		<con:settings/>
		<con:parameters>
			<con:parameter>
				<con:name>refDraft</con:name>
				<con:value>refDraft</con:value>
				<con:style>TEMPLATE</con:style>
				<con:default>refDraft</con:default>
			</con:parameter>
		</con:parameters>
		<con:resource name="Valider" path="valider" id="829786cf-69e6-42da-aa5f-915a131a508b">
			<con:settings/>
			<con:parameters/>
			<con:method name="" method="POST" id="00bc412f-e0b6-4c78-b5f9-fd0993eff81e">
				<con:settings/>
				<con:parameters/>
				<con:request name="Trame Catalogue" mediaType="application/json" postQueryString="false" id="94b15441-6c4f-4896-be9b-b0482e188084">
					<con:settings>
						<con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"/>
					</con:settings>
					<con:endpoint>http://si2-srv.si-core.nordnet.fr:8080</con:endpoint>
					<con:request/>
					<con:credentials>
						<con:authType>Global HTTP Settings</con:authType>
					</con:credentials>
					<con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
					<con:jmsPropertyConfig/>
					<con:parameters/>
				</con:request>
			</con:method>
		</con:resource>
		<con:resource name="AssocierAuteur" path="associerAuteur" id="c2f416b5-78c6-4a64-997b-b5fac5303651">
			<con:settings/>
			<con:parameters/>
			<con:method name="" method="POST" id="1efa1690-a3af-49c7-9684-022f57eb812b">
				<con:settings/>
				<con:parameters/>
				<con:request name="String" mediaType="application/json" postQueryString="false" id="c7073d6c-5494-4ec9-93a7-2361f2e9942d">
					<con:settings>
						<con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"/>
					</con:settings>
					<con:endpoint>http://si2-srv.si-core.nordnet.fr:8080</con:endpoint>
					<con:request>{
  "canal": "string",
  "qui": "string",
  "ip": {
    "ts": 1234567899,
    "ip": "12.1.1.1"
  }
}</con:request>
					<con:credentials>
						<con:authType>Global HTTP Settings</con:authType>
					</con:credentials>
					<con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
					<con:jmsPropertyConfig/>
					<con:parameters/>
				</con:request>
			</con:method>
		</con:resource>
		<con:resource name="AssocierCodePartenaire" path="associerCodePartenaire" id="87162514-d77a-4027-b1db-b07e2eb8b042">
			<con:settings/>
			<con:parameters/>
			<con:method name="" method="POST" id="c0685618-925d-4492-bd6d-c431166becf0">
				<con:settings/>
				<con:parameters/>
				<con:representation type="REQUEST">
					<con:mediaType>application/json</con:mediaType>
					<con:params/>
				</con:representation>
				<con:representation type="RESPONSE">
					<con:mediaType xsi:nil="true"/>
					<con:status>200</con:status>
					<con:params/>
					<con:element>data</con:element>
				</con:representation>
				<con:representation type="RESPONSE">
					<con:mediaType xsi:nil="true"/>
					<con:status>200</con:status>
					<con:params/>
					<con:element>data</con:element>
				</con:representation>
				<con:request name="testCodePartenaire" mediaType="application/json" postQueryString="false" id="379b82a9-96fa-4d9e-b651-5fd9f917a18c">
					<con:settings>
						<con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"/>
					</con:settings>
					<con:endpoint>http://si2-srv.si-core.nordnet.fr:8080</con:endpoint>
					<con:request>{ "codePartenaire" : "testCodePartenaire" }</con:request>
					<con:credentials>
						<con:authType>Global HTTP Settings</con:authType>
					</con:credentials>
					<con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
					<con:jmsPropertyConfig/>
					<con:parameters/>
				</con:request>
			</con:method>
		</con:resource>
		<con:resource name="AssocierClient" path="associerClient" id="7d7a0a77-0a16-4441-bbc8-285fab7c49b2">
			<con:settings/>
			<con:parameters/>
			<con:method name="" method="POST" id="dffbcdc2-e04f-4845-8ff2-ac3a7b43eec4">
				<con:settings/>
				<con:parameters/>
				<con:representation type="RESPONSE">
					<con:mediaType>application/json</con:mediaType>
					<con:status>200</con:status>
					<con:params/>
					<con:element>data</con:element>
				</con:representation>
				<con:representation type="REQUEST">
					<con:mediaType>application/json</con:mediaType>
					<con:params/>
				</con:representation>
				<con:representation type="FAULT">
					<con:mediaType>text/html;charset=utf-8</con:mediaType>
					<con:status>500</con:status>
					<con:params/>
					<con:element>html</con:element>
				</con:representation>
				<con:representation type="RESPONSE">
					<con:mediaType xsi:nil="true"/>
					<con:status>200</con:status>
					<con:params/>
					<con:element>data</con:element>
				</con:representation>
				<con:request name="Test" mediaType="application/json" postQueryString="false" id="38b51d1d-5695-482c-9841-1a6d768ff30c">
					<con:settings>
						<con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"/>
					</con:settings>
					<con:endpoint>http://si2-srv.si-core.nordnet.fr:8080</con:endpoint>
					<con:request>{
  "souscripteur": {
    "clientId": "id-souscri",
    "adresseId": "adr-souscri"
  },
  "livraison": {
    "clientId": "id-livraison",
    "adresseId": "adr-livraison"
  },
  "facturation": {
    "clientId": "id-facturation",
    "adresseId": "adr-facturation"
  },
  "auteur": {
    "qui": "GRC.WEL-JOHNDOE",
    "canal": "welcome",
    "ip": {
      "ts": "1411654933",
      "ip": "127.0.0.1"
    }
  },
  "user": "SOAP-test"
}</con:request>
					<con:credentials>
						<con:authType>Global HTTP Settings</con:authType>
					</con:credentials>
					<con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
					<con:jmsPropertyConfig/>
					<con:parameters>
						<entry key="refDraft" value="" xmlns="http://eviware.com/soapui/config"/>
					</con:parameters>
				</con:request>
			</con:method>
		</con:resource>
		<con:resource name="TransformerEnCommande" path="transformerEnCommande" id="ea7f376b-159e-4a2b-908d-153317fdd768">
			<con:settings/>
			<con:parameters/>
			<con:method name="" method="POST" id="e0e190f5-9499-44b7-902d-5878222f9640">
				<con:settings/>
				<con:parameters/>
				<con:representation type="REQUEST">
					<con:mediaType>application/json</con:mediaType>
					<con:params/>
				</con:representation>




				<con:representation type="FAULT">
					<con:mediaType>text/html;charset=utf-8</con:mediaType>
					<con:status>400</con:status>
					<con:params/>
					<con:element>html</con:element>
				</con:representation>
				<con:representation type="FAULT">
					<con:mediaType>application/json</con:mediaType>
					<con:status>500</con:status>
					<con:params/>
					<con:element xmlns:tran="http://si2-srv.si-core.nordnet.fr/opale-api/draft/Dra-00000022/transformerEnCommande">tran:Fault</con:element>
				</con:representation>
				<con:representation type="RESPONSE">
					<con:mediaType>application/json</con:mediaType>
					<con:status>200</con:status>
					<con:params/>
					<con:element xmlns:tran="http://si2-srv.si-core.nordnet.fr/opale-api/draft/Dra-00000023/transformerEnCommande">tran:Response</con:element>
				</con:representation>
				<con:request name="Test" mediaType="application/json" postQueryString="false" id="177f022d-cf5c-4d6f-96a4-fd8fef7a3975">
					<con:settings>
						<con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
			</con:settings>
			<con:endpoint>http://si2-srv.si-core.nordnet.fr:8080</con:endpoint>
			<con:request>{
  "trameCatalogue": {
    "offres": [
      {
        "reference": "avfw.essentiel",
        "label": "Securitoo Intégral",
        "gamme": "Antivirus",
        "secteur": "Sécurité",
        "modeFacturation": "DATE_ANNIVERSAIRE",
        "type": "SERVICE",
        "tarifs": [
          {
            "id_tarif": "avfw.essentiel.1mois",
            "prix": 4.17,
            "tva": "S",
            "frequence": 1
          },
          {
            "id_tarif": "avfw.essentiel.3mois",
            "prix": 3.75,
            "tva": "S",
            "frequence": 3
          },
          {
            "id_tarif": "avfw.essentiel.12mois",
            "prix": 40,
            "tva": "S",
            "frequence": 12
          }
        ]
      },
      {
        "reference": "mobileprotection.essentiel.s",
        "label": "Securitoo Mobile",
        "gamme": "Antivirus",
        "secteur": "Sécurité",
        "modeFacturation": "DATE_ANNIVERSAIRE",
        "type": "SERVICE",
        "tarifs": [
          {
            "id_tarif": "securitoo.mobile.1mois",
            "prix": 2.5,
            "tva": "S",
            "frequence": 1
          },
          {
            "id_tarif": "securitoo.mobile.3mois",
            "prix": 6.67,
            "tva": "S",
            "frequence": 3
          },
          {
            "id_tarif": "securitoo.mobile.12mois",
            "prix": 25,
            "tva": "S",
            "frequence": 12
          }
        ]
      }
    ]
  },
  "clientInfo": {
    "souscripteur": {
      "clientId": "11351202",
      "tva": "00",
      "adresseId": "009950162"
    },
    "livraison": {
      "clientId": "11351202",
      "tva": "00",
      "adresseId": "009950162"
    },
    "facturation": {
      "clientId": "11351202",
      "tva": "00",
      "adresseId": "009950162"
    }
  },
  "auteur": {
    "qui": "SoapUITest"
  }
}</con:request>
			<con:credentials>
				<con:authType>Global HTTP Settings</con:authType>
			</con:credentials>
			<con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
			<con:jmsPropertyConfig/>
			<con:parameters>
				<entry key="refDraft" value="" xmlns="http://eviware.com/soapui/config"/>
			</con:parameters>
		</con:request>
	</con:method>
</con:resource>
<con:resource name="CostCalculation" path="costCalculation" id="7ca24cba-2391-41bf-95f8-243ee0cbba52">
	<con:settings/>
	<con:parameters/>
	<con:method name="" method="POST" id="068fc1ed-811c-4330-a182-59abac121987">
		<con:settings/>
		<con:parameters/>
		<con:request name="Test" mediaType="application/json" postQueryString="false" id="99ec64ae-6255-43e6-8591-29237f5f00a1">
			<con:settings>
				<con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"/>
			</con:settings>
			<con:endpoint>http://si2-srv.si-core.nordnet.fr:8080</con:endpoint>
			<con:request/>
			<con:credentials>
				<con:authType>Global HTTP Settings</con:authType>
			</con:credentials>
			<con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
			<con:jmsPropertyConfig/>
			<con:parameters>
				<entry key="refDraft" value="" xmlns="http://eviware.com/soapui/config"/>
			</con:parameters>
		</con:request>
	</con:method>
</con:resource>
<con:resource name="Supprimer" path="supprimer" id="f119df62-d87f-4ee8-8258-3ca8421c91f2">
	<con:settings/>
	<con:parameters/>
	<con:method name="" method="POST" id="f2276804-c9ce-413c-af06-d9f299650488">
		<con:settings/>
		<con:parameters/>
		<con:request name="Auteur" mediaType="application/json" postQueryString="false" id="b8faa533-50aa-4ebf-934d-eec93ad5be96">
			<con:settings>
				<con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"/>
			</con:settings>
			<con:endpoint>http://si2-srv.si-core.nordnet.fr:8080</con:endpoint>
			<con:request>{ "auteur": { "qui": "SoapUITest" } }</con:request>
			<con:credentials>
				<con:authType>Global HTTP Settings</con:authType>
			</con:credentials>
			<con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
			<con:jmsPropertyConfig/>
			<con:parameters>
				<entry key="refDraft" value="" xmlns="http://eviware.com/soapui/config"/>
			</con:parameters>
		</con:request>
	</con:method>
</con:resource>
<con:resource name="Ligne" path="ligne" id="a8b0be7b-c48a-4792-9cfe-35b2e4fdd1ff">
	<con:settings/>
	<con:parameters/>
	<con:resource name="Gérer" path="{refLigne}" id="e3844ddd-a087-4943-b938-ed5a809f4452">
		<con:settings/>
		<con:parameters>
			<con:parameter>
				<con:name>refLigne</con:name>
				<con:value>refLigne</con:value>
				<con:style>TEMPLATE</con:style>
				<con:default>refLigne</con:default>
			</con:parameter>
		</con:parameters>
		<con:resource name="Supprimer" path="supprimer" id="6ff232c9-4f7c-45ed-a671-e2005d598994">
			<con:settings/>
			<con:parameters/>
			<con:method name="Method 1" method="POST" id="65bdfe94-df20-4c18-a574-e1af5976262a">
				<con:settings/>
				<con:parameters/>
				<con:request name="Request 1" mediaType="application/json" postQueryString="false" id="a51af8d9-18a0-4509-a2c9-2b2f7e7427e9">
					<con:settings>
						<con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"/>
					</con:settings>
					<con:endpoint>http://si2-srv.si-core.nordnet.fr:8080</con:endpoint>
					<con:request>{ "auteur": { "qui": "SoapUITest" } }</con:request>
					<con:credentials>
						<con:authType>Global HTTP Settings</con:authType>
					</con:credentials>
					<con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
					<con:jmsPropertyConfig/>
					<con:parameters>
						<entry key="refDraft" value="" xmlns="http://eviware.com/soapui/config"/>
					</con:parameters>
				</con:request>
			</con:method>
		</con:resource>
		<con:resource name="associerReduction" path="associerReduction" id="db5174ea-7fc4-4747-9421-9eed0892ef18">
			<con:settings/>
			<con:parameters/>
			<con:method name="Method 1" method="POST" id="4a66237e-990d-42ed-aeb5-033f9e52a5c3">
				<con:settings/>
				<con:parameters/>
				<con:request name="Request 1" mediaType="application/json" postQueryString="false" id="ad8e1b9e-52fc-4815-aa93-63c32141a77b">
					<con:settings>
						<con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"/>
					</con:settings>
					<con:endpoint>http://si2-srv.si-core.nordnet.fr:8080</con:endpoint>
					<con:request/>
					<con:credentials>
						<con:authType>Global HTTP Settings</con:authType>
					</con:credentials>
					<con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
					<con:jmsPropertyConfig/>
					<con:parameters>
						<con:entry key="refLigne" value=""/>
						<con:entry key="refDraft" value=""/>
					</con:parameters>
				</con:request>
			</con:method>
		</con:resource>
		<con:resource name="Frais - associerReduction" path="frais/{refFrais}/associerReduction" id="a8464bd9-4722-4f4c-a626-a1f98d5ce98a">
			<con:settings/>
			<con:parameters>
				<con:parameter>
					<con:name>refFrais</con:name>
					<con:value>refFrais</con:value>
					<con:style>TEMPLATE</con:style>
					<con:default>refFrais</con:default>
				</con:parameter>
			</con:parameters>
			<con:method name="Method 1" method="GET" id="2604042b-74a2-4bca-a38c-a6ee0c52769b">
				<con:settings/>
				<con:parameters/>
				<con:request name="Request 1" mediaType="application/json" id="048d6092-5ac3-4ecc-af2e-d50a60e2e90c">
					<con:settings/>
					<con:endpoint>http://si2-srv.si-core.nordnet.fr:8080</con:endpoint>
					<con:request/>
					<con:credentials>
						<con:authType>Global HTTP Settings</con:authType>
					</con:credentials>
					<con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
					<con:jmsPropertyConfig/>
					<con:parameters>
						<con:entry key="refFrais" value=""/>
						<con:entry key="refLigne" value=""/>
						<con:entry key="refDraft" value=""/>
					</con:parameters>
				</con:request>
			</con:method>
		</con:resource>
		<con:resource name="Detail - associerReduction" path="detail/{refProduit}/associerReduction" id="108cf886-d7c6-4f46-8f29-74a6a9f4d5c8">
			<con:settings/>
			<con:parameters>
				<con:parameter>
					<con:name>refProduit</con:name>
					<con:value>refProduit</con:value>
					<con:style>TEMPLATE</con:style>
					<con:default>refProduit</con:default>
				</con:parameter>
			</con:parameters>
			<con:method name="Method 1" method="GET" id="21b589cf-ab3a-404c-8886-cd815f57ecd8">
				<con:settings/>
				<con:parameters/>
				<con:request name="Request 1" mediaType="application/json" id="9cd5b3af-384b-42fd-969d-540f57fe6bad">
					<con:settings/>
					<con:endpoint>http://si2-srv.si-core.nordnet.fr:8080</con:endpoint>
					<con:request/>
					<con:credentials>
						<con:authType>Global HTTP Settings</con:authType>
					</con:credentials>
					<con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
					<con:jmsPropertyConfig/>
					<con:parameters>
						<con:entry key="refLigne" value=""/>
						<con:entry key="refDraft" value=""/>
					</con:parameters>
				</con:request>
			</con:method>
		</con:resource>
		<con:resource name="Detail Frais - associerReduction" path="detail/{refProduit}/frais/{refFrais}/associerReduction" id="5f397bae-a3ea-4900-8fc0-77cbda534898">
			<con:settings/>
			<con:parameters>
				<con:parameter>
					<con:name>refProduit</con:name>
					<con:value>refProduit</con:value>
					<con:style>TEMPLATE</con:style>
					<con:default>refProduit</con:default>
				</con:parameter>
				<con:parameter>
					<con:name>refFrais</con:name>
					<con:value>refFrais</con:value>
					<con:style>TEMPLATE</con:style>
					<con:default>refFrais</con:default>
				</con:parameter>
			</con:parameters>
			<con:method name="Method 1" method="GET" id="a68f1668-c007-4e87-b306-e5f349b5ca51">
				<con:settings/>
				<con:parameters/>
				<con:request name="Request 1" mediaType="application/json" id="9bafa6a1-e055-490f-b465-b2e92df3707c">
					<con:settings/>
					<con:endpoint>http://si2-srv.si-core.nordnet.fr:8080</con:endpoint>
					<con:request/>
					<con:credentials>
						<con:authType>Global HTTP Settings</con:authType>
					</con:credentials>
					<con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
					<con:jmsPropertyConfig/>
					<con:parameters>
						<con:entry key="refFrais" value=""/>
						<con:entry key="refLigne" value=""/>
						<con:entry key="refDraft" value=""/>
						<con:entry key="refProduit" value=""/>
					</con:parameters>
					<con:parameterOrder>
						<con:entry>refDraft</con:entry>
						<con:entry>refLigne</con:entry>
						<con:entry>refProduit</con:entry>
						<con:entry>refFrais</con:entry>
					</con:parameterOrder>
				</con:request>
			</con:method>
		</con:resource>
		<con:method name="Récupérer" method="GET" id="e67af5e5-3748-402b-ab60-7b70acfc68a0">
			<con:settings/>
			<con:parameters/>
			<con:request name="Request 1" mediaType="application/json" id="e9451b47-1f63-430d-a3f1-8ed77ed00b4e">
				<con:settings/>
				<con:endpoint>http://si2-srv.si-core.nordnet.fr:8080</con:endpoint>
				<con:request/>
				<con:credentials>
					<con:authType>Global HTTP Settings</con:authType>
				</con:credentials>
				<con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
				<con:jmsPropertyConfig/>
				<con:parameters>
					<entry key="refDraft" value="" xmlns="http://eviware.com/soapui/config"/>
				</con:parameters>
			</con:request>
		</con:method>
		<con:method name="Modifier" method="POST" id="96267f1c-ea3d-43c7-abc7-eed5ea970e76">
			<con:settings/>
			<con:parameters/>
			<con:representation type="REQUEST">
				<con:mediaType>application/json</con:mediaType>
				<con:params/>
			</con:representation>
			<con:representation type="FAULT">
				<con:mediaType>text/html;charset=utf-8</con:mediaType>
				<con:status>400</con:status>
				<con:params/>
				<con:element>html</con:element>
			</con:representation>
			<con:representation type="RESPONSE">
				<con:mediaType xsi:nil="true"/>
				<con:status>200</con:status>
				<con:params/>
				<con:element>data</con:element>
			</con:representation>
			<con:request name="Test" mediaType="application/json" postQueryString="false" id="18835d41-891e-4f96-9c61-e410db8099c1">
				<con:settings>
					<con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"/>
				</con:settings>
				<con:endpoint>http://si2-srv.si-core.nordnet.fr:8080</con:endpoint>
				<con:request>{
  "offre": {
    "referenceTarif": "string",
    "referenceOffre": "string",
    "details": [
      {
        "dependDe": "string",
        "referenceTarif": "string",
        "configurationJson": "string",
        "referenceChoix": "string",
        "referenceSelection": "string"
      }
    ]
  },
  "auteur": {
    "canal": "string",
    "qui": "string",
    "ip": {
      "ts": "Date",
      "ip": "string"
    }
  }
}</con:request>
				<con:credentials>
					<con:authType>Global HTTP Settings</con:authType>
				</con:credentials>
				<con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
				<con:jmsPropertyConfig/>
				<con:parameters>
					<entry key="refDraft" value="" xmlns="http://eviware.com/soapui/config"/>
				</con:parameters>
			</con:request>
		</con:method>
	</con:resource>
	<con:method name="Créer Ligne" method="POST" id="8563e118-d94d-4610-88b3-200d5d1359c3">
		<con:settings/>
		<con:parameters/>
		<con:representation type="FAULT">
			<con:mediaType>text/html;charset=utf-8</con:mediaType>
			<con:status>404</con:status>
			<con:params/>
			<con:element>html</con:element>
		</con:representation>
		<con:representation type="REQUEST">
			<con:mediaType>application/json</con:mediaType>
			<con:params/>
		</con:representation>
		<con:representation type="RESPONSE">
			<con:mediaType>application/json</con:mediaType>
			<con:status>200</con:status>
			<con:params/>
			<con:element xmlns:lig="http://si2-srv.si-core.nordnet.fr/opale-api/draft/Dra-00000005/lignes">lig:Response</con:element>
		</con:representation>
		<con:request name="Request 1" mediaType="application/json" postQueryString="false" id="58a29f71-2148-4113-a3d4-0b4b834b7024">
			<con:settings>
				<con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"/>
			</con:settings>
			<con:endpoint>http://si2-srv.si-core.nordnet.fr:8080</con:endpoint>
			<con:request>[
  {
    "offre": {
      "referenceTarif": "mensuel_jet10_base",
      "referenceOffre": "jet_surf10",
      "details": [
        {
          "referenceChoix": "kitsat",
          "referenceSelection": "kitsat",
          "referenceTarif": "achat_kit_mensuel"
        },
        {
          "referenceChoix": "jet",
          "referenceSelection": "jet",
          "referenceTarif": "achat_kit_mensuel",
          "dependDe": "kitsat"
        }
      ]
    },
    "auteur": {
      "qui": "string",
      "ip": {
        "ip": "127.0.0.1",
        "ts": 1234567894
      },
      "canal": "string"
    }
  }
]</con:request>
			<con:credentials>
				<con:authType>Global HTTP Settings</con:authType>
			</con:credentials>
			<con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
			<con:jmsPropertyConfig/>
			<con:parameters/>
		</con:request>
	</con:method>
</con:resource>
<con:resource name="Associer Reduction" path="associerReduction" id="0ef3f1f3-dd66-47bb-8ae0-278050b3e415">
	<con:settings/>
	<con:parameters/>
	<con:method name="Method 1" method="POST" id="41684ee5-3b34-4b56-a350-e6cf45c632ec">
		<con:settings/>
		<con:parameters/>
		<con:request name="Request 1" mediaType="application/json" postQueryString="false" id="a9290b90-7a79-41f1-a9b3-af9fe3630149">
			<con:settings>
				<con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"/>
			</con:settings>
			<con:endpoint>http://si2-srv.si-core.nordnet.fr:8080</con:endpoint>
			<con:request/>
			<con:credentials>
				<con:authType>Global HTTP Settings</con:authType>
			</con:credentials>
			<con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
			<con:jmsPropertyConfig/>
			<con:parameters/>
		</con:request>
	</con:method>
</con:resource>
<con:resource name="Supprimer Reduction" path="reduction/{refReduction}/supprimer" id="8089f36f-7d26-467d-8970-fa16a3ca3bf3">
	<con:settings/>
	<con:parameters>
		<con:parameter>
			<con:name>refReduction</con:name>
			<con:value>refReduction</con:value>
			<con:style>TEMPLATE</con:style>
			<con:default>refReduction</con:default>
		</con:parameter>
	</con:parameters>
	<con:method name="Method 1" method="POST" id="a21b92c5-08ca-45aa-bdbc-fb71618cc28a">
		<con:settings/>
		<con:parameters/>
		<con:request name="Request 1" mediaType="application/json" postQueryString="false" id="e3360144-7230-4df2-87c3-a1c2b1a74a3c">
			<con:settings>
				<con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"/>
			</con:settings>
			<con:endpoint>http://si2-srv.si-core.nordnet.fr:8080</con:endpoint>
			<con:request/>
			<con:credentials>
				<con:authType>Global HTTP Settings</con:authType>
			</con:credentials>
			<con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
			<con:jmsPropertyConfig/>
			<con:parameters>
				<entry key="refDraft" value="" xmlns="http://eviware.com/soapui/config"/>
			</con:parameters>
		</con:request>
	</con:method>
</con:resource>

<con:method name="Récupérer" method="GET" id="9d67a7f0-4f5c-4a01-b40f-8ad38acc19ba">
	<con:settings/>
	<con:parameters/>
	<con:request name="By Référence" mediaType="application/json" id="5d9eabc1-e494-4d96-b525-84db91b43f09">
		<con:settings/>
		<con:endpoint>http://si2-srv.si-core.nordnet.fr:8080</con:endpoint>
		<con:request/>
		<con:credentials>
			<con:authType>Global HTTP Settings</con:authType>
		</con:credentials>
		<con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
		<con:jmsPropertyConfig/>
		<con:parameters/>
	</con:request>
</con:method>
</con:resource>
<con:resource name="Get From Contrat" path="contrat/{refContrat}" id="645eef3c-7575-47a7-bdc9-0bde3a3a293b">
	<con:settings/>
	<con:parameters>
		<con:parameter>
			<con:name>refContrat</con:name>
			<con:value>refContrat</con:value>
			<con:style>TEMPLATE</con:style>
			<con:default>refContrat</con:default>
		</con:parameter>
	</con:parameters>
	<con:method name="" method="GET" id="f6f711c0-a391-44a2-afa2-ad3b7a9bc688">
		<con:settings/>
		<con:parameters/>
		<con:request name="Test" mediaType="application/json" id="8c1cf9bf-c7ae-4cdb-bc34-e9b6295897ce">
			<con:settings>
				<con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"/>
			</con:settings>
			<con:endpoint>http://si2-srv.si-core.nordnet.fr:8080</con:endpoint>
			<con:request/>
			<con:credentials>
				<con:authType>Global HTTP Settings</con:authType>
			</con:credentials>
			<con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
			<con:jmsPropertyConfig/>
			<con:parameters>
				<entry key="refContrat" value="" xmlns="http://eviware.com/soapui/config"/>
			</con:parameters>
		</con:request>
	</con:method>
</con:resource>
</con:resource>
</con:interface>
<con:testSuite name="opale-test-suite" id="ebc3444d-17a0-4df2-bfeb-331539e4ca8d">
	<con:description>TestSuite generated for REST Service [http://si2-srv.si-core.nordnet.fr:8080]</con:description>
	<con:settings/>
	<con:runType>SEQUENTIAL</con:runType>
	<con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Creation Draft" searchProperties="true" id="9407c3c9-ed7e-4957-af85-ffe5df2c581a">
		<con:settings/>
		<con:testStep type="properties" name="properties" id="7f1e9051-b785-4b1d-9fe6-155a30a6f6ee">
			<con:settings/>
			<con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
				<con:properties>
					<con:property>
						<con:name>refDraft</con:name>
						<con:value>Dra-00000015</con:value>
					</con:property>
					<con:property>
						<con:name>idDraft</con:name>
						<con:value>15</con:value>
					</con:property>
					<con:property>
						<con:name>refCommande</con:name>
						<con:value xsi:nil="true"/>
					</con:property>
					<con:property>
						<con:name>refLigne</con:name>
						<con:value>00000014</con:value>
					</con:property>
				</con:properties>
			</con:config>
		</con:testStep>
		<con:testStep type="groovy" name="Vider Les Properietes" id="d5c46cca-89a9-4e19-a0e0-7ccce063cad8">
			<con:settings/>
			<con:config>
				<script>testRunner.testCase.testSteps["properties"].setPropertyValue("refCommande", null) 
								   testRunner.testCase.testSteps["properties"].setPropertyValue("refDraft", null) 
								   testRunner.testCase.testSteps["properties"].setPropertyValue("idDraft", null) 
								   testRunner.testCase.testSteps["properties"].setPropertyValue("refLigne", null) 

								   def project = testRunner.testCase.testSuite.project.workspace.getProjectByName("Opale - test") 
								   def tCase = testRunner.testCase.setPropertyValue("refCommande", null)
				</script>
			</con:config>
		</con:testStep>
		<con:testStep type="restrequest" name="Creation Draft" id="56f5d157-b733-4a26-86f0-391fc0433192">
			<con:settings/>
			<con:config service="http://si2-srv.si-core.nordnet.fr:8080" resourcePath="/opale-api/draft/draft/" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
				<con:restRequest name="Creation Draft" mediaType="application/json" postQueryString="false">
					<con:settings>
						<con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"/>
					</con:settings>
					<con:endpoint>http://si2-srv.si-core.nordnet.fr:8080</con:endpoint>
					<con:request>{
  "auteur": {
    "canal": "SoapUI",
    "qui": "Gilles",
    "ip": {
      "ts": "1415292523",
      "ip": "192.168.4.10"
    }
  }
}</con:request>
					<con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="ebc3fb6e-0f28-4226-acce-a26ddf863dac">
						<con:configuration>
							<codes>200</codes>
						</con:configuration>
					</con:assertion>
					<con:assertion type="XPath Match" name="Reference Is Not Null" id="84990342-4ee8-46f9-aaba-8d3d2653bc1f">
						<con:configuration>
							<path>declare namespace ns1='http://si2-srv.si-core.nordnet.fr/opale-api/draft/draft/'; exists(//ns1:reference)</path>
							<content>true</content>
							<allowWildcards>false</allowWildcards>
							<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
							<ignoreComments>false</ignoreComments>
						</con:configuration>
					</con:assertion>
					<con:credentials>
						<con:authType>Global HTTP Settings</con:authType>
					</con:credentials>
					<con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
					<con:jmsPropertyConfig/>
					<con:parameters/>
				</con:restRequest>
			</con:config>
		</con:testStep>
		<con:testStep type="groovy" name="Transfert ref draft" id="11e7e6d4-25fe-425d-b24e-b4b655b9090a">
			<con:settings/>
			<con:config>
				<script>import groovy.json.JsonSlurper

def responseContent = testRunner.testCase.getTestStepByName("Creation Draft").getPropertyValue("response") 
def jsonSlurper = new JsonSlurper().parseText(responseContent) 
testRunner.testCase.testSteps["properties"].setPropertyValue("refDraft", jsonSlurper.reference) 

log.info jsonSlurper.reference</script>
			</con:config>
		</con:testStep>
		<con:testStep type="jdbc" name="DraftCreated" id="c246b1cc-d445-49d3-bef7-e6a251120d6a">
			<con:settings/>
			<con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
				<con:driver>com.mysql.jdbc.Driver</con:driver>
				<con:connectionString>jdbc:mysql://mysql-bddclients.securitoo.com:3306/topaze?user=gmasy&amp;password=drftgyh8</con:connectionString>
				<con:query>select * from draft 
where reference = "${properties#refDraft}"</con:query>
				<con:assertion type="Simple Contains" name="id must exists">
					<con:configuration>
						<token/>
						<ignoreCase>false</ignoreCase>
						<useRegEx>false</useRegEx>
					</con:configuration>
				</con:assertion>

				<con:properties/>
			</con:config>
		</con:testStep>
		<con:testStep type="transfer" name="Transfert Id Draft" id="d7312df2-6c10-48ca-af5d-496c23eb9128">
			<con:settings/>
			<con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
				<con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false">
					<con:name>idDraft</con:name>
					<con:sourceType>ResponseAsXml</con:sourceType>
					<con:sourceStep>DraftCreated</con:sourceStep>
					<con:sourcePath>//ResultSet/Row[1]/DRAFT.ID</con:sourcePath>
					<con:targetType>idDraft</con:targetType>
					<con:targetStep>properties</con:targetStep>
				</con:transfers>
			</con:config>
		</con:testStep>
		<con:testStep type="restrequest" name="Associer Client" id="f9e0b568-f289-4590-94a1-6bf3549743bc">
			<con:settings/>
			<con:config service="http://si2-srv.si-core.nordnet.fr:8080" resourcePath="/opale-api/draft/{refDraft}/associerClient" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
				<con:restRequest name="Associer Client" mediaType="application/json" postQueryString="false">
					<con:settings>
						<con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"/>
					</con:settings>
					<con:endpoint>http://si2-srv.si-core.nordnet.fr:8080</con:endpoint>
					<con:request>{
  "souscripteur": {
    "clientId": "id-souscri",
    "adresseId": "adr-souscri"
  },
  "livraison": {
    "clientId": "id-livraison",
    "adresseId": "adr-livraison"
  },
  "facturation": {
    "clientId": "id-facturation",
    "adresseId": "adr-facturation"
  },
  "auteur": {
    "qui": "SoapUITest"
  }
}</con:request>
					<con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="f83944e3-7a40-4f70-82e9-5ae1415ff7a5">
						<con:configuration>
							<codes>200</codes>
						</con:configuration>
					</con:assertion>
					<con:assertion type="GroovyScriptAssertion" name="Response must be empty" id="8be68ae9-44aa-4619-a8af-c18a85f274c9">
						<con:configuration>
							<scriptText>assert messageExchange.hasResponse() == false</scriptText>
						</con:configuration>
					</con:assertion>
					<con:credentials>
						<con:authType>Global HTTP Settings</con:authType>
					</con:credentials>
					<con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
					<con:jmsPropertyConfig/>
					<con:parameters>
						<entry key="refDraft" value="${properties#refDraft}" xmlns="http://eviware.com/soapui/config"/>
					</con:parameters>
				</con:restRequest>
			</con:config>
		</con:testStep>
		<con:testStep type="jdbc" name="Client valid" id="605eba32-7980-42a7-9fe1-092d816144fd">
			<con:settings/>
			<con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
				<con:driver>com.mysql.jdbc.Driver</con:driver>
				<con:connectionString>jdbc:mysql://mysql-bddclients.securitoo.com:3306/topaze?user=gmasy&amp;password=drftgyh8</con:connectionString>
				<con:query>select * from draft where reference = "${properties#refDraft}"</con:query>
				<con:assertion type="Simple Contains" name="Souscription client">
					<con:configuration>
						<token/>
						<ignoreCase>false</ignoreCase>
						<useRegEx>false</useRegEx>
					</con:configuration>
				</con:assertion>
				<con:assertion type="Simple Contains" name="Livraison Client">
					<con:configuration>
						<token/>
						<ignoreCase>false</ignoreCase>
						<useRegEx>false</useRegEx>
					</con:configuration>
				</con:assertion>
				<con:assertion type="Simple Contains" name="Facture client">
					<con:configuration>
						<token/>
						<ignoreCase>false</ignoreCase>
						<useRegEx>false</useRegEx>
					</con:configuration>
				</con:assertion>
				<con:properties/>
			</con:config>
		</con:testStep>
		<con:testStep type="restrequest" name="Add Ligne" id="dca22ce6-4636-40c8-aeec-da93f74c6b6f">
			<con:settings/>
			<con:config service="http://si2-srv.si-core.nordnet.fr:8080" resourcePath="/opale-api/draft/{refDraft}/ligne" methodName="Créer Ligne" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
				<con:restRequest name="Add Ligne" mediaType="application/json" postQueryString="false">
					<con:settings>
						<con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
			</con:settings>
			<con:endpoint>http://si2-srv.si-core.nordnet.fr:8080</con:endpoint>
			<con:request>[
  {
    "geste": "VENTE",
    "offre": {
      "referenceTarif": "mensuel_jet10_base",
      "referenceOffre": "jet_surf10",
      "details": [
        {
          "referenceSelection": "kit.sat.selection",
          "referenceChoix": "kitsat",
          "referenceTarif": "achat_kit_mensuel"
        },
        {
          "referenceSelection": "jet.selection",
          "referenceChoix": "jet",
          "referenceTarif": "jet_mensuel",
          "dependDe": "kitsat"
        }
      ]
    },
    "auteur": {
      "qui": "string",
      "ip": {
        "ip": "127.0.0.1",
        "ts": 1234567894
      },
      "canal": "string"
    }
  }
]</con:request>
			<con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="d97f909c-3197-4299-b5d3-e3e46f6e46d9">
				<con:configuration>
					<codes>200</codes>
				</con:configuration>
			</con:assertion>
			<con:assertion type="XPath Match" name="Ref Ligne Is Not Null" id="5496ecac-7583-4179-8d17-26adcd2d6b3f">
				<con:configuration>
					<path>declare namespace ns1='http://si2-srv.si-core.nordnet.fr/opale-api/draft/${properties#refDraft}/ligne'; exists(//ns1:numero/ns1:e/text())</path>
					<content>true</content>
					<allowWildcards>false</allowWildcards>
					<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
					<ignoreComments>false</ignoreComments>
				</con:configuration>
			</con:assertion>
			<con:credentials>
				<con:authType>Global HTTP Settings</con:authType>
			</con:credentials>
			<con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
			<con:jmsPropertyConfig/>
			<con:parameters>
				<entry key="refDraft" value="${properties#refDraft}" xmlns="http://eviware.com/soapui/config"/>
			</con:parameters>
		</con:restRequest>
	</con:config>
</con:testStep>
<con:testStep type="jdbc" name="line valid" id="d76cadf8-04d6-40ca-9b56-c71ec829c241">
	<con:settings/>
	<con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
		<con:driver>com.mysql.jdbc.Driver</con:driver>
		<con:connectionString>jdbc:mysql://mysql-bddclients.securitoo.com:3306/topaze?user=gmasy&amp;password=drftgyh8</con:connectionString>
		<con:query>select * from draftligne where draftId in 
(select id from draft 
  where reference = "${properties#refDraft}"
)</con:query>


		<con:assertion type="XPath Match" name="1 result">
			<con:configuration>
				<path>count(//Row)</path>
				<content>1</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:properties/>
	</con:config>
</con:testStep>
<con:testStep type="transfer" name="Transfert Ref Ligne" id="1ad9e545-3003-43a1-9071-953af81be0d9">
	<con:settings/>
	<con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
		<con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false">
			<con:name>refLigne</con:name>
			<con:sourceType>ResponseAsXml</con:sourceType>
			<con:sourceStep>Add Ligne</con:sourceStep>
			<con:sourcePath>declare namespace ns1='http://si2-srv.si-core.nordnet.fr/opale-api/draft/${properties#refDraft}/ligne'; 
//ns1:numero/ns1:e/text()</con:sourcePath>
			<con:targetType>refLigne</con:targetType>
			<con:targetStep>properties</con:targetStep>
		</con:transfers>
	</con:config>
</con:testStep>
<con:testStep type="restrequest" name="Modify Ligne" id="b4d57fc8-b5c9-4412-8019-71e1bd2c48ef">
	<con:settings/>
	<con:config service="http://si2-srv.si-core.nordnet.fr:8080" resourcePath="/opale-api/draft/{refDraft}/ligne/{refLigne}" methodName="Modifier" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
		<con:restRequest name="Modify Ligne" mediaType="application/json" postQueryString="false">
			<con:settings>
				<con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"/>
			</con:settings>
			<con:endpoint>http://si2-srv.si-core.nordnet.fr:8080</con:endpoint>
			<con:request>{
  "geste": "VENTE",
  "offre": {
    "referenceTarif": "mensuel_jet10_base",
    "referenceOffre": "jet_surf10",
    "details": [
      {
        "referenceChoix": "kitsat",
        "referenceSelection": "kitsat",
        "referenceTarif": "achat_kit_mensuel"
      },
      {
        "referenceChoix": "jet",
        "referenceSelection": "jet",
        "referenceTarif": "achat_kit_mensuel",
        "dependDe": "kitsat"
      }
    ]
  },
  "auteur": {
    "qui": "SoapUITest"
  }
}</con:request>
			<con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="86e8b50f-9ace-451d-9013-be9d8a86105b">
				<con:configuration>
					<codes>200</codes>
				</con:configuration>
			</con:assertion>
			<con:assertion type="GroovyScriptAssertion" name="Response must be empty" id="d9071a4b-e7ba-4506-ae9f-08dc74822a23">
				<con:configuration>
					<scriptText>assert messageExchange.hasResponse() == false</scriptText>
				</con:configuration>
			</con:assertion>
			<con:credentials>
				<con:authType>Global HTTP Settings</con:authType>
			</con:credentials>
			<con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
			<con:jmsPropertyConfig/>
			<con:parameters>
				<con:entry key="refLigne" value="${properties#refLigne}"/>
				<con:entry key="refDraft" value="${properties#refDraft}"/>
			</con:parameters>
		</con:restRequest>
	</con:config>
</con:testStep>
<con:testStep type="jdbc" name="Line Modified valid" id="89db8446-f44c-4ed3-9e8a-8fcc4a05486c">
	<con:settings/>
	<con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
		<con:driver>com.mysql.jdbc.Driver</con:driver>
		<con:connectionString>jdbc:mysql://mysql-bddclients.securitoo.com:3306/topaze?user=gmasy&amp;password=drftgyh8</con:connectionString>
		<con:query>select * from draftligne where draftId in (select id from draft where reference = "${properties#refDraft}")</con:query>
		<con:assertion type="XPath Match" name="Change Tarif OK">
			<con:configuration>
				<path>//Row/DRAFTLIGNE.REFERENCETARIF/text()</path>
				<content>mensuel_jet10_base</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:properties/>
	</con:config>
</con:testStep>
<con:testStep type="jdbc" name="Line Deleted Valid" disabled="true" id="6f6a7cf6-678c-4921-9e50-e914e48747a2">
	<con:settings/>
	<con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
		<con:driver>com.mysql.jdbc.Driver</con:driver>
		<con:connectionString>jdbc:mysql://mysql-bddclients.securitoo.com:3306/topaze?user=gmasy&amp;password=drftgyh8</con:connectionString>
		<con:query>select * from draftligne where draftId in (select id from draft where reference = "${properties#refDraft}")</con:query>
		<con:assertion type="XPath Match" name="0 Ligne">
			<con:configuration>
				<path>count(//Row)</path>
				<content>0</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:properties/>
	</con:config>
</con:testStep>
<con:testStep type="restrequest" name="Associer Code Partenaire" id="d5afd257-1fdd-4c1d-aded-50cb3cb3fb36">
	<con:settings/>
	<con:config service="http://si2-srv.si-core.nordnet.fr:8080" resourcePath="/opale-api/draft/{refDraft}/associerCodePartenaire" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
		<con:restRequest name="Associer Code Partenaire" mediaType="application/json" postQueryString="false">
			<con:settings>
				<con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"/>
			</con:settings>
			<con:endpoint>http://si2-srv.si-core.nordnet.fr:8080</con:endpoint>
			<con:request>{ "codePartenaire" : "testCodePartenaire" }</con:request>
			<con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="05e611a9-d832-4289-920b-41c390d1ce5f">
				<con:configuration>
					<codes>200</codes>
				</con:configuration>
			</con:assertion>
			<con:assertion type="GroovyScriptAssertion" name="Response must be empty" id="5c5beac6-12c3-45ef-8b37-4af659dc99b8">
				<con:configuration>
					<scriptText>assert messageExchange.hasResponse() == false</scriptText>
				</con:configuration>
			</con:assertion>
			<con:credentials>
				<con:authType>Global HTTP Settings</con:authType>
			</con:credentials>
			<con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
			<con:jmsPropertyConfig/>
			<con:parameters>
				<entry key="refDraft" value="${properties#refDraft}" xmlns="http://eviware.com/soapui/config"/>
			</con:parameters>
		</con:restRequest>
	</con:config>
</con:testStep>
<con:testStep type="jdbc" name="CodePartenaire Valid" id="0546ef16-87d8-4dbf-977e-1441e25d05ae">
	<con:settings/>
	<con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
		<con:driver>com.mysql.jdbc.Driver</con:driver>
		<con:connectionString>jdbc:mysql://mysql-bddclients.securitoo.com:3306/topaze?user=gmasy&amp;password=drftgyh8</con:connectionString>
		<con:query>select * from draft where reference = "${properties#refDraft}"</con:query>
		<con:assertion type="XPath Match" name="Code Partenaire">
			<con:configuration>
				<path>//Row/DRAFT.CODEPARTENAIRE/text()</path>
				<content>testCodePartenaire</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:properties/>
	</con:config>
</con:testStep>
<con:testStep type="restrequest" name="TransformerEnCommande" id="b10bf906-7e8c-4c36-be0b-01ad5f5a17dc">
	<con:settings/>
	<con:config service="http://si2-srv.si-core.nordnet.fr:8080" methodName="" resourcePath="/opale-api/draft/{refDraft}/transformerEnCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
		<con:restRequest name="TransformerEnCommande" mediaType="application/json" postQueryString="false">
			<con:settings>
				<con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
	</con:settings>
	<con:encoding>UTF-8</con:encoding>
	<con:endpoint>http://si2-srv.si-core.nordnet.fr:8080</con:endpoint>
	<con:request>{
  "trameCatalogue": {
    "offres": [
      {
        "reference": "jet_surf10",
        "label": "Jet Surf 10Go",
        "gamme": "Satellite",
        "secteur": "ISP",
        "modeFacturation": "PREMIER_MOIS",
        "type": "SERVICE",
        "tarifs": [
          {
            "id_tarif": "mensuel_jet10_base",
            "prix": 40,
            "frequence": 1,
            "tva": "R"
          }
        ],
        "details": [
          {
            "referenceSelection": "kit.sat.selection",
            "label": "Kit Satellite",
            "required": true,
            "type": "BIEN",
            "choices": [
              {
                "reference": "kitsat",
                "label": "Securitoo Integral",
                "tarifs": [
                  {
                    "id_tarif": "achat_kit_mensuel",
                    "prix": 10,
                    "frequence": 1,
                    "tva": "R"
                  }
                ]
              }
            ]
          },
          {
            "referenceSelection": "jet.selection",
            "label": "Connexion Jet",
            "required": true,
            "type": "SERVICE",
            "dependDe": "kit.sat.selection",
            "choices": [
              {
                "reference": "jet",
                "label": "Connexion Jet",
                "tarifs": [
                  {
                    "id_tarif": "jet_mensuel",
                    "prix": 10,
                    "frequence": 1,
                    "tva": "R"
                  }
                ]
              }
            ]
          }
        ]
      }
    ]
  },
  "clientInfo": {
    "souscripteur": {
      "clientId": "id-souscri",
      "adresseId": "adr-souscri"
    },
    "livraison": {
      "clientId": "id-livraison",
      "adresseId": "adr-livraison"
    },
    "facturation": {
      "clientId": "id-facturation",
      "adresseId": "adr-facturation"
    }
  },
  "auteur": {
    "qui": "SoapUITest"
  }
}</con:request>
	<con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="aeac3ba2-12d0-4c60-93b6-6af8c83c70ac">
		<con:configuration>
			<codes>200</codes>
		</con:configuration>
	</con:assertion>
	<con:assertion type="Simple NotContains" name="Not Contains" id="5f387330-ad46-4318-8c3d-f9dd5e3e1850">
		<con:configuration>
			<token>reasons</token>
			<ignoreCase>false</ignoreCase>
			<useRegEx>false</useRegEx>
		</con:configuration>
	</con:assertion>
	<con:credentials>
		<con:authType>Global HTTP Settings</con:authType>
	</con:credentials>
	<con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
	<con:jmsPropertyConfig/>
	<con:parameters>
		<entry key="refDraft" value="${properties#refDraft}" xmlns="http://eviware.com/soapui/config"/>
	</con:parameters>
</con:restRequest>
</con:config>
</con:testStep>
<con:testStep type="groovy" name="Transfert ref commande" id="ad6b1fef-2c61-46b9-872a-db21806fb224">
	<con:settings/>
	<con:config>
		<script>import groovy.json.JsonSlurper 
def responseContent = testRunner.testCase.getTestStepByName("TransformerEnCommande").getPropertyValue("response") 
def jsonSlurper = new JsonSlurper().parseText(responseContent) 
//transfert de la reference commande en variable 'Creation Commande'.refCommande, c'est la variable du test case. 
testRunner.testCase.setPropertyValue("refCommande", jsonSlurper.reference) 

log.info jsonSlurper.reference</script>
	</con:config>
</con:testStep>
<con:properties>
	<con:property>
		<con:name>refCommande</con:name>
		<con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
	</con:property>
</con:properties>
</con:testCase>
<con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Signature Commande" searchProperties="true" id="9b1e2d7f-e507-4128-8dce-adebf9a82ddd">
	<con:description>TestCase generated for REST Resource [draft] located at [/opale-api/draft/draft]</con:description>
	<con:settings/>
	<con:testStep type="calltestcase" name="Creation Commande" id="5c9db92d-9bf4-4528-9f94-ad946eba6570">
		<con:settings/>
		<con:config xsi:type="con:RunTestCaseStep" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
			<con:targetTestCase>9407c3c9-ed7e-4957-af85-ffe5df2c581a</con:targetTestCase>
			<con:properties>
				<con:property>
					<con:name>refCommande</con:name>
					<con:value>Cmd-00000002</con:value>
				</con:property>
			</con:properties>
			<con:returnProperties>
				<con:entry>refCommande</con:entry>
			</con:returnProperties>
			<con:runMode>SINGLETON_AND_WAIT</con:runMode>
		</con:config>
	</con:testStep>
	<con:testStep type="restrequest" name="Intention" id="06b1844f-30d1-403c-8301-cf194c209839">
		<con:settings/>
		<con:config service="http://si2-srv.si-core.nordnet.fr:8080" resourcePath="/opale-api/commande/{refCommande}/signature" methodName="Intention" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
			<con:restRequest name="Intention" mediaType="application/json" postQueryString="false">
				<con:settings>
					<con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"/>
				</con:settings>
				<con:endpoint>http://si2-srv.si-core.nordnet.fr:8080</con:endpoint>
				<con:request>{ mode: "OPEN_TRUST" }</con:request>
				<con:credentials>
					<con:authType>Global HTTP Settings</con:authType>
				</con:credentials>
				<con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
				<con:jmsPropertyConfig/>
				<con:parameters/>
			</con:restRequest>
		</con:config>
	</con:testStep>
	<con:testStep type="transfer" name="Transfert Ref Signature" id="89195f78-a3e7-4669-b6fe-ff1e9506a99c">
		<con:settings/>
		<con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
			<con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false">
				<con:name>Ref Signature</con:name>
				<con:sourceType xsi:nil="true"/>
				<con:sourceStep>#Global#</con:sourceStep>
				<con:sourcePath>declare namespace ns1='http://si2-srv.si-core.nordnet.fr/opale-api/commande/${Creation Draft#refCommande}/signature'; //ns1:signatureReference/text()</con:sourcePath>
				<con:targetType>RefSignature</con:targetType>
				<con:targetStep>InfosSignature</con:targetStep>
			</con:transfers>
		</con:config>
	</con:testStep>
	<con:testStep type="properties" name="InfosSignature" id="a6efd72e-6092-4588-8e5e-304bea3ee1b2">
		<con:settings/>
		<con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
			<con:properties>
				<con:property>
					<con:name>RefSignature</con:name>
					<con:value>00000006</con:value>
				</con:property>
			</con:properties>
		</con:config>
	</con:testStep>
	<con:testStep type="jdbc" name="Intention Valid" id="6522b5c5-9215-4c7d-a46b-1ee9e9d51b0f">
		<con:settings/>
		<con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
			<con:driver>com.mysql.jdbc.Driver</con:driver>
			<con:connectionString>jdbc:mysql://mysql-bddclients.securitoo.com:3306/topaze?user=gmasy&amp;password=drftgyh8</con:connectionString>
			<con:query>select * from signature where reference = "${InfosSignature#RefSignature}"</con:query>
			<con:assertion type="XPath Match" name="Mode = Open_Trust">
				<con:configuration>
					<path>//Row/SIGNATURE.MODE/text()</path>
					<content>OPEN_TRUST</content>
					<allowWildcards>false</allowWildcards>
					<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
					<ignoreComments>false</ignoreComments>
				</con:configuration>
			</con:assertion>
			<con:assertion type="XPath Match" name="Date Intention is not null">
				<con:configuration>
					<path>exists(//Row/SIGNATURE.TIMESTAMPINTENTION/text())</path>
					<content>true</content>
					<allowWildcards>false</allowWildcards>
					<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
					<ignoreComments>false</ignoreComments>
				</con:configuration>
			</con:assertion>
			<con:assertion type="XPath Match" name="Date Signature is null">
				<con:configuration>
					<path>exists(//Row/SIGNATURE.TIMESTAMPSIGNATURE/text())</path>
					<content>false</content>
					<allowWildcards>false</allowWildcards>
					<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
					<ignoreComments>false</ignoreComments>
				</con:configuration>
			</con:assertion>
			<con:assertion type="XPath Match" name="Ref Commande">
				<con:configuration>
					<path>//Row/SIGNATURE.REFERENCECOMMANDE/text()</path>
					<content>${Creation Draft#RefCommande}</content>
					<allowWildcards>false</allowWildcards>
					<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
					<ignoreComments>false</ignoreComments>
				</con:configuration>
			</con:assertion>
			<con:properties/>
		</con:config>
	</con:testStep>
	<con:testStep type="restrequest" name="Confirmation" id="fe8e5f2b-6437-445b-88d2-dceb298aab85">
		<con:settings/>
		<con:config service="http://si2-srv.si-core.nordnet.fr:8080" resourcePath="/opale-api/commande/{refCommande}/signature/{refSignature}" methodName="Confirmer" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
			<con:restRequest name="Confirmation" mediaType="application/json" postQueryString="false">
				<con:settings>
					<con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"/>
				</con:settings>
				<con:endpoint>http://si2-srv.si-core.nordnet.fr:8080</con:endpoint>
				<con:request>{
  "mode": "OPEN_TRUST",
  "idSignature": "opentrust_dfr2225tr3555",
  "footprint": "e2680542f77606f42f1cb06d6849726af0c6d361da8e53678947fd394133cdcf063d02de5c8e228cdd044b0ac905063f063d1d7a134cf169d19fc684fc629f0a",
  "timestamp": 0.1,
  "auteur": {
    "qui": "GRC.WEL-JOHNDOE",
    "canal": "welcome",
    "ip": {
      "ts": "1411654933",
      "ip": "127.0.0.1"
    }
  }
}</con:request>
				<con:credentials>
					<con:authType>Global HTTP Settings</con:authType>
				</con:credentials>
				<con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
				<con:jmsPropertyConfig/>
				<con:parameters>
					<con:entry key="refSignature" value=""/>
					<con:entry key="refCommande" value=""/>
				</con:parameters>
			</con:restRequest>
		</con:config>
	</con:testStep>
	<con:testStep type="jdbc" name="Signature Valid" id="0d47cd99-c576-4125-905d-64ee1694185c">
		<con:settings/>
		<con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
			<con:driver>com.mysql.jdbc.Driver</con:driver>
			<con:connectionString>jdbc:mysql://mysql-bddclients.securitoo.com:3306/topaze?user=gmasy&amp;password=drftgyh8</con:connectionString>
			<con:query>select * from signature where reference = "${InfosSignature#RefSignature}"</con:query>
			<con:assertion type="XPath Match" name="TimeStamp Signature is not null">
				<con:configuration>
					<path>exists(//Row/SIGNATURE.TIMESTAMPSIGNATURE/text())</path>
					<content>true</content>
					<allowWildcards>false</allowWildcards>
					<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
					<ignoreComments>false</ignoreComments>
				</con:configuration>
			</con:assertion>
			<con:assertion type="XPath Match" name="TimeStamp Intention is not null">
				<con:configuration>
					<path>exists(//Row/SIGNATURE.TIMESTAMPINTENTION/text())</path>
					<content>true</content>
					<allowWildcards>false</allowWildcards>
					<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
					<ignoreComments>false</ignoreComments>
				</con:configuration>
			</con:assertion>
			<con:assertion type="XPath Match" name="Ref Commande">
				<con:configuration>
					<path>//Row/SIGNATURE.REFERENCECOMMANDE/text()</path>
					<content>${Creation Draft#RefCommande}</content>
					<allowWildcards>false</allowWildcards>
					<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
					<ignoreComments>false</ignoreComments>
				</con:configuration>
			</con:assertion>
			<con:assertion type="XPath Match" name="Mode = OPEN_TRUST">
				<con:configuration>
					<path>//Row/SIGNATURE.MODE/text()</path>
					<content>OPEN_TRUST</content>
					<allowWildcards>false</allowWildcards>
					<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
					<ignoreComments>false</ignoreComments>
				</con:configuration>
			</con:assertion>
			<con:assertion type="XPath Match" name="FootPrint">
				<con:configuration>
					<path>//Row/SIGNATURE.FOOTPRINT/text()</path>
					<content>e2680542f77606f42f1cb06d6849726af0c6d361da8e53678947fd394133cdcf063d02de5c8e228cdd044b0ac905063f063d1d7a134cf169d19fc684fc629f0a</content>
					<allowWildcards>false</allowWildcards>
					<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
					<ignoreComments>false</ignoreComments>
				</con:configuration>
			</con:assertion>
			<con:assertion type="XPath Match" name="IdSignature">
				<con:configuration>
					<path>//Row/SIGNATURE.IDSIGNATURE/text()</path>
					<content>opentrust_dfr2225tr3555</content>
					<allowWildcards>false</allowWildcards>
					<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
					<ignoreComments>false</ignoreComments>
				</con:configuration>
			</con:assertion>
			<con:properties/>
		</con:config>
	</con:testStep>
	<con:properties/>
</con:testCase>
<con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Paiement" searchProperties="true" id="cbaeb33c-5a56-4b52-a9d0-1fef580984c5">
	<con:settings/>
	<con:testStep type="calltestcase" name="CreerCommande" id="32558ee8-878d-45b3-ac0b-c1bcfcec79cf">
		<con:settings/>
		<con:config xsi:type="con:RunTestCaseStep" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
			<con:targetTestCase>9407c3c9-ed7e-4957-af85-ffe5df2c581a</con:targetTestCase>
			<con:properties>
				<con:property>
					<con:name>refCommande</con:name>
					<con:value xsi:nil="true"/>
				</con:property>
			</con:properties>
			<con:returnProperties>
				<con:entry>refCommande</con:entry>
			</con:returnProperties>
			<con:runMode>SINGLETON_AND_WAIT</con:runMode>
		</con:config>
	</con:testStep>
	<con:testStep type="restrequest" name="Comptant" id="00f9cbfc-a182-4da5-a791-77692cf4bbb6">
		<con:settings/>
		<con:config service="http://si2-srv.si-core.nordnet.fr:8080" resourcePath="/opale-api/commande/{refCommande}/paiement/comptant" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
			<con:restRequest name="Comptant" mediaType="application/json" postQueryString="false">
				<con:settings>
					<con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
		</con:settings>
		<con:endpoint>http://si2-srv.si-core.nordnet.fr:8080</con:endpoint>
		<con:request>{
  "modePaiement": "CB",
  "montant": "5",
  "infoPaiement": "123",
  "auteur": {
    "qui": "GRC.WEL-JOHNDOE"
  }
}</con:request>
		<con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="4aafa7ed-108b-44e6-9edd-43f0b8916c5c">
			<con:configuration>
				<codes>200</codes>
			</con:configuration>
		</con:assertion>
		<con:credentials>
			<con:authType>Global HTTP Settings</con:authType>
		</con:credentials>
		<con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
		<con:jmsPropertyConfig/>
		<con:parameters>
			<entry key="refCommande" value="${CreerCommande#refCommande}" xmlns="http://eviware.com/soapui/config"/>
		</con:parameters>
	</con:restRequest>
</con:config>
</con:testStep>
<con:testStep type="restrequest" name="Recurrent" id="35eda701-ca01-4858-8ebd-5504ffd64d37">
	<con:settings/>
	<con:config service="http://si2-srv.si-core.nordnet.fr:8080" resourcePath="/opale-api/commande/{refCommande}/paiement/recurrent" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
		<con:restRequest name="Recurrent" mediaType="application/json" postQueryString="false">
			<con:settings>
				<con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
	</con:settings>
	<con:endpoint>http://si2-srv.si-core.nordnet.fr:8080</con:endpoint>
	<con:request/>
	<con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="ae94abb8-bfa1-4e83-a2bc-9b13cb5ef915">
		<con:configuration>
			<codes>200</codes>
		</con:configuration>
	</con:assertion>
	<con:credentials>
		<con:authType>Global HTTP Settings</con:authType>
	</con:credentials>
	<con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
	<con:jmsPropertyConfig/>
	<con:parameters>
		<entry key="refCommande" value="" xmlns="http://eviware.com/soapui/config"/>
	</con:parameters>
</con:restRequest>
</con:config>
</con:testStep>
<con:testStep type="jdbc" name="Paiements" id="635f3e7e-06bb-4551-9588-9d2bc55ef030">
	<con:settings/>
	<con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
		<con:driver>com.mysql.jdbc.Driver</con:driver>
		<con:connectionString>jdbc:mysql://mysql-bddclients.securitoo.com:3306/topaze?user=gmasy&amp;password=drftgyh8</con:connectionString>
		<con:query>select * from paiement where referenceCommande = "${Creation Commande#refCommande}"</con:query>
		<con:assertion type="XPath Match" name="2 Paiements">
			<con:configuration>
				<path>count(//Row)</path>
				<content>2</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XQuery Match" name="1 Paiement Recurrent">
			<con:configuration>
				<path> { for $x in //Row[contains(PAIEMENT.TYPEPAIEMENT/text(), 'RECURRENT')] return {$x/PAIEMENT.REFERENCECOMMANDE/text()} } </path>
				<content> ${Creation Commande#refCommande} </content>
				<allowWildcards>false</allowWildcards>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XQuery Match" name="1 Paiement Comptant">
			<con:configuration>
				<path> { for $x in //Row[contains(PAIEMENT.TYPEPAIEMENT/text(), 'COMPTANT')] return {$x/PAIEMENT.REFERENCECOMMANDE/text()} } </path>
				<content> ${Creation Commande#refCommande} </content>
				<allowWildcards>false</allowWildcards>
			</con:configuration>
		</con:assertion>
		<con:properties/>
	</con:config>
</con:testStep>
<con:properties/>
</con:testCase>
<con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Transformer Commande En Draft" searchProperties="true" id="0a3e513b-6e53-4c63-a550-ce88d2174910">
	<con:settings/>
	<con:testStep type="calltestcase" name="Creation Commande" id="75898d4c-6cab-42d5-8427-f7f701f10fca">
		<con:settings/>
		<con:config xsi:type="con:RunTestCaseStep" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
			<con:targetTestCase>9407c3c9-ed7e-4957-af85-ffe5df2c581a</con:targetTestCase>
			<con:properties>
				<con:property>
					<con:name>refCommande</con:name>
					<con:value>Cmd-00000018</con:value>
				</con:property>
			</con:properties>
			<con:returnProperties>
				<con:entry>refCommande</con:entry>
			</con:returnProperties>
			<con:runMode>SINGLETON_AND_WAIT</con:runMode>
		</con:config>
	</con:testStep>
	<con:testStep type="restrequest" name="Transformer" id="8b5642f0-f414-4921-8e19-4e76cd48c5e7">
		<con:settings/>
		<con:config service="http://si2-srv.si-core.nordnet.fr:8080" resourcePath="/opale-api/commande/{refCommande}/transformerEnDraft" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
			<con:restRequest name="Transformer" mediaType="application/json" postQueryString="false">
				<con:settings>
					<con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"/>
				</con:settings>
				<con:endpoint>http://si2-srv.si-core.nordnet.fr:8080</con:endpoint>
				<con:request/>
				<con:credentials>
					<con:authType>Global HTTP Settings</con:authType>
				</con:credentials>
				<con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
				<con:jmsPropertyConfig/>
				<con:parameters/>
			</con:restRequest>
		</con:config>
	</con:testStep>
	<con:properties/>
</con:testCase>
<con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Verifier Si Besoin De Paiement" searchProperties="true" id="0d095b79-599f-4792-a7d7-dcb7bc157582">
	<con:settings/>
	<con:testStep type="calltestcase" name="Creation Commande" id="c6fd5514-ca48-48bd-ab45-130637983358">
		<con:settings/>
		<con:config xsi:type="con:RunTestCaseStep" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
			<con:targetTestCase>9407c3c9-ed7e-4957-af85-ffe5df2c581a</con:targetTestCase>
			<con:properties>
				<con:property>
					<con:name>refCommande</con:name>
					<con:value>Cmd-00000004</con:value>
				</con:property>
			</con:properties>
			<con:returnProperties>
				<con:entry>refCommande</con:entry>
			</con:returnProperties>
			<con:runMode>SINGLETON_AND_WAIT</con:runMode>
		</con:config>
	</con:testStep>


	<con:properties/>
</con:testCase>
<con:properties/>
</con:testSuite>
<con:testSuite name="Tests Unitaires" id="64d7d804-a988-4cb3-ac51-6a093346b4fb">
	<con:settings/>
	<con:runType>SEQUENTIAL</con:runType>
	<con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Auteur.Qui absent" searchProperties="true" id="12df02ef-aa0a-490b-8ad5-a342a7ba5bb8">
		<con:settings/>


		<con:properties/>
	</con:testCase>
	<con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Double Transformation Draft" searchProperties="true" id="269c75fb-4776-446c-98b4-e102939df2e0">
		<con:settings/>
		<con:properties/>
	</con:testCase>
	<con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Double Transformation Commande" searchProperties="true" id="4f699125-cddc-4912-ab61-462b34197fd6">
		<con:settings/>
		<con:properties/>
	</con:testCase>
	<con:properties/>
</con:testSuite>
<con:testSuite name="avfw.essentiel - Vente" id="965f1097-d71a-4b57-aa05-b17830c0747d">
	<con:settings/>
	<con:runType>SEQUENTIAL</con:runType>
	<con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Vente - Gérer les lignes" searchProperties="true" id="506678ef-6bfa-4d1b-8e8b-5ddd11cd3f80">
		<con:settings/>
		<con:testStep type="properties" name="Properties" id="c8fac27b-fb22-48b8-99f6-40045effb35c">
			<con:settings/>
			<con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
				<con:properties>
					<con:property>
						<con:name>RefDraft</con:name>
						<con:value>Dra-00000024</con:value>
					</con:property>
					<con:property>
						<con:name>RefLigne</con:name>
						<con:value xsi:nil="true"/>
					</con:property>
					<con:property>
						<con:name>RefCommande</con:name>
						<con:value xsi:nil="true"/>
					</con:property>
				</con:properties>
			</con:config>
		</con:testStep>
		<con:testStep type="restrequest" name="Creer Draft" id="f50d2efd-b22c-41a8-a569-3b631d39fed6">
			<con:settings/>
			<con:config service="http://si2-srv.si-core.nordnet.fr:8080" resourcePath="/opale-api/draft/draft/" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
				<con:restRequest name="Creer Draft" mediaType="application/json" postQueryString="false" id="188f5ba5-03d9-4706-baf3-183364103220">
					<con:settings>
						<con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
			</con:settings>
			<con:endpoint>http://si2-srv.si-core.nordnet.fr:8080</con:endpoint>
			<con:request>{
  "auteur": {
    "canal": "SoapUI",
    "qui": "Gilles",
    "ip": {
      "ts": 1415292523897,
      "ip": "192.168.4.10"
    }
  },
  "lignes": [
    {
      "geste": "VENTE",
      "offre": {
        "referenceOffre": "avfw.essentiel",
        "referenceTarif": "avfw.essentiel.1mois"
      }
    }
  ]
}</con:request>
			<con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="bc35407c-e49e-4714-894d-cbe1538ee1d0">
				<con:configuration>
					<codes>200</codes>
				</con:configuration>
			</con:assertion>
			<con:assertion type="Simple NotContains" name="Not Contains &quot;error&quot;" id="329167b1-5221-4564-8535-53a466706c0b">
				<con:configuration>
					<token>error</token>
					<ignoreCase>false</ignoreCase>
					<useRegEx>false</useRegEx>
				</con:configuration>
			</con:assertion>
			<con:assertion type="XPath Match" name="Reference Is Not Null" id="1e1b6bc9-18c7-4ea8-9fb2-9cff6ebd842f">
				<con:configuration>
					<path>declare namespace ns1='http://si2-srv.si-core.nordnet.fr/opale-api/draft/draft/';
exists(//ns1:reference/text())</path>
					<content>true</content>
					<allowWildcards>false</allowWildcards>
					<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
					<ignoreComments>false</ignoreComments>
				</con:configuration>
			</con:assertion>
			<con:credentials>
				<con:authType>Global HTTP Settings</con:authType>
			</con:credentials>
			<con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
			<con:jmsPropertyConfig/>
			<con:parameters/>
		</con:restRequest>
	</con:config>
</con:testStep>
<con:testStep type="transfer" name="Property Transfer" id="6e86e101-cef2-4bc5-9950-d9a9a6e43f7f">
	<con:settings/>
	<con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
		<con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false">
			<con:name>refDraft</con:name>
			<con:sourceType>ResponseAsXml</con:sourceType>
			<con:sourceStep>Creer Draft</con:sourceStep>
			<con:sourcePath>declare namespace ns1='http://si2-srv.si-core.nordnet.fr/opale-api/draft/draft/';
//ns1:reference/text()</con:sourcePath>
			<con:targetType>RefDraft</con:targetType>
			<con:targetStep>Properties</con:targetStep>
		</con:transfers>
		<con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true">
			<con:name>refLigne</con:name>
			<con:sourceType>ResponseAsXml</con:sourceType>
			<con:sourceStep>Creer Draft</con:sourceStep>
			<con:sourcePath>declare namespace ns1='http://si2-srv.si-core.nordnet.fr/opale-api/draft/draft'; 
//ns1:referenceLigne[0]/text()</con:sourcePath>
			<con:targetType>RefLigne</con:targetType>
			<con:targetStep>Properties</con:targetStep>
		</con:transfers>
	</con:config>
</con:testStep>
<con:testStep type="restrequest" name="Modify Ligne - hallacon" id="8e6a956f-ca02-4698-a9e1-8656079cdf19">
	<con:settings/>
	<con:config service="http://si2-srv.si-core.nordnet.fr:8080" resourcePath="/opale-api/draft/{refDraft}/ligne/{refLigne}" methodName="Modifier" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
		<con:restRequest name="Modify Ligne - hallacon" mediaType="application/json" postQueryString="false" id="18835d41-891e-4f96-9c61-e410db8099c1">
			<con:settings>
				<con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
	</con:settings>
	<con:endpoint>http://si2-srv.si-core.nordnet.fr:8080</con:endpoint>
	<con:request>{
  "offre": {
    "referenceTarif": "string",
    "referenceOffre": "string"
  },
  "auteur": {
    "qui": "SoapUITest",
  }
}</con:request>
	<con:credentials>
		<con:authType>Global HTTP Settings</con:authType>
	</con:credentials>
	<con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
	<con:jmsPropertyConfig/>
	<con:parameters>
		<con:entry key="refLigne" value="${Properties#RefLigne}"/>
		<con:entry key="refDraft" value="${Properties#RefDraft}"/>
	</con:parameters>
</con:restRequest>
</con:config>
</con:testStep>
<con:testStep type="restrequest" name="Valider - hallacon" id="d8a3b6bd-880a-40ba-b052-e9675d6b44c7">
	<con:settings/>
	<con:config service="http://si2-srv.si-core.nordnet.fr:8080" resourcePath="/opale-api/draft/{refDraft}/valider" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
		<con:restRequest name="Valider - hallacon" mediaType="application/json" postQueryString="false" id="94b15441-6c4f-4896-be9b-b0482e188084">
			<con:settings>
				<con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"/>
			</con:settings>
			<con:endpoint>http://si2-srv.si-core.nordnet.fr:8080</con:endpoint>
			<con:request/>
			<con:credentials>
				<con:authType>Global HTTP Settings</con:authType>
			</con:credentials>
			<con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
			<con:jmsPropertyConfig/>
			<con:parameters/>
		</con:restRequest>
	</con:config>
</con:testStep>
<con:testStep type="restrequest" name="Modify Ligne - Good" id="e68762ad-b669-43e5-bef6-dcd05359a3c8">
	<con:settings/>
	<con:config service="http://si2-srv.si-core.nordnet.fr:8080" resourcePath="/opale-api/draft/{refDraft}/ligne/{refLigne}" methodName="Modifier" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
		<con:restRequest name="Modify Ligne - Good" mediaType="application/json" postQueryString="false" id="18835d41-891e-4f96-9c61-e410db8099c1">
			<con:settings>
				<con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
	</con:settings>
	<con:endpoint>http://si2-srv.si-core.nordnet.fr:8080</con:endpoint>
	<con:request>{
  "offre": {
    "referenceTarif": "avfw.essentiel.1mois",
    "referenceOffre": "avfw.essentiel"
  },
  "auteur": {
    "qui": "SoapUITest",
  }
}</con:request>
	<con:credentials>
		<con:authType>Global HTTP Settings</con:authType>
	</con:credentials>
	<con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
	<con:jmsPropertyConfig/>
	<con:parameters>
		<con:entry key="refLigne" value="${Properties#RefLigne}"/>
		<con:entry key="refDraft" value="${Properties#RefDraft}"/>
	</con:parameters>
</con:restRequest>
</con:config>
</con:testStep>
<con:testStep type="restrequest" name="Valider - Good" id="84edcd82-99f4-459a-9346-7b4113eb5d47">
	<con:settings/>
	<con:config service="http://si2-srv.si-core.nordnet.fr:8080" resourcePath="/opale-api/draft/{refDraft}/valider" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
		<con:restRequest name="Valider - Good" mediaType="application/json" postQueryString="false" id="94b15441-6c4f-4896-be9b-b0482e188084">
			<con:settings>
				<con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"/>
			</con:settings>
			<con:endpoint>http://si2-srv.si-core.nordnet.fr:8080</con:endpoint>
			<con:request/>
			<con:credentials>
				<con:authType>Global HTTP Settings</con:authType>
			</con:credentials>
			<con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
			<con:jmsPropertyConfig/>
			<con:parameters/>
		</con:restRequest>
	</con:config>
</con:testStep>
<con:testStep type="restrequest" name="Get Cout" id="3a678eb2-9334-4ec7-a62e-a10f595a77d9">
	<con:settings/>
	<con:config service="http://si2-srv.si-core.nordnet.fr:8080" resourcePath="/opale-api/draft/{refDraft}/costCalculation" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
		<con:restRequest name="Get Cout" mediaType="application/json" postQueryString="false" id="99ec64ae-6255-43e6-8591-29237f5f00a1">
			<con:settings>
				<con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"/>
			</con:settings>
			<con:endpoint>http://si2-srv.si-core.nordnet.fr:8080</con:endpoint>
			<con:request/>
			<con:credentials>
				<con:authType>Global HTTP Settings</con:authType>
			</con:credentials>
			<con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
			<con:jmsPropertyConfig/>
			<con:parameters>
				<entry key="refDraft" value="${Properties#RefDraft}" xmlns="http://eviware.com/soapui/config"/>
			</con:parameters>
		</con:restRequest>
	</con:config>
</con:testStep>
<con:testStep type="restrequest" name="Transformer en Commande" id="2f40ac61-1c72-4f43-8108-c0f8ca0123df">
	<con:settings/>
	<con:config service="http://si2-srv.si-core.nordnet.fr:8080" resourcePath="/opale-api/draft/{refDraft}/transformerEnCommande" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
		<con:restRequest name="Transformer en Commande" mediaType="application/json" postQueryString="false" id="177f022d-cf5c-4d6f-96a4-fd8fef7a3975">
			<con:settings>
				<con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"/>
			</con:settings>
			<con:endpoint>http://si2-srv.si-core.nordnet.fr:8080</con:endpoint>
			<con:request/>
			<con:credentials>
				<con:authType>Global HTTP Settings</con:authType>
			</con:credentials>
			<con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
			<con:jmsPropertyConfig/>
			<con:parameters>
				<entry key="refDraft" value="${Properties#RefDraft}" xmlns="http://eviware.com/soapui/config"/>
			</con:parameters>
		</con:restRequest>
	</con:config>
</con:testStep>
<con:testStep type="transfer" name="Transfer Ref Commande" id="ce41e832-1ca2-4d9a-bf3f-0dd2fd2790cb">
	<con:settings/>
	<con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
		<con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false">
			<con:name>ref Commande</con:name>
			<con:sourceType>ResponseAsXml</con:sourceType>
			<con:sourceStep>Transformer en Commande</con:sourceStep>
			<con:sourcePath>declare namespace ns1='http://si2-srv.si-core.nordnet.fr/opale-api/draft/${Properties#RefDraft}/transformerEnCommande'; 
//ns1:reference/text()</con:sourcePath>
			<con:targetType>RefCommande</con:targetType>
			<con:targetStep>Properties</con:targetStep>
		</con:transfers>
	</con:config>
</con:testStep>
<con:testStep type="restrequest" name="Associer Paiement Comptant" id="1fb18101-2bbe-4eba-82c4-0b6445db8e21">
	<con:settings/>
	<con:config service="http://si2-srv.si-core.nordnet.fr:8080" resourcePath="/opale-api/commande/{refCommande}/paiement/comptant" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
		<con:restRequest name="Associer Paiement Comptant" mediaType="application/json" postQueryString="false" id="23f08764-b335-4aae-97ce-9ae8ca97ed41">
			<con:settings>
				<con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
	</con:settings>
	<con:endpoint>http://si2-srv.si-core.nordnet.fr:8080</con:endpoint>
	<con:request>{
  "modePaiement": "CB",
  "montant": "5",
  "infoPaiement": "123",
  "auteur": {
    "qui": "SoapUITest",
    "canal": "welcome",
    "ip": {
      "ts": "1411654933",
      "ip": "127.0.0.1"
    }
  }
}</con:request>
	<con:credentials>
		<con:authType>Global HTTP Settings</con:authType>
	</con:credentials>
	<con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
	<con:jmsPropertyConfig/>
	<con:parameters>
		<entry key="refCommande" value="${Properties#RefCommande}" xmlns="http://eviware.com/soapui/config"/>
	</con:parameters>
</con:restRequest>
</con:config>
</con:testStep>
<con:testStep type="delay" name="Wait For Transformation Contrat" id="911122d3-aaa5-4727-a2ea-273df724d90a">
	<con:settings/>
	<con:config>
		<delay>5000</delay>
	</con:config>
</con:testStep>
<con:testStep type="jdbc" name="Contrat" id="aeaf52de-2467-4694-841a-724339d4aa9c">
	<con:settings/>
	<con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
		<con:driver>com.mysql.jdbc.Driver</con:driver>
		<con:connectionString>jdbc:mysql://mysql-bddclients.securitoo.com:3306/topaze?user=gmasy&amp;password=drftgyh8</con:connectionString>
		<con:query>select * from contrat 
where reference = "${InfosContrat#refContrat}"</con:query>

		<con:properties/>
	</con:config>
</con:testStep>
<con:testStep type="goto" name="Contrat Is Valid" id="95f1529f-dfac-4011-9b7e-3ee2f6c5f4f0">
	<con:settings/>
	<con:config xsi:type="con:GotoStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
		<con:condition>
			<con:name>Contrat Valide</con:name>
			<con:type>XPATH</con:type>
			<con:targetStep>Wait For Transformation Contrat</con:targetStep>
		</con:condition>
	</con:config>
</con:testStep>
<con:testStep type="jdbc" name="Contrat Valide" id="d5e7ba12-747a-4ba4-9578-0941884c0e40">
	<con:settings/>
	<con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
		<con:driver>com.mysql.jdbc.Driver</con:driver>
		<con:connectionString>jdbc:mysql://mysql-bddclients.securitoo.com:3306/topaze?user=gmasy&amp;password=drftgyh8</con:connectionString>
		<con:query>select * from contrat 
where reference = "${InfosContrat#refContrat}"</con:query>

		<con:assertion type="XPath Match" name="Date Validation is not null">
			<con:configuration>
				<path>exists(//ResultSet/Row/CONTRAT.DATEVALIDATION/text())</path>
				<content>true</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Id Client = 11351202">
			<con:configuration>
				<path>//ResultSet/Row/CONTRAT.IDCLIENT/text()</path>
				<content>11351202</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Politique Validation is not null">
			<con:configuration>
				<path>exists(//ResultSet/Row/CONTRAT.POLITIQUEVALIDATIONID/text())</path>
				<content>true</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:properties/>
	</con:config>
</con:testStep>
<con:properties/>
</con:testCase>
<con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Vente - Site NNCom - 12 mois - CHEQUE - Montant Juste" searchProperties="true" id="7265c25e-af30-4a24-995e-18075b2992d4">
	<con:settings/>
	<con:testStep type="properties" name="Properties" id="dc502d5e-906b-46f0-9778-c9673175aeb8">
		<con:settings/>
		<con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
			<con:properties>
				<con:property>
					<con:name>RefContrat</con:name>
					<con:value>00000079</con:value>
				</con:property>
			</con:properties>
		</con:config>
	</con:testStep>
	<con:testStep type="calltestcase" name="CreerCommande" id="2332bc3e-8a62-4514-8091-e3b462226a6a">
		<con:settings/>
		<con:config xsi:type="con:RunTestCaseStep" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
			<con:targetTestCase>7d841c05-8a05-48b2-99b2-7630a7e35824</con:targetTestCase>
			<con:properties>
				<con:property>
					<con:name>RefCommande</con:name>
					<con:value>Cmd-00000031</con:value>
				</con:property>
			</con:properties>
			<con:returnProperties>
				<con:entry>RefCommande</con:entry>
			</con:returnProperties>
			<con:runMode>SINGLETON_AND_WAIT</con:runMode>
		</con:config>
	</con:testStep>
	<con:testStep type="restrequest" name="Associer Paiement comptant" id="1ef87de6-93e5-4958-81dd-7600da6f7c74">
		<con:settings/>
		<con:config service="http://si2-srv.si-core.nordnet.fr:8080" resourcePath="/opale-api/commande/{refCommande}/paiement/comptant" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
			<con:restRequest name="Associer Paiement comptant" mediaType="application/json" postQueryString="false" id="23f08764-b335-4aae-97ce-9ae8ca97ed41">
				<con:settings>
					<con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
		</con:settings>
		<con:endpoint>http://si2-srv.si-core.nordnet.fr:8080</con:endpoint>
		<con:request>{
  "modePaiement": "CHEQUE",
  "referenceModePaiement": "Test-idNetCheque",
  "montant": 48,
  "auteur": {
    "qui": "Test.SoapUI"
  }
}</con:request>
		<con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="f83fb33a-74eb-440d-8b2f-caabcf48c338">
			<con:configuration>
				<codes>200</codes>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Reference Is Not Null" id="da3b8201-c7d1-41ca-9008-c1a5d9ce4c29">
			<con:configuration>
				<path>declare namespace ns1='http://si2-srv.si-core.nordnet.fr/opale-api/commande/${CreerCommande#RefCommande}/paiement/comptant';
exists(//ns1:reference/text())</path>
				<content>true</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:credentials>
			<con:authType>Global HTTP Settings</con:authType>
		</con:credentials>
		<con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
		<con:jmsPropertyConfig/>
		<con:parameters>
			<entry key="refCommande" value="${CreerCommande#RefCommande}" xmlns="http://eviware.com/soapui/config"/>
		</con:parameters>
	</con:restRequest>
</con:config>
</con:testStep>
<con:testStep type="restrequest" name="Transformer en contrat" id="94e41b2f-4fe8-4a51-9ad3-0291f9ddaadc">
	<con:settings/>
	<con:config service="http://si2-srv.si-core.nordnet.fr:8080" resourcePath="/opale-api/commande/{refCommande}/transformerEnContrat" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
		<con:restRequest name="Transformer en contrat" mediaType="application/json" postQueryString="false">
			<con:settings>
				<con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
	</con:settings>
	<con:endpoint>http://si2-srv.si-core.nordnet.fr:8080</con:endpoint>
	<con:request>{
    "qui": "SoapUITest"
}</con:request>
	<con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="09d2dce4-d438-4d41-a54a-487217c68589">
		<con:configuration>
			<codes>200</codes>
		</con:configuration>
	</con:assertion>
	<con:assertion type="XPath Match" name="Reference Contrat Is Not Null" id="bf561d46-1fad-4ea6-a76b-8671b67254d6">
		<con:configuration><path>declare namespace ns1='http://si2-srv.si-core.nordnet.fr/opale-api/commande/${CreerCommande#RefCommande}/transformerEnContrat';
count(//ns1:e)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
	</con:assertion>
	<con:credentials>
		<con:authType>Global HTTP Settings</con:authType>
	</con:credentials>
	<con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
	<con:jmsPropertyConfig/>
	<con:parameters>
		<entry key="refCommande" value="${CreerCommande#RefCommande}" xmlns="http://eviware.com/soapui/config"/>
	</con:parameters>
</con:restRequest>
</con:config>
</con:testStep>
<con:testStep type="transfer" name="Transfert Ref Contrat" id="162d7acd-2e2c-4d95-be8f-2e02ae301e77">
	<con:settings/>
	<con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
		<con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false">
			<con:name>ref Contrat</con:name>
			<con:sourceType>ResponseAsXml</con:sourceType>
			<con:sourceStep>Transformer en contrat</con:sourceStep>
			<con:sourcePath>declare namespace ns1='http://si2-srv.si-core.nordnet.fr/opale-api/commande/${CreerCommande#RefCommande}/transformerEnContrat';
//ns1:referencesContrats/ns1:e[1]/text()</con:sourcePath>
			<con:targetType>RefContrat</con:targetType>
			<con:targetStep>Properties</con:targetStep>
		</con:transfers>
	</con:config>
</con:testStep>
<con:testStep type="jdbc" name="Contrat Valide" id="45150150-e417-4b45-b1a2-f82b0cd59f16">
	<con:settings/>
	<con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
		<con:driver>com.mysql.jdbc.Driver</con:driver>
		<con:connectionString>jdbc:mysql://mysql-bddclients.securitoo.com:3306/topaze?user=gmasy&amp;password=drftgyh8</con:connectionString>
		<con:query>select * from contrat 
where reference = "${Properties#RefContrat}"</con:query>

		<con:assertion type="XPath Match" name="Date Validation is not null">
			<con:configuration>
				<path>exists(//ResultSet/Row/CONTRAT.DATEVALIDATION/text())</path>
				<content>true</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Politique Validation is not null">
			<con:configuration>
				<path>exists(//ResultSet/Row/CONTRAT.POLITIQUEVALIDATIONID/text())</path>
				<content>true</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:properties/>
	</con:config>
</con:testStep>
<con:testStep type="jdbc" name="EC Valide" id="7f4f4dc1-19c7-4252-8235-90c4c70d2934">
	<con:settings/>
	<con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
		<con:driver>com.mysql.jdbc.Driver</con:driver>
		<con:connectionString>jdbc:mysql://mysql-bddclients.securitoo.com:3306/topaze?user=gmasy&amp;password=drftgyh8</con:connectionString>
		<con:query>select * from elementcontractuel
where contratParent = 
  (select id 
    from contrat 
   where reference = "${Properties#RefContrat}") 
		</con:query>
		<con:assertion type="XPath Match" name="1 seul EC">
			<con:configuration>
				<path>count(//Row)</path>
				<content>1</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Numero Commande">
			<con:configuration>
				<path>//Row/ELEMENTCONTRACTUEL.NUMEROCOMMANDE</path>
				<content>${CreerCommande#RefCommande}</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Reference Mode Paiement">
			<con:configuration><path>exists(//Row/ELEMENTCONTRACTUEL.REFERENCEMODEPAIEMENT/text())</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Periodicite">
			<con:configuration><path>//Row/ELEMENTCONTRACTUEL.PERIODICITE/text()</path><content>12</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Reference Produit">
			<con:configuration>
				<path>//Row/ELEMENTCONTRACTUEL.REFERENCEPRODUIT/text()</path>
				<content>avfw.essentiel</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Reference Tarif">
			<con:configuration><path>//Row/ELEMENTCONTRACTUEL.REFERENCETARIF/text()</path><content>avfw.essentiel.12mois</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match">
			<con:configuration/>
		</con:assertion>
		<con:assertion type="XPath Match" name="Mode Paiement">
			<con:configuration><path>//Row/ELEMENTCONTRACTUEL.MODEPAIEMENT/text()</path><content>CHEQUE</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Type Produit">
			<con:configuration>
				<path>//Row/ELEMENTCONTRACTUEL.TYPEPRODUIT/text()</path>
				<content>SERVICE</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Remboursable">
			<con:configuration>
				<path>//Row/ELEMENTCONTRACTUEL.REMBOURSABLE/text()</path>
				<content>1</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Type TVA">
			<con:configuration><path>//Row/ELEMENTCONTRACTUEL.TYPETVA/text()</path><content>S</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Durée Is Not Null">
			<con:configuration><path>exists(//Row/ELEMENTCONTRACTUEL.DUREE/text())</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
		</con:assertion>
		<con:properties/>
	</con:config>
</con:testStep>
<con:properties/>
</con:testCase>
<con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Vente - Site NNCom - 12 mois - CB - Montant Juste" searchProperties="true" id="cdfc11df-9c06-46f2-8cc7-f7d64260075c">
	<con:settings/>
	<con:testStep type="properties" name="Properties" id="4ca57324-125c-4c0f-9554-b5793622fd9d">
		<con:settings/>
		<con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
			<con:properties>
				<con:property>
					<con:name>RefContrat</con:name>
					<con:value>00000095</con:value>
				</con:property>
			</con:properties>
		</con:config>
	</con:testStep>
	<con:testStep type="calltestcase" name="CreerCommande" id="03b2b614-9c4d-49a7-b399-c59efaabb56b">
		<con:settings/>
		<con:config xsi:type="con:RunTestCaseStep" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
			<con:targetTestCase>7d841c05-8a05-48b2-99b2-7630a7e35824</con:targetTestCase>
			<con:properties>
				<con:property>
					<con:name>RefCommande</con:name>
					<con:value>Cmd-00000047</con:value>
				</con:property>
			</con:properties>
			<con:returnProperties>
				<con:entry>RefCommande</con:entry>
			</con:returnProperties>
			<con:runMode>SINGLETON_AND_WAIT</con:runMode>
		</con:config>
	</con:testStep>
	<con:testStep type="restrequest" name="Associer Paiement comptant" id="472db882-d52f-428e-a7ac-72403ddbc29c">
		<con:settings/>
		<con:config service="http://si2-srv.si-core.nordnet.fr:8080" resourcePath="/opale-api/commande/{refCommande}/paiement/comptant" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
			<con:restRequest name="Associer Paiement comptant" mediaType="application/json" postQueryString="false" id="23f08764-b335-4aae-97ce-9ae8ca97ed41">
				<con:settings>
					<con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
		</con:settings>
		<con:endpoint>http://si2-srv.si-core.nordnet.fr:8080</con:endpoint>
		<con:request>{
  "modePaiement": "CB",
  "referenceModePaiement": "Test-Transaction-id-CB",
  "montant": 48,
  "auteur": {
    "qui": "Test.SoapUI"
  }
}</con:request>
		<con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="f83fb33a-74eb-440d-8b2f-caabcf48c338">
			<con:configuration>
				<codes>200</codes>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Reference Is Not Null" id="da3b8201-c7d1-41ca-9008-c1a5d9ce4c29">
			<con:configuration>
				<path>declare namespace ns1='http://si2-srv.si-core.nordnet.fr/opale-api/commande/${CreerCommande#RefCommande}/paiement/comptant';
exists(//ns1:reference/text())</path>
				<content>true</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:credentials>
			<con:authType>Global HTTP Settings</con:authType>
		</con:credentials>
		<con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
		<con:jmsPropertyConfig/>
		<con:parameters>
			<entry key="refCommande" value="${CreerCommande#RefCommande}" xmlns="http://eviware.com/soapui/config"/>
		</con:parameters>
	</con:restRequest>
</con:config>
</con:testStep>
<con:testStep type="restrequest" name="Transformer en contrat" id="5ec4d912-8b7b-437c-87a3-ba90fc9b5630">
	<con:settings/>
	<con:config service="http://si2-srv.si-core.nordnet.fr:8080" resourcePath="/opale-api/commande/{refCommande}/transformerEnContrat" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
		<con:restRequest name="Transformer en contrat" mediaType="application/json" postQueryString="false">
			<con:settings>
				<con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
	</con:settings>
	<con:endpoint>http://si2-srv.si-core.nordnet.fr:8080</con:endpoint>
	<con:request>{
    "qui": "SoapUITest"
}</con:request>
	<con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="09d2dce4-d438-4d41-a54a-487217c68589">
		<con:configuration>
			<codes>200</codes>
		</con:configuration>
	</con:assertion>
	<con:assertion type="XPath Match" name="Reference Contrat Is Not Null" id="bf561d46-1fad-4ea6-a76b-8671b67254d6">
		<con:configuration><path>declare namespace ns1='http://si2-srv.si-core.nordnet.fr/opale-api/commande/${CreerCommande#RefCommande}/transformerEnContrat';
count(//ns1:e)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
	</con:assertion>
	<con:credentials>
		<con:authType>Global HTTP Settings</con:authType>
	</con:credentials>
	<con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
	<con:jmsPropertyConfig/>
	<con:parameters>
		<entry key="refCommande" value="${CreerCommande#RefCommande}" xmlns="http://eviware.com/soapui/config"/>
	</con:parameters>
</con:restRequest>
</con:config>
</con:testStep>
<con:testStep type="transfer" name="Transfert Ref Contrat" id="2e1cf66d-c452-4f86-a4d0-064454fcfbb4">
	<con:settings/>
	<con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
		<con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false">
			<con:name>ref Contrat</con:name>
			<con:sourceType>ResponseAsXml</con:sourceType>
			<con:sourceStep>Transformer en contrat</con:sourceStep>
			<con:sourcePath>declare namespace ns1='http://si2-srv.si-core.nordnet.fr/opale-api/commande/${CreerCommande#RefCommande}/transformerEnContrat';
//ns1:referencesContrats/ns1:e[1]/text()</con:sourcePath>
			<con:targetType>RefContrat</con:targetType>
			<con:targetStep>Properties</con:targetStep>
		</con:transfers>
	</con:config>
</con:testStep>
<con:testStep type="jdbc" name="Contrat Valide" id="7baf3aef-9214-4e62-b505-df5e146c0bda">
	<con:settings/>
	<con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
		<con:driver>com.mysql.jdbc.Driver</con:driver>
		<con:connectionString>jdbc:mysql://mysql-bddclients.securitoo.com:3306/topaze?user=gmasy&amp;password=drftgyh8</con:connectionString>
		<con:query>select * from contrat 
where reference = "${Properties#RefContrat}"</con:query>

		<con:assertion type="XPath Match" name="Date Validation is not null">
			<con:configuration>
				<path>exists(//ResultSet/Row/CONTRAT.DATEVALIDATION/text())</path>
				<content>true</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Politique Validation is not null">
			<con:configuration>
				<path>exists(//ResultSet/Row/CONTRAT.POLITIQUEVALIDATIONID/text())</path>
				<content>true</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:properties/>
	</con:config>
</con:testStep>
<con:testStep type="jdbc" name="EC Valide" id="71e25fee-09cc-438b-bff6-959f1d98e54b">
	<con:settings/>
	<con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
		<con:driver>com.mysql.jdbc.Driver</con:driver>
		<con:connectionString>jdbc:mysql://mysql-bddclients.securitoo.com:3306/topaze?user=gmasy&amp;password=drftgyh8</con:connectionString>
		<con:query>select * from elementcontractuel
where contratParent = 
  (select id 
    from contrat 
   where reference = "${Properties#RefContrat}") 
		</con:query>
		<con:assertion type="XPath Match" name="1 seul EC">
			<con:configuration>
				<path>count(//Row)</path>
				<content>1</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Numero Commande">
			<con:configuration>
				<path>//Row/ELEMENTCONTRACTUEL.NUMEROCOMMANDE</path>
				<content>${CreerCommande#RefCommande}</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Reference Mode Paiement">
			<con:configuration><path>exists(//Row/ELEMENTCONTRACTUEL.REFERENCEMODEPAIEMENT/text())</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Periodicite">
			<con:configuration><path>//Row/ELEMENTCONTRACTUEL.PERIODICITE/text()</path><content>12</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Reference Produit">
			<con:configuration>
				<path>//Row/ELEMENTCONTRACTUEL.REFERENCEPRODUIT/text()</path>
				<content>avfw.essentiel</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Reference Tarif">
			<con:configuration><path>//Row/ELEMENTCONTRACTUEL.REFERENCETARIF/text()</path><content>avfw.essentiel.12mois</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match">
			<con:configuration/>
		</con:assertion>
		<con:assertion type="XPath Match" name="Mode Paiement">
			<con:configuration>
				<path>//Row/ELEMENTCONTRACTUEL.MODEPAIEMENT/text()</path>
				<content>CB</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Type Produit">
			<con:configuration>
				<path>//Row/ELEMENTCONTRACTUEL.TYPEPRODUIT/text()</path>
				<content>SERVICE</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Remboursable">
			<con:configuration>
				<path>//Row/ELEMENTCONTRACTUEL.REMBOURSABLE/text()</path>
				<content>1</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Type TVA">
			<con:configuration><path>//Row/ELEMENTCONTRACTUEL.TYPETVA/text()</path><content>S</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Durée Is Not Null">
			<con:configuration><path>exists(//Row/ELEMENTCONTRACTUEL.DUREE/text())</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
		</con:assertion>
		<con:properties/>
	</con:config>
</con:testStep>
<con:properties/>
</con:testCase>
<con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Vente - Site NNCom - 12 mois - VIREMENT - Montant Juste" searchProperties="true" id="12ff4036-2103-46a0-953d-08b29ac6e678" disabled="true">
	<con:settings/>
	<con:testStep type="properties" name="Properties" id="ce947857-9fc6-498f-8470-57ef2d63ecb8">
		<con:settings/>
		<con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
			<con:properties>
				<con:property>
					<con:name>RefContrat</con:name>
					<con:value>00000061</con:value>
				</con:property>
			</con:properties>
		</con:config>
	</con:testStep>
	<con:testStep type="calltestcase" name="CreerCommande" id="cd19511d-c9d4-4a1a-ad2a-1855d66d8b57">
		<con:settings/>
		<con:config xsi:type="con:RunTestCaseStep" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
			<con:targetTestCase>7d841c05-8a05-48b2-99b2-7630a7e35824</con:targetTestCase>
			<con:properties>
				<con:property>
					<con:name>RefCommande</con:name>
					<con:value>Cmd-00000009</con:value>
				</con:property>
			</con:properties>
			<con:returnProperties>
				<con:entry>RefCommande</con:entry>
			</con:returnProperties>
			<con:runMode>SINGLETON_AND_WAIT</con:runMode>
		</con:config>
	</con:testStep>
	<con:testStep type="restrequest" name="Associer Paiement comptant" id="bd1996fe-7a90-4831-9927-34f22083b063">
		<con:settings/>
		<con:config service="http://si2-srv.si-core.nordnet.fr:8080" resourcePath="/opale-api/commande/{refCommande}/paiement/comptant" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
			<con:restRequest name="Associer Paiement comptant" mediaType="application/json" postQueryString="false" id="23f08764-b335-4aae-97ce-9ae8ca97ed41">
				<con:settings>
					<con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
		</con:settings>
		<con:endpoint>http://si2-srv.si-core.nordnet.fr:8080</con:endpoint>
		<con:request>{
  "modePaiement": "VIREMENT",
  "referenceModePaiement": "Test-Transaction-id-CB",
  "montant": 48,
  "auteur": {
    "qui": "Test.SoapUI"
  }
}</con:request>
		<con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="f83fb33a-74eb-440d-8b2f-caabcf48c338">
			<con:configuration>
				<codes>200</codes>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Reference Is Not Null" id="da3b8201-c7d1-41ca-9008-c1a5d9ce4c29">
			<con:configuration>
				<path>declare namespace ns1='http://si2-srv.si-core.nordnet.fr/opale-api/commande/${CreerCommande#RefCommande}/paiement/comptant';
exists(//ns1:reference/text())</path>
				<content>true</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:credentials>
			<con:authType>Global HTTP Settings</con:authType>
		</con:credentials>
		<con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
		<con:jmsPropertyConfig/>
		<con:parameters>
			<entry key="refCommande" value="${CreerCommande#RefCommande}" xmlns="http://eviware.com/soapui/config"/>
		</con:parameters>
	</con:restRequest>
</con:config>
</con:testStep>
<con:testStep type="restrequest" name="Transformer en contrat" id="cbd255e1-10ff-4632-aef2-e6ed48f2bdef">
	<con:settings/>
	<con:config service="http://si2-srv.si-core.nordnet.fr:8080" resourcePath="/opale-api/commande/{refCommande}/transformerEnContrat" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
		<con:restRequest name="Transformer en contrat" mediaType="application/json" postQueryString="false">
			<con:settings>
				<con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
	</con:settings>
	<con:endpoint>http://si2-srv.si-core.nordnet.fr:8080</con:endpoint>
	<con:request>{
    "qui": "SoapUITest"
}</con:request>
	<con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="09d2dce4-d438-4d41-a54a-487217c68589">
		<con:configuration>
			<codes>200</codes>
		</con:configuration>
	</con:assertion>
	<con:assertion type="XPath Match" name="Reference Contrat Is Not Null" id="bf561d46-1fad-4ea6-a76b-8671b67254d6">
		<con:configuration><path>declare namespace ns1='http://si2-srv.si-core.nordnet.fr/opale-api/commande/${CreerCommande#RefCommande}/transformerEnContrat';
count(//ns1:e)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
	</con:assertion>
	<con:credentials>
		<con:authType>Global HTTP Settings</con:authType>
	</con:credentials>
	<con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
	<con:jmsPropertyConfig/>
	<con:parameters>
		<entry key="refCommande" value="${CreerCommande#RefCommande}" xmlns="http://eviware.com/soapui/config"/>
	</con:parameters>
</con:restRequest>
</con:config>
</con:testStep>
<con:testStep type="transfer" name="Transfert Ref Contrat" id="049753a7-738b-4997-9f6b-33027f82ad9e">
	<con:settings/>
	<con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
		<con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false">
			<con:name>ref Contrat</con:name>
			<con:sourceType>ResponseAsXml</con:sourceType>
			<con:sourceStep>Transformer en contrat</con:sourceStep>
			<con:sourcePath>declare namespace ns1='http://si2-srv.si-core.nordnet.fr/opale-api/commande/${CreerCommande#RefCommande}/transformerEnContrat';
//ns1:referencesContrats/ns1:e[1]/text()</con:sourcePath>
			<con:targetType>RefContrat</con:targetType>
			<con:targetStep>Properties</con:targetStep>
		</con:transfers>
	</con:config>
</con:testStep>
<con:testStep type="jdbc" name="Contrat Valide" id="985021bd-1469-44f8-a25d-a0c7f14b5eb7">
	<con:settings/>
	<con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
		<con:driver>com.mysql.jdbc.Driver</con:driver>
		<con:connectionString>jdbc:mysql://mysql-bddclients.securitoo.com:3306/topaze?user=gmasy&amp;password=drftgyh8</con:connectionString>
		<con:query>select * from contrat 
where reference = "${Properties#RefContrat}"</con:query>

		<con:assertion type="XPath Match" name="Date Validation is not null">
			<con:configuration>
				<path>exists(//ResultSet/Row/CONTRAT.DATEVALIDATION/text())</path>
				<content>true</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Politique Validation is not null">
			<con:configuration>
				<path>exists(//ResultSet/Row/CONTRAT.POLITIQUEVALIDATIONID/text())</path>
				<content>true</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:properties/>
	</con:config>
</con:testStep>
<con:testStep type="jdbc" name="EC Valide" id="181aa8f8-57c0-444d-a059-13d875a4b239">
	<con:settings/>
	<con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
		<con:driver>com.mysql.jdbc.Driver</con:driver>
		<con:connectionString>jdbc:mysql://mysql-bddclients.securitoo.com:3306/topaze?user=gmasy&amp;password=drftgyh8</con:connectionString>
		<con:query>select * from elementcontractuel
where contratParent = 
  (select id 
    from contrat 
   where reference = "${Properties#RefContrat}") 
		</con:query>
		<con:assertion type="XPath Match" name="1 seul EC">
			<con:configuration>
				<path>count(//Row)</path>
				<content>1</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Numero Commande">
			<con:configuration>
				<path>//Row/ELEMENTCONTRACTUEL.NUMEROCOMMANDE</path>
				<content>${CreerCommande#RefCommande}</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Reference Mode Paiement">
			<con:configuration><path>exists(//Row/ELEMENTCONTRACTUEL.REFERENCEMODEPAIEMENT/text())</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Periodicite">
			<con:configuration><path>//Row/ELEMENTCONTRACTUEL.PERIODICITE/text()</path><content>12</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Reference Produit">
			<con:configuration>
				<path>//Row/ELEMENTCONTRACTUEL.REFERENCEPRODUIT/text()</path>
				<content>avfw.essentiel</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Reference Tarif">
			<con:configuration><path>//Row/ELEMENTCONTRACTUEL.REFERENCETARIF/text()</path><content>avfw.essentiel.12mois</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match">
			<con:configuration/>
		</con:assertion>
		<con:assertion type="XPath Match" name="Mode Paiement">
			<con:configuration>
				<path>//Row/ELEMENTCONTRACTUEL.MODEPAIEMENT/text()</path>
				<content>CB</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Type Produit">
			<con:configuration>
				<path>//Row/ELEMENTCONTRACTUEL.TYPEPRODUIT/text()</path>
				<content>SERVICE</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Remboursable">
			<con:configuration>
				<path>//Row/ELEMENTCONTRACTUEL.REMBOURSABLE/text()</path>
				<content>1</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Type TVA">
			<con:configuration><path>//Row/ELEMENTCONTRACTUEL.TYPETVA/text()</path><content>S</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Durée Is Not Null">
			<con:configuration><path>exists(//Row/ELEMENTCONTRACTUEL.DUREE/text())</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
		</con:assertion>
		<con:properties/>
	</con:config>
</con:testStep>
<con:properties/>
</con:testCase>


<con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Vente - Site NNCom - 12 mois - SEPA" searchProperties="true" id="6a84675e-87ff-4619-ad66-c9b1328271ce">
	<con:settings/>
	<con:testStep type="properties" name="Properties" id="ab07c8e5-da3c-4613-bc80-04b3602ed92b">
		<con:settings/>
		<con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
			<con:properties>
				<con:property>
					<con:name>RefContrat</con:name>
					<con:value>005000004</con:value>
				</con:property>
			</con:properties>
		</con:config>
	</con:testStep>
	<con:testStep type="calltestcase" name="CreerCommande" id="ad4b1a41-696b-4388-b196-325c2f8533e8">
		<con:settings/>
		<con:config xsi:type="con:RunTestCaseStep" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
			<con:targetTestCase>7d841c05-8a05-48b2-99b2-7630a7e35824</con:targetTestCase>
			<con:properties>
				<con:property>
					<con:name>RefCommande</con:name>
					<con:value>Cmd-00000004</con:value>
				</con:property>
			</con:properties>
			<con:returnProperties>
				<con:entry>RefCommande</con:entry>
			</con:returnProperties>
			<con:runMode>SINGLETON_AND_WAIT</con:runMode>
		</con:config>
	</con:testStep>
	<con:testStep type="restrequest" name="Associer Paiement Recurrent" id="0753bbc2-c823-43c1-988f-bbbcf5ca4424">
		<con:settings/>
		<con:config service="http://si2-srv.si-core.nordnet.fr:8080" resourcePath="/opale-api/commande/{refCommande}/paiement/recurrent" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
			<con:restRequest name="Associer Paiement Recurrent" mediaType="application/json" postQueryString="false" id="433f3ac2-74d2-4355-92be-901c05c2ff9d">
				<con:settings>
					<con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
		</con:settings>
		<con:endpoint>http://si2-srv.si-core.nordnet.fr:8080</con:endpoint>
		<con:request>{
  "rum": "R0000012",
  "modePaiement": "SEPA",
  "auteur": {
    "qui": "SoapUITest"
  }
}</con:request>
		<con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="d69056f8-53ee-4a09-834b-ae9e0301d348">
			<con:configuration>
				<codes>200</codes>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Reference Paiement Is Not Null" id="a2ea04d5-1487-429d-b9a1-9efa22de37a7">
			<con:configuration>
				<path>declare namespace ns1='http://si2-srv.si-core.nordnet.fr/opale-api/commande/${CreerCommande#RefCommande}/paiement/recurrent';
exists(//ns1:reference/text())</path>
				<content>true</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:credentials>
			<con:authType>Global HTTP Settings</con:authType>
		</con:credentials>
		<con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
		<con:jmsPropertyConfig/>
		<con:parameters>
			<entry key="refCommande" value="${CreerCommande#RefCommande}" xmlns="http://eviware.com/soapui/config"/>
		</con:parameters>
	</con:restRequest>
</con:config>
</con:testStep>
<con:testStep type="restrequest" name="Transformer en contrat" id="2ae522fc-15ca-4edb-9a32-0fb64fe4d27b">
	<con:settings/>
	<con:config service="http://si2-srv.si-core.nordnet.fr:8080" resourcePath="/opale-api/commande/{refCommande}/transformerEnContrat" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
		<con:restRequest name="Transformer en contrat" mediaType="application/json" postQueryString="false">
			<con:settings>
				<con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
	</con:settings>
	<con:endpoint>http://si2-srv.si-core.nordnet.fr:8080</con:endpoint>
	<con:request>{
    "qui": "SoapUITest"
}</con:request>
	<con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="09d2dce4-d438-4d41-a54a-487217c68589">
		<con:configuration>
			<codes>200</codes>
		</con:configuration>
	</con:assertion>
	<con:assertion type="XPath Match" name="Reference Contrat Is Not Null" id="bf561d46-1fad-4ea6-a76b-8671b67254d6">
		<con:configuration>
			<path>declare namespace ns1='http://si2-srv.si-core.nordnet.fr/opale-api/commande/${CreerCommande#RefCommande}/transformerEnContrat';
exists(//ns1:referencesContrats/ns1:e[1]/text())</path>
			<content>true</content>
			<allowWildcards>false</allowWildcards>
			<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
			<ignoreComments>false</ignoreComments>
		</con:configuration>
	</con:assertion>
	<con:credentials>
		<con:authType>Global HTTP Settings</con:authType>
	</con:credentials>
	<con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
	<con:jmsPropertyConfig/>
	<con:parameters>
		<entry key="refCommande" value="${CreerCommande#RefCommande}" xmlns="http://eviware.com/soapui/config"/>
	</con:parameters>
</con:restRequest>
</con:config>
</con:testStep>
<con:testStep type="transfer" name="Transfert Ref Contrat" id="8bcd4f13-bf1b-44fc-b682-1af89a06a599">
	<con:settings/>
	<con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
		<con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false">
			<con:name>ref Contrat</con:name>
			<con:sourceType>ResponseAsXml</con:sourceType>
			<con:sourceStep>Transformer en contrat</con:sourceStep>
			<con:sourcePath>declare namespace ns1='http://si2-srv.si-core.nordnet.fr/opale-api/commande/${CreerCommande#RefCommande}/transformerEnContrat';
//ns1:referencesContrats/ns1:e[1]/text()</con:sourcePath>
			<con:targetType>RefContrat</con:targetType>
			<con:targetStep>Properties</con:targetStep>
		</con:transfers>
	</con:config>
</con:testStep>
<con:testStep type="jdbc" name="Contrat Valide" id="1a881057-818a-4a7b-a38d-b23d21ee9f2b">
	<con:settings/>
	<con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
		<con:driver>com.mysql.jdbc.Driver</con:driver>
		<con:connectionString>jdbc:mysql://mysql-bddclients.securitoo.com:3306/topaze?user=gmasy&amp;password=drftgyh8</con:connectionString>
		<con:query>select * from contrat 
where reference = "${Properties#RefContrat}"</con:query>

		<con:assertion type="XPath Match" name="Date Validation is not null">
			<con:configuration>
				<path>exists(//ResultSet/Row/CONTRAT.DATEVALIDATION/text())</path>
				<content>true</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Politique Validation is not null">
			<con:configuration>
				<path>exists(//ResultSet/Row/CONTRAT.POLITIQUEVALIDATIONID/text())</path>
				<content>true</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:properties/>
	</con:config>
</con:testStep>
<con:testStep type="jdbc" name="EC Valide" id="f8eddafa-1690-47bc-a1c7-41a666095388">
	<con:settings/>
	<con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
		<con:driver>com.mysql.jdbc.Driver</con:driver>
		<con:connectionString>jdbc:mysql://mysql-bddclients.securitoo.com:3306/topaze?user=gmasy&amp;password=drftgyh8</con:connectionString>
		<con:query>select * from elementcontractuel
where contratParent = 
  (select id 
    from contrat 
   where reference = "${Properties#RefContrat}") 
		</con:query>
		<con:assertion type="XPath Match" name="1 seul EC">
			<con:configuration>
				<path>count(//Row)</path>
				<content>1</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Numero Commande">
			<con:configuration>
				<path>//Row/ELEMENTCONTRACTUEL.NUMEROCOMMANDE</path>
				<content>${CreerCommande#RefCommande}</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Reference Mode Paiement">
			<con:configuration><path>//Row/ELEMENTCONTRACTUEL.REFERENCEMODEPAIEMENT/text()</path><content>R0000012</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Periodicite">
			<con:configuration>
				<path>//Row/ELEMENTCONTRACTUEL.PERIODICITE/text()</path>
				<content>12</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Reference Produit">
			<con:configuration>
				<path>//Row/ELEMENTCONTRACTUEL.REFERENCEPRODUIT/text()</path>
				<content>avfw.essentiel</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Reference Tarif">
			<con:configuration>
				<path>//Row/ELEMENTCONTRACTUEL.REFERENCETARIF/text()</path>
				<content>avfw.essentiel.12mois</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match">
			<con:configuration/>
		</con:assertion>
		<con:assertion type="XPath Match" name="Mode Paiement">
			<con:configuration>
				<path>//Row/ELEMENTCONTRACTUEL.MODEPAIEMENT/text()</path>
				<content>SEPA</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Type Produit">
			<con:configuration>
				<path>//Row/ELEMENTCONTRACTUEL.TYPEPRODUIT/text()</path>
				<content>SERVICE</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Remboursable">
			<con:configuration>
				<path>//Row/ELEMENTCONTRACTUEL.REMBOURSABLE/text()</path>
				<content>1</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Type TVA">
			<con:configuration>
				<path>//Row/ELEMENTCONTRACTUEL.TYPETVA/text()</path>
				<content>S</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Durée Is Null">
			<con:configuration>
				<path>exists(//Row/ELEMENTCONTRACTUEL.DUREE/text())</path>
				<content>false</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:properties/>
	</con:config>
</con:testStep>
<con:properties/>
</con:testCase>
<con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Vente - Site NNCom - 12 mois - FACTURE" searchProperties="true" id="f82256bb-6f24-430b-8a1f-6562f0fdd6f3">
	<con:settings/>
	<con:testStep type="properties" name="Properties" id="26d948ad-fdd5-448c-8cda-9d208dad09aa">
		<con:settings/>
		<con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
			<con:properties>
				<con:property>
					<con:name>RefContrat</con:name>
					<con:value>00000063</con:value>
				</con:property>
			</con:properties>
		</con:config>
	</con:testStep>
	<con:testStep type="calltestcase" name="CreerCommande" id="f125aeca-1a34-48b6-b4e9-574c51538184">
		<con:settings/>
		<con:config xsi:type="con:RunTestCaseStep" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
			<con:targetTestCase>7d841c05-8a05-48b2-99b2-7630a7e35824</con:targetTestCase>
			<con:properties>
				<con:property>
					<con:name>RefCommande</con:name>
					<con:value>Cmd-00000011</con:value>
				</con:property>
			</con:properties>
			<con:returnProperties>
				<con:entry>RefCommande</con:entry>
			</con:returnProperties>
			<con:runMode>SINGLETON_AND_WAIT</con:runMode>
		</con:config>
	</con:testStep>
	<con:testStep type="restrequest" name="Associer Paiement Recurrent" id="b5ad1e27-968b-4ad3-8802-a043a26deed3">
		<con:settings/>
		<con:config service="http://si2-srv.si-core.nordnet.fr:8080" resourcePath="/opale-api/commande/{refCommande}/paiement/recurrent" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
			<con:restRequest name="Associer Paiement Recurrent" mediaType="application/json" postQueryString="false" id="433f3ac2-74d2-4355-92be-901c05c2ff9d">
				<con:settings>
					<con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
		</con:settings>
		<con:endpoint>http://si2-srv.si-core.nordnet.fr:8080</con:endpoint>
		<con:request>{
  "rum": "MANDAT-test-facture",
  "modePaiement": "FACTURE",
  "auteur": {
    "qui": "SoapUITest"
  }
}</con:request>
		<con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="d69056f8-53ee-4a09-834b-ae9e0301d348">
			<con:configuration>
				<codes>200</codes>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Reference Paiement Is Not Null" id="a2ea04d5-1487-429d-b9a1-9efa22de37a7">
			<con:configuration>
				<path>declare namespace ns1='http://si2-srv.si-core.nordnet.fr/opale-api/commande/${CreerCommande#RefCommande}/paiement/recurrent';
exists(//ns1:reference/text())</path>
				<content>true</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:credentials>
			<con:authType>Global HTTP Settings</con:authType>
		</con:credentials>
		<con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
		<con:jmsPropertyConfig/>
		<con:parameters>
			<entry key="refCommande" value="${CreerCommande#RefCommande}" xmlns="http://eviware.com/soapui/config"/>
		</con:parameters>
	</con:restRequest>
</con:config>
</con:testStep>
<con:testStep type="restrequest" name="Transformer en contrat" id="a65d1178-c549-4fb6-ba0d-48722bdd7780">
	<con:settings/>
	<con:config service="http://si2-srv.si-core.nordnet.fr:8080" resourcePath="/opale-api/commande/{refCommande}/transformerEnContrat" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
		<con:restRequest name="Transformer en contrat" mediaType="application/json" postQueryString="false">
			<con:settings>
				<con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
	</con:settings>
	<con:endpoint>http://si2-srv.si-core.nordnet.fr:8080</con:endpoint>
	<con:request>{
    "qui": "SoapUITest"
}</con:request>
	<con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="09d2dce4-d438-4d41-a54a-487217c68589">
		<con:configuration>
			<codes>200</codes>
		</con:configuration>
	</con:assertion>
	<con:assertion type="XPath Match" name="Reference Contrat Is Not Null" id="bf561d46-1fad-4ea6-a76b-8671b67254d6">
		<con:configuration>
			<path>declare namespace ns1='http://si2-srv.si-core.nordnet.fr/opale-api/commande/${CreerCommande#RefCommande}/transformerEnContrat';
exists(//ns1:referencesContrats/ns1:e[1]/text())</path>
			<content>true</content>
			<allowWildcards>false</allowWildcards>
			<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
			<ignoreComments>false</ignoreComments>
		</con:configuration>
	</con:assertion>
	<con:credentials>
		<con:authType>Global HTTP Settings</con:authType>
	</con:credentials>
	<con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
	<con:jmsPropertyConfig/>
	<con:parameters>
		<entry key="refCommande" value="${CreerCommande#RefCommande}" xmlns="http://eviware.com/soapui/config"/>
	</con:parameters>
</con:restRequest>
</con:config>
</con:testStep>
<con:testStep type="transfer" name="Transfert Ref Contrat" id="7fa82404-a524-4ea7-befd-8c4b6be7d0ec">
	<con:settings/>
	<con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
		<con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false">
			<con:name>ref Contrat</con:name>
			<con:sourceType>ResponseAsXml</con:sourceType>
			<con:sourceStep>Transformer en contrat</con:sourceStep>
			<con:sourcePath>declare namespace ns1='http://si2-srv.si-core.nordnet.fr/opale-api/commande/${CreerCommande#RefCommande}/transformerEnContrat';
//ns1:referencesContrats/ns1:e[1]/text()</con:sourcePath>
			<con:targetType>RefContrat</con:targetType>
			<con:targetStep>Properties</con:targetStep>
		</con:transfers>
	</con:config>
</con:testStep>
<con:testStep type="jdbc" name="Contrat Valide" id="a2ac618c-6aab-45c1-a0db-c97af3eb6856">
	<con:settings/>
	<con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
		<con:driver>com.mysql.jdbc.Driver</con:driver>
		<con:connectionString>jdbc:mysql://mysql-bddclients.securitoo.com:3306/topaze?user=gmasy&amp;password=drftgyh8</con:connectionString>
		<con:query>select * from contrat 
where reference = "${Properties#RefContrat}"</con:query>

		<con:assertion type="XPath Match" name="Date Validation is not null">
			<con:configuration>
				<path>exists(//ResultSet/Row/CONTRAT.DATEVALIDATION/text())</path>
				<content>true</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Politique Validation is not null">
			<con:configuration>
				<path>exists(//ResultSet/Row/CONTRAT.POLITIQUEVALIDATIONID/text())</path>
				<content>true</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:properties/>
	</con:config>
</con:testStep>
<con:testStep type="jdbc" name="EC Valide" id="22084089-e409-43dd-8220-7f625059b622">
	<con:settings/>
	<con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
		<con:driver>com.mysql.jdbc.Driver</con:driver>
		<con:connectionString>jdbc:mysql://mysql-bddclients.securitoo.com:3306/topaze?user=gmasy&amp;password=drftgyh8</con:connectionString>
		<con:query>select * from elementcontractuel
where contratParent = 
  (select id 
    from contrat 
   where reference = "${Properties#RefContrat}") 
		</con:query>
		<con:assertion type="XPath Match" name="1 seul EC">
			<con:configuration>
				<path>count(//Row)</path>
				<content>1</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Numero Commande">
			<con:configuration>
				<path>//Row/ELEMENTCONTRACTUEL.NUMEROCOMMANDE</path>
				<content>${CreerCommande#RefCommande}</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Reference Mode Paiement">
			<con:configuration><path>//Row/ELEMENTCONTRACTUEL.REFERENCEMODEPAIEMENT/text()</path><content>MANDAT-test-facture</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Periodicite">
			<con:configuration>
				<path>//Row/ELEMENTCONTRACTUEL.PERIODICITE/text()</path>
				<content>12</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Reference Produit">
			<con:configuration>
				<path>//Row/ELEMENTCONTRACTUEL.REFERENCEPRODUIT/text()</path>
				<content>avfw.essentiel</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Reference Tarif">
			<con:configuration>
				<path>//Row/ELEMENTCONTRACTUEL.REFERENCETARIF/text()</path>
				<content>avfw.essentiel.12mois</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match">
			<con:configuration/>
		</con:assertion>
		<con:assertion type="XPath Match" name="Mode Paiement">
			<con:configuration><path>//Row/ELEMENTCONTRACTUEL.MODEPAIEMENT/text()</path><content>FACTURE</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Type Produit">
			<con:configuration>
				<path>//Row/ELEMENTCONTRACTUEL.TYPEPRODUIT/text()</path>
				<content>SERVICE</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Remboursable">
			<con:configuration>
				<path>//Row/ELEMENTCONTRACTUEL.REMBOURSABLE/text()</path>
				<content>1</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Type TVA">
			<con:configuration>
				<path>//Row/ELEMENTCONTRACTUEL.TYPETVA/text()</path>
				<content>S</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Durée Is Null">
			<con:configuration>
				<path>exists(//Row/ELEMENTCONTRACTUEL.DUREE/text())</path>
				<content>false</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:properties/>
	</con:config>
</con:testStep>
<con:properties/>
</con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Vente - Site NNCom - 12 mois - FACTURE FIN DE MOIS" searchProperties="true" id="aa3f1b54-8a0f-4789-9d2c-2c025ad0dbb0">
	<con:settings/>
	<con:testStep type="properties" name="Properties" id="3f2a80e5-1a87-434f-b362-ea7800211ea2">
		<con:settings/>
		<con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
			<con:properties>
				<con:property>
					<con:name>RefContrat</con:name>
					<con:value>00000064</con:value>
				</con:property>
			</con:properties>
		</con:config>
	</con:testStep>
	<con:testStep type="calltestcase" name="CreerCommande" id="29a26706-d602-45e5-b975-04e7b875aa71">
		<con:settings/>
		<con:config xsi:type="con:RunTestCaseStep" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
			<con:targetTestCase>7d841c05-8a05-48b2-99b2-7630a7e35824</con:targetTestCase>
			<con:properties>
				<con:property>
					<con:name>RefCommande</con:name>
					<con:value>Cmd-00000012</con:value>
				</con:property>
			</con:properties>
			<con:returnProperties>
				<con:entry>RefCommande</con:entry>
			</con:returnProperties>
			<con:runMode>SINGLETON_AND_WAIT</con:runMode>
		</con:config>
	</con:testStep>
	<con:testStep type="restrequest" name="Associer Paiement Recurrent" id="824a6e46-b787-4782-9389-a74dc65992b9">
		<con:settings/>
		<con:config service="http://si2-srv.si-core.nordnet.fr:8080" resourcePath="/opale-api/commande/{refCommande}/paiement/recurrent" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
			<con:restRequest name="Associer Paiement Recurrent" mediaType="application/json" postQueryString="false" id="433f3ac2-74d2-4355-92be-901c05c2ff9d">
				<con:settings>
					<con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
		</con:settings>
		<con:endpoint>http://si2-srv.si-core.nordnet.fr:8080</con:endpoint>
		<con:request>{
  "rum": "MANDAT-test-facture",
  "modePaiement": "FACTURE_FIN_DE_MOIS",
  "auteur": {
    "qui": "SoapUITest"
  }
}</con:request>
		<con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="d69056f8-53ee-4a09-834b-ae9e0301d348">
			<con:configuration>
				<codes>200</codes>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Reference Paiement Is Not Null" id="a2ea04d5-1487-429d-b9a1-9efa22de37a7">
			<con:configuration>
				<path>declare namespace ns1='http://si2-srv.si-core.nordnet.fr/opale-api/commande/${CreerCommande#RefCommande}/paiement/recurrent';
exists(//ns1:reference/text())</path>
				<content>true</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:credentials>
			<con:authType>Global HTTP Settings</con:authType>
		</con:credentials>
		<con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
		<con:jmsPropertyConfig/>
		<con:parameters>
			<entry key="refCommande" value="${CreerCommande#RefCommande}" xmlns="http://eviware.com/soapui/config"/>
		</con:parameters>
	</con:restRequest>
</con:config>
</con:testStep>
<con:testStep type="restrequest" name="Transformer en contrat" id="8b55ae5e-b2b5-4808-9013-1d9330020d6d">
	<con:settings/>
	<con:config service="http://si2-srv.si-core.nordnet.fr:8080" resourcePath="/opale-api/commande/{refCommande}/transformerEnContrat" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
		<con:restRequest name="Transformer en contrat" mediaType="application/json" postQueryString="false">
			<con:settings>
				<con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
	</con:settings>
	<con:endpoint>http://si2-srv.si-core.nordnet.fr:8080</con:endpoint>
	<con:request>{
    "qui": "SoapUITest"
}</con:request>
	<con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="09d2dce4-d438-4d41-a54a-487217c68589">
		<con:configuration>
			<codes>200</codes>
		</con:configuration>
	</con:assertion>
	<con:assertion type="XPath Match" name="Reference Contrat Is Not Null" id="bf561d46-1fad-4ea6-a76b-8671b67254d6">
		<con:configuration>
			<path>declare namespace ns1='http://si2-srv.si-core.nordnet.fr/opale-api/commande/${CreerCommande#RefCommande}/transformerEnContrat';
exists(//ns1:referencesContrats/ns1:e[1]/text())</path>
			<content>true</content>
			<allowWildcards>false</allowWildcards>
			<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
			<ignoreComments>false</ignoreComments>
		</con:configuration>
	</con:assertion>
	<con:credentials>
		<con:authType>Global HTTP Settings</con:authType>
	</con:credentials>
	<con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
	<con:jmsPropertyConfig/>
	<con:parameters>
		<entry key="refCommande" value="${CreerCommande#RefCommande}" xmlns="http://eviware.com/soapui/config"/>
	</con:parameters>
</con:restRequest>
</con:config>
</con:testStep>
<con:testStep type="transfer" name="Transfert Ref Contrat" id="d7b4a457-02e2-4e3a-85f1-e73a21c24690">
	<con:settings/>
	<con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
		<con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false">
			<con:name>ref Contrat</con:name>
			<con:sourceType>ResponseAsXml</con:sourceType>
			<con:sourceStep>Transformer en contrat</con:sourceStep>
			<con:sourcePath>declare namespace ns1='http://si2-srv.si-core.nordnet.fr/opale-api/commande/${CreerCommande#RefCommande}/transformerEnContrat';
//ns1:referencesContrats/ns1:e[1]/text()</con:sourcePath>
			<con:targetType>RefContrat</con:targetType>
			<con:targetStep>Properties</con:targetStep>
		</con:transfers>
	</con:config>
</con:testStep>
<con:testStep type="jdbc" name="Contrat Valide" id="89876a37-c85c-4f3d-8777-919feec68826">
	<con:settings/>
	<con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
		<con:driver>com.mysql.jdbc.Driver</con:driver>
		<con:connectionString>jdbc:mysql://mysql-bddclients.securitoo.com:3306/topaze?user=gmasy&amp;password=drftgyh8</con:connectionString>
		<con:query>select * from contrat 
where reference = "${Properties#RefContrat}"</con:query>

		<con:assertion type="XPath Match" name="Date Validation is not null">
			<con:configuration>
				<path>exists(//ResultSet/Row/CONTRAT.DATEVALIDATION/text())</path>
				<content>true</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Politique Validation is not null">
			<con:configuration>
				<path>exists(//ResultSet/Row/CONTRAT.POLITIQUEVALIDATIONID/text())</path>
				<content>true</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:properties/>
	</con:config>
</con:testStep>
<con:testStep type="jdbc" name="EC Valide" id="c60873e1-de64-449a-bb0f-1f97a5e71a12">
	<con:settings/>
	<con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
		<con:driver>com.mysql.jdbc.Driver</con:driver>
		<con:connectionString>jdbc:mysql://mysql-bddclients.securitoo.com:3306/topaze?user=gmasy&amp;password=drftgyh8</con:connectionString>
		<con:query>select * from elementcontractuel
where contratParent = 
  (select id 
    from contrat 
   where reference = "${Properties#RefContrat}") 
		</con:query>
		<con:assertion type="XPath Match" name="1 seul EC">
			<con:configuration>
				<path>count(//Row)</path>
				<content>1</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Numero Commande">
			<con:configuration>
				<path>//Row/ELEMENTCONTRACTUEL.NUMEROCOMMANDE</path>
				<content>${CreerCommande#RefCommande}</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Reference Mode Paiement">
			<con:configuration><path>//Row/ELEMENTCONTRACTUEL.REFERENCEMODEPAIEMENT/text()</path><content>MANDAT-test-facture</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Periodicite">
			<con:configuration>
				<path>//Row/ELEMENTCONTRACTUEL.PERIODICITE/text()</path>
				<content>12</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Reference Produit">
			<con:configuration>
				<path>//Row/ELEMENTCONTRACTUEL.REFERENCEPRODUIT/text()</path>
				<content>avfw.essentiel</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Reference Tarif">
			<con:configuration>
				<path>//Row/ELEMENTCONTRACTUEL.REFERENCETARIF/text()</path>
				<content>avfw.essentiel.12mois</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match">
			<con:configuration/>
		</con:assertion>
		<con:assertion type="XPath Match" name="Mode Paiement">
			<con:configuration><path>//Row/ELEMENTCONTRACTUEL.MODEPAIEMENT/text()</path><content>FACTURE_FIN_DE_MOIS</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Type Produit">
			<con:configuration>
				<path>//Row/ELEMENTCONTRACTUEL.TYPEPRODUIT/text()</path>
				<content>SERVICE</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Remboursable">
			<con:configuration>
				<path>//Row/ELEMENTCONTRACTUEL.REMBOURSABLE/text()</path>
				<content>1</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Type TVA">
			<con:configuration>
				<path>//Row/ELEMENTCONTRACTUEL.TYPETVA/text()</path>
				<content>S</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Durée Is Null">
			<con:configuration>
				<path>exists(//Row/ELEMENTCONTRACTUEL.DUREE/text())</path>
				<content>false</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:properties/>
	</con:config>
</con:testStep>
<con:properties/>
</con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Vente - Revendeur - 1 mois - 2 mois gratuit" searchProperties="true" id="2c95be8c-bb9a-4eaa-a0d8-6bed9852ec8f" disabled="true">
	<con:settings/>
	<con:testStep type="properties" name="Properties" id="570f009b-92c7-4ef5-aab6-7932e3de4ba1">
		<con:settings/>
		<con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
			<con:properties>
				<con:property>
					<con:name>RefContrat</con:name>
					<con:value xsi:nil="true"/>
				</con:property>
			</con:properties>
		</con:config>
	</con:testStep>
	<con:testStep type="calltestcase" name="Creer Draft" id="4fa44f9b-3d4c-40b9-96b8-7968a530e59d">
		<con:settings/>
		<con:config xsi:type="con:RunTestCaseStep" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
			<con:targetTestCase>9407c3c9-ed7e-4957-af85-ffe5df2c581a</con:targetTestCase>
			<con:properties>
				<con:property>
					<con:name>refCommande</con:name>
				</con:property>
			</con:properties>
			<con:returnProperties>
				<con:entry>RefDraft</con:entry>
			</con:returnProperties>
			<con:runMode>SINGLETON_AND_WAIT</con:runMode>
		</con:config>
	</con:testStep>
	<con:testStep type="restrequest" name="Associer Reduction Draft" id="d6f937dd-564e-4bd2-92e2-7fbcb41be720">
		<con:settings/>
		<con:config service="http://si2-srv.si-core.nordnet.fr:8080" resourcePath="/opale-api/draft/{refDraft}/associerReduction" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
			<con:restRequest name="Associer Reduction Draft" mediaType="application/json" postQueryString="false" id="ad8e1b9e-52fc-4815-aa93-63c32141a77b">
				<con:settings>
					<con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
		</con:settings>
		<con:endpoint>http://si2-srv.si-core.nordnet.fr:8080</con:endpoint>
		<con:request>{
  "label": "Securitoo Intégral - 2 mois gratuit",
  "valeur": "1",
  "typeValeur": "MOIS",
  "referenceReduction": "avfw.essesntiel.reduction.2mois",
  "nbUtilisationMax": 2,
  "auteur": {
    "qui": "string"
  }
}</con:request>
		<con:credentials>
			<con:authType>Global HTTP Settings</con:authType>
		</con:credentials>
		<con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
		<con:jmsPropertyConfig/>
		<con:parameters>
			<con:entry key="refLigne" value=""/>
			<con:entry key="refDraft" value="${Creer Draft#RefDraft}"/>
		</con:parameters>
	</con:restRequest>
</con:config>
</con:testStep>
<con:testStep type="restrequest" name="Transformer en Commande" id="e229df77-e980-42e9-afd6-5f92afc9112a">
	<con:settings/>
	<con:config service="http://si2-srv.si-core.nordnet.fr:8080" resourcePath="/opale-api/draft/{refDraft}/transformerEnCommande" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
		<con:restRequest name="Transformer en Commande" mediaType="application/json" postQueryString="false" id="177f022d-cf5c-4d6f-96a4-fd8fef7a3975">
			<con:settings>
				<con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
	</con:settings>
	<con:endpoint>http://si2-srv.si-core.nordnet.fr:8080</con:endpoint>
	<con:request>{
  "trameCatalogue": {
    "offres": [
      {
        "reference": "avfw.essentiel",
        "label": "Securitoo Integral",
        "gamme": "Antivirus",
        "secteur": "Securite",
        "modeFacturation": "DATE_ANNIVERSAIRE",
        "type": "SERVICE",
        "tarifs": [
          {
            "id_tarif": "avfw.essentiel.1mois",
            "prix": 5,
            "frequence": 1,
            "tva": "R"
          },
          {
            "id_tarif": "avfw.essentiel.3mois",
            "prix": 4.5,
            "frequence": 3,
            "tva": "R"
          },
          {
            "id_tarif": "avfw.essentiel.12mois",
            "prix": 48,
            "frequence": 12,
            "tva": "R"
          }
        ]
      }
    ]
  },
  "clientInfo": {
    "souscripteur": {
      "clientId": "id-souscri",
      "adresseId": "adr-souscri"
    },
    "livraison": {
      "clientId": "id-livraison",
      "adresseId": "adr-livraison"
    },
    "facturation": {
      "clientId": "id-facturation",
      "adresseId": "adr-facturation"
    }
  },
  "auteur": {
    "qui": "SoapUITest"
  }
}</con:request>
	<con:credentials>
		<con:authType>Global HTTP Settings</con:authType>
	</con:credentials>
	<con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
	<con:jmsPropertyConfig/>
	<con:parameters>
		<entry key="refDraft" value="${Creer Draft#RefDraft}" xmlns="http://eviware.com/soapui/config"/>
	</con:parameters>
</con:restRequest>
</con:config>
</con:testStep>
<con:testStep type="restrequest" name="Associer Paiement Recurrent" id="d0e2ee93-51d0-49e5-beab-669a6d472015">
	<con:settings/>
	<con:config service="http://si2-srv.si-core.nordnet.fr:8080" resourcePath="/opale-api/commande/{refCommande}/paiement/recurrent" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
		<con:restRequest name="Associer Paiement Recurrent" mediaType="application/json" postQueryString="false" id="433f3ac2-74d2-4355-92be-901c05c2ff9d">
			<con:settings>
				<con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
	</con:settings>
	<con:endpoint>http://si2-srv.si-core.nordnet.fr:8080</con:endpoint>
	<con:request>{
  "idPaiement": "MANDAT-id-14587",
  "modePaiement": "SEPA",
  "auteur": {
    "qui": "SoapUITest"
  }
}</con:request>
	<con:credentials>
		<con:authType>Global HTTP Settings</con:authType>
	</con:credentials>
	<con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
	<con:jmsPropertyConfig/>
	<con:parameters>
		<entry key="refCommande" value="${CreerCommande#RefCommande}" xmlns="http://eviware.com/soapui/config"/>
	</con:parameters>
</con:restRequest>
</con:config>
</con:testStep>
<con:testStep type="restrequest" name="Transformer en contrat" id="20efd53c-aec4-431f-a1c5-f3ccb3fa1a0f">
	<con:settings/>
	<con:config service="http://si2-srv.si-core.nordnet.fr:8080" resourcePath="/opale-api/commande/{refCommande}/transformerEnContrat" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
		<con:restRequest name="Transformer en contrat" mediaType="application/json" postQueryString="false">
			<con:settings>
				<con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
	</con:settings>
	<con:endpoint>http://si2-srv.si-core.nordnet.fr:8080</con:endpoint>
	<con:request>{
    "qui": "SoapUITest"
}</con:request>
	<con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="09d2dce4-d438-4d41-a54a-487217c68589">
		<con:configuration>
			<codes>200</codes>
		</con:configuration>
	</con:assertion>
	<con:assertion type="XPath Match" name="Reference Contrat Is Not Null" id="bf561d46-1fad-4ea6-a76b-8671b67254d6">
		<con:configuration>
			<path>declare namespace ns1='http://si2-srv.si-core.nordnet.fr/opale-api/commande/${CreerCommande#RefCommande}/transformerEnContrat';
exists(//ns1:referencesContrats/ns1:e[1]/text())</path>
			<content>true</content>
			<allowWildcards>false</allowWildcards>
			<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
			<ignoreComments>false</ignoreComments>
		</con:configuration>
	</con:assertion>
	<con:credentials>
		<con:authType>Global HTTP Settings</con:authType>
	</con:credentials>
	<con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
	<con:jmsPropertyConfig/>
	<con:parameters>
		<entry key="refCommande" value="${CreerCommande#RefCommande}" xmlns="http://eviware.com/soapui/config"/>
	</con:parameters>
</con:restRequest>
</con:config>
</con:testStep>
<con:testStep type="transfer" name="Transfert Ref Contrat" id="22649923-22f7-454a-9be9-976c9af6efd4">
	<con:settings/>
	<con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
		<con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false">
			<con:name>ref Contrat</con:name>
			<con:sourceType>ResponseAsXml</con:sourceType>
			<con:sourceStep>Transformer en contrat</con:sourceStep>
			<con:sourcePath>declare namespace ns1='http://si2-srv.si-core.nordnet.fr/opale-api/commande/${CreerCommande#RefCommande}/transformerEnContrat';
//ns1:referencesContrats/ns1:e[1]/text()</con:sourcePath>
			<con:targetType>RefContrat</con:targetType>
			<con:targetStep>Properties</con:targetStep>
		</con:transfers>
	</con:config>
</con:testStep>
<con:testStep type="jdbc" name="Contrat Valide" id="c7647d45-52fc-4b4b-bd93-b8e5e735d812">
	<con:settings/>
	<con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
		<con:driver>com.mysql.jdbc.Driver</con:driver>
		<con:connectionString>jdbc:mysql://mysql-bddclients.securitoo.com:3306/topaze?user=gmasy&amp;password=drftgyh8</con:connectionString>
		<con:query>select * from contrat 
where reference = "${Properties#RefContrat}"</con:query>

		<con:assertion type="XPath Match" name="Date Validation is not null">
			<con:configuration>
				<path>exists(//ResultSet/Row/CONTRAT.DATEVALIDATION/text())</path>
				<content>true</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Politique Validation is not null">
			<con:configuration>
				<path>exists(//ResultSet/Row/CONTRAT.POLITIQUEVALIDATIONID/text())</path>
				<content>true</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:properties/>
	</con:config>
</con:testStep>
<con:testStep type="jdbc" name="EC Valide" id="86ce0f6f-fabb-412c-8d8c-bbbd3dae6db1">
	<con:settings/>
	<con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
		<con:driver>com.mysql.jdbc.Driver</con:driver>
		<con:connectionString>jdbc:mysql://mysql-bddclients.securitoo.com:3306/topaze?user=gmasy&amp;password=drftgyh8</con:connectionString>
		<con:query>select * from elementcontractuel
where contratParent = 
  (select id 
    from contrat 
   where reference = "${Properties#RefContrat}") 
		</con:query>
		<con:assertion type="XPath Match" name="1 seul EC">
			<con:configuration>
				<path>count(//Row)</path>
				<content>1</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Numero Commande">
			<con:configuration>
				<path>//Row/ELEMENTCONTRACTUEL.NUMEROCOMMANDE</path>
				<content>${CreerCommande#RefCommande}</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Reference Mode Paiement">
			<con:configuration>
				<path>exists(//Row/ELEMENTCONTRACTUEL.REFERENCEMODEPAIEMENT/text())</path>
				<content>false</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Periodicite">
			<con:configuration>
				<path>//Row/ELEMENTCONTRACTUEL.PERIODICITE/text()</path>
				<content>1</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Reference Produit">
			<con:configuration>
				<path>//Row/ELEMENTCONTRACTUEL.REFERENCEPRODUIT/text()</path>
				<content>avfw.essentiel</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Reference Tarif">
			<con:configuration>
				<path>//Row/ELEMENTCONTRACTUEL.REFERENCETARIF/text()</path>
				<content>avfw.essentiel.1mois</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match">
			<con:configuration/>
		</con:assertion>
		<con:assertion type="XPath Match" name="Mode Paiement">
			<con:configuration>
				<path>//Row/ELEMENTCONTRACTUEL.MODEPAIEMENT/text()</path>
				<content>CB</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Type Produit">
			<con:configuration>
				<path>//Row/ELEMENTCONTRACTUEL.TYPEPRODUIT/text()</path>
				<content>SERVICE</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Remboursable">
			<con:configuration>
				<path>//Row/ELEMENTCONTRACTUEL.REMBOURSABLE/text()</path>
				<content>1</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Type TVA">
			<con:configuration>
				<path>//Row/ELEMENTCONTRACTUEL.TYPETVA/text()</path>
				<content>R</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Durée Is Null">
			<con:configuration>
				<path>exists(//Row/ELEMENTCONTRACTUEL.DUREE/text())</path>
				<content>false</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:properties/>
	</con:config>
</con:testStep>
<con:properties/>
</con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Vente - Site NNCom - 12 mois - CB - Montant Inférieur" searchProperties="true" id="23a4b169-7460-4279-a633-b857e2425e49">
	<con:settings/>
	<con:testStep type="properties" name="Properties" id="bbb1985b-d287-49b0-992e-ae0bc102d44a">
		<con:settings/>
		<con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
			<con:properties>
				<con:property>
					<con:name>RefContrat</con:name>
					<con:value>00000061</con:value>
				</con:property>
			</con:properties>
		</con:config>
	</con:testStep>
	<con:testStep type="calltestcase" name="CreerCommande" id="b31b710c-e4de-4979-a0d5-360f9d183b1c">
		<con:settings/>
		<con:config xsi:type="con:RunTestCaseStep" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
			<con:targetTestCase>7d841c05-8a05-48b2-99b2-7630a7e35824</con:targetTestCase>
			<con:properties>
				<con:property>
					<con:name>RefCommande</con:name>
					<con:value>Cmd-00000009</con:value>
				</con:property>
			</con:properties>
			<con:returnProperties>
				<con:entry>RefCommande</con:entry>
			</con:returnProperties>
			<con:runMode>SINGLETON_AND_WAIT</con:runMode>
		</con:config>
	</con:testStep>
	<con:testStep type="restrequest" name="Associer Paiement comptant" id="3f1ddf63-6527-4392-a056-f6e0302ef5d8">
		<con:settings/>
		<con:config service="http://si2-srv.si-core.nordnet.fr:8080" resourcePath="/opale-api/commande/{refCommande}/paiement/comptant" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
			<con:restRequest name="Associer Paiement comptant" mediaType="application/json" postQueryString="false" id="23f08764-b335-4aae-97ce-9ae8ca97ed41">
				<con:settings>
					<con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
		</con:settings>
		<con:endpoint>http://si2-srv.si-core.nordnet.fr:8080</con:endpoint>
		<con:request>{
  "modePaiement": "CB",
  "referenceModePaiement": "Test-Transaction-id-CB-inf",
  "montant": 40,
  "auteur": {
    "qui": "Test.SoapUI"
  }
}</con:request>
		<con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="f83fb33a-74eb-440d-8b2f-caabcf48c338">
			<con:configuration>
				<codes>200</codes>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Reference Is Not Null" id="da3b8201-c7d1-41ca-9008-c1a5d9ce4c29">
			<con:configuration>
				<path>declare namespace ns1='http://si2-srv.si-core.nordnet.fr/opale-api/commande/${CreerCommande#RefCommande}/paiement/comptant';
exists(//ns1:reference/text())</path>
				<content>true</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:credentials>
			<con:authType>Global HTTP Settings</con:authType>
		</con:credentials>
		<con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
		<con:jmsPropertyConfig/>
		<con:parameters>
			<entry key="refCommande" value="${CreerCommande#RefCommande}" xmlns="http://eviware.com/soapui/config"/>
		</con:parameters>
	</con:restRequest>
</con:config>
</con:testStep>
<con:testStep type="restrequest" name="Transformer en contrat" id="dfdffdee-7070-4977-a5bf-556e912cdb49">
	<con:settings/>
	<con:config service="http://si2-srv.si-core.nordnet.fr:8080" resourcePath="/opale-api/commande/{refCommande}/transformerEnContrat" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
		<con:restRequest name="Transformer en contrat" mediaType="application/json" postQueryString="false">
			<con:settings>
				<con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
	</con:settings>
	<con:endpoint>http://si2-srv.si-core.nordnet.fr:8080</con:endpoint>
	<con:request>{
    "qui": "SoapUITest"
}</con:request>
	<con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="09d2dce4-d438-4d41-a54a-487217c68589">
		<con:configuration>
			<codes>200</codes>
		</con:configuration>
	</con:assertion>
	<con:assertion type="XPath Match" name="Reference Contrat Is Not Null" id="bf561d46-1fad-4ea6-a76b-8671b67254d6">
		<con:configuration><path>declare namespace ns1='http://si2-srv.si-core.nordnet.fr/opale-api/commande/${CreerCommande#RefCommande}/transformerEnContrat';
count(//ns1:e)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
	</con:assertion>
	<con:credentials>
		<con:authType>Global HTTP Settings</con:authType>
	</con:credentials>
	<con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
	<con:jmsPropertyConfig/>
	<con:parameters>
		<entry key="refCommande" value="${CreerCommande#RefCommande}" xmlns="http://eviware.com/soapui/config"/>
	</con:parameters>
</con:restRequest>
</con:config>
</con:testStep>
<con:testStep type="transfer" name="Transfert Ref Contrat" id="8f7e5bc6-1c43-4d25-afa6-1a1c02804e34">
	<con:settings/>
	<con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
		<con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false">
			<con:name>ref Contrat</con:name>
			<con:sourceType>ResponseAsXml</con:sourceType>
			<con:sourceStep>Transformer en contrat</con:sourceStep>
			<con:sourcePath>declare namespace ns1='http://si2-srv.si-core.nordnet.fr/opale-api/commande/${CreerCommande#RefCommande}/transformerEnContrat';
//ns1:referencesContrats/ns1:e[1]/text()</con:sourcePath>
			<con:targetType>RefContrat</con:targetType>
			<con:targetStep>Properties</con:targetStep>
		</con:transfers>
	</con:config>
</con:testStep>
<con:testStep type="jdbc" name="Contrat Valide" id="0516b0a3-7e75-4a8c-a5a5-61a88d4a14f1">
	<con:settings/>
	<con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
		<con:driver>com.mysql.jdbc.Driver</con:driver>
		<con:connectionString>jdbc:mysql://mysql-bddclients.securitoo.com:3306/topaze?user=gmasy&amp;password=drftgyh8</con:connectionString>
		<con:query>select * from contrat 
where reference = "${Properties#RefContrat}"</con:query>

		<con:assertion type="XPath Match" name="Date Validation is not null">
			<con:configuration>
				<path>exists(//ResultSet/Row/CONTRAT.DATEVALIDATION/text())</path>
				<content>true</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Politique Validation is not null">
			<con:configuration>
				<path>exists(//ResultSet/Row/CONTRAT.POLITIQUEVALIDATIONID/text())</path>
				<content>true</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:properties/>
	</con:config>
</con:testStep>
<con:testStep type="jdbc" name="EC Valide" id="bdf729d8-2fe4-4f66-a206-a437d01a743d">
	<con:settings/>
	<con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
		<con:driver>com.mysql.jdbc.Driver</con:driver>
		<con:connectionString>jdbc:mysql://mysql-bddclients.securitoo.com:3306/topaze?user=gmasy&amp;password=drftgyh8</con:connectionString>
		<con:query>select * from elementcontractuel
where contratParent = 
  (select id 
    from contrat 
   where reference = "${Properties#RefContrat}") 
		</con:query>
		<con:assertion type="XPath Match" name="1 seul EC">
			<con:configuration>
				<path>count(//Row)</path>
				<content>1</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Numero Commande">
			<con:configuration>
				<path>//Row/ELEMENTCONTRACTUEL.NUMEROCOMMANDE</path>
				<content>${CreerCommande#RefCommande}</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Reference Mode Paiement">
			<con:configuration><path>exists(//Row/ELEMENTCONTRACTUEL.REFERENCEMODEPAIEMENT/text())</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Periodicite">
			<con:configuration><path>//Row/ELEMENTCONTRACTUEL.PERIODICITE/text()</path><content>12</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Reference Produit">
			<con:configuration>
				<path>//Row/ELEMENTCONTRACTUEL.REFERENCEPRODUIT/text()</path>
				<content>avfw.essentiel</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Reference Tarif">
			<con:configuration><path>//Row/ELEMENTCONTRACTUEL.REFERENCETARIF/text()</path><content>avfw.essentiel.12mois</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match">
			<con:configuration/>
		</con:assertion>
		<con:assertion type="XPath Match" name="Mode Paiement">
			<con:configuration>
				<path>//Row/ELEMENTCONTRACTUEL.MODEPAIEMENT/text()</path>
				<content>CB</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Type Produit">
			<con:configuration>
				<path>//Row/ELEMENTCONTRACTUEL.TYPEPRODUIT/text()</path>
				<content>SERVICE</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Remboursable">
			<con:configuration>
				<path>//Row/ELEMENTCONTRACTUEL.REMBOURSABLE/text()</path>
				<content>1</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Type TVA">
			<con:configuration><path>//Row/ELEMENTCONTRACTUEL.TYPETVA/text()</path><content>S</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Durée Is Not Null">
			<con:configuration><path>exists(//Row/ELEMENTCONTRACTUEL.DUREE/text())</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
		</con:assertion>
		<con:properties/>
	</con:config>
</con:testStep>
<con:properties/>
</con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Vente - Site NNCom - 12 mois - CHEQUE - Montant Inférieur" searchProperties="true" id="21a3584c-343d-4e12-ac07-0286edbd8696">
	<con:settings/>
	<con:testStep type="properties" name="Properties" id="433651e1-2f12-4a87-ad4d-fc56493f1036">
		<con:settings/>
		<con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
			<con:properties>
				<con:property>
					<con:name>RefContrat</con:name>
					<con:value>00000065</con:value>
				</con:property>
			</con:properties>
		</con:config>
	</con:testStep>
	<con:testStep type="calltestcase" name="CreerCommande" id="5b1024e3-18d0-4053-b113-993c98a9c1cf">
		<con:settings/>
		<con:config xsi:type="con:RunTestCaseStep" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
			<con:targetTestCase>7d841c05-8a05-48b2-99b2-7630a7e35824</con:targetTestCase>
			<con:properties>
				<con:property>
					<con:name>RefCommande</con:name>
					<con:value>Cmd-00000013</con:value>
				</con:property>
			</con:properties>
			<con:returnProperties>
				<con:entry>RefCommande</con:entry>
			</con:returnProperties>
			<con:runMode>SINGLETON_AND_WAIT</con:runMode>
		</con:config>
	</con:testStep>
	<con:testStep type="restrequest" name="Associer Paiement comptant" id="72d5d4d9-f982-4428-a5a1-e9842680aab4">
		<con:settings/>
		<con:config service="http://si2-srv.si-core.nordnet.fr:8080" resourcePath="/opale-api/commande/{refCommande}/paiement/comptant" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
			<con:restRequest name="Associer Paiement comptant" mediaType="application/json" postQueryString="false" id="23f08764-b335-4aae-97ce-9ae8ca97ed41">
				<con:settings>
					<con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
		</con:settings>
		<con:endpoint>http://si2-srv.si-core.nordnet.fr:8080</con:endpoint>
		<con:request>{
  "modePaiement": "CHEQUE",
  "referenceModePaiement": "Test-idNetCheque-inf",
  "montant": 40,
  "auteur": {
    "qui": "Test.SoapUI"
  }
}</con:request>
		<con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="f83fb33a-74eb-440d-8b2f-caabcf48c338">
			<con:configuration>
				<codes>200</codes>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Reference Is Not Null" id="da3b8201-c7d1-41ca-9008-c1a5d9ce4c29">
			<con:configuration>
				<path>declare namespace ns1='http://si2-srv.si-core.nordnet.fr/opale-api/commande/${CreerCommande#RefCommande}/paiement/comptant';
exists(//ns1:reference/text())</path>
				<content>true</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:credentials>
			<con:authType>Global HTTP Settings</con:authType>
		</con:credentials>
		<con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
		<con:jmsPropertyConfig/>
		<con:parameters>
			<entry key="refCommande" value="${CreerCommande#RefCommande}" xmlns="http://eviware.com/soapui/config"/>
		</con:parameters>
	</con:restRequest>
</con:config>
</con:testStep>
<con:testStep type="restrequest" name="Transformer en contrat" id="1a1c2387-874a-4edb-9701-7f12014bdccd">
	<con:settings/>
	<con:config service="http://si2-srv.si-core.nordnet.fr:8080" resourcePath="/opale-api/commande/{refCommande}/transformerEnContrat" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
		<con:restRequest name="Transformer en contrat" mediaType="application/json" postQueryString="false">
			<con:settings>
				<con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
	</con:settings>
	<con:endpoint>http://si2-srv.si-core.nordnet.fr:8080</con:endpoint>
	<con:request>{
    "qui": "SoapUITest"
}</con:request>
	<con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="09d2dce4-d438-4d41-a54a-487217c68589">
		<con:configuration>
			<codes>200</codes>
		</con:configuration>
	</con:assertion>
	<con:assertion type="XPath Match" name="Reference Contrat Is Not Null" id="bf561d46-1fad-4ea6-a76b-8671b67254d6">
		<con:configuration><path>declare namespace ns1='http://si2-srv.si-core.nordnet.fr/opale-api/commande/${CreerCommande#RefCommande}/transformerEnContrat';
count(//ns1:e)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
	</con:assertion>
	<con:credentials>
		<con:authType>Global HTTP Settings</con:authType>
	</con:credentials>
	<con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
	<con:jmsPropertyConfig/>
	<con:parameters>
		<entry key="refCommande" value="${CreerCommande#RefCommande}" xmlns="http://eviware.com/soapui/config"/>
	</con:parameters>
</con:restRequest>
</con:config>
</con:testStep>
<con:testStep type="transfer" name="Transfert Ref Contrat" id="8f584411-4ebf-4864-80b3-842a49209705">
	<con:settings/>
	<con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
		<con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false">
			<con:name>ref Contrat</con:name>
			<con:sourceType>ResponseAsXml</con:sourceType>
			<con:sourceStep>Transformer en contrat</con:sourceStep>
			<con:sourcePath>declare namespace ns1='http://si2-srv.si-core.nordnet.fr/opale-api/commande/${CreerCommande#RefCommande}/transformerEnContrat';
//ns1:referencesContrats/ns1:e[1]/text()</con:sourcePath>
			<con:targetType>RefContrat</con:targetType>
			<con:targetStep>Properties</con:targetStep>
		</con:transfers>
	</con:config>
</con:testStep>
<con:testStep type="jdbc" name="Contrat Valide" id="a671e4d2-36f9-49c7-aec3-6b40336007f0">
	<con:settings/>
	<con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
		<con:driver>com.mysql.jdbc.Driver</con:driver>
		<con:connectionString>jdbc:mysql://mysql-bddclients.securitoo.com:3306/topaze?user=gmasy&amp;password=drftgyh8</con:connectionString>
		<con:query>select * from contrat 
where reference = "${Properties#RefContrat}"</con:query>

		<con:assertion type="XPath Match" name="Date Validation is not null">
			<con:configuration>
				<path>exists(//ResultSet/Row/CONTRAT.DATEVALIDATION/text())</path>
				<content>true</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Politique Validation is not null">
			<con:configuration>
				<path>exists(//ResultSet/Row/CONTRAT.POLITIQUEVALIDATIONID/text())</path>
				<content>true</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:properties/>
	</con:config>
</con:testStep>
<con:testStep type="jdbc" name="EC Valide" id="b34a02a5-7a30-4a57-a68d-91f12857de10">
	<con:settings/>
	<con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
		<con:driver>com.mysql.jdbc.Driver</con:driver>
		<con:connectionString>jdbc:mysql://mysql-bddclients.securitoo.com:3306/topaze?user=gmasy&amp;password=drftgyh8</con:connectionString>
		<con:query>select * from elementcontractuel
where contratParent = 
  (select id 
    from contrat 
   where reference = "${Properties#RefContrat}") 
		</con:query>
		<con:assertion type="XPath Match" name="1 seul EC">
			<con:configuration>
				<path>count(//Row)</path>
				<content>1</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Numero Commande">
			<con:configuration>
				<path>//Row/ELEMENTCONTRACTUEL.NUMEROCOMMANDE</path>
				<content>${CreerCommande#RefCommande}</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Reference Mode Paiement">
			<con:configuration><path>exists(//Row/ELEMENTCONTRACTUEL.REFERENCEMODEPAIEMENT/text())</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Periodicite">
			<con:configuration><path>//Row/ELEMENTCONTRACTUEL.PERIODICITE/text()</path><content>12</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Reference Produit">
			<con:configuration>
				<path>//Row/ELEMENTCONTRACTUEL.REFERENCEPRODUIT/text()</path>
				<content>avfw.essentiel</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Reference Tarif">
			<con:configuration><path>//Row/ELEMENTCONTRACTUEL.REFERENCETARIF/text()</path><content>avfw.essentiel.12mois</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match">
			<con:configuration/>
		</con:assertion>
		<con:assertion type="XPath Match" name="Mode Paiement">
			<con:configuration><path>//Row/ELEMENTCONTRACTUEL.MODEPAIEMENT/text()</path><content>CHEQUE</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Type Produit">
			<con:configuration>
				<path>//Row/ELEMENTCONTRACTUEL.TYPEPRODUIT/text()</path>
				<content>SERVICE</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Remboursable">
			<con:configuration>
				<path>//Row/ELEMENTCONTRACTUEL.REMBOURSABLE/text()</path>
				<content>1</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Type TVA">
			<con:configuration><path>//Row/ELEMENTCONTRACTUEL.TYPETVA/text()</path><content>S</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Durée Is Not Null">
			<con:configuration><path>exists(//Row/ELEMENTCONTRACTUEL.DUREE/text())</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
		</con:assertion>
		<con:properties/>
	</con:config>
</con:testStep>
<con:properties/>
</con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Vente - Site NNCom - 12 mois - VIREMENT - Montant Inférieur" searchProperties="true" id="c7953f84-5ec9-4e84-b4b8-ffcedb8459b2" disabled="true">
	<con:settings/>
	<con:testStep type="properties" name="Properties" id="338b4b0b-10d1-4782-804e-758071950abb">
		<con:settings/>
		<con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
			<con:properties>
				<con:property>
					<con:name>RefContrat</con:name>
					<con:value>00000065</con:value>
				</con:property>
			</con:properties>
		</con:config>
	</con:testStep>
	<con:testStep type="calltestcase" name="CreerCommande" id="10cfab5e-52e8-4c76-a43f-8c60bfc96fd1">
		<con:settings/>
		<con:config xsi:type="con:RunTestCaseStep" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
			<con:targetTestCase>7d841c05-8a05-48b2-99b2-7630a7e35824</con:targetTestCase>
			<con:properties>
				<con:property>
					<con:name>RefCommande</con:name>
					<con:value>Cmd-00000014</con:value>
				</con:property>
			</con:properties>
			<con:returnProperties>
				<con:entry>RefCommande</con:entry>
			</con:returnProperties>
			<con:runMode>SINGLETON_AND_WAIT</con:runMode>
		</con:config>
	</con:testStep>
	<con:testStep type="restrequest" name="Associer Paiement comptant" id="213a6aa3-9f78-4726-a2e8-4466d5399cac">
		<con:settings/>
		<con:config service="http://si2-srv.si-core.nordnet.fr:8080" resourcePath="/opale-api/commande/{refCommande}/paiement/comptant" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
			<con:restRequest name="Associer Paiement comptant" mediaType="application/json" postQueryString="false" id="23f08764-b335-4aae-97ce-9ae8ca97ed41">
				<con:settings>
					<con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
		</con:settings>
		<con:endpoint>http://si2-srv.si-core.nordnet.fr:8080</con:endpoint>
		<con:request>{
  "modePaiement": "VIREMENT",
  "referenceModePaiement": "Test-id-virement",
  "montant": 40,
  "auteur": {
    "qui": "Test.SoapUI"
  }
}</con:request>
		<con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="f83fb33a-74eb-440d-8b2f-caabcf48c338">
			<con:configuration>
				<codes>200</codes>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Reference Is Not Null" id="da3b8201-c7d1-41ca-9008-c1a5d9ce4c29">
			<con:configuration>
				<path>declare namespace ns1='http://si2-srv.si-core.nordnet.fr/opale-api/commande/${CreerCommande#RefCommande}/paiement/comptant';
exists(//ns1:reference/text())</path>
				<content>true</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:credentials>
			<con:authType>Global HTTP Settings</con:authType>
		</con:credentials>
		<con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
		<con:jmsPropertyConfig/>
		<con:parameters>
			<entry key="refCommande" value="${CreerCommande#RefCommande}" xmlns="http://eviware.com/soapui/config"/>
		</con:parameters>
	</con:restRequest>
</con:config>
</con:testStep>
<con:testStep type="restrequest" name="Transformer en contrat" id="58df56aa-b2ba-4436-823d-94711690c45e">
	<con:settings/>
	<con:config service="http://si2-srv.si-core.nordnet.fr:8080" resourcePath="/opale-api/commande/{refCommande}/transformerEnContrat" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
		<con:restRequest name="Transformer en contrat" mediaType="application/json" postQueryString="false">
			<con:settings>
				<con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
	</con:settings>
	<con:endpoint>http://si2-srv.si-core.nordnet.fr:8080</con:endpoint>
	<con:request>{
    "qui": "SoapUITest"
}</con:request>
	<con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="09d2dce4-d438-4d41-a54a-487217c68589">
		<con:configuration>
			<codes>200</codes>
		</con:configuration>
	</con:assertion>
	<con:assertion type="XPath Match" name="Reference Contrat Is Not Null" id="bf561d46-1fad-4ea6-a76b-8671b67254d6">
		<con:configuration><path>declare namespace ns1='http://si2-srv.si-core.nordnet.fr/opale-api/commande/${CreerCommande#RefCommande}/transformerEnContrat';
count(//ns1:e)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
	</con:assertion>
	<con:credentials>
		<con:authType>Global HTTP Settings</con:authType>
	</con:credentials>
	<con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
	<con:jmsPropertyConfig/>
	<con:parameters>
		<entry key="refCommande" value="${CreerCommande#RefCommande}" xmlns="http://eviware.com/soapui/config"/>
	</con:parameters>
</con:restRequest>
</con:config>
</con:testStep>
<con:testStep type="transfer" name="Transfert Ref Contrat" id="ed21879b-41ef-446c-a3e0-4464d07fc4af">
	<con:settings/>
	<con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
		<con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false">
			<con:name>ref Contrat</con:name>
			<con:sourceType>ResponseAsXml</con:sourceType>
			<con:sourceStep>Transformer en contrat</con:sourceStep>
			<con:sourcePath>declare namespace ns1='http://si2-srv.si-core.nordnet.fr/opale-api/commande/${CreerCommande#RefCommande}/transformerEnContrat';
//ns1:referencesContrats/ns1:e[1]/text()</con:sourcePath>
			<con:targetType>RefContrat</con:targetType>
			<con:targetStep>Properties</con:targetStep>
		</con:transfers>
	</con:config>
</con:testStep>
<con:testStep type="jdbc" name="Contrat Valide" id="d4a8b325-247c-46c9-bee3-50b8f3fc99e8">
	<con:settings/>
	<con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
		<con:driver>com.mysql.jdbc.Driver</con:driver>
		<con:connectionString>jdbc:mysql://mysql-bddclients.securitoo.com:3306/topaze?user=gmasy&amp;password=drftgyh8</con:connectionString>
		<con:query>select * from contrat 
where reference = "${Properties#RefContrat}"</con:query>

		<con:assertion type="XPath Match" name="Date Validation is not null">
			<con:configuration>
				<path>exists(//ResultSet/Row/CONTRAT.DATEVALIDATION/text())</path>
				<content>true</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Politique Validation is not null">
			<con:configuration>
				<path>exists(//ResultSet/Row/CONTRAT.POLITIQUEVALIDATIONID/text())</path>
				<content>true</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:properties/>
	</con:config>
</con:testStep>
<con:testStep type="jdbc" name="EC Valide" id="c403a609-5abb-4b46-88be-50186cf4d515">
	<con:settings/>
	<con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
		<con:driver>com.mysql.jdbc.Driver</con:driver>
		<con:connectionString>jdbc:mysql://mysql-bddclients.securitoo.com:3306/topaze?user=gmasy&amp;password=drftgyh8</con:connectionString>
		<con:query>select * from elementcontractuel
where contratParent = 
  (select id 
    from contrat 
   where reference = "${Properties#RefContrat}") 
		</con:query>
		<con:assertion type="XPath Match" name="1 seul EC">
			<con:configuration>
				<path>count(//Row)</path>
				<content>1</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Numero Commande">
			<con:configuration>
				<path>//Row/ELEMENTCONTRACTUEL.NUMEROCOMMANDE</path>
				<content>${CreerCommande#RefCommande}</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Reference Mode Paiement">
			<con:configuration><path>exists(//Row/ELEMENTCONTRACTUEL.REFERENCEMODEPAIEMENT/text())</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Periodicite">
			<con:configuration><path>//Row/ELEMENTCONTRACTUEL.PERIODICITE/text()</path><content>12</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Reference Produit">
			<con:configuration>
				<path>//Row/ELEMENTCONTRACTUEL.REFERENCEPRODUIT/text()</path>
				<content>avfw.essentiel</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Reference Tarif">
			<con:configuration><path>//Row/ELEMENTCONTRACTUEL.REFERENCETARIF/text()</path><content>avfw.essentiel.12mois</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match">
			<con:configuration/>
		</con:assertion>
		<con:assertion type="XPath Match" name="Mode Paiement">
			<con:configuration><path>//Row/ELEMENTCONTRACTUEL.MODEPAIEMENT/text()</path><content>VIREMENT</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Type Produit">
			<con:configuration>
				<path>//Row/ELEMENTCONTRACTUEL.TYPEPRODUIT/text()</path>
				<content>SERVICE</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Remboursable">
			<con:configuration>
				<path>//Row/ELEMENTCONTRACTUEL.REMBOURSABLE/text()</path>
				<content>1</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Type TVA">
			<con:configuration><path>//Row/ELEMENTCONTRACTUEL.TYPETVA/text()</path><content>S</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Durée Is Not Null">
			<con:configuration><path>exists(//Row/ELEMENTCONTRACTUEL.DUREE/text())</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
		</con:assertion>
		<con:properties/>
	</con:config>
</con:testStep>
<con:properties/>
</con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Vente - Site NNCom - 12 mois - CB - Montant Supérieur" searchProperties="true" id="31140f98-5639-4eb5-aeae-754f56afa025">
	<con:settings/>
	<con:testStep type="properties" name="Properties" id="132c8d57-9da7-4fd5-ba10-66692b518876">
		<con:settings/>
		<con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
			<con:properties>
				<con:property>
					<con:name>RefContrat</con:name>
					<con:value>00000061</con:value>
				</con:property>
			</con:properties>
		</con:config>
	</con:testStep>
	<con:testStep type="calltestcase" name="CreerCommande" id="52d98808-b984-4a7f-aec7-f2deea52d08f">
		<con:settings/>
		<con:config xsi:type="con:RunTestCaseStep" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
			<con:targetTestCase>7d841c05-8a05-48b2-99b2-7630a7e35824</con:targetTestCase>
			<con:properties>
				<con:property>
					<con:name>RefCommande</con:name>
					<con:value>Cmd-00000009</con:value>
				</con:property>
			</con:properties>
			<con:returnProperties>
				<con:entry>RefCommande</con:entry>
			</con:returnProperties>
			<con:runMode>SINGLETON_AND_WAIT</con:runMode>
		</con:config>
	</con:testStep>
	<con:testStep type="restrequest" name="Associer Paiement comptant" id="8713c68c-d43d-49ba-b2d7-ffd208e0f0cb">
		<con:settings/>
		<con:config service="http://si2-srv.si-core.nordnet.fr:8080" resourcePath="/opale-api/commande/{refCommande}/paiement/comptant" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
			<con:restRequest name="Associer Paiement comptant" mediaType="application/json" postQueryString="false" id="23f08764-b335-4aae-97ce-9ae8ca97ed41">
				<con:settings>
					<con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
		</con:settings>
		<con:endpoint>http://si2-srv.si-core.nordnet.fr:8080</con:endpoint>
		<con:request>{
  "modePaiement": "CB",
  "referenceModePaiement": "Test-Transaction-id-CB-sup",
  "montant": 50,
  "auteur": {
    "qui": "Test.SoapUI"
  }
}</con:request>
		<con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="f83fb33a-74eb-440d-8b2f-caabcf48c338">
			<con:configuration>
				<codes>200</codes>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Reference Is Not Null" id="da3b8201-c7d1-41ca-9008-c1a5d9ce4c29">
			<con:configuration>
				<path>declare namespace ns1='http://si2-srv.si-core.nordnet.fr/opale-api/commande/${CreerCommande#RefCommande}/paiement/comptant';
exists(//ns1:reference/text())</path>
				<content>true</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:credentials>
			<con:authType>Global HTTP Settings</con:authType>
		</con:credentials>
		<con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
		<con:jmsPropertyConfig/>
		<con:parameters>
			<entry key="refCommande" value="${CreerCommande#RefCommande}" xmlns="http://eviware.com/soapui/config"/>
		</con:parameters>
	</con:restRequest>
</con:config>
</con:testStep>
<con:testStep type="restrequest" name="Transformer en contrat" id="734424a3-202c-4182-b45d-fbdb2fe40ab0">
	<con:settings/>
	<con:config service="http://si2-srv.si-core.nordnet.fr:8080" resourcePath="/opale-api/commande/{refCommande}/transformerEnContrat" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
		<con:restRequest name="Transformer en contrat" mediaType="application/json" postQueryString="false">
			<con:settings>
				<con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
	</con:settings>
	<con:endpoint>http://si2-srv.si-core.nordnet.fr:8080</con:endpoint>
	<con:request>{
    "qui": "SoapUITest"
}</con:request>
	<con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="09d2dce4-d438-4d41-a54a-487217c68589">
		<con:configuration>
			<codes>200</codes>
		</con:configuration>
	</con:assertion>
	<con:assertion type="XPath Match" name="Reference Contrat Is Not Null" id="bf561d46-1fad-4ea6-a76b-8671b67254d6">
		<con:configuration><path>declare namespace ns1='http://si2-srv.si-core.nordnet.fr/opale-api/commande/${CreerCommande#RefCommande}/transformerEnContrat';
count(//ns1:e)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
	</con:assertion>
	<con:credentials>
		<con:authType>Global HTTP Settings</con:authType>
	</con:credentials>
	<con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
	<con:jmsPropertyConfig/>
	<con:parameters>
		<entry key="refCommande" value="${CreerCommande#RefCommande}" xmlns="http://eviware.com/soapui/config"/>
	</con:parameters>
</con:restRequest>
</con:config>
</con:testStep>
<con:testStep type="transfer" name="Transfert Ref Contrat" id="e8bfbe03-ee09-4b01-907c-0c9c27e663e2">
	<con:settings/>
	<con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
		<con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false">
			<con:name>ref Contrat</con:name>
			<con:sourceType>ResponseAsXml</con:sourceType>
			<con:sourceStep>Transformer en contrat</con:sourceStep>
			<con:sourcePath>declare namespace ns1='http://si2-srv.si-core.nordnet.fr/opale-api/commande/${CreerCommande#RefCommande}/transformerEnContrat';
//ns1:referencesContrats/ns1:e[1]/text()</con:sourcePath>
			<con:targetType>RefContrat</con:targetType>
			<con:targetStep>Properties</con:targetStep>
		</con:transfers>
	</con:config>
</con:testStep>
<con:testStep type="jdbc" name="Contrat Valide" id="1f6bd649-b169-402e-9752-21306efc2a79">
	<con:settings/>
	<con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
		<con:driver>com.mysql.jdbc.Driver</con:driver>
		<con:connectionString>jdbc:mysql://mysql-bddclients.securitoo.com:3306/topaze?user=gmasy&amp;password=drftgyh8</con:connectionString>
		<con:query>select * from contrat 
where reference = "${Properties#RefContrat}"</con:query>

		<con:assertion type="XPath Match" name="Date Validation is not null">
			<con:configuration>
				<path>exists(//ResultSet/Row/CONTRAT.DATEVALIDATION/text())</path>
				<content>true</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Politique Validation is not null">
			<con:configuration>
				<path>exists(//ResultSet/Row/CONTRAT.POLITIQUEVALIDATIONID/text())</path>
				<content>true</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:properties/>
	</con:config>
</con:testStep>
<con:testStep type="jdbc" name="EC Valide" id="3f15142c-e269-4b88-8c25-5d79b7b45c6c">
	<con:settings/>
	<con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
		<con:driver>com.mysql.jdbc.Driver</con:driver>
		<con:connectionString>jdbc:mysql://mysql-bddclients.securitoo.com:3306/topaze?user=gmasy&amp;password=drftgyh8</con:connectionString>
		<con:query>select * from elementcontractuel
where contratParent = 
  (select id 
    from contrat 
   where reference = "${Properties#RefContrat}") 
		</con:query>
		<con:assertion type="XPath Match" name="1 seul EC">
			<con:configuration>
				<path>count(//Row)</path>
				<content>1</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Numero Commande">
			<con:configuration>
				<path>//Row/ELEMENTCONTRACTUEL.NUMEROCOMMANDE</path>
				<content>${CreerCommande#RefCommande}</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Reference Mode Paiement">
			<con:configuration><path>exists(//Row/ELEMENTCONTRACTUEL.REFERENCEMODEPAIEMENT/text())</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Periodicite">
			<con:configuration><path>//Row/ELEMENTCONTRACTUEL.PERIODICITE/text()</path><content>12</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Reference Produit">
			<con:configuration>
				<path>//Row/ELEMENTCONTRACTUEL.REFERENCEPRODUIT/text()</path>
				<content>avfw.essentiel</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Reference Tarif">
			<con:configuration><path>//Row/ELEMENTCONTRACTUEL.REFERENCETARIF/text()</path><content>avfw.essentiel.12mois</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match">
			<con:configuration/>
		</con:assertion>
		<con:assertion type="XPath Match" name="Mode Paiement">
			<con:configuration>
				<path>//Row/ELEMENTCONTRACTUEL.MODEPAIEMENT/text()</path>
				<content>CB</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Type Produit">
			<con:configuration>
				<path>//Row/ELEMENTCONTRACTUEL.TYPEPRODUIT/text()</path>
				<content>SERVICE</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Remboursable">
			<con:configuration>
				<path>//Row/ELEMENTCONTRACTUEL.REMBOURSABLE/text()</path>
				<content>1</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Type TVA">
			<con:configuration><path>//Row/ELEMENTCONTRACTUEL.TYPETVA/text()</path><content>S</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Durée Is Not Null">
			<con:configuration><path>exists(//Row/ELEMENTCONTRACTUEL.DUREE/text())</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
		</con:assertion>
		<con:properties/>
	</con:config>
</con:testStep>
<con:properties/>
</con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Vente - Site NNCom - 12 mois - CHEQUE - Montant Supérieur" searchProperties="true" id="af830b16-dc64-4f82-9af0-10ba1a4ed379">
	<con:settings/>
	<con:testStep type="properties" name="Properties" id="13787641-09a9-480a-a9ed-057818503a82">
		<con:settings/>
		<con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
			<con:properties>
				<con:property>
					<con:name>RefContrat</con:name>
					<con:value>00000061</con:value>
				</con:property>
			</con:properties>
		</con:config>
	</con:testStep>
	<con:testStep type="calltestcase" name="CreerCommande" id="b0130f21-37e1-4b24-834b-aec701a42e76">
		<con:settings/>
		<con:config xsi:type="con:RunTestCaseStep" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
			<con:targetTestCase>7d841c05-8a05-48b2-99b2-7630a7e35824</con:targetTestCase>
			<con:properties>
				<con:property>
					<con:name>RefCommande</con:name>
					<con:value>Cmd-00000009</con:value>
				</con:property>
			</con:properties>
			<con:returnProperties>
				<con:entry>RefCommande</con:entry>
			</con:returnProperties>
			<con:runMode>SINGLETON_AND_WAIT</con:runMode>
		</con:config>
	</con:testStep>
	<con:testStep type="restrequest" name="Associer Paiement comptant" id="237e15f5-3f80-439a-95e1-cad6949e8e7b">
		<con:settings/>
		<con:config service="http://si2-srv.si-core.nordnet.fr:8080" resourcePath="/opale-api/commande/{refCommande}/paiement/comptant" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
			<con:restRequest name="Associer Paiement comptant" mediaType="application/json" postQueryString="false" id="23f08764-b335-4aae-97ce-9ae8ca97ed41">
				<con:settings>
					<con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
		</con:settings>
		<con:endpoint>http://si2-srv.si-core.nordnet.fr:8080</con:endpoint>
		<con:request>{
  "modePaiement": "CHEQUE",
  "referenceModePaiement": "Test-Transaction-id-CHEQUE-sup",
  "montant": 50,
  "auteur": {
    "qui": "Test.SoapUI"
  }
}</con:request>
		<con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="f83fb33a-74eb-440d-8b2f-caabcf48c338">
			<con:configuration>
				<codes>200</codes>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Reference Is Not Null" id="da3b8201-c7d1-41ca-9008-c1a5d9ce4c29">
			<con:configuration>
				<path>declare namespace ns1='http://si2-srv.si-core.nordnet.fr/opale-api/commande/${CreerCommande#RefCommande}/paiement/comptant';
exists(//ns1:reference/text())</path>
				<content>true</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:credentials>
			<con:authType>Global HTTP Settings</con:authType>
		</con:credentials>
		<con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
		<con:jmsPropertyConfig/>
		<con:parameters>
			<entry key="refCommande" value="${CreerCommande#RefCommande}" xmlns="http://eviware.com/soapui/config"/>
		</con:parameters>
	</con:restRequest>
</con:config>
</con:testStep>
<con:testStep type="restrequest" name="Transformer en contrat" id="c3b5662a-7d78-44ed-bbef-5a24fcbb9678">
	<con:settings/>
	<con:config service="http://si2-srv.si-core.nordnet.fr:8080" resourcePath="/opale-api/commande/{refCommande}/transformerEnContrat" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
		<con:restRequest name="Transformer en contrat" mediaType="application/json" postQueryString="false">
			<con:settings>
				<con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
	</con:settings>
	<con:endpoint>http://si2-srv.si-core.nordnet.fr:8080</con:endpoint>
	<con:request>{
    "qui": "SoapUITest"
}</con:request>
	<con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="09d2dce4-d438-4d41-a54a-487217c68589">
		<con:configuration>
			<codes>200</codes>
		</con:configuration>
	</con:assertion>
	<con:assertion type="XPath Match" name="Reference Contrat Is Not Null" id="bf561d46-1fad-4ea6-a76b-8671b67254d6">
		<con:configuration><path>declare namespace ns1='http://si2-srv.si-core.nordnet.fr/opale-api/commande/${CreerCommande#RefCommande}/transformerEnContrat';
count(//ns1:e)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
	</con:assertion>
	<con:credentials>
		<con:authType>Global HTTP Settings</con:authType>
	</con:credentials>
	<con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
	<con:jmsPropertyConfig/>
	<con:parameters>
		<entry key="refCommande" value="${CreerCommande#RefCommande}" xmlns="http://eviware.com/soapui/config"/>
	</con:parameters>
</con:restRequest>
</con:config>
</con:testStep>
<con:testStep type="transfer" name="Transfert Ref Contrat" id="13a1e674-6d60-4efb-bbf2-68a0bd4aad83">
	<con:settings/>
	<con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
		<con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false">
			<con:name>ref Contrat</con:name>
			<con:sourceType>ResponseAsXml</con:sourceType>
			<con:sourceStep>Transformer en contrat</con:sourceStep>
			<con:sourcePath>declare namespace ns1='http://si2-srv.si-core.nordnet.fr/opale-api/commande/${CreerCommande#RefCommande}/transformerEnContrat';
//ns1:referencesContrats/ns1:e[1]/text()</con:sourcePath>
			<con:targetType>RefContrat</con:targetType>
			<con:targetStep>Properties</con:targetStep>
		</con:transfers>
	</con:config>
</con:testStep>
<con:testStep type="jdbc" name="Contrat Valide" id="c5302aad-de28-4e06-9498-6273132c865c">
	<con:settings/>
	<con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
		<con:driver>com.mysql.jdbc.Driver</con:driver>
		<con:connectionString>jdbc:mysql://mysql-bddclients.securitoo.com:3306/topaze?user=gmasy&amp;password=drftgyh8</con:connectionString>
		<con:query>select * from contrat 
where reference = "${Properties#RefContrat}"</con:query>

		<con:assertion type="XPath Match" name="Date Validation is not null">
			<con:configuration>
				<path>exists(//ResultSet/Row/CONTRAT.DATEVALIDATION/text())</path>
				<content>true</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Politique Validation is not null">
			<con:configuration>
				<path>exists(//ResultSet/Row/CONTRAT.POLITIQUEVALIDATIONID/text())</path>
				<content>true</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:properties/>
	</con:config>
</con:testStep>
<con:testStep type="jdbc" name="EC Valide" id="c158f343-2f2f-4446-a8a8-cff0c81bf314">
	<con:settings/>
	<con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
		<con:driver>com.mysql.jdbc.Driver</con:driver>
		<con:connectionString>jdbc:mysql://mysql-bddclients.securitoo.com:3306/topaze?user=gmasy&amp;password=drftgyh8</con:connectionString>
		<con:query>select * from elementcontractuel
where contratParent = 
  (select id 
    from contrat 
   where reference = "${Properties#RefContrat}") 
		</con:query>
		<con:assertion type="XPath Match" name="1 seul EC">
			<con:configuration>
				<path>count(//Row)</path>
				<content>1</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Numero Commande">
			<con:configuration>
				<path>//Row/ELEMENTCONTRACTUEL.NUMEROCOMMANDE</path>
				<content>${CreerCommande#RefCommande}</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Reference Mode Paiement">
			<con:configuration><path>exists(//Row/ELEMENTCONTRACTUEL.REFERENCEMODEPAIEMENT/text())</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Periodicite">
			<con:configuration><path>//Row/ELEMENTCONTRACTUEL.PERIODICITE/text()</path><content>12</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Reference Produit">
			<con:configuration>
				<path>//Row/ELEMENTCONTRACTUEL.REFERENCEPRODUIT/text()</path>
				<content>avfw.essentiel</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Reference Tarif">
			<con:configuration><path>//Row/ELEMENTCONTRACTUEL.REFERENCETARIF/text()</path><content>avfw.essentiel.12mois</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match">
			<con:configuration/>
		</con:assertion>
		<con:assertion type="XPath Match" name="Mode Paiement">
			<con:configuration>
				<path>//Row/ELEMENTCONTRACTUEL.MODEPAIEMENT/text()</path>
				<content>CB</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Type Produit">
			<con:configuration>
				<path>//Row/ELEMENTCONTRACTUEL.TYPEPRODUIT/text()</path>
				<content>SERVICE</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Remboursable">
			<con:configuration>
				<path>//Row/ELEMENTCONTRACTUEL.REMBOURSABLE/text()</path>
				<content>1</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Type TVA">
			<con:configuration><path>//Row/ELEMENTCONTRACTUEL.TYPETVA/text()</path><content>S</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Durée Is Not Null">
			<con:configuration><path>exists(//Row/ELEMENTCONTRACTUEL.DUREE/text())</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
		</con:assertion>
		<con:properties/>
	</con:config>
</con:testStep>
<con:properties/>
</con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Vente - Site NNCom - 12 mois - VIREMENT - Montant Supérieur" searchProperties="true" id="0817102f-5eb8-498c-adc3-97b68e023e1a" disabled="true">
	<con:settings/>
	<con:testStep type="properties" name="Properties" id="9b3d6f50-6a48-424c-ac2c-852e59131393">
		<con:settings/>
		<con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
			<con:properties>
				<con:property>
					<con:name>RefContrat</con:name>
					<con:value>00000061</con:value>
				</con:property>
			</con:properties>
		</con:config>
	</con:testStep>
	<con:testStep type="calltestcase" name="CreerCommande" id="7320d881-5f31-49fe-8cf1-604df5196292">
		<con:settings/>
		<con:config xsi:type="con:RunTestCaseStep" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
			<con:targetTestCase>7d841c05-8a05-48b2-99b2-7630a7e35824</con:targetTestCase>
			<con:properties>
				<con:property>
					<con:name>RefCommande</con:name>
					<con:value>Cmd-00000009</con:value>
				</con:property>
			</con:properties>
			<con:returnProperties>
				<con:entry>RefCommande</con:entry>
			</con:returnProperties>
			<con:runMode>SINGLETON_AND_WAIT</con:runMode>
		</con:config>
	</con:testStep>
	<con:testStep type="restrequest" name="Associer Paiement comptant" id="c59864d3-0120-4686-a65c-e337a8e17bb8">
		<con:settings/>
		<con:config service="http://si2-srv.si-core.nordnet.fr:8080" resourcePath="/opale-api/commande/{refCommande}/paiement/comptant" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
			<con:restRequest name="Associer Paiement comptant" mediaType="application/json" postQueryString="false" id="23f08764-b335-4aae-97ce-9ae8ca97ed41">
				<con:settings>
					<con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
		</con:settings>
		<con:endpoint>http://si2-srv.si-core.nordnet.fr:8080</con:endpoint>
		<con:request>{
  "modePaiement": "VIREMENT",
  "referenceModePaiement": "Test-Transaction-id-VIREMENT",
  "montant": 50,
  "auteur": {
    "qui": "Test.SoapUI"
  }
}</con:request>
		<con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="f83fb33a-74eb-440d-8b2f-caabcf48c338">
			<con:configuration>
				<codes>200</codes>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Reference Is Not Null" id="da3b8201-c7d1-41ca-9008-c1a5d9ce4c29">
			<con:configuration>
				<path>declare namespace ns1='http://si2-srv.si-core.nordnet.fr/opale-api/commande/${CreerCommande#RefCommande}/paiement/comptant';
exists(//ns1:reference/text())</path>
				<content>true</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:credentials>
			<con:authType>Global HTTP Settings</con:authType>
		</con:credentials>
		<con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
		<con:jmsPropertyConfig/>
		<con:parameters>
			<entry key="refCommande" value="${CreerCommande#RefCommande}" xmlns="http://eviware.com/soapui/config"/>
		</con:parameters>
	</con:restRequest>
</con:config>
</con:testStep>
<con:testStep type="restrequest" name="Transformer en contrat" id="327e91f0-717f-45d6-b1fe-d3ba295275b1">
	<con:settings/>
	<con:config service="http://si2-srv.si-core.nordnet.fr:8080" resourcePath="/opale-api/commande/{refCommande}/transformerEnContrat" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
		<con:restRequest name="Transformer en contrat" mediaType="application/json" postQueryString="false">
			<con:settings>
				<con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
	</con:settings>
	<con:endpoint>http://si2-srv.si-core.nordnet.fr:8080</con:endpoint>
	<con:request>{
    "qui": "SoapUITest"
}</con:request>
	<con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="09d2dce4-d438-4d41-a54a-487217c68589">
		<con:configuration>
			<codes>200</codes>
		</con:configuration>
	</con:assertion>
	<con:assertion type="XPath Match" name="Reference Contrat Is Not Null" id="bf561d46-1fad-4ea6-a76b-8671b67254d6">
		<con:configuration><path>declare namespace ns1='http://si2-srv.si-core.nordnet.fr/opale-api/commande/${CreerCommande#RefCommande}/transformerEnContrat';
count(//ns1:e)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
	</con:assertion>
	<con:credentials>
		<con:authType>Global HTTP Settings</con:authType>
	</con:credentials>
	<con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
	<con:jmsPropertyConfig/>
	<con:parameters>
		<entry key="refCommande" value="${CreerCommande#RefCommande}" xmlns="http://eviware.com/soapui/config"/>
	</con:parameters>
</con:restRequest>
</con:config>
</con:testStep>
<con:testStep type="transfer" name="Transfert Ref Contrat" id="3b0e3f64-76ab-4959-a823-03f417eb88d1">
	<con:settings/>
	<con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
		<con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false">
			<con:name>ref Contrat</con:name>
			<con:sourceType>ResponseAsXml</con:sourceType>
			<con:sourceStep>Transformer en contrat</con:sourceStep>
			<con:sourcePath>declare namespace ns1='http://si2-srv.si-core.nordnet.fr/opale-api/commande/${CreerCommande#RefCommande}/transformerEnContrat';
//ns1:referencesContrats/ns1:e[1]/text()</con:sourcePath>
			<con:targetType>RefContrat</con:targetType>
			<con:targetStep>Properties</con:targetStep>
		</con:transfers>
	</con:config>
</con:testStep>
<con:testStep type="jdbc" name="Contrat Valide" id="f4b96b64-451f-4496-adbd-33a97bf3de09">
	<con:settings/>
	<con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
		<con:driver>com.mysql.jdbc.Driver</con:driver>
		<con:connectionString>jdbc:mysql://mysql-bddclients.securitoo.com:3306/topaze?user=gmasy&amp;password=drftgyh8</con:connectionString>
		<con:query>select * from contrat 
where reference = "${Properties#RefContrat}"</con:query>

		<con:assertion type="XPath Match" name="Date Validation is not null">
			<con:configuration>
				<path>exists(//ResultSet/Row/CONTRAT.DATEVALIDATION/text())</path>
				<content>true</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Politique Validation is not null">
			<con:configuration>
				<path>exists(//ResultSet/Row/CONTRAT.POLITIQUEVALIDATIONID/text())</path>
				<content>true</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:properties/>
	</con:config>
</con:testStep>
<con:testStep type="jdbc" name="EC Valide" id="ed2b2c57-1148-45bb-a40e-cd2a48e30cf6">
	<con:settings/>
	<con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
		<con:driver>com.mysql.jdbc.Driver</con:driver>
		<con:connectionString>jdbc:mysql://mysql-bddclients.securitoo.com:3306/topaze?user=gmasy&amp;password=drftgyh8</con:connectionString>
		<con:query>select * from elementcontractuel
where contratParent = 
  (select id 
    from contrat 
   where reference = "${Properties#RefContrat}") 
		</con:query>
		<con:assertion type="XPath Match" name="1 seul EC">
			<con:configuration>
				<path>count(//Row)</path>
				<content>1</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Numero Commande">
			<con:configuration>
				<path>//Row/ELEMENTCONTRACTUEL.NUMEROCOMMANDE</path>
				<content>${CreerCommande#RefCommande}</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Reference Mode Paiement">
			<con:configuration><path>exists(//Row/ELEMENTCONTRACTUEL.REFERENCEMODEPAIEMENT/text())</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Periodicite">
			<con:configuration><path>//Row/ELEMENTCONTRACTUEL.PERIODICITE/text()</path><content>12</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Reference Produit">
			<con:configuration>
				<path>//Row/ELEMENTCONTRACTUEL.REFERENCEPRODUIT/text()</path>
				<content>avfw.essentiel</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Reference Tarif">
			<con:configuration><path>//Row/ELEMENTCONTRACTUEL.REFERENCETARIF/text()</path><content>avfw.essentiel.12mois</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match">
			<con:configuration/>
		</con:assertion>
		<con:assertion type="XPath Match" name="Mode Paiement">
			<con:configuration>
				<path>//Row/ELEMENTCONTRACTUEL.MODEPAIEMENT/text()</path>
				<content>CB</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Type Produit">
			<con:configuration>
				<path>//Row/ELEMENTCONTRACTUEL.TYPEPRODUIT/text()</path>
				<content>SERVICE</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Remboursable">
			<con:configuration>
				<path>//Row/ELEMENTCONTRACTUEL.REMBOURSABLE/text()</path>
				<content>1</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Type TVA">
			<con:configuration><path>//Row/ELEMENTCONTRACTUEL.TYPETVA/text()</path><content>S</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Durée Is Not Null">
			<con:configuration><path>exists(//Row/ELEMENTCONTRACTUEL.DUREE/text())</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
		</con:assertion>
		<con:properties/>
	</con:config>
</con:testStep>
<con:properties/>
</con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Vente - Site NNCom - 1 mois - CB - Montant Juste" searchProperties="true" id="829105f2-dc62-4d94-97ac-97778fd12a23">
	<con:settings/>
	<con:testStep type="properties" name="Properties" id="95cabf78-3820-4cab-bb15-587f56845bb3">
		<con:settings/>
		<con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
			<con:properties>
				<con:property>
					<con:name>RefContrat</con:name>
					<con:value>00000061</con:value>
				</con:property>
			</con:properties>
		</con:config>
	</con:testStep>
	<con:testStep type="calltestcase" name="CreerCommande" id="830abf76-3d93-4b3b-9896-773e5d5c647d">
		<con:settings/>
		<con:config xsi:type="con:RunTestCaseStep" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
			<con:targetTestCase>023f86d1-bfeb-4294-8dad-478552551633</con:targetTestCase>
			<con:properties>
				<con:property>
					<con:name>RefCommande</con:name>
					<con:value>Cmd-00000009</con:value>
				</con:property>
			</con:properties>
			<con:returnProperties>
				<con:entry>RefCommande</con:entry>
			</con:returnProperties>
			<con:runMode>SINGLETON_AND_WAIT</con:runMode>
		</con:config>
	</con:testStep>
	<con:testStep type="restrequest" name="Associer Paiement comptant" id="089247d9-b495-4513-86cb-44fc5029b083">
		<con:settings/>
		<con:config service="http://si2-srv.si-core.nordnet.fr:8080" resourcePath="/opale-api/commande/{refCommande}/paiement/comptant" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
			<con:restRequest name="Associer Paiement comptant" mediaType="application/json" postQueryString="false" id="23f08764-b335-4aae-97ce-9ae8ca97ed41">
				<con:settings>
					<con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
		</con:settings>
		<con:endpoint>http://si2-srv.si-core.nordnet.fr:8080</con:endpoint>
		<con:request>{
  "modePaiement": "CB",
  "referenceModePaiement": "Test-Transaction-id-CB",
  "montant": 48,
  "auteur": {
    "qui": "Test.SoapUI"
  }
}</con:request>
		<con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="f83fb33a-74eb-440d-8b2f-caabcf48c338">
			<con:configuration>
				<codes>200</codes>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Reference Is Not Null" id="da3b8201-c7d1-41ca-9008-c1a5d9ce4c29">
			<con:configuration>
				<path>declare namespace ns1='http://si2-srv.si-core.nordnet.fr/opale-api/commande/${CreerCommande#RefCommande}/paiement/comptant';
exists(//ns1:reference/text())</path>
				<content>true</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:credentials>
			<con:authType>Global HTTP Settings</con:authType>
		</con:credentials>
		<con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
		<con:jmsPropertyConfig/>
		<con:parameters>
			<entry key="refCommande" value="${CreerCommande#RefCommande}" xmlns="http://eviware.com/soapui/config"/>
		</con:parameters>
	</con:restRequest>
</con:config>
</con:testStep>
<con:testStep type="restrequest" name="Transformer en contrat" id="c7f732be-ef6f-4557-a72d-2edc82478035">
	<con:settings/>
	<con:config service="http://si2-srv.si-core.nordnet.fr:8080" resourcePath="/opale-api/commande/{refCommande}/transformerEnContrat" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
		<con:restRequest name="Transformer en contrat" mediaType="application/json" postQueryString="false">
			<con:settings>
				<con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
	</con:settings>
	<con:endpoint>http://si2-srv.si-core.nordnet.fr:8080</con:endpoint>
	<con:request>{
    "qui": "SoapUITest"
}</con:request>
	<con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="09d2dce4-d438-4d41-a54a-487217c68589">
		<con:configuration>
			<codes>200</codes>
		</con:configuration>
	</con:assertion>
	<con:assertion type="XPath Match" name="Reference Contrat Is Not Null" id="bf561d46-1fad-4ea6-a76b-8671b67254d6">
		<con:configuration><path>declare namespace ns1='http://si2-srv.si-core.nordnet.fr/opale-api/commande/${CreerCommande#RefCommande}/transformerEnContrat';
count(//ns1:e)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
	</con:assertion>
	<con:credentials>
		<con:authType>Global HTTP Settings</con:authType>
	</con:credentials>
	<con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
	<con:jmsPropertyConfig/>
	<con:parameters>
		<entry key="refCommande" value="${CreerCommande#RefCommande}" xmlns="http://eviware.com/soapui/config"/>
	</con:parameters>
</con:restRequest>
</con:config>
</con:testStep>
<con:testStep type="transfer" name="Transfert Ref Contrat" id="4e74f66d-efa3-4dee-8d1f-dc38ea918974">
	<con:settings/>
	<con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
		<con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false">
			<con:name>ref Contrat</con:name>
			<con:sourceType>ResponseAsXml</con:sourceType>
			<con:sourceStep>Transformer en contrat</con:sourceStep>
			<con:sourcePath>declare namespace ns1='http://si2-srv.si-core.nordnet.fr/opale-api/commande/${CreerCommande#RefCommande}/transformerEnContrat';
//ns1:referencesContrats/ns1:e[1]/text()</con:sourcePath>
			<con:targetType>RefContrat</con:targetType>
			<con:targetStep>Properties</con:targetStep>
		</con:transfers>
	</con:config>
</con:testStep>
<con:testStep type="jdbc" name="Contrat Valide" id="971c6fed-74ef-4023-bc85-6b88b79b4494">
	<con:settings/>
	<con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
		<con:driver>com.mysql.jdbc.Driver</con:driver>
		<con:connectionString>jdbc:mysql://mysql-bddclients.securitoo.com:3306/topaze?user=gmasy&amp;password=drftgyh8</con:connectionString>
		<con:query>select * from contrat 
where reference = "${Properties#RefContrat}"</con:query>

		<con:assertion type="XPath Match" name="Date Validation is not null">
			<con:configuration>
				<path>exists(//ResultSet/Row/CONTRAT.DATEVALIDATION/text())</path>
				<content>true</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Politique Validation is not null">
			<con:configuration>
				<path>exists(//ResultSet/Row/CONTRAT.POLITIQUEVALIDATIONID/text())</path>
				<content>true</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:properties/>
	</con:config>
</con:testStep>
<con:testStep type="jdbc" name="EC Valide" id="c3786540-860d-471c-bc54-40541f5d0d87">
	<con:settings/>
	<con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
		<con:driver>com.mysql.jdbc.Driver</con:driver>
		<con:connectionString>jdbc:mysql://mysql-bddclients.securitoo.com:3306/topaze?user=gmasy&amp;password=drftgyh8</con:connectionString>
		<con:query>select * from elementcontractuel
where contratParent = 
  (select id 
    from contrat 
   where reference = "${Properties#RefContrat}") 
		</con:query>
		<con:assertion type="XPath Match" name="1 seul EC">
			<con:configuration>
				<path>count(//Row)</path>
				<content>1</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Numero Commande">
			<con:configuration>
				<path>//Row/ELEMENTCONTRACTUEL.NUMEROCOMMANDE</path>
				<content>${CreerCommande#RefCommande}</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Reference Mode Paiement">
			<con:configuration><path>exists(//Row/ELEMENTCONTRACTUEL.REFERENCEMODEPAIEMENT/text())</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Periodicite">
			<con:configuration><path>//Row/ELEMENTCONTRACTUEL.PERIODICITE/text()</path><content>12</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Reference Produit">
			<con:configuration>
				<path>//Row/ELEMENTCONTRACTUEL.REFERENCEPRODUIT/text()</path>
				<content>avfw.essentiel</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Reference Tarif">
			<con:configuration><path>//Row/ELEMENTCONTRACTUEL.REFERENCETARIF/text()</path><content>avfw.essentiel.12mois</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match">
			<con:configuration/>
		</con:assertion>
		<con:assertion type="XPath Match" name="Mode Paiement">
			<con:configuration>
				<path>//Row/ELEMENTCONTRACTUEL.MODEPAIEMENT/text()</path>
				<content>CB</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Type Produit">
			<con:configuration>
				<path>//Row/ELEMENTCONTRACTUEL.TYPEPRODUIT/text()</path>
				<content>SERVICE</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Remboursable">
			<con:configuration>
				<path>//Row/ELEMENTCONTRACTUEL.REMBOURSABLE/text()</path>
				<content>1</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Type TVA">
			<con:configuration><path>//Row/ELEMENTCONTRACTUEL.TYPETVA/text()</path><content>S</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Durée Is Not Null">
			<con:configuration><path>exists(//Row/ELEMENTCONTRACTUEL.DUREE/text())</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
		</con:assertion>
		<con:properties/>
	</con:config>
</con:testStep>
<con:properties/>
</con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Vente - Site NNCom - 1 mois - SEPA" searchProperties="true" id="d5294f8d-8512-4864-8090-85e887f612ed">
	<con:settings/>
	<con:testStep type="properties" name="Properties" id="635eca6e-21a0-47d3-a067-bd3d00261d6c">
		<con:settings/>
		<con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
			<con:properties>
				<con:property>
					<con:name>RefContrat</con:name>
					<con:value>00000062</con:value>
				</con:property>
			</con:properties>
		</con:config>
	</con:testStep>
	<con:testStep type="calltestcase" name="CreerCommande" id="4385f0d0-52fe-41e9-ba08-a43e9c7ea6de">
		<con:settings/>
		<con:config xsi:type="con:RunTestCaseStep" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
			<con:targetTestCase>023f86d1-bfeb-4294-8dad-478552551633</con:targetTestCase>
			<con:properties>
				<con:property>
					<con:name>RefCommande</con:name>
					<con:value>Cmd-00000010</con:value>
				</con:property>
			</con:properties>
			<con:returnProperties>
				<con:entry>RefCommande</con:entry>
			</con:returnProperties>
			<con:runMode>SINGLETON_AND_WAIT</con:runMode>
		</con:config>
	</con:testStep>
	<con:testStep type="restrequest" name="Associer Paiement Recurrent" id="ef7a23a9-8a7b-4171-9223-8609d26f4519">
		<con:settings/>
		<con:config service="http://si2-srv.si-core.nordnet.fr:8080" resourcePath="/opale-api/commande/{refCommande}/paiement/recurrent" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
			<con:restRequest name="Associer Paiement Recurrent" mediaType="application/json" postQueryString="false" id="433f3ac2-74d2-4355-92be-901c05c2ff9d">
				<con:settings>
					<con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
		</con:settings>
		<con:endpoint>http://si2-srv.si-core.nordnet.fr:8080</con:endpoint>
		<con:request>{
  "rum": "R0000012",
  "modePaiement": "SEPA",
  "auteur": {
    "qui": "SoapUITest"
  }
}</con:request>
		<con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="d69056f8-53ee-4a09-834b-ae9e0301d348">
			<con:configuration>
				<codes>200</codes>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Reference Paiement Is Not Null" id="a2ea04d5-1487-429d-b9a1-9efa22de37a7">
			<con:configuration>
				<path>declare namespace ns1='http://si2-srv.si-core.nordnet.fr/opale-api/commande/${CreerCommande#RefCommande}/paiement/recurrent';
exists(//ns1:reference/text())</path>
				<content>true</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:credentials>
			<con:authType>Global HTTP Settings</con:authType>
		</con:credentials>
		<con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
		<con:jmsPropertyConfig/>
		<con:parameters>
			<entry key="refCommande" value="${CreerCommande#RefCommande}" xmlns="http://eviware.com/soapui/config"/>
		</con:parameters>
	</con:restRequest>
</con:config>
</con:testStep>
<con:testStep type="restrequest" name="Transformer en contrat" id="e6b2f09b-dc41-44ea-91c8-4190b774cea8">
	<con:settings/>
	<con:config service="http://si2-srv.si-core.nordnet.fr:8080" resourcePath="/opale-api/commande/{refCommande}/transformerEnContrat" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
		<con:restRequest name="Transformer en contrat" mediaType="application/json" postQueryString="false">
			<con:settings>
				<con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
	</con:settings>
	<con:endpoint>http://si2-srv.si-core.nordnet.fr:8080</con:endpoint>
	<con:request>{
    "qui": "SoapUITest"
}</con:request>
	<con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="09d2dce4-d438-4d41-a54a-487217c68589">
		<con:configuration>
			<codes>200</codes>
		</con:configuration>
	</con:assertion>
	<con:assertion type="XPath Match" name="Reference Contrat Is Not Null" id="bf561d46-1fad-4ea6-a76b-8671b67254d6">
		<con:configuration>
			<path>declare namespace ns1='http://si2-srv.si-core.nordnet.fr/opale-api/commande/${CreerCommande#RefCommande}/transformerEnContrat';
exists(//ns1:referencesContrats/ns1:e[1]/text())</path>
			<content>true</content>
			<allowWildcards>false</allowWildcards>
			<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
			<ignoreComments>false</ignoreComments>
		</con:configuration>
	</con:assertion>
	<con:credentials>
		<con:authType>Global HTTP Settings</con:authType>
	</con:credentials>
	<con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
	<con:jmsPropertyConfig/>
	<con:parameters>
		<entry key="refCommande" value="${CreerCommande#RefCommande}" xmlns="http://eviware.com/soapui/config"/>
	</con:parameters>
</con:restRequest>
</con:config>
</con:testStep>
<con:testStep type="transfer" name="Transfert Ref Contrat" id="73a91409-1fe4-4e1c-bcdd-99180aedfe58">
	<con:settings/>
	<con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
		<con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false">
			<con:name>ref Contrat</con:name>
			<con:sourceType>ResponseAsXml</con:sourceType>
			<con:sourceStep>Transformer en contrat</con:sourceStep>
			<con:sourcePath>declare namespace ns1='http://si2-srv.si-core.nordnet.fr/opale-api/commande/${CreerCommande#RefCommande}/transformerEnContrat';
//ns1:referencesContrats/ns1:e[1]/text()</con:sourcePath>
			<con:targetType>RefContrat</con:targetType>
			<con:targetStep>Properties</con:targetStep>
		</con:transfers>
	</con:config>
</con:testStep>
<con:testStep type="jdbc" name="Contrat Valide" id="b1bcb667-0fa8-4013-b0b2-7905c371f7b5">
	<con:settings/>
	<con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
		<con:driver>com.mysql.jdbc.Driver</con:driver>
		<con:connectionString>jdbc:mysql://mysql-bddclients.securitoo.com:3306/topaze?user=gmasy&amp;password=drftgyh8</con:connectionString>
		<con:query>select * from contrat 
where reference = "${Properties#RefContrat}"</con:query>

		<con:assertion type="XPath Match" name="Date Validation is not null">
			<con:configuration>
				<path>exists(//ResultSet/Row/CONTRAT.DATEVALIDATION/text())</path>
				<content>true</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Politique Validation is not null">
			<con:configuration>
				<path>exists(//ResultSet/Row/CONTRAT.POLITIQUEVALIDATIONID/text())</path>
				<content>true</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:properties/>
	</con:config>
</con:testStep>
<con:testStep type="jdbc" name="EC Valide" id="5869d4ca-4f4e-4716-ace0-0be09ecced95">
	<con:settings/>
	<con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
		<con:driver>com.mysql.jdbc.Driver</con:driver>
		<con:connectionString>jdbc:mysql://mysql-bddclients.securitoo.com:3306/topaze?user=gmasy&amp;password=drftgyh8</con:connectionString>
		<con:query>select * from elementcontractuel
where contratParent = 
  (select id 
    from contrat 
   where reference = "${Properties#RefContrat}") 
		</con:query>
		<con:assertion type="XPath Match" name="1 seul EC">
			<con:configuration>
				<path>count(//Row)</path>
				<content>1</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Numero Commande">
			<con:configuration>
				<path>//Row/ELEMENTCONTRACTUEL.NUMEROCOMMANDE</path>
				<content>${CreerCommande#RefCommande}</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Reference Mode Paiement">
			<con:configuration>
				<path>//Row/ELEMENTCONTRACTUEL.REFERENCEMODEPAIEMENT/text()</path>
				<content>MANDAT-id-14587</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Periodicite">
			<con:configuration>
				<path>//Row/ELEMENTCONTRACTUEL.PERIODICITE/text()</path>
				<content>12</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Reference Produit">
			<con:configuration>
				<path>//Row/ELEMENTCONTRACTUEL.REFERENCEPRODUIT/text()</path>
				<content>avfw.essentiel</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Reference Tarif">
			<con:configuration>
				<path>//Row/ELEMENTCONTRACTUEL.REFERENCETARIF/text()</path>
				<content>avfw.essentiel.12mois</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match">
			<con:configuration/>
		</con:assertion>
		<con:assertion type="XPath Match" name="Mode Paiement">
			<con:configuration>
				<path>//Row/ELEMENTCONTRACTUEL.MODEPAIEMENT/text()</path>
				<content>SEPA</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Type Produit">
			<con:configuration>
				<path>//Row/ELEMENTCONTRACTUEL.TYPEPRODUIT/text()</path>
				<content>SERVICE</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Remboursable">
			<con:configuration>
				<path>//Row/ELEMENTCONTRACTUEL.REMBOURSABLE/text()</path>
				<content>1</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Type TVA">
			<con:configuration>
				<path>//Row/ELEMENTCONTRACTUEL.TYPETVA/text()</path>
				<content>S</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Durée Is Null">
			<con:configuration>
				<path>exists(//Row/ELEMENTCONTRACTUEL.DUREE/text())</path>
				<content>false</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:properties/>
	</con:config>
</con:testStep>
<con:properties/>
</con:testCase><con:properties/>
</con:testSuite>
<con:testSuite name="mobileprotection.essentiel.s - Vente" id="0c0e001e-1ae4-43b2-a146-4ca08298ed5d">
	<con:settings/>
	<con:runType>SEQUENTIAL</con:runType>
	
<con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Vente - Site NNCom - 12 mois - CHEQUE - Montant Juste" searchProperties="true" id="5d6fdb75-1caf-4954-831d-661e801c0622">
	<con:settings/>
	<con:testStep type="properties" name="Properties" id="e417ea13-0e15-4278-a6bd-e0cc2a884f9c">
		<con:settings/>
		<con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
			<con:properties>
				<con:property>
					<con:name>RefContrat</con:name>
					<con:value>00000065</con:value>
				</con:property>
			</con:properties>
		</con:config>
	</con:testStep>
	<con:testStep type="calltestcase" name="CreerCommande" id="3f793b31-b861-4dfe-a4e7-1533c318636b">
		<con:settings/>
		<con:config xsi:type="con:RunTestCaseStep" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
			<con:targetTestCase>88aa2eb1-556f-434c-9ce6-f2e0cff2f00f</con:targetTestCase>
			<con:properties>
				<con:property>
					<con:name>RefCommande</con:name>
					<con:value>Cmd-00000013</con:value>
				</con:property>
			</con:properties>
			<con:returnProperties>
				<con:entry>RefCommande</con:entry>
			</con:returnProperties>
			<con:runMode>SINGLETON_AND_WAIT</con:runMode>
		</con:config>
	</con:testStep>
	<con:testStep type="restrequest" name="Associer Paiement comptant" id="7e805348-f37a-4767-8f9a-3adcd3b31bf6">
		<con:settings/>
		<con:config service="http://si2-srv.si-core.nordnet.fr:8080" resourcePath="/opale-api/commande/{refCommande}/paiement/comptant" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
			<con:restRequest name="Associer Paiement comptant" mediaType="application/json" postQueryString="false" id="23f08764-b335-4aae-97ce-9ae8ca97ed41">
				<con:settings>
					<con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
		</con:settings>
		<con:endpoint>http://si2-srv.si-core.nordnet.fr:8080</con:endpoint>
		<con:request>{
  "modePaiement": "CHEQUE",
  "referenceModePaiement": "Test-idNetCheque",
  "montant": 48,
  "auteur": {
    "qui": "Test.SoapUI"
  }
}</con:request>
		<con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="f83fb33a-74eb-440d-8b2f-caabcf48c338">
			<con:configuration>
				<codes>200</codes>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Reference Is Not Null" id="da3b8201-c7d1-41ca-9008-c1a5d9ce4c29">
			<con:configuration>
				<path>declare namespace ns1='http://si2-srv.si-core.nordnet.fr/opale-api/commande/${CreerCommande#RefCommande}/paiement/comptant';
exists(//ns1:reference/text())</path>
				<content>true</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:credentials>
			<con:authType>Global HTTP Settings</con:authType>
		</con:credentials>
		<con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
		<con:jmsPropertyConfig/>
		<con:parameters>
			<entry key="refCommande" value="${CreerCommande#RefCommande}" xmlns="http://eviware.com/soapui/config"/>
		</con:parameters>
	</con:restRequest>
</con:config>
</con:testStep>
<con:testStep type="restrequest" name="Transformer en contrat" id="f5df68c3-5bde-44b8-bffd-0a0ba7e1dc8f">
	<con:settings/>
	<con:config service="http://si2-srv.si-core.nordnet.fr:8080" resourcePath="/opale-api/commande/{refCommande}/transformerEnContrat" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
		<con:restRequest name="Transformer en contrat" mediaType="application/json" postQueryString="false">
			<con:settings>
				<con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
	</con:settings>
	<con:endpoint>http://si2-srv.si-core.nordnet.fr:8080</con:endpoint>
	<con:request>{
    "qui": "SoapUITest"
}</con:request>
	<con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="09d2dce4-d438-4d41-a54a-487217c68589">
		<con:configuration>
			<codes>200</codes>
		</con:configuration>
	</con:assertion>
	<con:assertion type="XPath Match" name="Reference Contrat Is Not Null" id="bf561d46-1fad-4ea6-a76b-8671b67254d6">
		<con:configuration><path>declare namespace ns1='http://si2-srv.si-core.nordnet.fr/opale-api/commande/${CreerCommande#RefCommande}/transformerEnContrat';
count(//ns1:e)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
	</con:assertion>
	<con:credentials>
		<con:authType>Global HTTP Settings</con:authType>
	</con:credentials>
	<con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
	<con:jmsPropertyConfig/>
	<con:parameters>
		<entry key="refCommande" value="${CreerCommande#RefCommande}" xmlns="http://eviware.com/soapui/config"/>
	</con:parameters>
</con:restRequest>
</con:config>
</con:testStep>
<con:testStep type="transfer" name="Transfert Ref Contrat" id="fc8d92cb-9b1a-44a5-8749-7654e95355a3">
	<con:settings/>
	<con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
		<con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false">
			<con:name>ref Contrat</con:name>
			<con:sourceType>ResponseAsXml</con:sourceType>
			<con:sourceStep>Transformer en contrat</con:sourceStep>
			<con:sourcePath>declare namespace ns1='http://si2-srv.si-core.nordnet.fr/opale-api/commande/${CreerCommande#RefCommande}/transformerEnContrat';
//ns1:referencesContrats/ns1:e[1]/text()</con:sourcePath>
			<con:targetType>RefContrat</con:targetType>
			<con:targetStep>Properties</con:targetStep>
		</con:transfers>
	</con:config>
</con:testStep>
<con:testStep type="jdbc" name="Contrat Valide" id="5bb916c2-ebf3-48ed-b959-9b6793c6601d">
	<con:settings/>
	<con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
		<con:driver>com.mysql.jdbc.Driver</con:driver>
		<con:connectionString>jdbc:mysql://mysql-bddclients.securitoo.com:3306/topaze?user=gmasy&amp;password=drftgyh8</con:connectionString>
		<con:query>select * from contrat 
where reference = "${Properties#RefContrat}"</con:query>

		<con:assertion type="XPath Match" name="Date Validation is not null">
			<con:configuration>
				<path>exists(//ResultSet/Row/CONTRAT.DATEVALIDATION/text())</path>
				<content>true</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Politique Validation is not null">
			<con:configuration>
				<path>exists(//ResultSet/Row/CONTRAT.POLITIQUEVALIDATIONID/text())</path>
				<content>true</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:properties/>
	</con:config>
</con:testStep>
<con:testStep type="jdbc" name="EC Valide" id="16028a82-c79e-45e6-aef3-12ffeb703293">
	<con:settings/>
	<con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
		<con:driver>com.mysql.jdbc.Driver</con:driver>
		<con:connectionString>jdbc:mysql://mysql-bddclients.securitoo.com:3306/topaze?user=gmasy&amp;password=drftgyh8</con:connectionString>
		<con:query>select * from elementcontractuel
where contratParent = 
  (select id 
    from contrat 
   where reference = "${Properties#RefContrat}") 
		</con:query>
		<con:assertion type="XPath Match" name="1 seul EC">
			<con:configuration>
				<path>count(//Row)</path>
				<content>1</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Numero Commande">
			<con:configuration>
				<path>//Row/ELEMENTCONTRACTUEL.NUMEROCOMMANDE</path>
				<content>${CreerCommande#RefCommande}</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Reference Mode Paiement">
			<con:configuration><path>exists(//Row/ELEMENTCONTRACTUEL.REFERENCEMODEPAIEMENT/text())</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Periodicite">
			<con:configuration><path>//Row/ELEMENTCONTRACTUEL.PERIODICITE/text()</path><content>12</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Reference Produit">
			<con:configuration>
				<path>//Row/ELEMENTCONTRACTUEL.REFERENCEPRODUIT/text()</path>
				<content>avfw.essentiel</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Reference Tarif">
			<con:configuration><path>//Row/ELEMENTCONTRACTUEL.REFERENCETARIF/text()</path><content>avfw.essentiel.12mois</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match">
			<con:configuration/>
		</con:assertion>
		<con:assertion type="XPath Match" name="Mode Paiement">
			<con:configuration><path>//Row/ELEMENTCONTRACTUEL.MODEPAIEMENT/text()</path><content>CHEQUE</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Type Produit">
			<con:configuration>
				<path>//Row/ELEMENTCONTRACTUEL.TYPEPRODUIT/text()</path>
				<content>SERVICE</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Remboursable">
			<con:configuration>
				<path>//Row/ELEMENTCONTRACTUEL.REMBOURSABLE/text()</path>
				<content>1</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Type TVA">
			<con:configuration><path>//Row/ELEMENTCONTRACTUEL.TYPETVA/text()</path><content>S</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Durée Is Not Null">
			<con:configuration><path>exists(//Row/ELEMENTCONTRACTUEL.DUREE/text())</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration>
		</con:assertion>
		<con:properties/>
	</con:config>
</con:testStep>
<con:properties/>
</con:testCase>





<con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Vente - Site NNCom - 3 mois - CB" searchProperties="true" id="7effa132-0fc7-4702-b876-8bfba6c4fda8">
	<con:settings/>
	<con:testStep type="properties" name="Properties" id="9f2991a0-1724-4124-9ece-35cb2c515b60">
		<con:settings/>
		<con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
			<con:properties>
				<con:property>
					<con:name>RefContrat</con:name>
					<con:value>00000062</con:value>
				</con:property>
			</con:properties>
		</con:config>
	</con:testStep>
	<con:testStep type="calltestcase" name="CreerCommande" id="275a66d5-9b8f-46ac-af8b-c28a0703aed4">
		<con:settings/>
		<con:config xsi:type="con:RunTestCaseStep" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
			<con:targetTestCase>c37a6336-d973-441b-bdec-1c57eeca4831</con:targetTestCase>
			<con:properties>
				<con:property>
					<con:name>RefCommande</con:name>
					<con:value>Cmd-00000010</con:value>
				</con:property>
			</con:properties>
			<con:returnProperties>
				<con:entry>RefCommande</con:entry>
			</con:returnProperties>
			<con:runMode>SINGLETON_AND_WAIT</con:runMode>
		</con:config>
	</con:testStep>
	
<con:testStep type="restrequest" name="Associer Paiement comptant" id="17ac1f69-def0-4f64-9773-becc783398a8">
		<con:settings/>
		<con:config service="http://si2-srv.si-core.nordnet.fr:8080" resourcePath="/opale-api/commande/{refCommande}/paiement/comptant" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
			<con:restRequest name="Associer Paiement comptant" mediaType="application/json" postQueryString="false" id="23f08764-b335-4aae-97ce-9ae8ca97ed41">
				<con:settings>
					<con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
		</con:settings>
		<con:endpoint>http://si2-srv.si-core.nordnet.fr:8080</con:endpoint>
		<con:request>{
  "modePaiement": "CB",
  "referenceModePaiement": "Test-transaction-id-CB",
  "montant": 48,
  "auteur": {
    "qui": "Test.SoapUI"
  }
}</con:request>
		<con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="f83fb33a-74eb-440d-8b2f-caabcf48c338">
			<con:configuration>
				<codes>200</codes>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Reference Is Not Null" id="da3b8201-c7d1-41ca-9008-c1a5d9ce4c29">
			<con:configuration>
				<path>declare namespace ns1='http://si2-srv.si-core.nordnet.fr/opale-api/commande/${CreerCommande#RefCommande}/paiement/comptant';
exists(//ns1:reference/text())</path>
				<content>true</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:credentials>
			<con:authType>Global HTTP Settings</con:authType>
		</con:credentials>
		<con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
		<con:jmsPropertyConfig/>
		<con:parameters>
			<entry key="refCommande" value="${CreerCommande#RefCommande}" xmlns="http://eviware.com/soapui/config"/>
		</con:parameters>
	</con:restRequest>
</con:config>
</con:testStep><con:testStep type="restrequest" name="Transformer en contrat" id="94859ae2-1fa9-4343-b555-8be118a0ed9c">
	<con:settings/>
	<con:config service="http://si2-srv.si-core.nordnet.fr:8080" resourcePath="/opale-api/commande/{refCommande}/transformerEnContrat" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
		<con:restRequest name="Transformer en contrat" mediaType="application/json" postQueryString="false">
			<con:settings>
				<con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
	</con:settings>
	<con:endpoint>http://si2-srv.si-core.nordnet.fr:8080</con:endpoint>
	<con:request>{
    "qui": "SoapUITest"
}</con:request>
	<con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="09d2dce4-d438-4d41-a54a-487217c68589">
		<con:configuration>
			<codes>200</codes>
		</con:configuration>
	</con:assertion>
	<con:assertion type="XPath Match" name="Reference Contrat Is Not Null" id="bf561d46-1fad-4ea6-a76b-8671b67254d6">
		<con:configuration>
			<path>declare namespace ns1='http://si2-srv.si-core.nordnet.fr/opale-api/commande/${CreerCommande#RefCommande}/transformerEnContrat';
exists(//ns1:referencesContrats/ns1:e[1]/text())</path>
			<content>true</content>
			<allowWildcards>false</allowWildcards>
			<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
			<ignoreComments>false</ignoreComments>
		</con:configuration>
	</con:assertion>
	<con:credentials>
		<con:authType>Global HTTP Settings</con:authType>
	</con:credentials>
	<con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
	<con:jmsPropertyConfig/>
	<con:parameters>
		<entry key="refCommande" value="${CreerCommande#RefCommande}" xmlns="http://eviware.com/soapui/config"/>
	</con:parameters>
</con:restRequest>
</con:config>
</con:testStep>
<con:testStep type="transfer" name="Transfert Ref Contrat" id="a21a7f9b-fb4c-4364-a347-2d7bda7e816f">
	<con:settings/>
	<con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
		<con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false">
			<con:name>ref Contrat</con:name>
			<con:sourceType>ResponseAsXml</con:sourceType>
			<con:sourceStep>Transformer en contrat</con:sourceStep>
			<con:sourcePath>declare namespace ns1='http://si2-srv.si-core.nordnet.fr/opale-api/commande/${CreerCommande#RefCommande}/transformerEnContrat';
//ns1:referencesContrats/ns1:e[1]/text()</con:sourcePath>
			<con:targetType>RefContrat</con:targetType>
			<con:targetStep>Properties</con:targetStep>
		</con:transfers>
	</con:config>
</con:testStep>
<con:testStep type="jdbc" name="Contrat Valide" id="edb7031e-22cd-491e-92fb-f0740ac54f22">
	<con:settings/>
	<con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
		<con:driver>com.mysql.jdbc.Driver</con:driver>
		<con:connectionString>jdbc:mysql://mysql-bddclients.securitoo.com:3306/topaze?user=gmasy&amp;password=drftgyh8</con:connectionString>
		<con:query>select * from contrat 
where reference = "${Properties#RefContrat}"</con:query>

		<con:assertion type="XPath Match" name="Date Validation is not null">
			<con:configuration>
				<path>exists(//ResultSet/Row/CONTRAT.DATEVALIDATION/text())</path>
				<content>true</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Politique Validation is not null">
			<con:configuration>
				<path>exists(//ResultSet/Row/CONTRAT.POLITIQUEVALIDATIONID/text())</path>
				<content>true</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:properties/>
	</con:config>
</con:testStep>
<con:testStep type="jdbc" name="EC Valide" id="1a0e2714-c558-425a-80bf-a77a7ce7890e">
	<con:settings/>
	<con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
		<con:driver>com.mysql.jdbc.Driver</con:driver>
		<con:connectionString>jdbc:mysql://mysql-bddclients.securitoo.com:3306/topaze?user=gmasy&amp;password=drftgyh8</con:connectionString>
		<con:query>select * from elementcontractuel
where contratParent = 
  (select id 
    from contrat 
   where reference = "${Properties#RefContrat}") 
		</con:query>
		<con:assertion type="XPath Match" name="1 seul EC">
			<con:configuration>
				<path>count(//Row)</path>
				<content>1</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Numero Commande">
			<con:configuration>
				<path>//Row/ELEMENTCONTRACTUEL.NUMEROCOMMANDE</path>
				<content>${CreerCommande#RefCommande}</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Reference Mode Paiement">
			<con:configuration>
				<path>//Row/ELEMENTCONTRACTUEL.REFERENCEMODEPAIEMENT/text()</path>
				<content>MANDAT-id-14587</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Periodicite">
			<con:configuration>
				<path>//Row/ELEMENTCONTRACTUEL.PERIODICITE/text()</path>
				<content>12</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Reference Produit">
			<con:configuration>
				<path>//Row/ELEMENTCONTRACTUEL.REFERENCEPRODUIT/text()</path>
				<content>avfw.essentiel</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Reference Tarif">
			<con:configuration>
				<path>//Row/ELEMENTCONTRACTUEL.REFERENCETARIF/text()</path>
				<content>avfw.essentiel.12mois</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match">
			<con:configuration/>
		</con:assertion>
		<con:assertion type="XPath Match" name="Mode Paiement">
			<con:configuration>
				<path>//Row/ELEMENTCONTRACTUEL.MODEPAIEMENT/text()</path>
				<content>SEPA</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Type Produit">
			<con:configuration>
				<path>//Row/ELEMENTCONTRACTUEL.TYPEPRODUIT/text()</path>
				<content>SERVICE</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Remboursable">
			<con:configuration>
				<path>//Row/ELEMENTCONTRACTUEL.REMBOURSABLE/text()</path>
				<content>1</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Type TVA">
			<con:configuration>
				<path>//Row/ELEMENTCONTRACTUEL.TYPETVA/text()</path>
				<content>S</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Durée Is Null">
			<con:configuration>
				<path>exists(//Row/ELEMENTCONTRACTUEL.DUREE/text())</path>
				<content>false</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:properties/>
	</con:config>
</con:testStep>
<con:properties/>
</con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Vente - Site NNCom - 1 mois - SEPA" searchProperties="true" id="655bcfa9-8714-4f43-abcd-746c9df01e85">
	<con:settings/>
	<con:testStep type="properties" name="Properties" id="ab9028dd-aa97-458e-8375-aed3f7d13d2a">
		<con:settings/>
		<con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
			<con:properties>
				<con:property>
					<con:name>RefContrat</con:name>
					<con:value>00000062</con:value>
				</con:property>
			</con:properties>
		</con:config>
	</con:testStep>
	<con:testStep type="calltestcase" name="CreerCommande" id="43c1e011-f75d-4f87-9be4-f9a87c0d6121">
		<con:settings/>
		<con:config xsi:type="con:RunTestCaseStep" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
			<con:targetTestCase>68f9e52f-1e72-433e-bd82-d36dd91d58d7</con:targetTestCase>
			<con:properties>
				<con:property>
					<con:name>RefCommande</con:name>
					<con:value>Cmd-00000010</con:value>
				</con:property>
			</con:properties>
			<con:returnProperties>
				<con:entry>RefCommande</con:entry>
			</con:returnProperties>
			<con:runMode>SINGLETON_AND_WAIT</con:runMode>
		</con:config>
	</con:testStep>
	<con:testStep type="restrequest" name="Associer Paiement Recurrent" id="e04dd88f-7876-457c-a66a-f331f1e1a37b">
		<con:settings/>
		<con:config service="http://si2-srv.si-core.nordnet.fr:8080" resourcePath="/opale-api/commande/{refCommande}/paiement/recurrent" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
			<con:restRequest name="Associer Paiement Recurrent" mediaType="application/json" postQueryString="false" id="433f3ac2-74d2-4355-92be-901c05c2ff9d">
				<con:settings>
					<con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
		</con:settings>
		<con:endpoint>http://si2-srv.si-core.nordnet.fr:8080</con:endpoint>
		<con:request>{
  "rum": "R0000012",
  "modePaiement": "SEPA",
  "auteur": {
    "qui": "SoapUITest"
  }
}</con:request>
		<con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="d69056f8-53ee-4a09-834b-ae9e0301d348">
			<con:configuration>
				<codes>200</codes>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Reference Paiement Is Not Null" id="a2ea04d5-1487-429d-b9a1-9efa22de37a7">
			<con:configuration>
				<path>declare namespace ns1='http://si2-srv.si-core.nordnet.fr/opale-api/commande/${CreerCommande#RefCommande}/paiement/recurrent';
exists(//ns1:reference/text())</path>
				<content>true</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:credentials>
			<con:authType>Global HTTP Settings</con:authType>
		</con:credentials>
		<con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
		<con:jmsPropertyConfig/>
		<con:parameters>
			<entry key="refCommande" value="${CreerCommande#RefCommande}" xmlns="http://eviware.com/soapui/config"/>
		</con:parameters>
	</con:restRequest>
</con:config>
</con:testStep>
<con:testStep type="restrequest" name="Transformer en contrat" id="7eaf9cbf-9110-4358-8ff8-fed6254e2d45">
	<con:settings/>
	<con:config service="http://si2-srv.si-core.nordnet.fr:8080" resourcePath="/opale-api/commande/{refCommande}/transformerEnContrat" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
		<con:restRequest name="Transformer en contrat" mediaType="application/json" postQueryString="false">
			<con:settings>
				<con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
	</con:settings>
	<con:endpoint>http://si2-srv.si-core.nordnet.fr:8080</con:endpoint>
	<con:request>{
    "qui": "SoapUITest"
}</con:request>
	<con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="09d2dce4-d438-4d41-a54a-487217c68589">
		<con:configuration>
			<codes>200</codes>
		</con:configuration>
	</con:assertion>
	<con:assertion type="XPath Match" name="Reference Contrat Is Not Null" id="bf561d46-1fad-4ea6-a76b-8671b67254d6">
		<con:configuration>
			<path>declare namespace ns1='http://si2-srv.si-core.nordnet.fr/opale-api/commande/${CreerCommande#RefCommande}/transformerEnContrat';
exists(//ns1:referencesContrats/ns1:e[1]/text())</path>
			<content>true</content>
			<allowWildcards>false</allowWildcards>
			<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
			<ignoreComments>false</ignoreComments>
		</con:configuration>
	</con:assertion>
	<con:credentials>
		<con:authType>Global HTTP Settings</con:authType>
	</con:credentials>
	<con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
	<con:jmsPropertyConfig/>
	<con:parameters>
		<entry key="refCommande" value="${CreerCommande#RefCommande}" xmlns="http://eviware.com/soapui/config"/>
	</con:parameters>
</con:restRequest>
</con:config>
</con:testStep>
<con:testStep type="transfer" name="Transfert Ref Contrat" id="e8915d04-e7b5-40a8-bc8e-c4454977de32">
	<con:settings/>
	<con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
		<con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false">
			<con:name>ref Contrat</con:name>
			<con:sourceType>ResponseAsXml</con:sourceType>
			<con:sourceStep>Transformer en contrat</con:sourceStep>
			<con:sourcePath>declare namespace ns1='http://si2-srv.si-core.nordnet.fr/opale-api/commande/${CreerCommande#RefCommande}/transformerEnContrat';
//ns1:referencesContrats/ns1:e[1]/text()</con:sourcePath>
			<con:targetType>RefContrat</con:targetType>
			<con:targetStep>Properties</con:targetStep>
		</con:transfers>
	</con:config>
</con:testStep>
<con:testStep type="jdbc" name="Contrat Valide" id="fd36c4dd-67fc-4dcb-9e1e-330147a76e0d">
	<con:settings/>
	<con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
		<con:driver>com.mysql.jdbc.Driver</con:driver>
		<con:connectionString>jdbc:mysql://mysql-bddclients.securitoo.com:3306/topaze?user=gmasy&amp;password=drftgyh8</con:connectionString>
		<con:query>select * from contrat 
where reference = "${Properties#RefContrat}"</con:query>

		<con:assertion type="XPath Match" name="Date Validation is not null">
			<con:configuration>
				<path>exists(//ResultSet/Row/CONTRAT.DATEVALIDATION/text())</path>
				<content>true</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Politique Validation is not null">
			<con:configuration>
				<path>exists(//ResultSet/Row/CONTRAT.POLITIQUEVALIDATIONID/text())</path>
				<content>true</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:properties/>
	</con:config>
</con:testStep>
<con:testStep type="jdbc" name="EC Valide" id="4f0e4f12-1518-402d-a0fe-9941b846b6f0">
	<con:settings/>
	<con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
		<con:driver>com.mysql.jdbc.Driver</con:driver>
		<con:connectionString>jdbc:mysql://mysql-bddclients.securitoo.com:3306/topaze?user=gmasy&amp;password=drftgyh8</con:connectionString>
		<con:query>select * from elementcontractuel
where contratParent = 
  (select id 
    from contrat 
   where reference = "${Properties#RefContrat}") 
		</con:query>
		<con:assertion type="XPath Match" name="1 seul EC">
			<con:configuration>
				<path>count(//Row)</path>
				<content>1</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Numero Commande">
			<con:configuration>
				<path>//Row/ELEMENTCONTRACTUEL.NUMEROCOMMANDE</path>
				<content>${CreerCommande#RefCommande}</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Reference Mode Paiement">
			<con:configuration>
				<path>//Row/ELEMENTCONTRACTUEL.REFERENCEMODEPAIEMENT/text()</path>
				<content>MANDAT-id-14587</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Periodicite">
			<con:configuration>
				<path>//Row/ELEMENTCONTRACTUEL.PERIODICITE/text()</path>
				<content>12</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Reference Produit">
			<con:configuration>
				<path>//Row/ELEMENTCONTRACTUEL.REFERENCEPRODUIT/text()</path>
				<content>avfw.essentiel</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Reference Tarif">
			<con:configuration>
				<path>//Row/ELEMENTCONTRACTUEL.REFERENCETARIF/text()</path>
				<content>avfw.essentiel.12mois</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match">
			<con:configuration/>
		</con:assertion>
		<con:assertion type="XPath Match" name="Mode Paiement">
			<con:configuration>
				<path>//Row/ELEMENTCONTRACTUEL.MODEPAIEMENT/text()</path>
				<content>SEPA</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Type Produit">
			<con:configuration>
				<path>//Row/ELEMENTCONTRACTUEL.TYPEPRODUIT/text()</path>
				<content>SERVICE</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Remboursable">
			<con:configuration>
				<path>//Row/ELEMENTCONTRACTUEL.REMBOURSABLE/text()</path>
				<content>1</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Type TVA">
			<con:configuration>
				<path>//Row/ELEMENTCONTRACTUEL.TYPETVA/text()</path>
				<content>S</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Durée Is Null">
			<con:configuration>
				<path>exists(//Row/ELEMENTCONTRACTUEL.DUREE/text())</path>
				<content>false</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:properties/>
	</con:config>
</con:testStep>
<con:properties/>
</con:testCase><con:properties/>
</con:testSuite>
<con:testSuite name="Antivirus - Renouvellement" id="6036da68-f5af-4541-a8d5-0c7bd113bdc1">
	<con:settings/>
	<con:runType>SEQUENTIAL</con:runType>
	<con:properties/>
</con:testSuite>
<con:testSuite name="Antivirus - Utils" id="8d1dd3ab-41eb-44e8-93ad-e9cec17e2596">
	<con:settings/>
	<con:runType>SEQUENTIAL</con:runType>
	

<con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Creer Draft Avfw.essentiel - 1mois" searchProperties="true" id="14af7b71-a5e6-4e3e-bec9-908b03a93366">
	<con:settings/>
	<con:testStep type="restrequest" name="Creer Draft" id="c4541c09-1b93-4077-ac77-8ef11b068fcd">
		<con:settings/>
		<con:config service="http://si2-srv.si-core.nordnet.fr:8080" resourcePath="/opale-api/draft/draft/" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
			<con:restRequest name="Creer Draft" mediaType="application/json" postQueryString="false" id="188f5ba5-03d9-4706-baf3-183364103220">
				<con:settings>
					<con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
		</con:settings>
		<con:endpoint>http://si2-srv.si-core.nordnet.fr:8080</con:endpoint>
		<con:request>{
  "auteur": {
    "canal": "SoapUI",
    "qui": "Gilles",
    "ip": {
      "ts": 1415292523897,
      "ip": "192.168.4.10"
    }
  },
  "lignes": [
    {
      "geste": "VENTE",
      "offre": {
        "referenceOffre": "avfw.essentiel",
        "referenceTarif": "avfw.essentiel.1mois"
      }
    }
  ],
  "souscripteur": {
    "clientId": "11351202",
    "tva": "00",
    "adresseId": "009950162"
  },
  "livraison": {
    "clientId": "11351202",
    "tva": "00",
    "adresseId": "009950162"
  },
  "facturation": {
    "clientId": "11351202",
    "tva": "00",
    "adresseId": "009950162"
  },
  "codePartenaire": "NORDNET"
}</con:request>
		<con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="4829baf9-0a98-4b7f-983b-0ca11b0997b8">
			<con:configuration>
				<codes>200</codes>
			</con:configuration>
		</con:assertion>
		<con:assertion type="Simple NotContains" name="Not Contains &quot;error&quot;" id="a81f746f-7c03-46a6-b21f-856ed2ee394c">
			<con:configuration>
				<token>error</token>
				<ignoreCase>false</ignoreCase>
				<useRegEx>false</useRegEx>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Reference Is Not Null" id="ec4789ea-1f17-444c-ba04-dc2b449280da">
			<con:configuration>
				<path>declare namespace ns1='http://si2-srv.si-core.nordnet.fr/opale-api/draft/draft/';
exists(//ns1:reference/text())</path>
				<content>true</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:credentials>
			<con:authType>Global HTTP Settings</con:authType>
		</con:credentials>
		<con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
		<con:jmsPropertyConfig/>
		<con:parameters/>
	</con:restRequest>
</con:config>
</con:testStep>
<con:testStep type="transfer" name="Transfer Ref Draft - Ligne" id="275323d3-a8fb-4614-a77a-397332f6579f">
	<con:settings/>
	<con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
		<con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false">
			<con:name>Ref Draft</con:name>
			<con:sourceType>ResponseAsXml</con:sourceType>
			<con:sourceStep>Creer Draft</con:sourceStep>
			<con:sourcePath>declare namespace ns1='http://si2-srv.si-core.nordnet.fr/opale-api/draft/draft/';
//ns1:reference/text()</con:sourcePath>
			<con:targetType>RefDraft</con:targetType>
			<con:targetStep>#TestCase#</con:targetStep>
		</con:transfers>
		<con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true">
			<con:name>Ref Ligne</con:name>
			<con:sourceType>ResponseAsXml</con:sourceType>
			<con:sourceStep>Creer Draft</con:sourceStep>
			<con:sourcePath>declare namespace ns1='http://si2-srv.si-core.nordnet.fr/opale-api/draft/draft/';
exists(//ns1:reference/text())</con:sourcePath>
			<con:targetType>RefLigne</con:targetType>
			<con:targetStep>#TestCase#</con:targetStep>
		</con:transfers>
	</con:config>
</con:testStep>
<con:properties>
	<con:property>
		<con:name>RefDraft</con:name>
		<con:value>Dra-00000016</con:value>
	</con:property>
	<con:property>
		<con:name>RefLigne</con:name>
		<con:value>true</con:value>
	</con:property>
</con:properties>
</con:testCase>
<con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Creer Commande Avfw.essentiel - 1mois" searchProperties="true" id="023f86d1-bfeb-4294-8dad-478552551633">
	<con:settings/>
	<con:testStep type="calltestcase" name="Creer Draft" id="3145590b-2184-41e4-901f-39a8b12dad7c">
		<con:settings/>
		<con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
			<con:targetTestCase>14af7b71-a5e6-4e3e-bec9-908b03a93366</con:targetTestCase>
			<con:properties>
				<con:property>
					<con:name>RefDraft</con:name>
					<con:value>Dra-00000016</con:value>
				</con:property>
				<con:property>
					<con:name>RefLigne</con:name>
					<con:value>true</con:value>
				</con:property>
			</con:properties>
			<con:returnProperties>
				<con:entry>RefDraft</con:entry>
				<con:entry>RefLigne</con:entry>
			</con:returnProperties>
			<con:runMode>SINGLETON_AND_WAIT</con:runMode>
		</con:config>
	</con:testStep>
	<con:testStep type="restrequest" name="Transformer Commande" id="0b35e54e-98ae-4996-ae67-0e37a84bd413">
		<con:settings/>
		<con:config service="http://si2-srv.si-core.nordnet.fr:8080" resourcePath="/opale-api/draft/{refDraft}/transformerEnCommande" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
			<con:restRequest name="Transformer Commande" mediaType="application/json" postQueryString="false" id="177f022d-cf5c-4d6f-96a4-fd8fef7a3975">
				<con:settings>
					<con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
			<con:setting id="RecordRequestRepresentations">false</con:setting>
		</con:settings>
		<con:endpoint>http://si2-srv.si-core.nordnet.fr:8080</con:endpoint>
		<con:request>{
  "trameCatalogue": {
    "offres": [
      {
        "reference": "avfw.essentiel",
        "label": "Securitoo Integral",
        "gamme": "Antivirus",
        "secteur": "SECURITE",
        "modeFacturation": "DATE_ANNIVERSAIRE",
        "type": "SERVICE",
        "tarifs": [
          {
            "id_tarif": "avfw.essentiel.1mois",
            "prix": 4.17,
            "tva": "S",
            "frequence": 1
          },
          {
            "id_tarif": "avfw.essentiel.3mois",
            "prix": 3.75,
            "tva": "S",
            "frequence": 3
          },
          {
            "id_tarif": "avfw.essentiel.12mois",
            "prix": 40,
            "tva": "S",
            "frequence": 12
          }
        ]
      },
      {
        "reference": "mobileprotection.essentiel.s",
        "label": "Securitoo Mobile",
        "gamme": "Antivirus",
        "secteur": "SECURITE",
        "modeFacturation": "DATE_ANNIVERSAIRE",
        "type": "SERVICE",
        "tarifs": [
          {
            "id_tarif": "securitoo.mobile.1mois",
            "prix": 2.5,
            "tva": "S",
            "frequence": 1
          },
          {
            "id_tarif": "securitoo.mobile.3mois",
            "prix": 6.67,
            "tva": "S",
            "frequence": 3
          },
          {
            "id_tarif": "securitoo.mobile.12mois",
            "prix": 25,
            "tva": "S",
            "frequence": 12
          }
        ]
      }
    ]
  },
  "clientInfo": {
    "souscripteur": {
      "clientId": "11351202",
      "tva": "00",
      "adresseId": "009950162"
    },
    "livraison": {
      "clientId": "11351202",
      "tva": "00",
      "adresseId": "009950162"
    },
    "facturation": {
      "clientId": "11351202",
      "tva": "00",
      "adresseId": "009950162"
    }
  },
  "auteur": {
    "qui": "SoapUITest"
  }
}</con:request>
		<con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="a73c398b-b015-405c-b162-ff8a768e5f8e">
			<con:configuration>
				<codes>200</codes>
			</con:configuration>
		</con:assertion>
		<con:credentials>
			<con:authType>Global HTTP Settings</con:authType>
		</con:credentials>
		<con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
		<con:jmsPropertyConfig/>
		<con:parameters>
			<entry key="refDraft" value="${Creer Draft#RefDraft}" xmlns="http://eviware.com/soapui/config"/>
		</con:parameters>
	</con:restRequest>
</con:config>
</con:testStep>
<con:testStep type="transfer" name="Transfer Ref Commande" id="b5c3ee0d-4dd6-4286-ab91-5a540ec35f79">
	<con:settings/>
	<con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
		<con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false">
			<con:name>ref Commande</con:name>
			<con:sourceType>ResponseAsXml</con:sourceType>
			<con:sourceStep>Transformer Commande</con:sourceStep>
			<con:sourcePath>declare namespace ns1='http://si2-srv.si-core.nordnet.fr/opale-api/draft/${Creer Draft#RefDraft}/transformerEnCommande';
//ns1:reference/text()</con:sourcePath>
			<con:targetType>RefCommande</con:targetType>
			<con:targetStep>#TestCase#</con:targetStep>
		</con:transfers>
	</con:config>
</con:testStep>
<con:properties>
	<con:property>
		<con:name>RefCommande</con:name>
		<con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">Cmd-00000014</con:value>
	</con:property>
</con:properties>
</con:testCase>


<con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Creer Draft Avfw.essentiel - 3mois" searchProperties="true" id="86fd2149-9d53-4de0-ae2a-053b4bb17306">
	<con:settings/>
	<con:testStep type="restrequest" name="Creer Draft" id="00b8f024-8aa5-487a-8e67-503729f53212">
		<con:settings/>
		<con:config service="http://si2-srv.si-core.nordnet.fr:8080" resourcePath="/opale-api/draft/draft/" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
			<con:restRequest name="Creer Draft" mediaType="application/json" postQueryString="false" id="188f5ba5-03d9-4706-baf3-183364103220">
				<con:settings>
					<con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
		</con:settings>
		<con:endpoint>http://si2-srv.si-core.nordnet.fr:8080</con:endpoint>
		<con:request>{
  "auteur": {
    "canal": "SoapUI",
    "qui": "Gilles",
    "ip": {
      "ts": 1415292523897,
      "ip": "192.168.4.10"
    }
  },
  "lignes": [
    {
      "geste": "VENTE",
      "offre": {
        "referenceOffre": "avfw.essentiel",
        "referenceTarif": "avfw.essentiel.3mois"
      }
    }
  ],
  "souscripteur": {
    "clientId": "11351202",
    "tva": "00",
    "adresseId": "009950162"
  },
  "livraison": {
    "clientId": "11351202",
    "tva": "00",
    "adresseId": "009950162"
  },
  "facturation": {
    "clientId": "11351202",
    "tva": "00",
    "adresseId": "009950162"
  },
  "codePartenaire": "NORDNET"
}</con:request>
		<con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="4829baf9-0a98-4b7f-983b-0ca11b0997b8">
			<con:configuration>
				<codes>200</codes>
			</con:configuration>
		</con:assertion>
		<con:assertion type="Simple NotContains" name="Not Contains &quot;error&quot;" id="a81f746f-7c03-46a6-b21f-856ed2ee394c">
			<con:configuration>
				<token>error</token>
				<ignoreCase>false</ignoreCase>
				<useRegEx>false</useRegEx>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Reference Is Not Null" id="ec4789ea-1f17-444c-ba04-dc2b449280da">
			<con:configuration>
				<path>declare namespace ns1='http://si2-srv.si-core.nordnet.fr/opale-api/draft/draft/';
exists(//ns1:reference/text())</path>
				<content>true</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:credentials>
			<con:authType>Global HTTP Settings</con:authType>
		</con:credentials>
		<con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
		<con:jmsPropertyConfig/>
		<con:parameters/>
	</con:restRequest>
</con:config>
</con:testStep>
<con:testStep type="transfer" name="Transfer Ref Draft - Ligne" id="8e231ca4-e729-4a3a-be9e-6ea744e57d4e">
	<con:settings/>
	<con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
		<con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false">
			<con:name>Ref Draft</con:name>
			<con:sourceType>ResponseAsXml</con:sourceType>
			<con:sourceStep>Creer Draft</con:sourceStep>
			<con:sourcePath>declare namespace ns1='http://si2-srv.si-core.nordnet.fr/opale-api/draft/draft/';
//ns1:reference/text()</con:sourcePath>
			<con:targetType>RefDraft</con:targetType>
			<con:targetStep>#TestCase#</con:targetStep>
		</con:transfers>
		<con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true">
			<con:name>Ref Ligne</con:name>
			<con:sourceType>ResponseAsXml</con:sourceType>
			<con:sourceStep>Creer Draft</con:sourceStep>
			<con:sourcePath>declare namespace ns1='http://si2-srv.si-core.nordnet.fr/opale-api/draft/draft/';
exists(//ns1:reference/text())</con:sourcePath>
			<con:targetType>RefLigne</con:targetType>
			<con:targetStep>#TestCase#</con:targetStep>
		</con:transfers>
	</con:config>
</con:testStep>
<con:properties>
	<con:property>
		<con:name>RefDraft</con:name>
		<con:value>Dra-00000016</con:value>
	</con:property>
	<con:property>
		<con:name>RefLigne</con:name>
		<con:value>true</con:value>
	</con:property>
</con:properties>
</con:testCase>
<con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Creer Commande Avfw.essentiel - 3mois" searchProperties="true" id="6f0622bc-591e-44ff-9312-8c4a055a3fbb">
	<con:settings/>
	<con:testStep type="calltestcase" name="Creer Draft" id="f202aaaf-cec2-4d92-ae1c-33e98991c1f9">
		<con:settings/>
		<con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
			<con:targetTestCase>86fd2149-9d53-4de0-ae2a-053b4bb17306</con:targetTestCase>
			<con:properties>
				<con:property>
					<con:name>RefDraft</con:name>
					<con:value>Dra-00000016</con:value>
				</con:property>
				<con:property>
					<con:name>RefLigne</con:name>
					<con:value>true</con:value>
				</con:property>
			</con:properties>
			<con:returnProperties>
				<con:entry>RefDraft</con:entry>
				<con:entry>RefLigne</con:entry>
			</con:returnProperties>
			<con:runMode>SINGLETON_AND_WAIT</con:runMode>
		</con:config>
	</con:testStep>
	<con:testStep type="restrequest" name="Transformer Commande" id="5c74f129-42f8-4fe1-b9f5-d6f57cd4255c">
		<con:settings/>
		<con:config service="http://si2-srv.si-core.nordnet.fr:8080" resourcePath="/opale-api/draft/{refDraft}/transformerEnCommande" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
			<con:restRequest name="Transformer Commande" mediaType="application/json" postQueryString="false" id="177f022d-cf5c-4d6f-96a4-fd8fef7a3975">
				<con:settings>
					<con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
			<con:setting id="RecordRequestRepresentations">false</con:setting>
		</con:settings>
		<con:endpoint>http://si2-srv.si-core.nordnet.fr:8080</con:endpoint>
		<con:request>{
  "trameCatalogue": {
    "offres": [
      {
        "reference": "avfw.essentiel",
        "label": "Securitoo Integral",
        "gamme": "Antivirus",
        "secteur": "SECURITE",
        "modeFacturation": "DATE_ANNIVERSAIRE",
        "type": "SERVICE",
        "tarifs": [
          {
            "id_tarif": "avfw.essentiel.1mois",
            "prix": 4.17,
            "tva": "S",
            "frequence": 1
          },
          {
            "id_tarif": "avfw.essentiel.3mois",
            "prix": 3.75,
            "tva": "S",
            "frequence": 3
          },
          {
            "id_tarif": "avfw.essentiel.12mois",
            "prix": 40,
            "tva": "S",
            "frequence": 12
          }
        ]
      },
      {
        "reference": "mobileprotection.essentiel.s",
        "label": "Securitoo Mobile",
        "gamme": "Antivirus",
        "secteur": "SECURITE",
        "modeFacturation": "DATE_ANNIVERSAIRE",
        "type": "SERVICE",
        "tarifs": [
          {
            "id_tarif": "securitoo.mobile.1mois",
            "prix": 2.5,
            "tva": "S",
            "frequence": 1
          },
          {
            "id_tarif": "securitoo.mobile.3mois",
            "prix": 6.67,
            "tva": "S",
            "frequence": 3
          },
          {
            "id_tarif": "securitoo.mobile.12mois",
            "prix": 25,
            "tva": "S",
            "frequence": 12
          }
        ]
      }
    ]
  },
  "clientInfo": {
    "souscripteur": {
      "clientId": "11351202",
      "tva": "00",
      "adresseId": "009950162"
    },
    "livraison": {
      "clientId": "11351202",
      "tva": "00",
      "adresseId": "009950162"
    },
    "facturation": {
      "clientId": "11351202",
      "tva": "00",
      "adresseId": "009950162"
    }
  },
  "auteur": {
    "qui": "SoapUITest"
  }
}</con:request>
		<con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="a73c398b-b015-405c-b162-ff8a768e5f8e">
			<con:configuration>
				<codes>200</codes>
			</con:configuration>
		</con:assertion>
		<con:credentials>
			<con:authType>Global HTTP Settings</con:authType>
		</con:credentials>
		<con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
		<con:jmsPropertyConfig/>
		<con:parameters>
			<entry key="refDraft" value="${Creer Draft#RefDraft}" xmlns="http://eviware.com/soapui/config"/>
		</con:parameters>
	</con:restRequest>
</con:config>
</con:testStep>
<con:testStep type="transfer" name="Transfer Ref Commande" id="aa60126b-05e1-4006-972a-d0acacf653da">
	<con:settings/>
	<con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
		<con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false">
			<con:name>ref Commande</con:name>
			<con:sourceType>ResponseAsXml</con:sourceType>
			<con:sourceStep>Transformer Commande</con:sourceStep>
			<con:sourcePath>declare namespace ns1='http://si2-srv.si-core.nordnet.fr/opale-api/draft/${Creer Draft#RefDraft}/transformerEnCommande';
//ns1:reference/text()</con:sourcePath>
			<con:targetType>RefCommande</con:targetType>
			<con:targetStep>#TestCase#</con:targetStep>
		</con:transfers>
	</con:config>
</con:testStep>
<con:properties>
	<con:property>
		<con:name>RefCommande</con:name>
		<con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">Cmd-00000014</con:value>
	</con:property>
</con:properties>
</con:testCase>
<con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Creer Draft Avfw.essentiel - 12mois" searchProperties="true" id="82a6698c-6c02-43fa-9f28-8b53f404b1d2">
	<con:settings/>
	<con:testStep type="restrequest" name="Creer Draft" id="6b6b4d83-1a01-42d0-87c2-e3c4e6047ce7">
		<con:settings/>
		<con:config service="http://si2-srv.si-core.nordnet.fr:8080" resourcePath="/opale-api/draft/draft/" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
			<con:restRequest name="Creer Draft" mediaType="application/json" postQueryString="false" id="188f5ba5-03d9-4706-baf3-183364103220">
				<con:settings>
					<con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
		</con:settings>
		<con:endpoint>http://si2-srv.si-core.nordnet.fr:8080</con:endpoint>
		<con:request>{
  "auteur": {
    "canal": "SoapUI",
    "qui": "Gilles",
    "ip": {
      "ts": 1415292523897,
      "ip": "192.168.4.10"
    }
  },
  "lignes": [
    {
      "geste": "VENTE",
      "offre": {
        "referenceOffre": "avfw.essentiel",
        "referenceTarif": "avfw.essentiel.12mois"
      }
    }
  ],
  "souscripteur": {
    "clientId": "11351202",
    "tva": "00",
    "adresseId": "009950162"
  },
  "livraison": {
    "clientId": "11351202",
    "tva": "00",
    "adresseId": "009950162"
  },
  "facturation": {
    "clientId": "11351202",
    "tva": "00",
    "adresseId": "009950162"
  },
  "codePartenaire": "NORDNET"
}</con:request>
		<con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="4829baf9-0a98-4b7f-983b-0ca11b0997b8">
			<con:configuration>
				<codes>200</codes>
			</con:configuration>
		</con:assertion>
		<con:assertion type="Simple NotContains" name="Not Contains &quot;error&quot;" id="a81f746f-7c03-46a6-b21f-856ed2ee394c">
			<con:configuration>
				<token>error</token>
				<ignoreCase>false</ignoreCase>
				<useRegEx>false</useRegEx>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Reference Is Not Null" id="ec4789ea-1f17-444c-ba04-dc2b449280da">
			<con:configuration>
				<path>declare namespace ns1='http://si2-srv.si-core.nordnet.fr/opale-api/draft/draft/';
exists(//ns1:reference/text())</path>
				<content>true</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:credentials>
			<con:authType>Global HTTP Settings</con:authType>
		</con:credentials>
		<con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
		<con:jmsPropertyConfig/>
		<con:parameters/>
	</con:restRequest>
</con:config>
</con:testStep>
<con:testStep type="transfer" name="Transfer Ref Draft - Ligne" id="32d0bc91-7771-4edd-9b1c-9ee06df9ed37">
	<con:settings/>
	<con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
		<con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false">
			<con:name>Ref Draft</con:name>
			<con:sourceType>ResponseAsXml</con:sourceType>
			<con:sourceStep>Creer Draft</con:sourceStep>
			<con:sourcePath>declare namespace ns1='http://si2-srv.si-core.nordnet.fr/opale-api/draft/draft/';
//ns1:reference/text()</con:sourcePath>
			<con:targetType>RefDraft</con:targetType>
			<con:targetStep>#TestCase#</con:targetStep>
		</con:transfers>
		<con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true">
			<con:name>Ref Ligne</con:name>
			<con:sourceType>ResponseAsXml</con:sourceType>
			<con:sourceStep>Creer Draft</con:sourceStep>
			<con:sourcePath>declare namespace ns1='http://si2-srv.si-core.nordnet.fr/opale-api/draft/draft/';
exists(//ns1:reference/text())</con:sourcePath>
			<con:targetType>RefLigne</con:targetType>
			<con:targetStep>#TestCase#</con:targetStep>
		</con:transfers>
	</con:config>
</con:testStep>
<con:properties>
	<con:property>
		<con:name>RefDraft</con:name>
		<con:value>Dra-00000005</con:value>
	</con:property>
	<con:property>
		<con:name>RefLigne</con:name>
		<con:value>true</con:value>
	</con:property>
</con:properties>
</con:testCase>
<con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Creer Commande Avfw.essentiel - 12mois" searchProperties="true" id="7d841c05-8a05-48b2-99b2-7630a7e35824">
	<con:settings/>
	<con:testStep type="calltestcase" name="Creer Draft" id="dc8116aa-f641-4600-8b54-51164e21a49b">
		<con:settings/>
		<con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
			<con:targetTestCase>82a6698c-6c02-43fa-9f28-8b53f404b1d2</con:targetTestCase>
			<con:properties>
				<con:property>
					<con:name>RefDraft</con:name>
					<con:value>Dra-00000005</con:value>
				</con:property>
				<con:property>
					<con:name>RefLigne</con:name>
					<con:value>true</con:value>
				</con:property>
			</con:properties>
			<con:returnProperties>
				<con:entry>RefDraft</con:entry>
				<con:entry>RefLigne</con:entry>
			</con:returnProperties>
			<con:runMode>SINGLETON_AND_WAIT</con:runMode>
		</con:config>
	</con:testStep>
	<con:testStep type="restrequest" name="Transformer Commande" id="67a21291-0f4d-4ff7-b016-4a3d0fc9b7fb">
		<con:settings/>
		<con:config service="http://si2-srv.si-core.nordnet.fr:8080" resourcePath="/opale-api/draft/{refDraft}/transformerEnCommande" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
			<con:restRequest name="Transformer Commande" mediaType="application/json" postQueryString="false" id="177f022d-cf5c-4d6f-96a4-fd8fef7a3975">
				<con:settings>
					<con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
			<con:setting id="RecordRequestRepresentations">false</con:setting>
		</con:settings>
		<con:endpoint>http://si2-srv.si-core.nordnet.fr:8080</con:endpoint>
		<con:request>{
  "trameCatalogue": {
    "offres": [
      {
        "reference": "avfw.essentiel",
        "label": "Securitoo Integral",
        "gamme": "Antivirus",
        "secteur": "SECURITE",
        "modeFacturation": "DATE_ANNIVERSAIRE",
        "type": "SERVICE",
        "tarifs": [
          {
            "id_tarif": "avfw.essentiel.1mois",
            "prix": 4.17,
            "tva": "S",
            "frequence": 1
          },
          {
            "id_tarif": "avfw.essentiel.3mois",
            "prix": 3.75,
            "tva": "S",
            "frequence": 3
          },
          {
            "id_tarif": "avfw.essentiel.12mois",
            "prix": 40,
            "tva": "S",
            "frequence": 12
          }
        ]
      },
      {
        "reference": "mobileprotection.essentiel.s",
        "label": "Securitoo Mobile",
        "gamme": "Antivirus",
        "secteur": "SECURITE",
        "modeFacturation": "DATE_ANNIVERSAIRE",
        "type": "SERVICE",
        "tarifs": [
          {
            "id_tarif": "securitoo.mobile.1mois",
            "prix": 2.5,
            "tva": "S",
            "frequence": 1
          },
          {
            "id_tarif": "securitoo.mobile.3mois",
            "prix": 6.67,
            "tva": "S",
            "frequence": 3
          },
          {
            "id_tarif": "securitoo.mobile.12mois",
            "prix": 25,
            "tva": "S",
            "frequence": 12
          }
        ]
      }
    ]
  },
  "clientInfo": {
    "souscripteur": {
      "clientId": "11351202",
      "tva": "00",
      "adresseId": "009950162"
    },
    "livraison": {
      "clientId": "11351202",
      "tva": "00",
      "adresseId": "009950162"
    },
    "facturation": {
      "clientId": "11351202",
      "tva": "00",
      "adresseId": "009950162"
    }
  },
  "auteur": {
    "qui": "SoapUITest"
  }
}</con:request>
		<con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="a73c398b-b015-405c-b162-ff8a768e5f8e">
			<con:configuration>
				<codes>200</codes>
			</con:configuration>
		</con:assertion>
		<con:credentials>
			<con:authType>Global HTTP Settings</con:authType>
		</con:credentials>
		<con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
		<con:jmsPropertyConfig/>
		<con:parameters>
			<entry key="refDraft" value="${Creer Draft#RefDraft}" xmlns="http://eviware.com/soapui/config"/>
		</con:parameters>
	</con:restRequest>
</con:config>
</con:testStep>
<con:testStep type="transfer" name="Transfer Ref Commande" id="66fd78b8-6ce4-4af9-b639-cfabe8846e77">
	<con:settings/>
	<con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
		<con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false">
			<con:name>ref Commande</con:name>
			<con:sourceType>ResponseAsXml</con:sourceType>
			<con:sourceStep>Transformer Commande</con:sourceStep>
			<con:sourcePath>declare namespace ns1='http://si2-srv.si-core.nordnet.fr/opale-api/draft/${Creer Draft#RefDraft}/transformerEnCommande';
//ns1:reference/text()</con:sourcePath>
			<con:targetType>RefCommande</con:targetType>
			<con:targetStep>#TestCase#</con:targetStep>
		</con:transfers>
	</con:config>
</con:testStep>
<con:properties>
	<con:property>
		<con:name>RefCommande</con:name>
		<con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">Cmd-00000004</con:value>
	</con:property>
</con:properties>
</con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Creer Draft mobileprotection.essentiel.s - 1mois" searchProperties="true" id="068cfdcc-284d-4908-998a-9be5254e9818">
	<con:settings/>
	<con:testStep type="restrequest" name="Creer Draft" id="b3592699-0ee3-46e6-9549-841c989b0eba">
		<con:settings/>
		<con:config service="http://si2-srv.si-core.nordnet.fr:8080" resourcePath="/opale-api/draft/draft/" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
			<con:restRequest name="Creer Draft" mediaType="application/json" postQueryString="false" id="188f5ba5-03d9-4706-baf3-183364103220">
				<con:settings>
					<con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
		</con:settings>
		<con:endpoint>http://si2-srv.si-core.nordnet.fr:8080</con:endpoint>
		<con:request>{
  "auteur": {
    "canal": "SoapUI",
    "qui": "Gilles",
    "ip": {
      "ts": 1415292523897,
      "ip": "192.168.4.10"
    }
  },
  "lignes": [
    {
      "geste": "VENTE",
      "offre": {
        "referenceOffre": "mobileprotection.essentiel.s",
        "referenceTarif": "securitoo.mobile.1mois"
      }
    }
  ],
    "souscripteur": {
      "clientId": "id-client",
      "tva" : "00",
      "adresseId": "adr-souscri"
    },
    "livraison": {
      "clientId": "id-client",
      "tva" : "00",
      "adresseId": "adr-livraison"
    },
    "facturation": {
      "clientId": "id-client",
      "tva" : "00",
      "adresseId": "adr-facturation"
    },
    "codePartenaire": "NNCOM"
}</con:request>
		<con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="4829baf9-0a98-4b7f-983b-0ca11b0997b8">
			<con:configuration>
				<codes>200</codes>
			</con:configuration>
		</con:assertion>
		<con:assertion type="Simple NotContains" name="Not Contains &quot;error&quot;" id="a81f746f-7c03-46a6-b21f-856ed2ee394c">
			<con:configuration>
				<token>error</token>
				<ignoreCase>false</ignoreCase>
				<useRegEx>false</useRegEx>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Reference Is Not Null" id="ec4789ea-1f17-444c-ba04-dc2b449280da">
			<con:configuration>
				<path>declare namespace ns1='http://si2-srv.si-core.nordnet.fr/opale-api/draft/draft/';
exists(//ns1:reference/text())</path>
				<content>true</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:credentials>
			<con:authType>Global HTTP Settings</con:authType>
		</con:credentials>
		<con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
		<con:jmsPropertyConfig/>
		<con:parameters/>
	</con:restRequest>
</con:config>
</con:testStep>
<con:testStep type="transfer" name="Transfer Ref Draft - Ligne" id="725d4197-a282-4bee-b560-94a43f4dd962">
	<con:settings/>
	<con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
		<con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false">
			<con:name>Ref Draft</con:name>
			<con:sourceType>ResponseAsXml</con:sourceType>
			<con:sourceStep>Creer Draft</con:sourceStep>
			<con:sourcePath>declare namespace ns1='http://si2-srv.si-core.nordnet.fr/opale-api/draft/draft/';
//ns1:reference/text()</con:sourcePath>
			<con:targetType>RefDraft</con:targetType>
			<con:targetStep>#TestCase#</con:targetStep>
		</con:transfers>
		<con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true">
			<con:name>Ref Ligne</con:name>
			<con:sourceType>ResponseAsXml</con:sourceType>
			<con:sourceStep>Creer Draft</con:sourceStep>
			<con:sourcePath>declare namespace ns1='http://si2-srv.si-core.nordnet.fr/opale-api/draft/draft/';
exists(//ns1:reference/text())</con:sourcePath>
			<con:targetType>RefLigne</con:targetType>
			<con:targetStep>#TestCase#</con:targetStep>
		</con:transfers>
	</con:config>
</con:testStep>
<con:properties>
	<con:property>
		<con:name>RefDraft</con:name>
		<con:value>Dra-00000018</con:value>
	</con:property>
	<con:property>
		<con:name>RefLigne</con:name>
		<con:value>true</con:value>
	</con:property>
</con:properties>
</con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Creer Commande mobileprotection.essentiel.s - 1mois" searchProperties="true" id="68f9e52f-1e72-433e-bd82-d36dd91d58d7">
	<con:settings/>
	<con:testStep type="calltestcase" name="Creer Draft" id="9b0d4a8a-79fb-432c-9a8d-4152b4604558">
		<con:settings/>
		<con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
			<con:targetTestCase>068cfdcc-284d-4908-998a-9be5254e9818</con:targetTestCase>
			<con:properties>
				<con:property>
					<con:name>RefDraft</con:name>
					<con:value>Dra-00000018</con:value>
				</con:property>
				<con:property>
					<con:name>RefLigne</con:name>
					<con:value>true</con:value>
				</con:property>
			</con:properties>
			<con:returnProperties>
				<con:entry>RefDraft</con:entry>
				<con:entry>RefLigne</con:entry>
			</con:returnProperties>
			<con:runMode>SINGLETON_AND_WAIT</con:runMode>
		</con:config>
	</con:testStep>
	<con:testStep type="restrequest" name="Transformer Commande" id="81f26a6f-6dc5-4bc3-ba8c-deb4c88b392e">
		<con:settings/>
		<con:config service="http://si2-srv.si-core.nordnet.fr:8080" resourcePath="/opale-api/draft/{refDraft}/transformerEnCommande" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
			<con:restRequest name="Transformer Commande" mediaType="application/json" postQueryString="false" id="177f022d-cf5c-4d6f-96a4-fd8fef7a3975">
				<con:settings>
					<con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
			<con:setting id="RecordRequestRepresentations">false</con:setting>
		</con:settings>
		<con:endpoint>http://si2-srv.si-core.nordnet.fr:8080</con:endpoint>
		<con:request>{
  "trameCatalogue": {
    "offres": [
      {
        "reference": "avfw.essentiel",
        "label": "Securitoo Integral",
        "gamme": "Antivirus",
        "secteur": "SECURITE",
        "modeFacturation": "DATE_ANNIVERSAIRE",
        "type": "SERVICE",
        "tarifs": [
          {
            "id_tarif": "avfw.essentiel.1mois",
            "prix": 4.17,
            "tva": "S",
            "frequence": 1
          },
          {
            "id_tarif": "avfw.essentiel.3mois",
            "prix": 3.75,
            "tva": "S",
            "frequence": 3
          },
          {
            "id_tarif": "avfw.essentiel.12mois",
            "prix": 40,
            "tva": "S",
            "frequence": 12
          }
        ]
      },
      {
        "reference": "mobileprotection.essentiel.s",
        "label": "Securitoo Mobile",
        "gamme": "Antivirus",
        "secteur": "SECURITE",
        "modeFacturation": "DATE_ANNIVERSAIRE",
        "type": "SERVICE",
        "tarifs": [
          {
            "id_tarif": "securitoo.mobile.1mois",
            "prix": 2.5,
            "tva": "S",
            "frequence": 1
          },
          {
            "id_tarif": "securitoo.mobile.3mois",
            "prix": 6.67,
            "tva": "S",
            "frequence": 3
          },
          {
            "id_tarif": "securitoo.mobile.12mois",
            "prix": 25,
            "tva": "S",
            "frequence": 12
          }
        ]
      }
    ]
  },
  "clientInfo": {
    "souscripteur": {
      "clientId": "11351202",
      "tva": "00",
      "adresseId": "009950162"
    },
    "livraison": {
      "clientId": "11351202",
      "tva": "00",
      "adresseId": "009950162"
    },
    "facturation": {
      "clientId": "11351202",
      "tva": "00",
      "adresseId": "009950162"
    }
  },
  "auteur": {
    "qui": "SoapUITest"
  }
}</con:request>
		<con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="a73c398b-b015-405c-b162-ff8a768e5f8e">
			<con:configuration>
				<codes>200</codes>
			</con:configuration>
		</con:assertion>
		<con:credentials>
			<con:authType>Global HTTP Settings</con:authType>
		</con:credentials>
		<con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
		<con:jmsPropertyConfig/>
		<con:parameters>
			<entry key="refDraft" value="${Creer Draft#RefDraft}" xmlns="http://eviware.com/soapui/config"/>
		</con:parameters>
	</con:restRequest>
</con:config>
</con:testStep>
<con:testStep type="transfer" name="Transfer Ref Commande" id="86c9ba3e-5e98-4fa4-b4df-fbb1d46375ea">
	<con:settings/>
	<con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
		<con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false">
			<con:name>ref Commande</con:name>
			<con:sourceType>ResponseAsXml</con:sourceType>
			<con:sourceStep>Transformer Commande</con:sourceStep>
			<con:sourcePath>declare namespace ns1='http://si2-srv.si-core.nordnet.fr/opale-api/draft/${Creer Draft#RefDraft}/transformerEnCommande';
//ns1:reference/text()</con:sourcePath>
			<con:targetType>RefCommande</con:targetType>
			<con:targetStep>#TestCase#</con:targetStep>
		</con:transfers>
	</con:config>
</con:testStep>
<con:properties>
	<con:property>
		<con:name>RefCommande</con:name>
		<con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">Cmd-00000015</con:value>
	</con:property>
</con:properties>
</con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Creer Draft mobileprotection.essentiel.s - 3mois" searchProperties="true" id="fe729af3-53f9-44e2-b399-670c0a88fe5f">
	<con:settings/>
	<con:testStep type="restrequest" name="Creer Draft" id="dc955bd9-dcfe-4435-ac33-f1a6e8d47eea">
		<con:settings/>
		<con:config service="http://si2-srv.si-core.nordnet.fr:8080" resourcePath="/opale-api/draft/draft/" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
			<con:restRequest name="Creer Draft" mediaType="application/json" postQueryString="false" id="188f5ba5-03d9-4706-baf3-183364103220">
				<con:settings>
					<con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
		</con:settings>
		<con:endpoint>http://si2-srv.si-core.nordnet.fr:8080</con:endpoint>
		<con:request>{
  "auteur": {
    "canal": "SoapUI",
    "qui": "Gilles",
    "ip": {
      "ts": 1415292523897,
      "ip": "192.168.4.10"
    }
  },
  "lignes": [
    {
      "geste": "VENTE",
      "offre": {
        "referenceOffre": "mobileprotection.essentiel.s",
        "referenceTarif": "securitoo.mobile.3mois"
      }
    }
  ],
    "souscripteur": {
      "clientId": "id-client",
      "tva" : "00",
      "adresseId": "adr-souscri"
    },
    "livraison": {
      "clientId": "id-client",
      "tva" : "00",
      "adresseId": "adr-livraison"
    },
    "facturation": {
      "clientId": "id-client",
      "tva" : "00",
      "adresseId": "adr-facturation"
    },
    "codePartenaire": "NNCOM"
}</con:request>
		<con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="4829baf9-0a98-4b7f-983b-0ca11b0997b8">
			<con:configuration>
				<codes>200</codes>
			</con:configuration>
		</con:assertion>
		<con:assertion type="Simple NotContains" name="Not Contains &quot;error&quot;" id="a81f746f-7c03-46a6-b21f-856ed2ee394c">
			<con:configuration>
				<token>error</token>
				<ignoreCase>false</ignoreCase>
				<useRegEx>false</useRegEx>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Reference Is Not Null" id="ec4789ea-1f17-444c-ba04-dc2b449280da">
			<con:configuration>
				<path>declare namespace ns1='http://si2-srv.si-core.nordnet.fr/opale-api/draft/draft/';
exists(//ns1:reference/text())</path>
				<content>true</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:credentials>
			<con:authType>Global HTTP Settings</con:authType>
		</con:credentials>
		<con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
		<con:jmsPropertyConfig/>
		<con:parameters/>
	</con:restRequest>
</con:config>
</con:testStep>
<con:testStep type="transfer" name="Transfer Ref Draft - Ligne" id="f561932b-ab28-4441-8ed5-f52bfc710280">
	<con:settings/>
	<con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
		<con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false">
			<con:name>Ref Draft</con:name>
			<con:sourceType>ResponseAsXml</con:sourceType>
			<con:sourceStep>Creer Draft</con:sourceStep>
			<con:sourcePath>declare namespace ns1='http://si2-srv.si-core.nordnet.fr/opale-api/draft/draft/';
//ns1:reference/text()</con:sourcePath>
			<con:targetType>RefDraft</con:targetType>
			<con:targetStep>#TestCase#</con:targetStep>
		</con:transfers>
		<con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true">
			<con:name>Ref Ligne</con:name>
			<con:sourceType>ResponseAsXml</con:sourceType>
			<con:sourceStep>Creer Draft</con:sourceStep>
			<con:sourcePath>declare namespace ns1='http://si2-srv.si-core.nordnet.fr/opale-api/draft/draft/';
exists(//ns1:reference/text())</con:sourcePath>
			<con:targetType>RefLigne</con:targetType>
			<con:targetStep>#TestCase#</con:targetStep>
		</con:transfers>
	</con:config>
</con:testStep>
<con:properties>
	<con:property>
		<con:name>RefDraft</con:name>
		<con:value>Dra-00000019</con:value>
	</con:property>
	<con:property>
		<con:name>RefLigne</con:name>
		<con:value>true</con:value>
	</con:property>
</con:properties>
</con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Creer Commande mobileprotection.essentiel.s - 3mois" searchProperties="true" id="c37a6336-d973-441b-bdec-1c57eeca4831">
	<con:settings/>
	<con:testStep type="calltestcase" name="Creer Draft" id="ab66bc83-c1d9-4d45-90fd-65e12817f26d">
		<con:settings/>
		<con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
			<con:targetTestCase>fe729af3-53f9-44e2-b399-670c0a88fe5f</con:targetTestCase>
			<con:properties>
				<con:property>
					<con:name>RefDraft</con:name>
					<con:value>Dra-00000019</con:value>
				</con:property>
				<con:property>
					<con:name>RefLigne</con:name>
					<con:value>true</con:value>
				</con:property>
			</con:properties>
			<con:returnProperties>
				<con:entry>RefDraft</con:entry>
				<con:entry>RefLigne</con:entry>
			</con:returnProperties>
			<con:runMode>SINGLETON_AND_WAIT</con:runMode>
		</con:config>
	</con:testStep>
	<con:testStep type="restrequest" name="Transformer Commande" id="9d6c06bd-5394-415b-ac38-32bd1afdf26f">
		<con:settings/>
		<con:config service="http://si2-srv.si-core.nordnet.fr:8080" resourcePath="/opale-api/draft/{refDraft}/transformerEnCommande" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
			<con:restRequest name="Transformer Commande" mediaType="application/json" postQueryString="false" id="177f022d-cf5c-4d6f-96a4-fd8fef7a3975">
				<con:settings>
					<con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
			<con:setting id="RecordRequestRepresentations">false</con:setting>
		</con:settings>
		<con:endpoint>http://si2-srv.si-core.nordnet.fr:8080</con:endpoint>
		<con:request>{
  "trameCatalogue": {
    "offres": [
      {
        "reference": "avfw.essentiel",
        "label": "Securitoo Integral",
        "gamme": "Antivirus",
        "secteur": "SECURITE",
        "modeFacturation": "DATE_ANNIVERSAIRE",
        "type": "SERVICE",
        "tarifs": [
          {
            "id_tarif": "avfw.essentiel.1mois",
            "prix": 4.17,
            "tva": "S",
            "frequence": 1
          },
          {
            "id_tarif": "avfw.essentiel.3mois",
            "prix": 3.75,
            "tva": "S",
            "frequence": 3
          },
          {
            "id_tarif": "avfw.essentiel.12mois",
            "prix": 40,
            "tva": "S",
            "frequence": 12
          }
        ]
      },
      {
        "reference": "mobileprotection.essentiel.s",
        "label": "Securitoo Mobile",
        "gamme": "Antivirus",
        "secteur": "SECURITE",
        "modeFacturation": "DATE_ANNIVERSAIRE",
        "type": "SERVICE",
        "tarifs": [
          {
            "id_tarif": "securitoo.mobile.1mois",
            "prix": 2.5,
            "tva": "S",
            "frequence": 1
          },
          {
            "id_tarif": "securitoo.mobile.3mois",
            "prix": 6.67,
            "tva": "S",
            "frequence": 3
          },
          {
            "id_tarif": "securitoo.mobile.12mois",
            "prix": 25,
            "tva": "S",
            "frequence": 12
          }
        ]
      }
    ]
  },
  "clientInfo": {
    "souscripteur": {
      "clientId": "11351202",
      "tva": "00",
      "adresseId": "009950162"
    },
    "livraison": {
      "clientId": "11351202",
      "tva": "00",
      "adresseId": "009950162"
    },
    "facturation": {
      "clientId": "11351202",
      "tva": "00",
      "adresseId": "009950162"
    }
  },
  "auteur": {
    "qui": "SoapUITest"
  }
}</con:request>
		<con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="a73c398b-b015-405c-b162-ff8a768e5f8e">
			<con:configuration>
				<codes>200</codes>
			</con:configuration>
		</con:assertion>
		<con:credentials>
			<con:authType>Global HTTP Settings</con:authType>
		</con:credentials>
		<con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
		<con:jmsPropertyConfig/>
		<con:parameters>
			<entry key="refDraft" value="${Creer Draft#RefDraft}" xmlns="http://eviware.com/soapui/config"/>
		</con:parameters>
	</con:restRequest>
</con:config>
</con:testStep>
<con:testStep type="transfer" name="Transfer Ref Commande" id="23a9c658-79a3-43d2-8950-13083fa829e0">
	<con:settings/>
	<con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
		<con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false">
			<con:name>ref Commande</con:name>
			<con:sourceType>ResponseAsXml</con:sourceType>
			<con:sourceStep>Transformer Commande</con:sourceStep>
			<con:sourcePath>declare namespace ns1='http://si2-srv.si-core.nordnet.fr/opale-api/draft/${Creer Draft#RefDraft}/transformerEnCommande';
//ns1:reference/text()</con:sourcePath>
			<con:targetType>RefCommande</con:targetType>
			<con:targetStep>#TestCase#</con:targetStep>
		</con:transfers>
	</con:config>
</con:testStep>
<con:properties>
	<con:property>
		<con:name>RefCommande</con:name>
		<con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">Cmd-00000016</con:value>
	</con:property>
</con:properties>
</con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Creer Draft mobileprotection.essentiel.s - 12mois" searchProperties="true" id="aba200d4-31bc-48fe-8375-ff800c2a7088">
	<con:settings/>
	<con:testStep type="restrequest" name="Creer Draft" id="46c5b995-612e-4594-bbba-74e56ef6c52c">
		<con:settings/>
		<con:config service="http://si2-srv.si-core.nordnet.fr:8080" resourcePath="/opale-api/draft/draft/" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
			<con:restRequest name="Creer Draft" mediaType="application/json" postQueryString="false" id="188f5ba5-03d9-4706-baf3-183364103220">
				<con:settings>
					<con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
		</con:settings>
		<con:endpoint>http://si2-srv.si-core.nordnet.fr:8080</con:endpoint>
		<con:request>{
  "auteur": {
    "canal": "SoapUI",
    "qui": "Gilles",
    "ip": {
      "ts": 1415292523897,
      "ip": "192.168.4.10"
    }
  },
  "lignes": [
    {
      "geste": "VENTE",
      "offre": {
        "referenceOffre": "mobileprotection.essentiel.s",
        "referenceTarif": "securitoo.mobile.12mois"
      }
    }
  ],
    "souscripteur": {
      "clientId": "id-client",
      "tva" : "00",
      "adresseId": "adr-souscri"
    },
    "livraison": {
      "clientId": "id-client",
      "tva" : "00",
      "adresseId": "adr-livraison"
    },
    "facturation": {
      "clientId": "id-client",
      "tva" : "00",
      "adresseId": "adr-facturation"
    },
    "codePartenaire": "NNCOM"
}</con:request>
		<con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="4829baf9-0a98-4b7f-983b-0ca11b0997b8">
			<con:configuration>
				<codes>200</codes>
			</con:configuration>
		</con:assertion>
		<con:assertion type="Simple NotContains" name="Not Contains &quot;error&quot;" id="a81f746f-7c03-46a6-b21f-856ed2ee394c">
			<con:configuration>
				<token>error</token>
				<ignoreCase>false</ignoreCase>
				<useRegEx>false</useRegEx>
			</con:configuration>
		</con:assertion>
		<con:assertion type="XPath Match" name="Reference Is Not Null" id="ec4789ea-1f17-444c-ba04-dc2b449280da">
			<con:configuration>
				<path>declare namespace ns1='http://si2-srv.si-core.nordnet.fr/opale-api/draft/draft/';
exists(//ns1:reference/text())</path>
				<content>true</content>
				<allowWildcards>false</allowWildcards>
				<ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
				<ignoreComments>false</ignoreComments>
			</con:configuration>
		</con:assertion>
		<con:credentials>
			<con:authType>Global HTTP Settings</con:authType>
		</con:credentials>
		<con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
		<con:jmsPropertyConfig/>
		<con:parameters/>
	</con:restRequest>
</con:config>
</con:testStep>
<con:testStep type="transfer" name="Transfer Ref Draft - Ligne" id="dfa6e177-5d72-4c21-ba88-76c3deb0dbcd">
	<con:settings/>
	<con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
		<con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false">
			<con:name>Ref Draft</con:name>
			<con:sourceType>ResponseAsXml</con:sourceType>
			<con:sourceStep>Creer Draft</con:sourceStep>
			<con:sourcePath>declare namespace ns1='http://si2-srv.si-core.nordnet.fr/opale-api/draft/draft/';
//ns1:reference/text()</con:sourcePath>
			<con:targetType>RefDraft</con:targetType>
			<con:targetStep>#TestCase#</con:targetStep>
		</con:transfers>
		<con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true">
			<con:name>Ref Ligne</con:name>
			<con:sourceType>ResponseAsXml</con:sourceType>
			<con:sourceStep>Creer Draft</con:sourceStep>
			<con:sourcePath>declare namespace ns1='http://si2-srv.si-core.nordnet.fr/opale-api/draft/draft/';
exists(//ns1:reference/text())</con:sourcePath>
			<con:targetType>RefLigne</con:targetType>
			<con:targetStep>#TestCase#</con:targetStep>
		</con:transfers>
	</con:config>
</con:testStep>
<con:properties>
	<con:property>
		<con:name>RefDraft</con:name>
		<con:value>Dra-00000020</con:value>
	</con:property>
	<con:property>
		<con:name>RefLigne</con:name>
		<con:value>true</con:value>
	</con:property>
</con:properties>
</con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Creer Commande mobileprotection.essentiel.s - 12mois" searchProperties="true" id="88aa2eb1-556f-434c-9ce6-f2e0cff2f00f">
	<con:settings/>
	<con:testStep type="calltestcase" name="Creer Draft">
		<con:settings/>
		<con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
			<con:targetTestCase>aba200d4-31bc-48fe-8375-ff800c2a7088</con:targetTestCase>
			<con:properties>
				<con:property>
					<con:name>RefDraft</con:name>
					<con:value>Dra-00000020</con:value>
				</con:property>
				<con:property>
					<con:name>RefLigne</con:name>
					<con:value>true</con:value>
				</con:property>
			</con:properties>
			<con:returnProperties>
				<con:entry>RefDraft</con:entry>
				<con:entry>RefLigne</con:entry>
			</con:returnProperties>
			<con:runMode>SINGLETON_AND_WAIT</con:runMode>
		</con:config>
	</con:testStep>
	<con:testStep type="restrequest" name="Transformer Commande">
		<con:settings/>
		<con:config service="http://si2-srv.si-core.nordnet.fr:8080" resourcePath="/opale-api/draft/{refDraft}/transformerEnCommande" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
			<con:restRequest name="Transformer Commande" mediaType="application/json" postQueryString="false" id="177f022d-cf5c-4d6f-96a4-fd8fef7a3975">
				<con:settings>
					<con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
			<con:setting id="RecordRequestRepresentations">false</con:setting>
		</con:settings>
		<con:endpoint>http://si2-srv.si-core.nordnet.fr:8080</con:endpoint>
		<con:request>{
  "trameCatalogue": {
    "offres": [
      {
        "reference": "avfw.essentiel",
        "label": "Securitoo Integral",
        "gamme": "Antivirus",
        "secteur": "SECURITE",
        "modeFacturation": "DATE_ANNIVERSAIRE",
        "type": "SERVICE",
        "tarifs": [
          {
            "id_tarif": "avfw.essentiel.1mois",
            "prix": 4.17,
            "tva": "S",
            "frequence": 1
          },
          {
            "id_tarif": "avfw.essentiel.3mois",
            "prix": 3.75,
            "tva": "S",
            "frequence": 3
          },
          {
            "id_tarif": "avfw.essentiel.12mois",
            "prix": 40,
            "tva": "S",
            "frequence": 12
          }
        ]
      },
      {
        "reference": "mobileprotection.essentiel.s",
        "label": "Securitoo Mobile",
        "gamme": "Antivirus",
        "secteur": "SECURITE",
        "modeFacturation": "DATE_ANNIVERSAIRE",
        "type": "SERVICE",
        "tarifs": [
          {
            "id_tarif": "securitoo.mobile.1mois",
            "prix": 2.5,
            "tva": "S",
            "frequence": 1
          },
          {
            "id_tarif": "securitoo.mobile.3mois",
            "prix": 6.67,
            "tva": "S",
            "frequence": 3
          },
          {
            "id_tarif": "securitoo.mobile.12mois",
            "prix": 25,
            "tva": "S",
            "frequence": 12
          }
        ]
      }
    ]
  },
  "clientInfo": {
    "souscripteur": {
      "clientId": "11351202",
      "tva": "00",
      "adresseId": "009950162"
    },
    "livraison": {
      "clientId": "11351202",
      "tva": "00",
      "adresseId": "009950162"
    },
    "facturation": {
      "clientId": "11351202",
      "tva": "00",
      "adresseId": "009950162"
    }
  },
  "auteur": {
    "qui": "SoapUITest"
  }
}</con:request>
		<con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="a73c398b-b015-405c-b162-ff8a768e5f8e">
			<con:configuration>
				<codes>200</codes>
			</con:configuration>
		</con:assertion>
		<con:credentials>
			<con:authType>Global HTTP Settings</con:authType>
		</con:credentials>
		<con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
		<con:jmsPropertyConfig/>
		<con:parameters>
			<entry key="refDraft" value="${Creer Draft#RefDraft}" xmlns="http://eviware.com/soapui/config"/>
		</con:parameters>
	</con:restRequest>
</con:config>
</con:testStep>
<con:testStep type="transfer" name="Transfer Ref Commande">
	<con:settings/>
	<con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
		<con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false">
			<con:name>ref Commande</con:name>
			<con:sourceType>ResponseAsXml</con:sourceType>
			<con:sourceStep>Transformer Commande</con:sourceStep>
			<con:sourcePath>declare namespace ns1='http://si2-srv.si-core.nordnet.fr/opale-api/draft/${Creer Draft#RefDraft}/transformerEnCommande';
//ns1:reference/text()</con:sourcePath>
			<con:targetType>RefCommande</con:targetType>
			<con:targetStep>#TestCase#</con:targetStep>
		</con:transfers>
	</con:config>
</con:testStep>
<con:properties>
	<con:property>
		<con:name>RefCommande</con:name>
		<con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">Cmd-00000017</con:value>
	</con:property>
</con:properties>
</con:testCase><con:properties/>
</con:testSuite><con:properties/>
<con:wssContainer/>
<con:oAuth2ProfileContainer/>
<con:sensitiveInformation/>
</con:soapui-project>